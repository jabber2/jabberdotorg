<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [jdev] Re: XMPP Ping method?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:jdev%40jabber.org?Subject=%5Bjdev%5D%20Re%3A%20XMPP%20Ping%20method%3F&In-Reply-To=87k62csip9.fsf%40freemail.hu">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="025479.html">
   <LINK REL="Next"  HREF="025481.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[jdev] Re: XMPP Ping method?</H1>
    <B>Dave Cridland</B> 
    <A HREF="mailto:jdev%40jabber.org?Subject=%5Bjdev%5D%20Re%3A%20XMPP%20Ping%20method%3F&In-Reply-To=87k62csip9.fsf%40freemail.hu"
       TITLE="[jdev] Re: XMPP Ping method?">dave at cridland.net
       </A><BR>
    <I>Fri Nov  3 09:03:05 CST 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="025479.html">[jdev] Re: XMPP Ping method?
</A></li>
        <LI>Next message: <A HREF="025481.html">[jdev] Re: XMPP Ping method?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#25480">[ date ]</a>
              <a href="thread.html#25480">[ thread ]</a>
              <a href="subject.html#25480">[ subject ]</a>
              <a href="author.html#25480">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Fri Nov  3 14:33:54 2006, Magnus Henoch wrote:
&gt;<i> Jesus Cea &lt;<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">jcea at argo.es</A>&gt; writes:
</I>&gt;<i> 
</I>&gt;<i> &gt; Matthias Wimmer wrote:
</I>&gt;<i> &gt;&gt; Well, I don't think that _this_ is a valid argument. It's not 
</I>&gt;<i> the task
</I>&gt;<i> &gt;&gt; of protocols to work around design restrictions in a language.
</I>&gt;<i> &gt;&gt; If this would be the task of a protocol, we would need some 
</I>&gt;<i> changes in
</I>&gt;<i> &gt;&gt; the protocol to support flash as well.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; If you require a feature, and that feature is not available in the
</I>&gt;<i> &gt; implementation language, your are dead in the water.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Same about OS support. How do you access the TCP window counters 
</I>&gt;<i> in your
</I>&gt;<i> &gt; symbian smart-phone, for example?.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; This suggestion is not doable.
</I>&gt;<i> 
</I>&gt;<i> I think it is.  The systems that do not support such a feature would
</I>&gt;<i> go along just like today; the others would have better ability to 
</I>&gt;<i> send
</I>&gt;<i> bounces for stanzas sent but not acknowledge.  That's a net win, as 
</I>&gt;<i> I
</I>&gt;<i> see it.
</I>
I don't think it works like that.

As I understand things, the OS might ACK TCP segments before they're 
delivered to the app, and certainly they'd be ACKed before the client 
might have delivered them to the user. Moreover, if they haven't been 
ACKed, you don't know they haven't been handled to completion by the 
client already - TCP segments don't get ACKed instantly, and the ACK 
itself can be lost.

Arguably, a mobile phone client might not want to app-level ACK a 
stanza until it's displayed it to the user, or written it to 
persistent storage, in case the battery runs out.

TCP's ACKs are designed to handle the ordering of packets, congestion 
control, and detecting a severed connection, and not to detect what 
data has formally made its way through to completion in the protocol 
layer. Adding ACKs, sequence counting, and pings to XMPP streams 
isn't duplicating the work at all, it's adding more functionality.

This is not to say that using any facility provided by the 
programming environment to allow you to detect TCP level ACKs is a 
bad thing, just that it you need to be very careful about what that 
means. (Which is basically that the data reached the other host, and 
very little more than that). If we can get something that provided 
app to app reliability, rather than hop to hop, that would provide a 
better quality of information. (As well as minimizing or eliminating 
duplicated stanzas on reconnection).

Oh, and also, the protocol purists will get upset at you for 
committing a layer violation - XMPP isn't supposed to know anything 
at all about the transport protocol it happens to be using.

Dave.
-- 
Dave Cridland - mailto:<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">dave at cridland.net</A> - xmpp:<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">dwd at jabber.org</A>
  - <A HREF="acap://acap.dave.cridland.net/byowner/user/dwd/bookmarks/">acap://acap.dave.cridland.net/byowner/user/dwd/bookmarks/</A>
  - <A HREF="http://dave.cridland.net/">http://dave.cridland.net/</A>
Infotrope Polymer - ACAP, IMAP, ESMTP, and Lemonade

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="025479.html">[jdev] Re: XMPP Ping method?
</A></li>
	<LI>Next message: <A HREF="025481.html">[jdev] Re: XMPP Ping method?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#25480">[ date ]</a>
              <a href="thread.html#25480">[ thread ]</a>
              <a href="subject.html#25480">[ subject ]</a>
              <a href="author.html#25480">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://mail.jabber.org/mailman/listinfo/jdev">More information about the JDev
mailing list</a><br>
</body></html>
