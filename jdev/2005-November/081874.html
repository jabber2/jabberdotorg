<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [jdev] MUC presence role conflict
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:jdev%40jabber.org?Subject=Re%3A%20%5Bjdev%5D%20MUC%20presence%20role%20conflict&In-Reply-To=%3C5b698f5a0511111229i20d23c3j9fd111d280703555%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="081861.html">
   <LINK REL="Next"  HREF="081875.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[jdev] MUC presence role conflict</H1>
    <B>Norman Rasmussen</B> 
    <A HREF="mailto:jdev%40jabber.org?Subject=Re%3A%20%5Bjdev%5D%20MUC%20presence%20role%20conflict&In-Reply-To=%3C5b698f5a0511111229i20d23c3j9fd111d280703555%40mail.gmail.com%3E"
       TITLE="[jdev] MUC presence role conflict">norman at rasmussen.co.za
       </A><BR>
    <I>Fri Nov 11 14:29:11 CST 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="081861.html">[jdev] Jabber Development/Support Required
</A></li>
        <LI>Next message: <A HREF="081875.html">[jdev] MUC presence role conflict
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#81874">[ date ]</a>
              <a href="thread.html#81874">[ thread ]</a>
              <a href="subject.html#81874">[ subject ]</a>
              <a href="author.html#81874">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>JEP-0045: 6.3.3 Presence Broadcast

If the service is able to add the user to the room, it MUST send
presence from all the existing occupants' room JIDs to the new
occupant's full JID, including extended presence information about
roles in an &lt;x/&gt; element qualified by the
'<A HREF="http://jabber.org/protocol/muc#user'">http://jabber.org/protocol/muc#user'</A> namespace and containing an
&lt;item/&gt; child with the 'role' attribute set to a value of &quot;moderator&quot;,
&quot;participant&quot;, &quot;visitor&quot;, or &quot;none&quot; and with the 'affiliation'
attribute set to a value of &quot;owner&quot;, &quot;admin&quot;, &quot;member&quot;, or &quot;none&quot; as
appropriate:

what would a client be expected to do if it receives the following xml:

&lt;presence
    from='<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">darkcave at macbeth.shakespeare.lit</A>/thirdwitch'
    to='<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">hag66 at shakespeare.lit</A>/pda'&gt;
  &lt;x xmlns='<A HREF="http://jabber.org/protocol/muc#user'">http://jabber.org/protocol/muc#user'</A>&gt;
    &lt;item affiliation='none' role='none'/&gt;
  &lt;/x&gt;
&lt;/presence&gt;

in case you missed the conflict: the presence type is available, but
the role is none.  Clearly a conflict, but there don't even seem to be
any business logic rules indicated in the JEP on how to deal with this
case.

--
- Norman Rasmussen
 - Email: <A HREF="http://mail.jabber.org/mailman/listinfo/jdev">norman at rasmussen.co.za</A>
 - Home page: <A HREF="http://norman.rasmussen.co.za/">http://norman.rasmussen.co.za/</A>

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="081861.html">[jdev] Jabber Development/Support Required
</A></li>
	<LI>Next message: <A HREF="081875.html">[jdev] MUC presence role conflict
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#81874">[ date ]</a>
              <a href="thread.html#81874">[ thread ]</a>
              <a href="subject.html#81874">[ subject ]</a>
              <a href="author.html#81874">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://mail.jabber.org/mailman/listinfo/jdev">More information about the JDev
mailing list</a><br>
</body></html>
