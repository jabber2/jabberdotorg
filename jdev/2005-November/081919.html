<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [jdev] unwanted rate limiting in jabber1.4 w jadc2s and muc
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:jdev%40jabber.org?Subject=Re%3A%20%5Bjdev%5D%20unwanted%20rate%20limiting%20in%20jabber1.4%20w%20jadc2s%20and%20muc&In-Reply-To=%3C47E82A9D63EC444681B8DECA7740829602AE9B11%40DISMISSED.mtvn.ad.viacom.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="081920.html">
   <LINK REL="Next"  HREF="081921.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[jdev] unwanted rate limiting in jabber1.4 w jadc2s and muc</H1>
    <B>Kirschner, Larry</B> 
    <A HREF="mailto:jdev%40jabber.org?Subject=Re%3A%20%5Bjdev%5D%20unwanted%20rate%20limiting%20in%20jabber1.4%20w%20jadc2s%20and%20muc&In-Reply-To=%3C47E82A9D63EC444681B8DECA7740829602AE9B11%40DISMISSED.mtvn.ad.viacom.com%3E"
       TITLE="[jdev] unwanted rate limiting in jabber1.4 w jadc2s and muc">Larry.kirschner at mtvn.com
       </A><BR>
    <I>Fri Nov 18 10:11:40 CST 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="081920.html">[jdev] Re: Two questions regarding JEP-0124 HTTP Binding
</A></li>
        <LI>Next message: <A HREF="081921.html">[jdev] [ANN] Spark IM client
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#81919">[ date ]</a>
              <a href="thread.html#81919">[ thread ]</a>
              <a href="subject.html#81919">[ subject ]</a>
              <a href="author.html#81919">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
I'm working on an app where I need to send a high volume of messages
from a user to a muc room (group of rooms really). It looks like
something is limiting the rate of messages into rooms though. I can only
seem to get one in every couple of seconds, messages sent in between
that interval get dropped.

I've done everything I can see to turn off karma and rate limiting in
the jabber.xml and jadc2s.xml config files: I commented out all the
karma tags in jabber.xml, and I set maxbps=0 in jadc2s.xml.

I've been testing this with a test client app that creates a room, then
joins it, then starts sending numbered messages. For each open jabber
connection to the room, my test app waits to get a response before
sending the next message. I keep Exodus open in the same room with the
debug window open to see when the messages actually show up. They seem
to come about every 3 seconds spaced apart pretty evenly; as I mentioned
earlier, messages sent in between that interval get dropped. To rule out
client issues I've tried running this test with multiple threads in the
same process, and by starting multiple single-threaded processes and I
get the same result in both instances. I also tried running the test
client from two different boxes to see if jabber is limiting me by IP,
and that also doesn't seem to make a difference.


So I have a few questions:

1) Anyone know straight off if this is rate limiting and how I can turn
it off?
2) If there's no clear answer what jabber logging options can I turn on
to get a better info? What I see in the logs right now is pretty minimal
and not helpful for my issue.
3) Any other ideas why I might be seeing this effect?

The versions I'm running are:

OS: linux 2.6.9-11
jabberd: 1.4.3
jadc2s: 0.9.0
muc: 0.6.0

Here's the io section of my jadc2s.xml:

&lt;io&gt;        
        &lt;max_fds&gt;9973&lt;/max_fds&gt;
        &lt;max_bps&gt;0&lt;/max_bps&gt;
        &lt;connection_limits&gt;
            &lt;connects&gt;0&lt;/connects&gt;
            &lt;seconds&gt;0&lt;/seconds&gt;
        &lt;/connection_limits&gt;
&lt;/io&gt;

...like I mentioned above all the &lt;karma&gt; elements in my jabber.xml are
commented out.

Any help with this is greatly greatly appreciated.

Thanks in advance,

Larry Kirschner
MTVNetworks


-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="https://www.jabber.org/jdev/attachments/20051118/4bd846f1/attachment-0002.htm">https://www.jabber.org/jdev/attachments/20051118/4bd846f1/attachment-0002.htm</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="081920.html">[jdev] Re: Two questions regarding JEP-0124 HTTP Binding
</A></li>
	<LI>Next message: <A HREF="081921.html">[jdev] [ANN] Spark IM client
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#81919">[ date ]</a>
              <a href="thread.html#81919">[ thread ]</a>
              <a href="subject.html#81919">[ subject ]</a>
              <a href="author.html#81919">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://mail.jabber.org/mailman/listinfo/jdev">More information about the JDev
mailing list</a><br>
</body></html>
