<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [jdev] presence persistence
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:jdev%40jabber.org?Subject=Re%3A%20%5Bjdev%5D%20presence%20persistence&In-Reply-To=%3C000d01c5f5c3%24b9414ee0%24af00a8c0%40eteach.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="082029.html">
   <LINK REL="Next"  HREF="082031.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[jdev] presence persistence</H1>
    <B>Richard Dobson</B> 
    <A HREF="mailto:jdev%40jabber.org?Subject=Re%3A%20%5Bjdev%5D%20presence%20persistence&In-Reply-To=%3C000d01c5f5c3%24b9414ee0%24af00a8c0%40eteach.com%3E"
       TITLE="[jdev] presence persistence">richard at dobson-i.net
       </A><BR>
    <I>Wed Nov 30 09:35:41 CST 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="082029.html">[jdev] presence persistence
</A></li>
        <LI>Next message: <A HREF="082031.html">[jdev] if anyone is having problems with slow propogation for &lt;x	xmlns=&quot;MY_NAMESPACE&quot; messages...
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#82030">[ date ]</a>
              <a href="thread.html#82030">[ thread ]</a>
              <a href="subject.html#82030">[ subject ]</a>
              <a href="author.html#82030">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
----- Original Message ----- 
From: &quot;Mats Bengtsson&quot; &lt;<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">matben at privat.utfors.se</A>&gt;
To: &lt;<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">jdev at jabber.org</A>&gt;
Sent: Wednesday, November 30, 2005 3:23 PM
Subject: [jdev] presence persistence


&gt;<i>
</I>&gt;<i> Although not recommended, it is allowed to use presence stanzas to 
</I>&gt;<i> broadcast
</I>&gt;<i> custom elements (rfc3921):
</I>&gt;<i> &quot;
</I>&gt;<i>   As described under extended namespaces (Section 2.4), a presence
</I>&gt;<i>   stanza MAY contain any properly-namespaced child element.
</I>&gt;<i> &quot;
</I>&gt;<i> Each client keeps an internal state of
</I>&gt;<i> the users presence state, but what happens to these states when a custom
</I>&gt;<i> presence is received? An example:
</I>&gt;<i>
</I>&gt;<i> If I initially get
</I>&gt;<i>
</I>&gt;<i>   &lt;presence type='available' from='x' ...&gt;
</I>&gt;<i>     &lt;show&gt;dnd&lt;/show&gt;
</I>&gt;<i>   &lt;/presence&gt;
</I>&gt;<i>
</I>&gt;<i> and then later a custom presence
</I>&gt;<i>
</I>&gt;<i>   &lt;presence from='x' ...&gt;
</I>&gt;<i>     &lt;custom xmlns=.../&gt;
</I>&gt;<i>   &lt;/presence&gt;
</I>
&gt;<i>
</I>&gt;<i> shall the user 'x' status still be 'dnd'?
</I>
No in this example the presence of 'x' has become available.

&gt;<i> But if I instead get
</I>&gt;<i>
</I>&gt;<i>   &lt;presence from='x' .../&gt;
</I>
This is again simple an available presence.

&gt;<i> without any custom element the status is obviously 'available' and not 
</I>&gt;<i> 'dnd'.
</I>&gt;<i> This doesn't make any sense. One way out of this is if custom presence
</I>&gt;<i> included the other elements &lt;show/&gt; &lt;status/&gt; &lt;priority/&gt; but that seems 
</I>&gt;<i> clumsy.
</I>
Including extra custom elements into the presence stanza does not alter how 
it works in the way you suggest, if you want to broadcast a custom elements 
using presence you must ensure that your element is simply added into 
whatever the presence stanza would be if you wernt going to include it.

Custom presence extensions are simply extra stuff (should really only be 
stuff that is actually also related to your presence), that should be able 
to be completely ignored as if they wernt there without altering how the 
rest of the presence stanza is processed. You must also be aware that it is 
not guaranteed that all your contacts will ever receive any of your 
extensions as servers may filter them out of the presence stanza on route 
for reasons such as reducing bandwidth usage for clients like mobile phones 
where bandwidth is very expensive, or maybe even simply for security reasons 
some servers may filter out all extensions that havent been explicitly 
allowed.

&gt;<i> We already have this situation with caps elements, but they are typically 
</I>&gt;<i> only
</I>&gt;<i> sent with the initial presence, and don't cause this dilemma.
</I>
Its not a dilemma its how it works.

&gt;<i> Ideas?    /Mats
</I>
Richard 



</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="082029.html">[jdev] presence persistence
</A></li>
	<LI>Next message: <A HREF="082031.html">[jdev] if anyone is having problems with slow propogation for &lt;x	xmlns=&quot;MY_NAMESPACE&quot; messages...
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#82030">[ date ]</a>
              <a href="thread.html#82030">[ thread ]</a>
              <a href="subject.html#82030">[ subject ]</a>
              <a href="author.html#82030">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://mail.jabber.org/mailman/listinfo/jdev">More information about the JDev
mailing list</a><br>
</body></html>
