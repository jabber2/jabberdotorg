<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [jdev] Session Manager crashed
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:jdev%40jabber.org?Subject=Re%3A%20%5Bjdev%5D%20Session%20Manager%20crashed&In-Reply-To=%3C43D8D92B.9020500%40novamens.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="082395.html">
   <LINK REL="Next"  HREF="082456.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[jdev] Session Manager crashed</H1>
    <B>Lucas Alvarez</B> 
    <A HREF="mailto:jdev%40jabber.org?Subject=Re%3A%20%5Bjdev%5D%20Session%20Manager%20crashed&In-Reply-To=%3C43D8D92B.9020500%40novamens.com%3E"
       TITLE="[jdev] Session Manager crashed">lalvarez at novamens.com
       </A><BR>
    <I>Thu Jan 26 08:14:03 CST 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="082395.html">[jdev] Thinking about a Jabber based notification system for	a call	center
</A></li>
        <LI>Next message: <A HREF="082456.html">[jdev] Session Manager crashed
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#82455">[ date ]</a>
              <a href="thread.html#82455">[ thread ]</a>
              <a href="subject.html#82455">[ subject ]</a>
              <a href="author.html#82455">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi, I'm running jabberd version 2.0s10 in RedHat EL4. This morning there 
were 900 users logged on and the Session Manager crashed. I'm attaching 
below the full backtrace of the core file, perhaps we could be in the 
presence of a bug and some more skillfull dev could find something out. 
Thanks in advance.

Lucas Alvarez


[<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">lfalvare at jabber04</A> ~]$ gdb /opt/jabber-oracle/bin/sm /tmp/core.2885
GNU gdb Red Hat Linux (6.3.0.0-0.31rh)
Copyright 2004 Free Software Foundation, Inc.
GDB is free software, covered by the GNU General Public License, and you are
welcome to change it and/or distribute copies of it under certain 
conditions.
Type &quot;show copying&quot; to see the conditions.
There is absolutely no warranty for GDB.  Type &quot;show warranty&quot; for details.
This GDB was configured as &quot;i386-redhat-linux-gnu&quot;...Using host 
libthread_db library &quot;/lib/tls/libthread_db.so.1&quot;.

Core was generated by `/opt/jabber-oracle/bin/sm -c 
/opt/jabber-oracle/etc/jabberd/sm.xml'.
Program terminated with signal 11, Segmentation fault.
Reading symbols from 
/u01/app/oracle/product/9.2.0/lib/libclntsh.so.9.0...done.
Loaded symbols for /u01/app/oracle/product/9.2.0/lib/libclntsh.so.9.0
Reading symbols from /lib/libssl.so.4...done.
Loaded symbols for /lib/libssl.so.4
Reading symbols from /lib/libcrypto.so.4...done.
Loaded symbols for /lib/libcrypto.so.4
Reading symbols from /usr/lib/libidn.so.11...done.
Loaded symbols for /usr/lib/libidn.so.11
Reading symbols from /lib/libresolv.so.2...done.
Loaded symbols for /lib/libresolv.so.2
Reading symbols from /lib/tls/libc.so.6...done.
Loaded symbols for /lib/tls/libc.so.6
Reading symbols from /u01/app/oracle/product/9.2.0/lib/libwtc9.so...done.
Loaded symbols for /u01/app/oracle/product/9.2.0/lib/libwtc9.so
Reading symbols from /lib/libdl.so.2...done.
Loaded symbols for /lib/libdl.so.2
Reading symbols from /lib/tls/libm.so.6...done.
Loaded symbols for /lib/tls/libm.so.6
Reading symbols from /lib/tls/libpthread.so.0...done.
Loaded symbols for /lib/tls/libpthread.so.0
Reading symbols from /lib/libnsl.so.1...done.
Loaded symbols for /lib/libnsl.so.1
Reading symbols from /usr/lib/libgssapi_krb5.so.2...done.
Loaded symbols for /usr/lib/libgssapi_krb5.so.2
Reading symbols from /usr/lib/libkrb5.so.3...done.
Loaded symbols for /usr/lib/libkrb5.so.3
Reading symbols from /lib/libcom_err.so.2...done.
Loaded symbols for /lib/libcom_err.so.2
Reading symbols from /usr/lib/libk5crypto.so.3...done.
Loaded symbols for /usr/lib/libk5crypto.so.3
Reading symbols from /usr/lib/libz.so.1...done.
Loaded symbols for /usr/lib/libz.so.1
Reading symbols from /lib/ld-linux.so.2...done.
Loaded symbols for /lib/ld-linux.so.2
Reading symbols from /lib/libnss_compat.so.2...done.
Loaded symbols for /lib/libnss_compat.so.2
Reading symbols from /lib/libnss_nis.so.2...done.
Loaded symbols for /lib/libnss_nis.so.2
Reading symbols from /lib/libnss_files.so.2...done.
Loaded symbols for /lib/libnss_files.so.2
#0  0x0804c4c2 in mm_in_router (mm=0x72626f72, pkt=0x8d9c720) at mm.c:465
465     mm.c: No such file or directory.
        in mm.c
(gdb) bt
#0  0x0804c4c2 in mm_in_router (mm=0x72626f72, pkt=0x8d9c720) at mm.c:465
#1  0x0804aaca in dispatch (sm=0x808e008, pkt=0x8d9c720) at dispatch.c:73
#2  0x080503a8 in sm_sx_callback (s=0x8138070, e=event_WANT_READ, 
data=0xb734170, arg=0x808e008) at sm.c:208
#3  0x08064081 in __sx_event (file=0x80878b6 &quot;io.c&quot;, line=124, 
s=0x8138070, e=event_PACKET, data=0xb734170) at sx.c:325
#4  0x0805f043 in _sx_process_read (s=0x8138070, buf=0x1) at io.c:124
#5  0x0805f4a9 in sx_can_read (s=0x8138070) at io.c:208
#6  0x0805078e in sm_mio_callback (m=0x8133d50, a=action_ACCEPT, fd=7, 
data=0x0, arg=0x808e008) at sm.c:234
#7  0x08067c70 in mio_run (m=0x8133d50, timeout=5) at mio.c:266
#8  0x0804b57d in main (argc=3, argv=0xbffff8d0) at main.c:328
(gdb) bt full
#0  0x0804c4c2 in mm_in_router (mm=0x72626f72, pkt=0x8d9c720) at mm.c:465
        n = 0
        mi = 0x8d9c720
        ret = mod_PASS
#1  0x0804aaca in dispatch (sm=0x808e008, pkt=0x8d9c720) at dispatch.c:73
        user = 0x808e008
        ret = mod_HANDLED
#2  0x080503a8 in sm_sx_callback (s=0x8138070, e=event_WANT_READ, 
data=0xb734170, arg=0x808e008) at sm.c:208
        nad = 0x808ce3c
        pkt = 0x0
        len = 134794812
        ns = 0
        elem = 0
        attr = 0
#3  0x08064081 in __sx_event (file=0x80878b6 &quot;io.c&quot;, line=124, 
s=0x8138070, e=event_PACKET, data=0xb734170) at sx.c:325
        ret = 0
#4  0x0805f043 in _sx_process_read (s=0x8138070, buf=0x1) at io.c:124
        plugin_error = 0
        out = 0xcf7e295 &quot;&lt;comp:route 
xmlns:comp='<A HREF="http://jabberd.jabberstudio.org/ns/component/1.0'">http://jabberd.jabberstudio.org/ns/component/1.0'</A> 
to='msn.petrobrasenergia.com' from='petrobrasenergia.com' 
error='404'&gt;&lt;message xmlns='jabber:client' to='martus2001%hotmail.co&quot;...
        len = 713
        sxe = {code = 150908144, generic = 0x8138070 &quot;&#216;;\023\b\a&quot;, 
specific = 0xbffff7f8 &quot;(&#248;&#255;&#191;&#169;&#244;\005\bp\200\023\b&#216;&#172;&#254;\b&quot;}
        nad = 0xb734170
        errstring = 0x0
        i = 1
        ns = 145521488
        elem = 3876864
#5  0x0805f4a9 in sx_can_read (s=0x8138070) at io.c:208
        in = 0x8feacf0
        out = 0x8feacd8
        read = 0
        ret = 0
#6  0x0805078e in sm_mio_callback (m=0x8133d50, a=action_ACCEPT, fd=7, 
data=0x0, arg=0x808e008) at sm.c:234
        nbytes = 713
#7  0x08067c70 in mio_run (m=0x8133d50, timeout=5) at mio.c:266
        retval = 0
        fd = 7
#8  0x0804b57d in main (argc=3, argv=0xbffff8d0) at main.c:328
        sm = 0x808e008
        config_file = 0x0
        optchar = 0
        sess = 0x0
        id = &quot;petrobrasenergia.com&quot;, '\0' &lt;repeats 1003 times&gt;



</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="082395.html">[jdev] Thinking about a Jabber based notification system for	a call	center
</A></li>
	<LI>Next message: <A HREF="082456.html">[jdev] Session Manager crashed
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#82455">[ date ]</a>
              <a href="thread.html#82455">[ thread ]</a>
              <a href="subject.html#82455">[ subject ]</a>
              <a href="author.html#82455">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://mail.jabber.org/mailman/listinfo/jdev">More information about the JDev
mailing list</a><br>
</body></html>
