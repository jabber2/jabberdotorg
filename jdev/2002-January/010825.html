<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [JDEV] Installing xdb_sql
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:jdev%40jabber.org?Subject=%5BJDEV%5D%20Installing%20xdb_sql&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="010824.html">
   <LINK REL="Next"  HREF="010827.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[JDEV] Installing xdb_sql</H1>
    <B>Rodrigo Roman</B> 
    <A HREF="mailto:jdev%40jabber.org?Subject=%5BJDEV%5D%20Installing%20xdb_sql&In-Reply-To="
       TITLE="[JDEV] Installing xdb_sql">dedalo at ferengi.com.ar
       </A><BR>
    <I>Tue Jan 15 08:50:02 CST 2002</I>
    <P><UL>
        <LI>Previous message: <A HREF="010824.html">[JDEV] Installing xdb_sql
</A></li>
        <LI>Next message: <A HREF="010827.html">[JDEV] Jabberd 1.5 Development
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10825">[ date ]</a>
              <a href="thread.html#10825">[ thread ]</a>
              <a href="subject.html#10825">[ subject ]</a>
              <a href="author.html#10825">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Thanks to everybody, its working now, I will make test tonight I'm also
interested if somebody migrated data form xdb std files to xdb_sql or mysql
tables.
 
 
dedalo

-----Mensaje original-----
De: Glenn MacGregor [mailto:<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">gtm at oracom.com</A>] 
Enviado el: Martes, 15 de Enero de 2002 10:51 a.m.
Para: <A HREF="http://mail.jabber.org/mailman/listinfo/jdev">jdev at jabber.org</A>
Asunto: Re: [JDEV] Installing xdb_sql


You need to get rid of the slash after xdb_sql_mysql.o and the comment mark
in the Makefile (I have changed it below)
 
 
    Glenn

----- Original Message ----- 
From: Rodrigo  &lt;mailto:<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">dedalo at ferengi.com.ar</A>&gt; Roman 
To: '<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">jdev at jabber.org</A>' &lt;mailto:'<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">jdev at jabber.org</A>'&gt;  
Sent: Tuesday, January 15, 2002 7:26 AM
Subject: [JDEV] Installing xdb_sql


I have warnings and errors while making xdb_sql 
I will use mysql. 
Any help will be very much apreciated ;-) 

Here is it: 

<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">root at poseidon</A>:/usr/local/jabber/jabber-1.4.1/xdb_sql
&lt;mailto:<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">root at poseidon</A>:/usr/local/jabber/jabber-1.4.1/xdb_sql&gt;  &gt; make 
gcc -I. -I../jabberd -g -Wall -fPIC -I. -I..
-I/usr/local/jabber/jabber-1.4.1/jabberd/pth-1.3.7  -DMYSQL_BACKEND  -c -o
xdb_sql.o xdb_sql.c

gcc -I. -I../jabberd -g -Wall -fPIC -I. -I..
-I/usr/local/jabber/jabber-1.4.1/jabberd/pth-1.3.7  -DMYSQL_BACKEND  -c -o
xdb_sql_auth0k.o xdb_sql_auth0k.c

xdb_sql_auth0k.c: In function `xdbsql_auth0k_get': 
xdb_sql_auth0k.c:70: warning: unused variable `rowcount' 
gcc -I. -I../jabberd -g -Wall -fPIC -I. -I..
-I/usr/local/jabber/jabber-1.4.1/jabberd/pth-1.3.7  -DMYSQL_BACKEND  -c -o
xdb_sql_auth.o xdb_sql_auth.c

xdb_sql_auth.c: In function `xdbsql_auth_get': 
xdb_sql_auth.c:30: warning: unused variable `rowcount' 
xdb_sql_auth.c: In function `xdbsql_user_exists': 
xdb_sql_auth.c:233: warning: unused variable `rowcount' 
gcc -I. -I../jabberd -g -Wall -fPIC -I. -I..
-I/usr/local/jabber/jabber-1.4.1/jabberd/pth-1.3.7  -DMYSQL_BACKEND  -c -o
xdb_sql_offline.o xdb_sql_offline.c

gcc -I. -I../jabberd -g -Wall -fPIC -I. -I..
-I/usr/local/jabber/jabber-1.4.1/jabberd/pth-1.3.7  -DMYSQL_BACKEND  -c -o
xdb_sql_register.o xdb_sql_register.c

gcc -I. -I../jabberd -g -Wall -fPIC -I. -I..
-I/usr/local/jabber/jabber-1.4.1/jabberd/pth-1.3.7  -DMYSQL_BACKEND  -c -o
xdb_sql_config.o xdb_sql_config.c

gcc -I. -I../jabberd -g -Wall -fPIC -I. -I..
-I/usr/local/jabber/jabber-1.4.1/jabberd/pth-1.3.7  -DMYSQL_BACKEND  -c -o
xdb_sql_querydef.o xdb_sql_querydef.c

gcc -I. -I../jabberd -g -Wall -fPIC -I. -I..
-I/usr/local/jabber/jabber-1.4.1/jabberd/pth-1.3.7  -DMYSQL_BACKEND  -c -o
xdb_sql_roster.o xdb_sql_roster.c

xdb_sql_roster.c: In function `xdbsql_roster_set': 
xdb_sql_roster.c:435: warning: suggest explicit braces to avoid ambiguous
`else' 
gcc -I. -I../jabberd -g -Wall -fPIC -I. -I..
-I/usr/local/jabber/jabber-1.4.1/jabberd/pth-1.3.7  -DMYSQL_BACKEND  -c -o
xdb_sql_last.o xdb_sql_last.c

gcc -I. -I../jabberd -g -Wall -fPIC -I. -I..
-I/usr/local/jabber/jabber-1.4.1/jabberd/pth-1.3.7  -DMYSQL_BACKEND  -c -o
xdb_sql_backend.o xdb_sql_backend.c

gcc -I. -I../jabberd -g -Wall -fPIC -I. -I..
-I/usr/local/jabber/jabber-1.4.1/jabberd/pth-1.3.7  -DMYSQL_BACKEND  -c -o
xdb_sql_vcard.o xdb_sql_vcard.c

gcc -I. -I../jabberd -g -Wall -fPIC -I. -I..
-I/usr/local/jabber/jabber-1.4.1/jabberd/pth-1.3.7  -DMYSQL_BACKEND  -c -o
xdb_sql_filter.o xdb_sql_filter.c

gcc -I. -I../jabberd -g -Wall -fPIC -I. -I..
-I/usr/local/jabber/jabber-1.4.1/jabberd/pth-1.3.7  -DMYSQL_BACKEND  -c -o
xdb_sql_generic.o xdb_sql_generic.c

gcc -I. -I../jabberd -g -Wall -fPIC -I. -I..
-I/usr/local/jabber/jabber-1.4.1/jabberd/pth-1.3.7  -DMYSQL_BACKEND  -c -o
xdb_sql_mysql.o xdb_sql_mysql.c

make: *** No rule to make target ` ', needed by `xdb_sql.so'.  Stop. 


This is my Makefile 
<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">root at poseidon</A>:/usr/local/jabber/jabber-1.4.1/xdb_sql &gt; cat Makefile 
# --------------------------------------------------------------------------

# 
#  This program was developed by IDEALX (<A HREF="http://www.IDEALX.org">http://www.IDEALX.org</A>
&lt;<A HREF="http://www.IDEALX.org">http://www.IDEALX.org</A>&gt; ), for 
#  LibertySurf T&#233;l&#233;com (<A HREF="http://www.libertysurftelecom.fr">http://www.libertysurftelecom.fr</A>
&lt;<A HREF="http://www.libertysurftelecom.fr">http://www.libertysurftelecom.fr</A>&gt; ), based on 
#  code developped by members of the Jabber Team in xdb/mysql. 
# 
#  Initial release in xdb_sql 1.0, (C) 2000 - 2001 LibertySurf 
#  T&#233;l&#233;com 
# 
#  Individual authors' names can be found in the AUTHORS file 
# 
#  Usage, modification and distribution rights reserved. See file 
#  COPYING for details. 
# 
# --------------------------------------------------------------------------


# $Id: Makefile,v 1.13 2001/10/12 09:10:03 borihuela Exp $ 

# 
# This Makefile is intended to be used in the Jabber environment 
# 

include ../platform-settings 

# Uncomment the flags that are needed for your DB 
CFLAGS:= -I. -I../jabberd $(CFLAGS) # -I/usr/local/pgsql/include/ 

!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!

Should Be the following: 

CFLAGS:= -I. -I../jabberd $(CFLAGS) 

You may need the include location of mysql headers as well

!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!

# Uncomment the flags that are needed for your DB 
CPPFLAGS= -DMYSQL_BACKEND 
# -DPOSTGRESQL_BACKEND -DODBC_BACKEND -DMYSQL_BACKEND 

# Uncomment the file that corresponds to your DB 
xdb_sql_OBJECTS= \ 
        xdb_sql.o \ 
        xdb_sql_auth0k.o \ 
        xdb_sql_auth.o \ 
        xdb_sql_offline.o \ 
        xdb_sql_register.o \ 
        xdb_sql_config.o \ 
        xdb_sql_querydef.o \ 
        xdb_sql_roster.o \ 
        xdb_sql_last.o \ 
        xdb_sql_backend.o \ 
        xdb_sql_vcard.o \ 
        xdb_sql_filter.o \ 
        xdb_sql_generic.o \ 
        xdb_sql_mysql.o \ 

!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!

Should be 

xdb_sql_mysql.o

!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
#       xdb_sql_pgsql.o 
#       xdb_sql_odbc.o 

all: xdb_sql.so 

# Uncomment the lib that is used by your DB 
xdb_sql.so: $(xdb_sql_OBJECTS) $(CC) $(CFLAGS) $(MCFLAGS) -o xdb_sql.so
$(xdb_sql_OBJECTS) $(LDFLAGS) $(LIBS) -static -lmysqlclient

# -L/usr/local/pgsql/lib -lpq -lmysqlclient 

clean: 
        rm -f $(xdb_sql_OBJECTS) xdb_sql.so 
        rm -rf xdb_sql.1.0 

dist: all 
        mkdir xdb_sql.1.0 
        cat FILES | cut -d&quot;:&quot; -f 1 | xargs cp
--target-directory=xdb_sql.1.0/ 
        tar cvzf xdb_sql.1.0.tar.gz xdb_sql.1.0 



-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="https://www.jabber.org/jdev/attachments/20020115/9ebb305a/attachment.htm">https://www.jabber.org/jdev/attachments/20020115/9ebb305a/attachment.htm</A> 
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="010824.html">[JDEV] Installing xdb_sql
</A></li>
	<LI>Next message: <A HREF="010827.html">[JDEV] Jabberd 1.5 Development
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10825">[ date ]</a>
              <a href="thread.html#10825">[ thread ]</a>
              <a href="subject.html#10825">[ subject ]</a>
              <a href="author.html#10825">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://mail.jabber.org/mailman/listinfo/jdev">More information about the JDev
mailing list</a><br>
</body></html>
