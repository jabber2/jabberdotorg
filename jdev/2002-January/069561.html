<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [JDEV] Mysql and transports
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:jdev%40jabber.org?Subject=Re%3A%20%5BJDEV%5D%20Mysql%20and%20transports&In-Reply-To=%3C010F8CDED7A86646BDD42C2B949603113326C5%40PATAN.ferengi.com.ar%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="069566.html">
   <LINK REL="Next"  HREF="069563.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[JDEV] Mysql and transports</H1>
    <B>Rodrigo Roman</B> 
    <A HREF="mailto:jdev%40jabber.org?Subject=Re%3A%20%5BJDEV%5D%20Mysql%20and%20transports&In-Reply-To=%3C010F8CDED7A86646BDD42C2B949603113326C5%40PATAN.ferengi.com.ar%3E"
       TITLE="[JDEV] Mysql and transports">dedalo at ferengi.com.ar
       </A><BR>
    <I>Mon Jan 28 06:13:39 CST 2002</I>
    <P><UL>
        <LI>Previous message: <A HREF="069566.html">[JDEV] Customiz the server
</A></li>
        <LI>Next message: <A HREF="069563.html">[JDEV] Support to Spanish Characters
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#69561">[ date ]</a>
              <a href="thread.html#69561">[ thread ]</a>
              <a href="subject.html#69561">[ subject ]</a>
              <a href="author.html#69561">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Continuing...
 
I cannot make any transport work with mysql...
 
Myslq is working form jabber and if I coneect to msn it create my roster in
usersroster...
 
but nothing is saved in the msn or aim tables (my login information for the
transport inst' it?)
 
it keeps triyng to set the infromation, this line appears all the time...
 
Mon Jan 28 09:06:17 2002  deliver.c:460 DELIVER 2:aim.ferengi.com.ar &lt;xdb
type='set' to='<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">ec75fec87fc620cd7262b4072aceb62397534071 at aim.ferengi.com.ar</A>'
&lt;mailto:to='<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">ec75fec87fc620cd7262b4072aceb62397534071 at aim.ferengi.com.ar</A>'&gt;
from='aim.ferengi.com.ar' ns='aimtrans:roster'
id='3'&gt;&lt;aimtrans&gt;&lt;buddies/&gt;&lt;/aimtrans&gt;&lt;/xdb&gt;
Mon Jan 28 09:06:17 2002  deliver.c:649 delivering to instance 'xdb'
Mon Jan 28 09:06:17 2002  xdb_sql.c:124 modules = 814b8e0
Mon Jan 28 09:06:28 2002  mio.c:698 MIO read from socket 19: &lt;log
type='warn' from='sessions.c:1100'&gt;[AT] Closing down session for
&lt;mailto:<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">dedalo at poseidon.ferengi.com.ar</A>/hermes&gt;
<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">dedalo at poseidon.ferengi.com.ar</A>/hermes&lt;/log&gt;
 
 
I'm not sure about something... in the to line I have:
ec75fec87fc620cd7262b4072aceb62397534071  this code, must be the same tha
appears in users0k table?
 
thanks for any help!
 
-----Mensaje original-----
De: Rodrigo Roman [mailto:<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">dedalo at ferengi.com.ar</A>] 
Enviado el: Viernes, 25 de Enero de 2002 06:45 p.m.
Para: '<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">jdev at jabber.org</A>'
Asunto: RE: [JDEV] Mysql and transports


Something odd is happening...
 
I used your sql to create tables, and your xml.
Then I tried with my instalation of msnt, and worked out... but only the
first time, when I register the gateway, i received all my roster form msn
and could send and receive messages. Then when I log in again it does not
recive my presence... gateway does not come alive...
 
I tried with your msntrans... and the same... I could register and received
my contacts.. but receive this error:
Fri Jan 25 18:44:23 2002  deliver.c:460 DELIVER 4:c2s &lt;route
from='<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">dedalo at poseidon.ferengi.com.ar</A>/8252928'
&lt;mailto:from='<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">dedalo at poseidon.ferengi.com.ar</A>/8252928'&gt;
&lt;mailto:to='<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">21 at c2s</A>/819B518'&gt; to='<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">21 at c2s</A>/819B518'&gt;&lt;presence
from='msn.ferengi.com.ar/registered'
to='<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">dedalo at poseidon.ferengi.com.ar</A>/Winjab'
&lt;mailto:to='<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">dedalo at poseidon.ferengi.com.ar</A>/Winjab'&gt;
type='error'&gt;&lt;status&gt;Online&lt;/status&gt;&lt;error code='500'&gt;Internal Server
Error&lt;/error&gt;&lt;/presence&gt;&lt;/route&gt;
Fri Jan 25 18:44:23 2002  deliver.c:649 delivering to instance 'c2s'
Fri Jan 25 18:44:23 2002  client.c:148 C2S:
<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">dedalo at poseidon.ferengi.com.ar</A>/8252928
&lt;mailto:<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">dedalo at poseidon.ferengi.com.ar</A>/8252928&gt;  has an active session,
delivering packet
Fri Jan 25 18:44:23 2002  client.c:202 Writing packet to MIO: &lt;presence
from='msn.ferengi.com.ar/registered'
to='<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">dedalo at poseidon.ferengi.com.ar</A>/Winjab'
&lt;mailto:to='<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">dedalo at poseidon.ferengi.com.ar</A>/Winjab'&gt;
type='error'&gt;&lt;status&gt;Online&lt;/status&gt;&lt;error code='500'&gt;Internal Server
Error&lt;/error&gt;&lt;/presence&gt;
Fri Jan 25 18:44:23 2002  mio.c:908 mio_write called on x: 82728A8 buffer:
(null)
Fri Jan 25 18:44:23 2002  mtq 81AD7D8 leaving to pth
Fri Jan 25 18:44:23 2002  mio.c:268 write_dump writing data: &lt;presence
from='msn.ferengi.com.ar/registered'
to='<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">dedalo at poseidon.ferengi.com.ar</A>/Winjab'
&lt;mailto:to='<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">dedalo at poseidon.ferengi.com.ar</A>/Winjab'&gt;
type='error'&gt;&lt;status&gt;Online&lt;/status&gt;&lt;error code='500'&gt;Internal Server
Error&lt;/error&gt;&lt;/presence&gt;
 
any help?
 
-----Mensaje original-----
De: Jason Reineri [mailto:<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">jreineri at northridge.com</A>] 
Enviado el: Viernes, 25 de Enero de 2002 11:50 a.m.
Para: <A HREF="http://mail.jabber.org/mailman/listinfo/jdev">jdev at jabber.org</A>
Asunto: RE: [JDEV] Mysql and transports


We are running a version of the MSN transport here that works with xdb_sql.
If you'd like to run it I can email a tarball to you, but it won't be easy
to set up.  There are quite a few things you have to do to xdb_sql before it
will work with it.  You'll have to add a table to your mySQL db, add query
definitions to the xdb_sql.xml file and there was a bug in xdb_sql that
prevented the msn transport from working correctly with it that we fixed.  I
don't know if this bug has been fixed in the newest version of xdb_sql or
not.  The bug was due to the fact that the msn transport sends values to xdb
as attributes of an xml tag instead of as children tags I think.  It may
have been the other way around.  This functionality was broken in version
1.1 of xdb_sql, if it was fixed I'm sure the maintainer will chime in.  If
it hasn't been fixed I need to send him our fix.  If you want to give it a
shot let me know.  Just realize that it will be pretty complicated.
 
Jason Reineri
Northridge Systems, Inc.
 
-----Original Message-----
From: Rodrigo Roman [mailto:<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">dedalo at ferengi.com.ar</A>] 
Sent: Friday, January 25, 2002 7:58 AM
To: '<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">jdev at jabber.org</A>'
Subject: [JDEV] Mysql and transports
 
I have installes xdb_sql succesfully? 
Everything is working but transports, I cannot make MSN nor AIM to work,
winjab disconnects when I try to browse the agent... and then it hangs...
with colinjab is the same, and psi for linux also...
With jabber users everything is fine... 
Any clue? 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="https://www.jabber.org/jdev/attachments/20020128/4844cd04/attachment-0002.htm">https://www.jabber.org/jdev/attachments/20020128/4844cd04/attachment-0002.htm</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="069566.html">[JDEV] Customiz the server
</A></li>
	<LI>Next message: <A HREF="069563.html">[JDEV] Support to Spanish Characters
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#69561">[ date ]</a>
              <a href="thread.html#69561">[ thread ]</a>
              <a href="subject.html#69561">[ subject ]</a>
              <a href="author.html#69561">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://mail.jabber.org/mailman/listinfo/jdev">More information about the JDev
mailing list</a><br>
</body></html>
