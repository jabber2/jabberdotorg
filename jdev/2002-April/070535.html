<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [JDEV] A Jabber 'client deamon'
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:jdev%40jabber.org?Subject=Re%3A%20%5BJDEV%5D%20A%20Jabber%20%27client%20deamon%27&In-Reply-To=%3Celhzff5e.fsf%40jabber.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   
   
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[JDEV] A Jabber 'client deamon'</H1>
    <B>Joe Hildebrand</B> 
    <A HREF="mailto:jdev%40jabber.org?Subject=Re%3A%20%5BJDEV%5D%20A%20Jabber%20%27client%20deamon%27&In-Reply-To=%3Celhzff5e.fsf%40jabber.com%3E"
       TITLE="[JDEV] A Jabber 'client deamon'">jhildebrand at jabber.com
       </A><BR>
    <I>Mon Apr  1 12:27:25 CST 2002</I>
    <P><UL>
        
        
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#70535">[ date ]</a>
              <a href="thread.html#70535">[ thread ]</a>
              <a href="subject.html#70535">[ subject ]</a>
              <a href="author.html#70535">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>You could have a daemon that creates a long-lived jabber connection,
then listens on [local IPC mechanism of your choice].  

As Craig and I proved to ourselves one day, there are at *least* 20
ways to do that.  Here are a couple:

- TCP socket
- Named pipe
- Shared mem
- SysV ipc queue

I'd recommend using JECL, and using the SocketPool to listen for
connections locally.

Jan Fabry &lt;<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">jan.fabry at vsknet.be</A>&gt; writes:

&gt;<i> Hello,
</I>&gt;<i>
</I>&gt;<i> I'll try to explain my idea, but feel free to ask questions if
</I>&gt;<i> anything is unclear!
</I>&gt;<i>
</I>&gt;<i> I was thinking about some sort of 'client deamon' for Jabber. The
</I>&gt;<i> situation I'm confronted with is the following:
</I>&gt;<i>
</I>&gt;<i> I have a website running MyPHPNuke (a Content Management System -
</I>&gt;<i> visitors can enter news, which I then review and eventually post on
</I>&gt;<i> the page - in some ways similar to Slashdot). Every time someone
</I>&gt;<i> enters a new news item, I would like to be notified of this. Jabber
</I>&gt;<i> seems like a good way to do this.
</I>&gt;<i>
</I>&gt;<i> However, there is a problem. Every time I want to send a message, a
</I>&gt;<i> connection to Jabber should be open. I can do this with Perl, but I
</I>&gt;<i> still need to sleep() some time, because I'm waiting for the Jabber
</I>&gt;<i> server to respond. When the connection is open, I can send my
</I>&gt;<i> message. After this, the connection is closed, and the page can finish
</I>&gt;<i> loading.
</I>&gt;<i>
</I>&gt;<i> Schematic view:
</I>&gt;<i> 1. User submits new story
</I>&gt;<i> 2. Server starts new process to handle this request
</I>&gt;<i> 3. Server process opens connection to Jabber server
</I>&gt;<i> 4. Server process sends message
</I>&gt;<i> 5. Server process closes connection to Jabber server
</I>&gt;<i> 6. Server process returns page to user
</I>&gt;<i>
</I>&gt;<i> Can you see the problem? Steps 3 and 5 should be avoidable.
</I>&gt;<i>
</I>&gt;<i> My suggestion is:
</I>&gt;<i>
</I>&gt;<i> At boot time, some sort of 'client deamon' is started, and it logs in
</I>&gt;<i> to the Jabber server. When I want a PHP script to send a message to
</I>&gt;<i> me, it only does a small call to some application, that then connects
</I>&gt;<i> to the daemon to send it.
</I>&gt;<i>
</I>&gt;<i> Maybe there this should work in two ways: I can send a message to 'the
</I>&gt;<i> machine', to execute some task.
</I>&gt;<i>
</I>&gt;<i> I'm sorry if all this sounds confusing, but I don't know how to
</I>&gt;<i> explain it otherwise.
</I>&gt;<i>
</I>&gt;<i> Greetings,
</I>&gt;<i>
</I>&gt;<i> Jan Fabry
</I>&gt;<i> -- 
</I>&gt;<i> Vlaamse Scholierenkoepel vzw
</I>&gt;<i> Paleizenstraat 90
</I>&gt;<i> 1030 Brussel
</I>&gt;<i> 02-215 32 29
</I>&gt;<i> 02-215 41 78 (fax)
</I>&gt;<i> <A HREF="http://mail.jabber.org/mailman/listinfo/jdev">info at vsknet.be</A>
</I>&gt;<i> **** Bezoek onze website: <A HREF="http://www.vsknet.be">http://www.vsknet.be</A> ***
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> jdev mailing list
</I>&gt;<i> <A HREF="http://mail.jabber.org/mailman/listinfo/jdev">jdev at jabber.org</A>
</I>&gt;<i> <A HREF="http://mailman.jabber.org/listinfo/jdev">http://mailman.jabber.org/listinfo/jdev</A>
</I>
-- 
Joe Hildebrand
Chief Architect
Jabber, Inc.
<A HREF="http://www.jabber.com/">http://www.jabber.com/</A>


</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	
	
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#70535">[ date ]</a>
              <a href="thread.html#70535">[ thread ]</a>
              <a href="subject.html#70535">[ subject ]</a>
              <a href="author.html#70535">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://mail.jabber.org/mailman/listinfo/jdev">More information about the JDev
mailing list</a><br>
</body></html>
