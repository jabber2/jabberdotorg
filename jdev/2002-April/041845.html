<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [JDEV] Querying Rosters...
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:jdev%40jabber.org?Subject=Re%3A%20%5BJDEV%5D%20Querying%20Rosters...&In-Reply-To=%3CPine.LNX.4.10.10204251238480.30393-100000%40lor.jeremie.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="041865.html">
   <LINK REL="Next"  HREF="041801.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[JDEV] Querying Rosters...</H1>
    <B>Peter Saint-Andre</B> 
    <A HREF="mailto:jdev%40jabber.org?Subject=Re%3A%20%5BJDEV%5D%20Querying%20Rosters...&In-Reply-To=%3CPine.LNX.4.10.10204251238480.30393-100000%40lor.jeremie.com%3E"
       TITLE="[JDEV] Querying Rosters...">stpeter at jabber.org
       </A><BR>
    <I>Thu Apr 25 12:44:17 CDT 2002</I>
    <P><UL>
        <LI>Previous message: <A HREF="041865.html">[JDEV] Jogger presence messages
</A></li>
        <LI>Next message: <A HREF="041801.html">[JDEV] Re: [jadmin] xdb_sql ...
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#41845">[ date ]</a>
              <a href="thread.html#41845">[ thread ]</a>
              <a href="subject.html#41845">[ subject ]</a>
              <a href="author.html#41845">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>It doesn't matter what to address you put on this iq chunk, you will
always get your own roster (i.e., the roster of the sending entity). From
addresses are essentially ignored (they are supplied by the server to
prevent spoofing), which is why the from address on the iq reply is
<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">you at yourhost</A>/currentresource (in your case, <A HREF="http://mail.jabber.org/mailman/listinfo/jdev">veer at ip</A>/Winjab -- I admit this
is kind of confusing). You could refer to the source code if you want to
see the specific logic. I'm sure that JSM just takes the &quot;from&quot; address on
the iq get and makes that the &quot;to&quot; address on the iq reply, but the reply
is actually sent to the sending entity.

Peter

--
Peter Saint-Andre
email+jabber: <A HREF="http://mail.jabber.org/mailman/listinfo/jdev">stpeter at jabber.org</A>
weblog: <A HREF="http://www.saint-andre.com/blog/">http://www.saint-andre.com/blog/</A>

On Thu, 25 Apr 2002, Ritu Khetan wrote:

&gt;<i> hey! I am highly confused. I guess you are right. I
</I>&gt;<i> tried it again and this time it sent the user\'s roster
</I>&gt;<i> rather than the buddy\'s roster.
</I>&gt;<i> The packet that came back was quite weird though..as the
</I>&gt;<i> to and from jids did not get switched..
</I>&gt;<i> It looked like this..
</I>&gt;<i> 
</I>&gt;<i> Send:
</I>&gt;<i> &lt;iq type=\&quot;get\&quot; id=\&quot;\&quot; to=\&quot;<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">ritu at 192.168.2.58</A>\&quot;
</I>&gt;<i> from=\&quot;<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">veer at 192.168.2.58</A>\&quot;&gt;
</I>&gt;<i> &lt;query xmlns=\&quot;jabber:iq:roster\&quot;/&gt;
</I>&gt;<i> &lt;/iq&gt;
</I>&gt;<i> 
</I>&gt;<i> Recv:
</I>&gt;<i> &lt;iq type=\'result\' id=\'\' to=\'<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">ritu at 192.168.2.58</A>\'
</I>&gt;<i> from=\'<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">veer at 192.168.2.58</A>/Winjab\'&gt;
</I>&gt;<i> &lt;query xmlns=\'jabber:iq:roster\'&gt;&lt;item
</I>&gt;<i> jid=\'<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">cvsmsg at 192.168.2.58</A>\' name=\'cvsmsg\'
</I>&gt;<i> subscription=\'both\'&gt;&lt;group&gt;My
</I>&gt;<i> Resources&lt;/group&gt;&lt;/item&gt;&lt;item jid=\'<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">ritu1 at 192.168.2.58</A>\'
</I>&gt;<i> name=\'ritu1\' subscription=\'both\'/&gt;&lt;/query&gt;&lt;/iq&gt;
</I>&gt;<i>  
</I>&gt;<i> Anyways, sorry for the inconvenience caused.
</I>&gt;<i> No offenses please.
</I>&gt;<i> 
</I>&gt;<i> Am still wondering why the \&quot;to\&quot; jid appears <A HREF="http://mail.jabber.org/mailman/listinfo/jdev">ritu at ..</A> even
</I>&gt;<i> though the packet came to <A HREF="http://mail.jabber.org/mailman/listinfo/jdev">veer at ....</A>??
</I>&gt;<i> 
</I>&gt;<i> Regards,
</I>&gt;<i> Ritu
</I>&gt;<i> Quoting Peter Saint-Andre &lt;<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">stpeter at jabber.org</A>&gt;:
</I>&gt;<i> 
</I>&gt;<i> &gt; We have been developing and using Jabber for well over
</I>&gt;<i> three years and no
</I>&gt;<i> &gt; one has ever seen or reported this behavior. Please
</I>&gt;<i> provide a test case.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Peter
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; --
</I>&gt;<i> &gt; Peter Saint-Andre
</I>&gt;<i> &gt; email+jabber: <A HREF="http://mail.jabber.org/mailman/listinfo/jdev">stpeter at jabber.org</A>
</I>&gt;<i> &gt; weblog: <A HREF="http://www.saint-andre.com/blog/">http://www.saint-andre.com/blog/</A>
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Ritu Khetan wrote:
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; &gt; I just found out that it is possible for users to
</I>&gt;<i> &gt; &gt; query each other rosters which would reveal the buddy
</I>&gt;<i> &gt; &gt; list of the respective user.
</I>&gt;<i> &gt; &gt; I feel this is highly unfavorable as people do not wish
</I>&gt;<i> &gt; &gt; to share their buddy lists with others.
</I>&gt;<i> &gt; &gt; Further, as rosters (esp. this part) are managed by the
</I>&gt;<i> &gt; &gt; server, clients cannot afford to play with them by
</I>&gt;<i> &gt; &gt; qualifying them by a private namespace.
</I>&gt;<i> &gt; &gt; Are there any ideas on how we can take care of this? Is
</I>&gt;<i> &gt; &gt; any work being done on this in the next version of
</I>&gt;<i> Jabber?
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; _______________________________________________
</I>&gt;<i> &gt; jdev mailing list
</I>&gt;<i> &gt; <A HREF="http://mail.jabber.org/mailman/listinfo/jdev">jdev at jabber.org</A>
</I>&gt;<i> &gt; <A HREF="http://mailman.jabber.org/listinfo/jdev">http://mailman.jabber.org/listinfo/jdev</A>
</I>&gt;<i> &gt; 
</I>&gt;<i> 
</I>&gt;<i> _______________________________________________
</I>&gt;<i> jdev mailing list
</I>&gt;<i> <A HREF="http://mail.jabber.org/mailman/listinfo/jdev">jdev at jabber.org</A>
</I>&gt;<i> <A HREF="http://mailman.jabber.org/listinfo/jdev">http://mailman.jabber.org/listinfo/jdev</A>
</I>&gt;<i> 
</I>

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="041865.html">[JDEV] Jogger presence messages
</A></li>
	<LI>Next message: <A HREF="041801.html">[JDEV] Re: [jadmin] xdb_sql ...
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#41845">[ date ]</a>
              <a href="thread.html#41845">[ thread ]</a>
              <a href="subject.html#41845">[ subject ]</a>
              <a href="author.html#41845">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://mail.jabber.org/mailman/listinfo/jdev">More information about the JDev
mailing list</a><br>
</body></html>
