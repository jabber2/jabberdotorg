<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [jdev] Archive - receive callback archival
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:jdev%40jabber.org?Subject=%5Bjdev%5D%20Archive%20-%20receive%20callback%20archival&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="019558.html">
   <LINK REL="Next"  HREF="019562.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[jdev] Archive - receive callback archival</H1>
    <B>Siracusa, David</B> 
    <A HREF="mailto:jdev%40jabber.org?Subject=%5Bjdev%5D%20Archive%20-%20receive%20callback%20archival&In-Reply-To="
       TITLE="[jdev] Archive - receive callback archival">siracusa at sig.com
       </A><BR>
    <I>Wed Jun  9 10:47:24 CDT 2004</I>
    <P><UL>
        <LI>Previous message: <A HREF="019558.html">[jdev] Whiteboard.
</A></li>
        <LI>Next message: <A HREF="019562.html">[jdev] Jabber subscribe ?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19561">[ date ]</a>
              <a href="thread.html#19561">[ thread ]</a>
              <a href="subject.html#19561">[ subject ]</a>
              <a href="author.html#19561">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello:

1. I need to persist the archive messages in a database.  I can't save
off the whole XML in a blob.  I could really use the maximum (or likely)
sizes encountered in the archive xml route (receive) callback in order
to setup/correct the schema.

My predecessor defined the following:
	route -&gt; direction  		- 	varchar2(16 byte)
not null,
	route -&gt; timestamp   	-	date                    not
null,
	route -&gt; to          	-	varchar2(1024 byte)     not
null,
	route -&gt; type        	-	varchar2(64 byte)       not
null,
	message -&gt; id         	-	varchar2(64 byte)       not
null,
	message -&gt; from        	-	varchar2(1024 byte)     not
null,
	message -&gt; to          	-	varchar2(1024 byte)     not
null,
	message -&gt; type        	- 	varchar2(64 byte)       not
null,
	message -&gt; xmlns       	-	varchar2(1024 byte),
	message -&gt; subject     	-	varchar2(1024 byte),
	message -&gt; thread      	-	varchar2(1024 byte),
	message -&gt; body        	-	varchar2(4000 byte),
	message -&gt; error       	-	varchar2(1024 byte),
	message -&gt; error_code  	-	number(9),

I found
<A HREF="http://support.jabber.com/troubleshooting/pdf/OracleExtensionManual1_2.p">http://support.jabber.com/troubleshooting/pdf/OracleExtensionManual1_2.p</A>
df which helps some.

Some columns seem too big while others too small.  For example I can
send body text greater than 4k from client to client.

Thanks,
Dave Siracusa

=============================================================

A sample xml route transcript looks like:
	&lt;route 
		direction='out' 
		stamp='20040609T12:07:23' 
		to='<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">archive at archive.company.com</A>' 
		type='archive'&gt;
		&lt;message 
			from='<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">siracusa at jabber.company.com</A>/Desktop' 
			id='31965382-20ab-4f19-a167-45542b99a35a' 
			to='<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">user at jabber.company.com</A>' type='chat' 
			xml:lang='en-US'&gt;
			&lt;body&gt;Body Text&lt;/body&gt;
			&lt;subject&gt;Message# 1&lt;/subject&gt;
		&lt;/message&gt;
	&lt;/route&gt;



IMPORTANT: The information contained in this email and/or its attachments is confidential. If you are not the intended recipient, please notify the sender immediately by reply and immediately delete this message and all its attachments.  Any review, use, reproduction, disclosure or dissemination of this message or any attachment by an unintended recipient is strictly prohibited.  Neither this message nor any attachment is intended as or should be construed as an offer, solicitation or recommendation to buy or sell any security or other financial instrument.  Neither the sender, his or her employer nor any of their respective affiliates makes any warranties as to the completeness or accuracy of any of the information contained herein or that this message or any of its attachments is free of viruses.


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="019558.html">[jdev] Whiteboard.
</A></li>
	<LI>Next message: <A HREF="019562.html">[jdev] Jabber subscribe ?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19561">[ date ]</a>
              <a href="thread.html#19561">[ thread ]</a>
              <a href="subject.html#19561">[ subject ]</a>
              <a href="author.html#19561">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://mail.jabber.org/mailman/listinfo/jdev">More information about the JDev
mailing list</a><br>
</body></html>
