<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [jdev] saslprep and nodeprep
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:jdev%40jabber.org?Subject=Re%3A%20%5Bjdev%5D%20saslprep%20and%20nodeprep&In-Reply-To=%3CCALm9TZ-b8J5Z-du_AUjmHBy%2BBDbJeAGcBN%3D-O%3D7NeyNTiSnN9w%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="089190.html">
   <LINK REL="Next"  HREF="089192.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[jdev] saslprep and nodeprep</H1>
    <B>Waqas Hussain</B> 
    <A HREF="mailto:jdev%40jabber.org?Subject=Re%3A%20%5Bjdev%5D%20saslprep%20and%20nodeprep&In-Reply-To=%3CCALm9TZ-b8J5Z-du_AUjmHBy%2BBDbJeAGcBN%3D-O%3D7NeyNTiSnN9w%40mail.gmail.com%3E"
       TITLE="[jdev] saslprep and nodeprep">waqas20 at gmail.com
       </A><BR>
    <I>Wed Sep 26 16:15:19 UTC 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="089190.html">[jdev] saslprep and nodeprep
</A></li>
        <LI>Next message: <A HREF="089192.html">[jdev] saslprep and nodeprep
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#89191">[ date ]</a>
              <a href="thread.html#89191">[ thread ]</a>
              <a href="subject.html#89191">[ subject ]</a>
              <a href="author.html#89191">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Wed, Sep 26, 2012 at 8:38 PM, Peter Saint-Andre &lt;<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">stpeter at stpeter.im</A>&gt; wrote:
&gt;<i> -----BEGIN PGP SIGNED MESSAGE-----
</I>&gt;<i> Hash: SHA1
</I>&gt;<i>
</I>&gt;<i> On 9/26/12 9:29 AM, Waqas Hussain wrote:
</I>&gt;&gt;<i> On Tue, Sep 25, 2012 at 11:50 PM, Peter Saint-Andre
</I>&gt;&gt;<i> &lt;<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">stpeter at stpeter.im</A>&gt; wrote:
</I>&gt;&gt;&gt;<i> -----BEGIN PGP SIGNED MESSAGE----- Hash: SHA1
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Just FYI, I compared SASLprep (RFC 4013) and Nodeprep (RFC 3920)
</I>&gt;&gt;&gt;<i> recently and it seems that any XMPP localpart that conforms to
</I>&gt;&gt;&gt;<i> Nodeprep also conforms to SASLprep
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Correct. A localpart conforming to nodeprep also conforms to
</I>&gt;&gt;<i> saslprep.
</I>&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> , so there is no need to perform separate SASLprep processing in
</I>&gt;&gt;&gt;<i> XMPP client and server code. If you disagree with my conclusions,
</I>&gt;&gt;&gt;<i> please let me know. :)
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Peter
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Not true. SASLprep maps non-ASCII space characters [StringPrep,
</I>&gt;&gt;<i> C.1.2] to SPACE (U+0020). Nodeprep forbids C.1.2 characters.
</I>&gt;<i>
</I>&gt;<i> Right, so a string that passes Nodeprep will not include non-ASCII
</I>&gt;<i> space characters. Thus there's no need to map those characters to
</I>&gt;<i> U+0020 as in SASLprep, since they won't be in the string.
</I>&gt;<i>
</I>&gt;&gt;<i> A string with non-ASCII space characters needs to be saslprepped
</I>&gt;&gt;<i> before it can pass nodeprep.
</I>&gt;<i>
</I>&gt;<i> Why would you saslprep a string before nodeprepping it? It seems more
</I>&gt;<i> natural to nodeprep a string before saslprepping it (since this is
</I>&gt;<i> XMPP and you'll need to nodeprep it anyway at some point), in which
</I>&gt;<i> case you can just do nodeprepping and not worry about saslprepping.
</I>&gt;<i>
</I>
You have to apply SASLprep as part of the SASL layer, which passes the
extracted authentication string to the XMPP (or other) layer, which
then applies NODEprep. However, all of this is moot given how ASCII
spaces are not allowed in XMPP localparts in the first place. So, yes,
you can skip SASLprep if you apply NODEprep.

This does bring up an interesting side issue: Passwords used in XMPP
should get SASLprep applied on SASL auth (and SASL PLAIN also forbids
a zero character password) . However, IBR and ad-hoc based service
administration allow creating and setting passwords which wouldn't
allow SASL based login.

--
Waqas Hussain
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="089190.html">[jdev] saslprep and nodeprep
</A></li>
	<LI>Next message: <A HREF="089192.html">[jdev] saslprep and nodeprep
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#89191">[ date ]</a>
              <a href="thread.html#89191">[ thread ]</a>
              <a href="subject.html#89191">[ subject ]</a>
              <a href="author.html#89191">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://mail.jabber.org/mailman/listinfo/jdev">More information about the JDev
mailing list</a><br>
</body></html>
