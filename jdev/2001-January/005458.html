<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [JDEV] Jabber Server faild in testing
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:jdev%40jabber.org?Subject=%5BJDEV%5D%20Jabber%20Server%20faild%20in%20testing&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="005456.html">
   <LINK REL="Next"  HREF="005461.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[JDEV] Jabber Server faild in testing</H1>
    <B>Gang Liu</B> 
    <A HREF="mailto:jdev%40jabber.org?Subject=%5BJDEV%5D%20Jabber%20Server%20faild%20in%20testing&In-Reply-To="
       TITLE="[JDEV] Jabber Server faild in testing">gang_l at 21cn.com
       </A><BR>
    <I>Fri Jan  5 09:31:09 CST 2001</I>
    <P><UL>
        <LI>Previous message: <A HREF="005456.html">[JDEV] Jabber 1.4 and ICQ transport
</A></li>
        <LI>Next message: <A HREF="005461.html">[JDEV] Jabber Server faild in testing
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5458">[ date ]</a>
              <a href="thread.html#5458">[ thread ]</a>
              <a href="subject.html#5458">[ subject ]</a>
              <a href="author.html#5458">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

	I run jabber 1.2 in my linux box which is redhat 6.1. I setup jabberd with jpolld succefully.Jabberd is pre-compiled downloaded from jabber.org. 
	I do tests to see how stable the jabberd is. But the linux box crashed in my tests.There is some information about jabber and linux.
	Thank you for your help.

[<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">root at dev</A> /]# uname -a
Linux dev.vista.internal 2.2.16 #5 Sat Dec 2 23:01:23 CST 2000 i686 unknown

[<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">root at dev</A> /]# ulimit -a
core file size (blocks)  1000000
data seg size (kbytes)   unlimited
file size (blocks)       unlimited
max memory size (kbytes) unlimited
stack size (kbytes)      8192
cpu time (seconds)       unlimited
max user processes       2045
pipe size (512 bytes)    8
open files               8192
virtual memory (kbytes)  2105343

last information about jabber:

1. top message
 10:55pm  up  9:28,  2 users,  load average: 1.57, 0.86, 0.37
42 processes: 36 sleeping, 6 running, 0 zombie, 0 stopped
CPU states: 59.2% user, 21.1% system,  0.0% nice, 19.5% idle
Mem:   63268K av,  62244K used,   1024K free,   1980K shrd,   1308K buff
Swap: 265032K av,  31304K used, 233728K free                  1768K cached

  PID USER     PRI  NI  SIZE  RSS SHARE STAT  LIB %CPU %MEM   TIME COMMAND
  620 jabber    19   0 26276  14M   460 R       0 41.3 23.8   3:35 jabberd
  622 jabber    11   0 49648  36M   392 R       0 29.3 59.1   1:43 jpolld
  896 root       2   0   184  120    80 R       0  5.6  0.1   0:22 simulator


2. simulator output msg
OUT: 30208 msgs, 511 new in 4 secs 71532 bytes = 17883 bytes/sec
 368 users connected
 369 users connected
 370 users connected
OUT: 30720 msgs, 511 new in 3 secs 72307 bytes = 24102 bytes/sec
 371 users connected
 372 users connected
 373 users connected

3. jabber error.log
20010105T07:44:46: [warn] (192.168.0.2): xdb_file failed to open file ./spool/19
2.168.0.2/r1365.xml: No such file or directory
20010105T07:44:46: [warn] (192.168.0.2): xdb_file failed to open file ./spool/19
2.168.0.2/r1202.xml: No such file or directory
20010105T07:44:48: [warn] (192.168.0.2): xdb_file failed to open file ./spool/19
2.168.0.2/r2911.xml: No such file or directory
20010105T07:44:50: [warn] (192.168.0.2): xdb_file failed to open file ./spool/19
2.168.0.2/r2699.xml: No such file or directory
20010105T07:44:50: [warn] (192.168.0.2): xdb_file failed to open file ./spool/19
2.168.0.2/r3014.xml: No such file or directory
20010105T07:44:50: [warn] (192.168.0.2): xdb_file failed to open file ./spool/19
2.168.0.2/r1672.xml: No such file or directory
20010105T07:44:52: [warn] (192.168.0.2): xdb_file failed to open file ./spool/19
2.168.0.2/r1272.xml: No such file or directory
20010105T07:44:52: [warn] (192.168.0.2): xdb_file failed to open file ./spool/19
2.168.0.2/r3908.xml: No such file or directory
20010105T14:47:22: [warn] (-internal): Packet Delivery Failed, invalid packet, d
ropping &lt;route type='error' from='<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">1026 at c2s</A>/142175880'/&gt;

4. /var/log/message
Jan  5 22:27:46 dev named[399]: XSTATS 978704866 978672466 RR=75 RNXD=9 RFwdR=38
 RDupR=10 RFail=0 RFErr=0 RErr=0 RAXFR=0 RLame=0 ROpts=0 SSysQ=19 SAns=592 SFwdQ
=32 SDupQ=39 SErr=0 RQ=632 RIQ=0 RFwdQ=0 RDupQ=10 RTCP=0 SFwdR=38 SFail=0 SFErr=
0 SNaAns=589 SNXD=481
Jan  5 22:46:41 dev PAM_pwdb[860]: (login) session opened for user liugang by (u
id=0)
Jan  5 22:46:49 dev PAM_pwdb[875]: (su) session opened for user root by liugang(
uid=501)
Jan  5 22:52:03 dev named[399]: unapproved query from [61.141.229.8].137 for &quot;PN
PDATA.vista&quot;
Jan  5 22:53:03 dev named[399]: unapproved query from [61.141.229.8].137 for &quot;PN
PDATA.vista&quot;
Jan  5 22:55:03 dev last message repeated 2 times
Jan  5 23:09:56 dev syslogd 1.3-3: restart.
Jan  5 23:09:56 dev syslog: syslogd startup succeeded
Jan  5 23:09:56 dev syslog: klogd startup succeeded
Jan  5 23:09:56 dev kernel: klogd 1.3-3, log source = /proc/kmsg started.
Jan  5 23:09:57 dev kernel: Inspecting /boot/System.map-2.2.16
Jan  5 23:09:57 dev kernel: Loaded 6189 symbols from /boot/System.map-2.2.16.
Jan  5 23:09:57 dev kernel: Symbols match kernel version 2.2.16.
Jan  5 23:09:57 dev kernel: No module symbols loaded.
Jan  5 23:09:57 dev kernel: Linux version 2.2.16 (<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">root at dev.vista.internal</A>) (gcc
version egcs-2.91.66 19990314/Linux (egcs-1.1.2 release)) #5 Sat Dec

5. jabber.xml
&lt;jabber&gt;


  &lt;!--
  This is the Jabber Server configuration file.  
  The file is broken into different sections based on the services being managed by jabberd, the server daemon.
  Most of the important sections are commented on and easy to modify, full instructions are contained at <A HREF="http://docs.jabber.org/.">http://docs.jabber.org/.</A>
  When you see a tag like &quot;jabberd:cmdline&quot;, it's automatically replaced on startup with the command line flag to jabberd.
  --&gt;


  &lt;!-- This section is for the session manager, the most important component within the server. --&gt;
  &lt;service id=&quot;sessions&quot;&gt;

    &lt;!-- 
    Change hostname below to something other than &quot;localhost&quot;, or use the &quot;jabberd -h hostname&quot; command line flag.
    Multiple &lt;host&gt;...&lt;/host&gt; entries are allowed, each one is a seperate virtual server.
    --&gt;
    &lt;host&gt;dev.vista.internal&lt;/host&gt;
    &lt;host&gt;192.168.0.2&lt;/host&gt;
    &lt;host&gt;&lt;jabberd:cmdline flag=&quot;h&quot;/&gt;&lt;/host&gt;

    &lt;!-- This is the custom configuration section for the session manager. --&gt;
    &lt;jsm xmlns=&quot;jabber:config:jsm&quot;&gt;

      &lt;info&gt;
        &lt;name&gt;Jabber Server&lt;/name&gt;
        &lt;description&gt;A Jabber Server!&lt;/description&gt;
        &lt;url&gt;<A HREF="http://foo.bar/&lt;/url">http://foo.bar/&lt;/url</A>&gt;
      &lt;/info&gt;

      &lt;register&gt;
        &lt;instructions&gt;Choose a username and password to register with this server.&lt;/instructions&gt;
        &lt;name/&gt;&lt;email/&gt;
      &lt;/register&gt;

      &lt;agents&gt;

        &lt;!-- This is the default agent for the master jabber user directory, this section can be duplicated for additional user custom/company directories. --&gt;
        &lt;agent jid=&quot;users.jabber.org&quot;&gt;
          &lt;name&gt;Jabber User Directory&lt;/name&gt;
          &lt;description&gt;You may register and create a public searchable profile, and search for other registered Jabber users.&lt;/description&gt;
          &lt;service&gt;jud&lt;/service&gt;
          &lt;register/&gt;
          &lt;search/&gt;
        &lt;/agent&gt;

        &lt;!-- These are just examples, you will receive instructions on what to place here when you install a real agent.
        &lt;agent jid=&quot;aim.jabber.org&quot;&gt;
          &lt;name&gt;AIM Transport&lt;/name&gt;
          &lt;description&gt;This is the AIM Transport&lt;/description&gt;
          &lt;transport&gt;AIM/AOL ScreenName&lt;/transport&gt;
          &lt;service&gt;aim&lt;/service&gt;
          &lt;register/&gt;
        &lt;/agent&gt;
        &lt;agent jid=&quot;icq.jabber.org&quot;&gt;
          &lt;name&gt;ICQ Transport&lt;/name&gt;
          &lt;description&gt;This is the ICQ Transport&lt;/description&gt;
          &lt;transport&gt;ICQ#&lt;/transport&gt;
          &lt;service&gt;icq&lt;/service&gt;
          &lt;register/&gt;
        &lt;/agent&gt;
        --&gt;
  	&lt;!-- This is OK, config two --&gt;
        &lt;agent jid=&quot;conference.vista.internal&quot;&gt;
          &lt;name&gt;Group Conferencing&lt;/name&gt;
          &lt;description&gt;You can create and participate in private chatrooms.&lt;/description&gt;
          &lt;service&gt;conference.vista.internal&lt;/service&gt;
          &lt;groupchat/&gt;
          &lt;register/&gt;
        &lt;/agent&gt;

      &lt;/agents&gt;

      &lt;!-- Session log file --&gt;
      &lt;log&gt;
        &lt;file&gt;session.log&lt;/file&gt;
        &lt;type&gt;session&lt;/type&gt;
      &lt;/log&gt;

      &lt;!-- List of IDs with administrative access, all will receive administrator messages
      &lt;admin&gt;
        &lt;read&gt;<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">support at localhost</A>&lt;/read&gt;
        &lt;write&gt;<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">admin at localhost</A>&lt;/write&gt;
      &lt;/admin&gt;
      --&gt;

      &lt;!-- Server version update notification, set to the server name so that all administrators (above) will be notified, or set to any ID
      &lt;update&gt;&lt;jabberd:cmdline flag=&quot;h&quot;/&gt;&lt;/update&gt; --&gt;

    &lt;/jsm&gt;

    &lt;!-- This section dynamically loads the session manager, remove or comment out modules to disable them. --&gt;
    &lt;load main=&quot;jsm&quot;&gt;
      &lt;jsm&gt;./jsm.so&lt;/jsm&gt;
      &lt;mod_echo&gt;./jsm.so&lt;/mod_echo&gt;
      &lt;mod_roster&gt;./jsm.so&lt;/mod_roster&gt;
      &lt;mod_time&gt;./jsm.so&lt;/mod_time&gt;
      &lt;mod_vcard&gt;./jsm.so&lt;/mod_vcard&gt;
      &lt;mod_version&gt;./jsm.so&lt;/mod_version&gt;
      &lt;mod_announce&gt;./jsm.so&lt;/mod_announce&gt;
      &lt;mod_agents&gt;./jsm.so&lt;/mod_agents&gt;
      &lt;mod_admin&gt;./jsm.so&lt;/mod_admin&gt;
      &lt;mod_private&gt;./jsm.so&lt;/mod_private&gt;
      &lt;mod_filter&gt;./jsm.so&lt;/mod_filter&gt;
      &lt;mod_presence&gt;./jsm.so&lt;/mod_presence&gt;
      &lt;mod_auth_plain&gt;./jsm.so&lt;/mod_auth_plain&gt;
      &lt;mod_auth_digest&gt;./jsm.so&lt;/mod_auth_digest&gt;
      &lt;mod_auth_0k&gt;./jsm.so&lt;/mod_auth_0k&gt;
      &lt;mod_register&gt;./jsm.so&lt;/mod_register&gt;
      &lt;mod_log&gt;./jsm.so&lt;/mod_log&gt;
    &lt;/load&gt;

  &lt;/service&gt;


  &lt;!-- This component handles all data storage, using the filesystem. --&gt;
  &lt;xdb id=&quot;xdb&quot;&gt;
    &lt;host/&gt;
    &lt;load&gt;&lt;xdb_file&gt;./xdb_file.so&lt;/xdb_file&gt;&lt;/load&gt;
    &lt;xdb_file xmlns=&quot;jabber:config:xdb_file&quot;&gt;&lt;spool&gt;./spool&lt;/spool&gt;&lt;/xdb_file&gt;
  &lt;/xdb&gt;


  &lt;!-- Service to manage incoming client socket connections. --&gt;
  &lt;service id=&quot;c2s&quot;&gt;
         &lt;host&gt;jpolld.192.168.0.2&lt;/host&gt;
         &lt;accept&gt;
             &lt;ip/&gt;
             &lt;port&gt;5225&lt;/port&gt;
             &lt;secret&gt;secret&lt;/secret&gt;
         &lt;/accept&gt;
   &lt;/service&gt;


  &lt;!-- Default server logging component, copies to a file and STDERR. --&gt;
  &lt;log id='logger'&gt;
    &lt;host/&gt;
    &lt;format&gt;%d: [%t] (%h): %s&lt;/format&gt;
    &lt;file&gt;error.log&lt;/file&gt;
    &lt;stderr/&gt;
  &lt;/log&gt;


  &lt;!-- The following two services are for handling server to server traffic. --&gt;


  &lt;!-- External asychronous DNS resolver --&gt;
  &lt;service id=&quot;dnsrv&quot;&gt;
    &lt;host/&gt;
    &lt;load&gt;&lt;dnsrv&gt;./dnsrv.so&lt;/dnsrv&gt;&lt;/load&gt;
    &lt;dnsrv xmlns=&quot;jabber:config:dnsrv&quot;&gt;
    	&lt;resend service=&quot;_jabber._tcp&quot;&gt;s2s&lt;/resend&gt; &lt;!-- for supporting SRV records --&gt;
    	&lt;resend&gt;s2s&lt;/resend&gt; 
    &lt;/dnsrv&gt;
  &lt;/service&gt;


  &lt;!-- Handles server connections and dialback hostname verification --&gt;
  &lt;service id=&quot;s2s&quot;&gt;
    &lt;load&gt;&lt;pthsock_server&gt;./pthsock_server.so&lt;/pthsock_server&gt;&lt;/load&gt;
    &lt;pthssock xmlns='jabber:config:pth-ssock'&gt;
      &lt;legacy/&gt; &lt;!-- allow communication with old 1.0-style servers --&gt;
      &lt;rate time=&quot;5&quot; points=&quot;25&quot;/&gt; &lt;!-- 25 connects in 5 seconds limit (per IP) --&gt;
      &lt;!-- Karma based I/O rate limits, per connection, set a little higher for server connections --&gt;
      &lt;karma&gt;
        &lt;max&gt;30&lt;/max&gt;
        &lt;inc&gt;2&lt;/inc&gt;
        &lt;dec&gt;1&lt;/dec&gt;
        &lt;restore&gt;15&lt;/restore&gt;
        &lt;penalty&gt;-1&lt;/penalty&gt;
      &lt;/karma&gt;
      &lt;!-- Use these to listen on particular addresses and/or ports.
      &lt;ip port=&quot;7000&quot;/&gt;
      &lt;ip port=&quot;5269&quot;&gt;127.0.0.1&lt;/ip&gt;
      --&gt;
    &lt;/pthssock&gt;
  &lt;/service&gt;

  &lt;!-- GroupChat --&gt;
  &lt;!-- This is OK, config one --&gt;
  &lt;!--
  &lt;service id=&quot;groupchat_transport&quot;&gt;
    &lt;host&gt;conference.vista.internal&lt;/host&gt;
    &lt;exec&gt;jabberd -c ./jabberd_groupchat.xml&lt;/exec&gt;
  &lt;/service&gt;
  --&gt;

  &lt;!-- This is OK, config two --&gt;
  &lt;service id=&quot;conference.vista.internal&quot;&gt;
    &lt;load&gt;&lt;groupchat&gt;./groupchat.so&lt;/groupchat&gt;&lt;/load&gt;
    &lt;config xmlns=&quot;jabberd:gc:config&quot;&gt;
    &lt;history&gt;20&lt;/history&gt;
    &lt;/config&gt;
  &lt;/service&gt;

  &lt;log id=&quot;gc_log&quot;&gt;
    &lt;file&gt;./grouchat.log&lt;/file&gt;
  &lt;/log&gt;


&lt;/jabber&gt;

6. simulate.cfg
server=192.168.0.2
port=5222
users=512
message_delay=2
login_delay=1
login_duration=300000
user_letter=r
message=Hi There      
message=How are you? 
message=This is a long, \
        multiline message.
message=This message should be quite a bit longer than the others. \
        I dunno why it should be longer, I just decided that it should, \
        that's all!
message=This is another short message!

 
Regards,

- Lg

2001-1-5 23:02:09

--
  Gang Liu / Vista Team / ShenZhen City / China
  Email: <A HREF="http://mail.jabber.org/mailman/listinfo/jdev">gang_l at 21cn.com</A> &amp; <A HREF="http://mail.jabber.org/mailman/listinfo/jdev">gang_l at hotmail.com</A>
  Phone: +86 13923425035   
  ICQ: 70670666   Jabber: <A HREF="http://mail.jabber.org/mailman/listinfo/jdev">gang_l at jabber.org</A>





</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="005456.html">[JDEV] Jabber 1.4 and ICQ transport
</A></li>
	<LI>Next message: <A HREF="005461.html">[JDEV] Jabber Server faild in testing
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5458">[ date ]</a>
              <a href="thread.html#5458">[ thread ]</a>
              <a href="subject.html#5458">[ subject ]</a>
              <a href="author.html#5458">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://mail.jabber.org/mailman/listinfo/jdev">More information about the JDev
mailing list</a><br>
</body></html>
