<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [JDEV] Has anyone .. please tell me how! :-)
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:jdev%40jabber.org?Subject=%5BJDEV%5D%20Has%20anyone%20..%20please%20tell%20me%20how%21%20%3A-%29&In-Reply-To=AFAFD7CD011BD41196F400B0D020D6A0F4F8%40exchgbtr">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="005563.html">
   <LINK REL="Next"  HREF="005575.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[JDEV] Has anyone .. please tell me how! :-)</H1>
    <B>Dennis Noordsij</B> 
    <A HREF="mailto:jdev%40jabber.org?Subject=%5BJDEV%5D%20Has%20anyone%20..%20please%20tell%20me%20how%21%20%3A-%29&In-Reply-To=AFAFD7CD011BD41196F400B0D020D6A0F4F8%40exchgbtr"
       TITLE="[JDEV] Has anyone .. please tell me how! :-)">dennis.noordsij at wiral.com
       </A><BR>
    <I>Wed Jan 10 12:53:03 CST 2001</I>
    <P><UL>
        <LI>Previous message: <A HREF="005563.html">[JDEV] Has anyone ever actually TESTED this ?????
</A></li>
        <LI>Next message: <A HREF="005575.html">[JDEV] FLASH ?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5573">[ date ]</a>
              <a href="thread.html#5573">[ thread ]</a>
              <a href="subject.html#5573">[ subject ]</a>
              <a href="author.html#5573">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Wednesday 10 January 2001 18:56, Matt Diez wrote:
&gt;<i> Yes, and I've got one running! It took a fair amount
</I>&gt;<i> of jabber.xml wackiness, but I have base_accept handler
</I>&gt;<i> using JabberBeans running successfully under Jabber 1.2.
</I>&gt;<i>
</I>&gt;<i> When trying under a 2-week old copy of the 1.3,
</I>&gt;<i> base_accept crashed freely and readily on me...
</I>&gt;<i>
</I>&gt;<i> I've only had Jabber 1.2 crash on me using the
</I>&gt;<i> base_connect handler (which, mind you, was
</I>&gt;<i> quite a bit easier to set up).
</I>&gt;<i>
</I>&gt;<i> Can I have a peek at your jabber.xml setup?
</I>&gt;<i>
</I>&gt;<i> Matthew D. Diez
</I>

Hi Matthew,

It basically looks like this:

&lt;xdb id=xdb&gt;
  &lt;host/&gt;
  &lt;accept&gt;
    &lt;ip&gt;jabber.mydomain.com&lt;/ip&gt;
    &lt;port&gt;1050&lt;/port&gt;
    &lt;secret&gt;tetrahydracanabinol&lt;/secret&gt;
  &lt;/accept&gt;
&lt;/xdb&gt;

This is the only xdb entry in jabber.xml, and replaces the xdb_file.so entry.

The XML received and returned by this external program is completely 100% 
identical to the XML received and returned by xdb_file.so, except jabber 
segfaults very fast after 2 received packets. 

The dumps below show the XML sent and received, and apart from the xdb 
results initially coming in from base_accept, and of course no xdb_file.so 
entries, these dumps are as far as I can tell completely identical.

Other people have reported the same problem, and acknowledged it is indeed a 
bug.

If you can tell me how to get this to work with jabber 1.2 (standard 1.2) I 
would be soooo grateful :-) It is absolutely necessary for my purposes.

Kind regards, and hope to hear from you soon,
Dennis



&gt;<i> For your enjoyment 2 dumps, spot the differences. One of them segfaults.
</I>&gt;<i> WHY?
</I>&gt;<i>
</I>&gt;<i> ---
</I>&gt;<i> Wed Jan 10 05:14:04 2001  authreg.c:52 auth request
</I>&gt;<i> Wed Jan 10 05:14:04 2001  users.c:147
</I>&gt;<i> js_user(<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">mitja at jabber.mydomain.com</A>/gabber,818B2E8)
</I>&gt;<i> Wed Jan 10 05:14:04 2001  users.c:159 js_user not current
</I>&gt;<i> Wed Jan 10 05:14:04 2001  deliver.c:472 DELIVER 2:jabber.mydomain.com &lt;xdb
</I>&gt;<i> type='get' to='<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">mitja at jabber.mydomain.com</A>/jabber:iq:auth'
</I>&gt;<i> from='jabber.mydomain.com'
</I>&gt;<i> id='1'/&gt;
</I>&gt;<i> Wed Jan 10 05:14:04 2001  deliver.c:344 delivering to instance 'xdb'
</I>&gt;<i> Wed Jan 10 05:14:04 2001  base_load.c:323 xdb_get() waiting for
</I>&gt;<i> <A HREF="http://mail.jabber.org/mailman/listinfo/jdev">mitja at jabber.mydomain.com</A>/gabber jabber:iq:auth
</I>&gt;<i> Wed Jan 10 05:14:04 2001  mtq 81ECBB0 starting
</I>&gt;<i> Wed Jan 10 05:14:04 2001  mtq 81ECBB0 leaving to pth
</I>&gt;<i> Wed Jan 10 05:14:04 2001  mtq 81FCE50 starting
</I>&gt;<i> Wed Jan 10 05:14:04 2001  mtq 81FCE50 leaving to pth
</I>&gt;<i> Wed Jan 10 05:14:04 2001  mtq 820D0F0 starting
</I>&gt;<i> Wed Jan 10 05:14:04 2001  mtq 820D0F0 leaving to pth
</I>&gt;<i> Wed Jan 10 05:14:04 2001  mtq 821D390 starting
</I>&gt;<i> Wed Jan 10 05:14:04 2001  mtq 821D390 leaving to pth
</I>&gt;<i> Wed Jan 10 05:14:04 2001  base_accept.c:341 io incoming message event for
</I>&gt;<i> 15 Wed Jan 10 05:14:04 2001  base_accept.c:328 io read event for 15
</I>&gt;<i> Wed Jan 10 05:14:04 2001  base_accept.c:213 base_accept: &lt;xdb id='1'
</I>&gt;<i> from='<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">mitja at jabber.mydomain.com</A>/jabber:iq:auth' to='jabber.mydomain.com'
</I>&gt;<i> type='result'&gt;&lt;password&gt;dapassword&lt;/password&gt;&lt;/xdb&gt;
</I>&gt;<i> Wed Jan 10 05:14:04 2001  deliver.c:472 DELIVER 1:jabber.mydomain.com &lt;xdb
</I>&gt;<i> id='1' from='<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">mitja at jabber.mydomain.com</A>/jabber:iq:auth'
</I>&gt;<i> to='jabber.mydomain.com'
</I>&gt;<i> type='result'&gt;&lt;password&gt;dapassword&lt;/password&gt;&lt;/xdb&gt;
</I>&gt;<i> Wed Jan 10 05:14:04 2001  deliver.c:344 delivering to instance 'sessions'
</I>&gt;<i> Wed Jan 10 05:14:04 2001  base_load.c:167 xdb_results checking xdb packet
</I>&gt;<i> &lt;xdb id='1' from='<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">mitja at jabber.mydomain.com</A>/jabber:iq:auth'
</I>&gt;<i> to='jabber.mydomain.com'
</I>&gt;<i> type='result'&gt;&lt;password&gt;dapassword&lt;/password&gt;&lt;/xdb&gt; Wed Jan 10 05:14:04
</I>&gt;<i> 2001  base_load.c:327 xdb_get() done waiting for
</I>&gt;<i> <A HREF="http://mail.jabber.org/mailman/listinfo/jdev">mitja at jabber.mydomain.com</A>/gabber jabber:iq:auth
</I>&gt;<i> Wed Jan 10 05:14:04 2001  users.c:179 js_user debug 822D808 822D808
</I>&gt;<i> Wed Jan 10 05:14:04 2001  modules.c:127 mapi_call 5
</I>&gt;<i> Wed Jan 10 05:14:04 2001  modules.c:150 MAPI 810B748
</I>&gt;<i> Wed Jan 10 05:14:04 2001  mod_auth_plain checking
</I>&gt;<i> Wed Jan 10 05:14:04 2001  modules.c:150 MAPI 810B7A8
</I>&gt;<i> Wed Jan 10 05:14:04 2001  mod_auth_digest checking
</I>&gt;<i> Wed Jan 10 05:14:04 2001  deliver.c:472 DELIVER 2:jabber.mydomain.com &lt;xdb
</I>&gt;<i> type='get' to='<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">mitja at jabber.mydomain.com</A>/jabber:iq:auth'
</I>&gt;<i> from='jabber.mydomain.com'
</I>&gt;<i> id='2'/&gt;
</I>&gt;<i> Wed Jan 10 05:14:04 2001  deliver.c:344 delivering to instance 'xdb'
</I>&gt;<i> Wed Jan 10 05:14:04 2001  base_load.c:323 xdb_get() waiting for
</I>&gt;<i> <A HREF="http://mail.jabber.org/mailman/listinfo/jdev">mitja at jabber.mydomain.com</A> jabber:iq:auth
</I>&gt;<i> Wed Jan 10 05:14:04 2001  base_accept.c:341 io incoming message event for
</I>&gt;<i> 15 Wed Jan 10 05:14:04 2001  base_accept.c:328 io read event for 15
</I>&gt;<i> Wed Jan 10 05:14:04 2001  base_accept.c:213 base_accept: &lt;xdb id='2'
</I>&gt;<i> from='<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">mitja at jabber.mydomain.com</A>/jabber:iq:auth' to='jabber.mydomain.com'
</I>&gt;<i> type='result'&gt;&lt;password&gt;dapassword&lt;/password&gt;&lt;/xdb&gt;
</I>&gt;<i> Wed Jan 10 05:14:04 2001  deliver.c:472 DELIVER 1:jabber.mydomain.com &lt;xdb
</I>&gt;<i> id='2' from='<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">mitja at jabber.mydomain.com</A>/jabber:iq:auth'
</I>&gt;<i> to='jabber.mydomain.com'
</I>&gt;<i> type='result'&gt;&lt;password&gt;dapassword&lt;/password&gt;&lt;/xdb&gt;
</I>&gt;<i> Wed Jan 10 05:14:04 2001  deliver.c:344 delivering to instance 'sessions'
</I>&gt;<i> Wed Jan 10 05:14:04 2001  base_load.c:167 xdb_results checking xdb packet
</I>&gt;<i> &lt;xdb id='2' from='<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">mitja at jabber.mydomain.com</A>/jabber:iq:auth'
</I>&gt;<i> to='jabber.mydomain.com'
</I>&gt;<i> type='result'&gt;&lt;password&gt;dapassword&lt;/password&gt;&lt;/xdb&gt; Wed Jan 10 05:14:04
</I>&gt;<i> 2001  base_load.c:327 xdb_get() done waiting for <A HREF="http://mail.jabber.org/mailman/listinfo/jdev">mitja at jabber.mydomain.com</A>
</I>&gt;<i> jabber:iq:auth
</I>&gt;<i> Wed Jan 10 05:14:04 2001  mod_auth_digest Got SID: 3A5BD37C
</I>&gt;<i> Wed Jan 10 05:14:04 2001  mod_auth_digest comparing
</I>&gt;<i> 8e27b43170e95ea62396869bd7085f76d214a70e
</I>&gt;<i> 8e27b43170e95ea62396869bd7085f76d214a70e
</I>&gt;<i> Wed Jan 10 05:14:04 2001  deliver.c:472 DELIVER 4:c2s &lt;route
</I>&gt;<i> from='<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">mitja at jabber.mydomain.com</A>/gabber' to='<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">19 at c2s</A>/8165F98' type='auth'&gt;&lt;iq
</I>&gt;<i> id='A0' type='result'/&gt;&lt;/route&gt;
</I>&gt;<i> Wed Jan 10 05:14:04 2001  deliver.c:344 delivering to instance 'c2s'
</I>&gt;<i> Wed Jan 10 05:14:04 2001  client.c:124 Found the sock for this user
</I>&gt;<i> Wed Jan 10 05:14:04 2001  client.c:141 auth for user successful
</I>&gt;<i> Wed Jan 10 05:14:04 2001  deliver.c:472 DELIVER 4:jabber.mydomain.com
</I>&gt;<i> &lt;route
</I>&gt;<i>
</I>&gt;<i> type='session' to='<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">mitja at jabber.mydomain.com</A>/gabber'
</I>&gt;<i> from='<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">19 at c2s</A>/8165F98'/&gt; Wed Jan 10 05:14:04 2001  deliver.c:344 delivering
</I>&gt;<i> to instance 'sessions' Wed Jan 10 05:14:04 2001  deliver.c:84
</I>&gt;<i> (80D69C8)incoming packet &lt;route type='session'
</I>&gt;<i> to='<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">mitja at jabber.mydomain.com</A>/gabber' from='<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">19 at c2s</A>/8165F98'/&gt;
</I>&gt;<i>
</I>&gt;<i> SEGFAULTS EITHER HERE OR AFTER THE LAST XDB_GET() DONE WAITING...
</I>&gt;<i> ---
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> ---
</I>&gt;<i> Wed Jan 10 05:16:39 2001  authreg.c:52 auth request
</I>&gt;<i> Wed Jan 10 05:16:39 2001  users.c:147
</I>&gt;<i> js_user(<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">mitja at jabber.mydomain.com</A>/gabber,8159C30)
</I>&gt;<i> Wed Jan 10 05:16:39 2001  users.c:159 js_user not current
</I>&gt;<i> Wed Jan 10 05:16:39 2001  deliver.c:472 DELIVER 2:jabber.mydomain.com &lt;xdb
</I>&gt;<i> type='get' to='<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">mitja at jabber.mydomain.com</A>/jabber:iq:auth'
</I>&gt;<i> from='jabber.mydomain.com'
</I>&gt;<i> id='1'/&gt;
</I>&gt;<i> Wed Jan 10 05:16:39 2001  deliver.c:344 delivering to instance 'xdb'
</I>&gt;<i> Wed Jan 10 05:16:39 2001  xdb_file.c:161 handling xdb request &lt;xdb
</I>&gt;<i> type='get'
</I>&gt;<i> to='<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">mitja at jabber.mydomain.com</A>/jabber:iq:auth' from='jabber.mydomain.com'
</I>&gt;<i> id='1'/&gt;
</I>&gt;<i> Wed Jan 10 05:16:39 2001  xdb_file.c:98 loading
</I>&gt;<i> ./spool/jabber.mydomain.com/mitja.xml
</I>&gt;<i> Wed Jan 10 05:16:39 2001  xdb_file.c:118 caching
</I>&gt;<i> ./spool/jabber.mydomain.com/mitja.xml
</I>&gt;<i> Wed Jan 10 05:16:39 2001  deliver.c:472 DELIVER 1:jabber.mydomain.com &lt;xdb
</I>&gt;<i> type='result' to='jabber.mydomain.com'
</I>&gt;<i> from='<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">mitja at jabber.mydomain.com</A>/jabber:iq:auth'
</I>&gt;<i> id='1'&gt;&lt;password&gt;dapassword&lt;/password&gt;&lt;/xdb&gt;
</I>&gt;<i> Wed Jan 10 05:16:39 2001  deliver.c:344 delivering to instance 'sessions'
</I>&gt;<i> Wed Jan 10 05:16:39 2001  base_load.c:167 xdb_results checking xdb packet
</I>&gt;<i> &lt;xdb type='result' to='jabber.mydomain.com'
</I>&gt;<i> from='<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">mitja at jabber.mydomain.com</A>/jabber:iq:auth'
</I>&gt;<i> id='1'&gt;&lt;password&gt;dapassword&lt;/password&gt;&lt;/xdb&gt;
</I>&gt;<i> Wed Jan 10 05:16:39 2001  users.c:179 js_user debug 81FC0B8 81FC0B8
</I>&gt;<i> Wed Jan 10 05:16:39 2001  modules.c:127 mapi_call 5
</I>&gt;<i> Wed Jan 10 05:16:39 2001  modules.c:150 MAPI 810BAD0
</I>&gt;<i> Wed Jan 10 05:16:39 2001  mod_auth_plain checking
</I>&gt;<i> Wed Jan 10 05:16:39 2001  modules.c:150 MAPI 810BB30
</I>&gt;<i> Wed Jan 10 05:16:39 2001  mod_auth_digest checking
</I>&gt;<i> Wed Jan 10 05:16:39 2001  deliver.c:472 DELIVER 2:jabber.mydomain.com &lt;xdb
</I>&gt;<i> type='get' to='<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">mitja at jabber.mydomain.com</A>/jabber:iq:auth'
</I>&gt;<i> from='jabber.mydomain.com'
</I>&gt;<i> id='2'/&gt;
</I>&gt;<i> Wed Jan 10 05:16:39 2001  deliver.c:344 delivering to instance 'xdb'
</I>&gt;<i> Wed Jan 10 05:16:39 2001  xdb_file.c:161 handling xdb request &lt;xdb
</I>&gt;<i> type='get'
</I>&gt;<i> to='<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">mitja at jabber.mydomain.com</A>/jabber:iq:auth' from='jabber.mydomain.com'
</I>&gt;<i> id='2'/&gt;
</I>&gt;<i> Wed Jan 10 05:16:39 2001  xdb_file.c:98 loading
</I>&gt;<i> ./spool/jabber.mydomain.com/mitja.xml
</I>&gt;<i> Wed Jan 10 05:16:39 2001  deliver.c:472 DELIVER 1:jabber.mydomain.com &lt;xdb
</I>&gt;<i> type='result' to='jabber.mydomain.com'
</I>&gt;<i> from='<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">mitja at jabber.mydomain.com</A>/jabber:iq:auth'
</I>&gt;<i> id='2'&gt;&lt;password&gt;dapassword&lt;/password&gt;&lt;/xdb&gt;
</I>&gt;<i> Wed Jan 10 05:16:39 2001  deliver.c:344 delivering to instance 'sessions'
</I>&gt;<i> Wed Jan 10 05:16:39 2001  base_load.c:167 xdb_results checking xdb packet
</I>&gt;<i> &lt;xdb type='result' to='jabber.mydomain.com'
</I>&gt;<i> from='<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">mitja at jabber.mydomain.com</A>/jabber:iq:auth'
</I>&gt;<i> id='2'&gt;&lt;password&gt;dapassword&lt;/password&gt;&lt;/xdb&gt;
</I>&gt;<i> Wed Jan 10 05:16:39 2001  mod_auth_digest Got SID: 3A5BD417
</I>&gt;<i> Wed Jan 10 05:16:39 2001  mod_auth_digest comparing
</I>&gt;<i> 732da8fcf49723d897e7767c6627f3a70558ca60
</I>&gt;<i> 732da8fcf49723d897e7767c6627f3a70558ca60
</I>&gt;<i> Wed Jan 10 05:16:39 2001  deliver.c:472 DELIVER 4:c2s &lt;route
</I>&gt;<i> from='<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">mitja at jabber.mydomain.com</A>/gabber' to='<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">17 at c2s</A>/8158228' type='auth'&gt;&lt;iq
</I>&gt;<i> id='A0' type='result'/&gt;&lt;/route&gt;
</I>&gt;<i> Wed Jan 10 05:16:39 2001  deliver.c:344 delivering to instance 'c2s'
</I>&gt;<i> Wed Jan 10 05:16:39 2001  client.c:124 Found the sock for this user
</I>&gt;<i> Wed Jan 10 05:16:39 2001  client.c:141 auth for user successful
</I>&gt;<i> Wed Jan 10 05:16:39 2001  deliver.c:472 DELIVER 4:jabber.mydomain.com
</I>&gt;<i> &lt;route
</I>&gt;<i>
</I>&gt;<i> type='session' to='<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">mitja at jabber.mydomain.com</A>/gabber'
</I>&gt;<i> from='<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">17 at c2s</A>/8158228'/&gt; Wed Jan 10 05:16:39 2001  deliver.c:344 delivering
</I>&gt;<i> to instance 'sessions' Wed Jan 10 05:16:39 2001  deliver.c:84
</I>&gt;<i> (80D6D50)incoming packet &lt;route type='session'
</I>&gt;<i> to='<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">mitja at jabber.mydomain.com</A>/gabber' from='<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">17 at c2s</A>/8158228'/&gt;
</I>&gt;<i>
</I>&gt;<i> CONTINUES HAPPILY
</I>&gt;<i> ---
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> jdev mailing list
</I>&gt;<i> <A HREF="http://mail.jabber.org/mailman/listinfo/jdev">jdev at jabber.org</A>
</I>&gt;<i> <A HREF="http://mailman.jabber.org/listinfo/jdev">http://mailman.jabber.org/listinfo/jdev</A>
</I>
----------------------------------------
Content-Type: text/html; charset=&quot;iso-8859-1&quot;; name=&quot;Attachment: 1&quot;
Content-Transfer-Encoding: 7bit
Content-Description: 
----------------------------------------


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="005563.html">[JDEV] Has anyone ever actually TESTED this ?????
</A></li>
	<LI>Next message: <A HREF="005575.html">[JDEV] FLASH ?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5573">[ date ]</a>
              <a href="thread.html#5573">[ thread ]</a>
              <a href="subject.html#5573">[ subject ]</a>
              <a href="author.html#5573">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://mail.jabber.org/mailman/listinfo/jdev">More information about the JDev
mailing list</a><br>
</body></html>
