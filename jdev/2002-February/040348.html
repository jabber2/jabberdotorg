<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> 1.4.2 - Test 2 (Was: Re: Re: [JDEV] reproducible crash)
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:jdev%40jabber.org?Subject=Re%3A%201.4.2%20-%20Test%202%20%28Was%3A%20Re%3A%20Re%3A%20%5BJDEV%5D%20reproducible%20crash%29&In-Reply-To=%3C1012852742.1375.6.camel%40cloud.home.alsutton.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="040345.html">
   <LINK REL="Next"  HREF="040349.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>1.4.2 - Test 2 (Was: Re: Re: [JDEV] reproducible crash)</H1>
    <B>Al Sutton</B> 
    <A HREF="mailto:jdev%40jabber.org?Subject=Re%3A%201.4.2%20-%20Test%202%20%28Was%3A%20Re%3A%20Re%3A%20%5BJDEV%5D%20reproducible%20crash%29&In-Reply-To=%3C1012852742.1375.6.camel%40cloud.home.alsutton.com%3E"
       TITLE="1.4.2 - Test 2 (Was: Re: Re: [JDEV] reproducible crash)">al at alsutton.com
       </A><BR>
    <I>Mon Feb  4 13:58:48 CST 2002</I>
    <P><UL>
        <LI>Previous message: <A HREF="040345.html">1.4.2 - Test 2 (Was: Re: Re: [JDEV] reproducible crash)
</A></li>
        <LI>Next message: <A HREF="040349.html">[JDEV] java jabber client
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#40348">[ date ]</a>
              <a href="thread.html#40348">[ thread ]</a>
              <a href="subject.html#40348">[ subject ]</a>
              <a href="author.html#40348">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>There are very few users, possibly 2 or 3 log in over the period of a
day, with one user always connected.
 
This snapshot was taken at random with only one user logged in.

I've just taken another random snapshot and got;

 19:53:53 up 103 days, 23:29,  4 users,  load average: 0.45, 0.51, 0.42
227 processes: 213 sleeping, 5 running, 8 zombie, 1 stopped
CPU states:  46.2% user,   6.2% system,   2.9% nice,  44.8% idle
Mem:    647252K total,   644776K used,     2476K free,    13156K buffers
Swap:   996020K total,   449104K used,   546916K free,   129416K cached

  PID USER     PRI  NI  SIZE  RSS SHARE STAT %CPU %MEM   TIME COMMAND
31864 alsutton  15   0  1888 1888   636 R    20.3  0.2  68:41 jabberd

and I've experienced load levels &gt;10% of CPU on almost every check I've
done (I disabled all transfers because the machine owners were
complaining it was maxing out one of the CPUs).

Al.



On Mon, 2002-02-04 at 17:58, Michael F. March wrote:
&gt;<i> Approximately how many concurrent users do you have logged on
</I>&gt;<i> when the load is that high?
</I>&gt;<i> 
</I>&gt;<i> &gt; Does CVS also include fixes for jabberd eating CPU like a hog?
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; I've been running 1.4.2-test2 without any transports and after less than
</I>&gt;<i> 48hrs this is my top output;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;  17:28:31 up 103 days, 21:04,  7 users,  load average: 0.99, 1.18, 1.32
</I>&gt;<i> &gt; 245 processes: 237 sleeping, 2 running, 5 zombie, 1 stopped
</I>&gt;<i> &gt; CPU states:  37.3% user,   8.1% system,   0.0% nice,  54.6% idle
</I>&gt;<i> &gt; Mem:    647252K total,   643404K used,     3848K free,    17064K buffers
</I>&gt;<i> &gt; Swap:   996020K total,   449696K used,   546324K free,   124376K cached
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;   PID USER     PRI  NI  SIZE  RSS SHARE STAT %CPU %MEM   TIME COMMAND
</I>&gt;<i> &gt; 31864 alsutton  14   0  1748 1748   620 S    26.3  0.2  46:58 jabberd
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; :(.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Al.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; &gt;&gt; Original Message from &quot;Thomas Muldowney&quot; &lt;<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">temas at box5.net</A>&gt; on Mon, 4 Feb
</I>&gt;<i> 2002 11:09:52 -0600 &lt;&lt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Definately upgrade your server.  There have been a ton of changes in CVS
</I>&gt;<i> &gt; since that time.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; --temas
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; ----- Original Message -----
</I>&gt;<i> &gt; From: <A HREF="http://mail.jabber.org/mailman/listinfo/jdev">tom_waters at mac.com</A>
</I>&gt;<i> &gt; To: <A HREF="http://mail.jabber.org/mailman/listinfo/jdev">jdev at jabber.org</A>
</I>&gt;<i> &gt; Sent: Saturday, February 02, 2002 9:43 PM
</I>&gt;<i> &gt; Subject: [JDEV] reproducible crash
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; My client wants to be able to create new user accounts after the user has
</I>&gt;<i> &gt; logged in...
</I>&gt;<i> &gt; I'm not sure if this is supposed to be allowed, but when I have the
</I>&gt;<i> &gt; following exchange with the server (build from CVS on 1/8/02)
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; &lt;?xml version='1.0'?&gt;&lt;stream:stream
</I>&gt;<i> &gt; xmlns:stream='<A HREF="http://etherx.jabber.org/streams'">http://etherx.jabber.org/streams'</A> id='3C5CAF04'
</I>&gt;<i> &gt; xmlns='jabber:client' from='myservername'&gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; &lt;iq type=&quot;set&quot; id=&quot;1001&quot;&gt;&lt;query
</I>&gt;<i> &gt;
</I>&gt;<i> xmlns=&quot;jabber:iq:auth&quot;&gt;&lt;username&gt;waters&lt;/username&gt;&lt;password&gt;jabber&lt;/password
</I>&gt;<i> &gt; &gt;&lt;resource&gt;InstantPictures&lt;/resource&gt;&lt;/query&gt;&lt;/iq&gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; &lt;iq type='result' id='1001'/&gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; &lt;iq type=&quot;get&quot; id=&quot;1002&quot;&gt;&lt;query xmlns=&quot;jabber:iq:register&quot;/&gt;&lt;/iq&gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; I get a segfault with the following jabberd -D output
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Sat Feb 2 19:39:54 2002 mio.c:608 mio while loop, working
</I>&gt;<i> &gt; Sat Feb 2 19:39:54 2002 mio.c:746 MIO read from socket 10: &lt;iq type=&quot;get&quot;
</I>&gt;<i> &gt; id=&quot;1002&quot;&gt;&lt;query xmlns=&quot;jabber:iq:register&quot;/&gt;&lt;/iq&gt;
</I>&gt;<i> &gt; Sat Feb 2 19:39:54 2002 c2s [client.c:266] pthsock_client_read called
</I>&gt;<i> with:
</I>&gt;<i> &gt; m:1A21D0 flag:3 arg:1A22F0
</I>&gt;<i> &gt; Sat Feb 2 19:39:54 2002 deliver.c:460 DELIVER 4:myservername &lt;route
</I>&gt;<i> &gt; to='<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">waters at myservername</A>/1AAB90' from='<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">10 at c2s</A>/1A21D0'&gt;&lt;iq type='get'
</I>&gt;<i> &gt; id='1002'&gt;&lt;query xmlns='jabber:iq:register'/&gt;&lt;/iq&gt;&lt;/route&gt;
</I>&gt;<i> &gt; Sat Feb 2 19:39:54 2002 deliver.c:664 delivering to instance 'sessions'
</I>&gt;<i> &gt; Sat Feb 2 19:39:54 2002 deliver.c:83 (17CB50)incoming packet &lt;route
</I>&gt;<i> &gt; to='<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">waters at myservername</A>/1AAB90' from='<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">10 at c2s</A>/1A21D0'&gt;&lt;iq type='get'
</I>&gt;<i> &gt; id='1002'&gt;&lt;query xmlns='jabber:iq:register'/&gt;&lt;/iq&gt;&lt;/route&gt;
</I>&gt;<i> &gt; Sat Feb 2 19:39:54 2002 users.c:132 js_user(<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">waters at myservername</A>,205000)
</I>&gt;<i> &gt; Sat Feb 2 19:39:54 2002 mtq 1A5620 entering from pth
</I>&gt;<i> &gt; Sat Feb 2 19:39:54 2002 mtq 1A5620 queue call 1A87D0
</I>&gt;<i> &gt; Sat Feb 2 19:39:54 2002 sessions.c:235 THREAD:SESSION:FROM received a
</I>&gt;<i> &gt; packet!
</I>&gt;<i> &gt; Sat Feb 2 19:39:54 2002 modules.c:124 mapi_call 1
</I>&gt;<i> &gt; Sat Feb 2 19:39:54 2002 modules.c:147 MAPI 1AAE40
</I>&gt;<i> &gt; Sat Feb 2 19:39:54 2002 modules.c:147 MAPI 1AAE50
</I>&gt;<i> &gt; Sat Feb 2 19:39:54 2002 modules.c:147 MAPI 1AAE80
</I>&gt;<i> &gt; Sat Feb 2 19:39:54 2002 modules.c:147 MAPI 1AAE90
</I>&gt;<i> &gt; Sat Feb 2 19:39:54 2002 modules.c:147 MAPI 1AAEA0
</I>&gt;<i> &gt; Sat Feb 2 19:39:54 2002 mod_filter.c:791
</I>&gt;<i> &gt; packet out from mod_filter
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Sat Feb 2 19:39:54 2002 modules.c:147 MAPI 1AAEB0
</I>&gt;<i> &gt; Sat Feb 2 19:39:54 2002 modules.c:147 MAPI 1AAF90
</I>&gt;<i> &gt; Sat Feb 2 19:39:54 2002 modules.c:147 MAPI 1AAFA0
</I>&gt;<i> &gt; Sat Feb 2 19:39:54 2002 modules.c:147 MAPI 1AAFD0
</I>&gt;<i> &gt; Sat Feb 2 19:39:54 2002 modules.c:164 mapi_call returning unhandled
</I>&gt;<i> &gt; Sat Feb 2 19:39:54 2002 dnsrv.c:144 dnsrv: Read error on coprocess(1): 1
</I>&gt;<i> &gt; Operation not permitted
</I>&gt;<i> &gt; Sat Feb 2 19:39:54 2002 dnsrv.c:158 DNSRV CHILD: out of loop.. exiting
</I>&gt;<i> &gt; normal
</I>&gt;<i> &gt; Segmentation fault
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; _______________________________________________
</I>&gt;<i> &gt; jdev mailing list
</I>&gt;<i> &gt; <A HREF="http://mail.jabber.org/mailman/listinfo/jdev">jdev at jabber.org</A>
</I>&gt;<i> &gt; <A HREF="http://mailman.jabber.org/listinfo/jdev">http://mailman.jabber.org/listinfo/jdev</A>
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; --
</I>&gt;<i> &gt; Al Sutton
</I>&gt;<i> &gt; <A HREF="http://mail.jabber.org/mailman/listinfo/jdev">al at alsutton.com</A>
</I>&gt;<i> &gt; _______________________________________________
</I>&gt;<i> &gt; jdev mailing list
</I>&gt;<i> &gt; <A HREF="http://mail.jabber.org/mailman/listinfo/jdev">jdev at jabber.org</A>
</I>&gt;<i> &gt; <A HREF="http://mailman.jabber.org/listinfo/jdev">http://mailman.jabber.org/listinfo/jdev</A>
</I>&gt;<i> 
</I>&gt;<i> _______________________________________________
</I>&gt;<i> jdev mailing list
</I>&gt;<i> <A HREF="http://mail.jabber.org/mailman/listinfo/jdev">jdev at jabber.org</A>
</I>&gt;<i> <A HREF="http://mailman.jabber.org/listinfo/jdev">http://mailman.jabber.org/listinfo/jdev</A>
</I>


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="040345.html">1.4.2 - Test 2 (Was: Re: Re: [JDEV] reproducible crash)
</A></li>
	<LI>Next message: <A HREF="040349.html">[JDEV] java jabber client
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#40348">[ date ]</a>
              <a href="thread.html#40348">[ thread ]</a>
              <a href="subject.html#40348">[ subject ]</a>
              <a href="author.html#40348">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://mail.jabber.org/mailman/listinfo/jdev">More information about the JDev
mailing list</a><br>
</body></html>
