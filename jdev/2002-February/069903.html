<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [JDEV] XDB / ODBC
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:jdev%40jabber.org?Subject=Re%3A%20%5BJDEV%5D%20XDB%20/%20ODBC&In-Reply-To=%3C3C7398E5.7080608%40matrix.mediasolv.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="069881.html">
   <LINK REL="Next"  HREF="069905.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[JDEV] XDB / ODBC</H1>
    <B>raditha dissanayake</B> 
    <A HREF="mailto:jdev%40jabber.org?Subject=Re%3A%20%5BJDEV%5D%20XDB%20/%20ODBC&In-Reply-To=%3C3C7398E5.7080608%40matrix.mediasolv.com%3E"
       TITLE="[JDEV] XDB / ODBC">raditha at matrix.mediasolv.com
       </A><BR>
    <I>Wed Feb 20 06:39:01 CST 2002</I>
    <P><UL>
        <LI>Previous message: <A HREF="069881.html">[JDEV] XDB / ODBC
</A></li>
        <LI>Next message: <A HREF="069905.html">[JDEV] XDB / ODBC
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#69903">[ date ]</a>
              <a href="thread.html#69903">[ thread ]</a>
              <a href="subject.html#69903">[ subject ]</a>
              <a href="author.html#69903">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi michael

I am trying to figure out what you are doing. Have you checked the 
xdb_sql module? it has support for connecting to a db through odbc?

Maybe if you send your debug log some one would be able to help.





Michel Oosterbeek wrote:

&gt;<i> Hi all,
</I>&gt;<i> 
</I>&gt;<i> So far I have gotten no response to my question. I really hope someone is
</I>&gt;<i> able to provide me with an answer as my graduation depends on it :o)
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> I'm using Jabber 1.4.1 on Red Hat 7.2 and I've tried to get XDB-ODBC
</I>&gt;<i> running, but for some reason nothing much seemed to happen.
</I>&gt;<i> 
</I>&gt;<i> Because after numerous attempts to get it right there were still no results,
</I>&gt;<i> I decided to give it a try myself, and started writing my own version. Again
</I>&gt;<i> I encountered a problem. I may have misunderstood the way xdb_file works,
</I>&gt;<i> but as far as I could comprehend the code, there are only two 'locations'
</I>&gt;<i> where the actual file (user.xml) is accessed:
</I>&gt;<i> 
</I>&gt;<i> In xdb_file.c:
</I>&gt;<i> 
</I>&gt;<i> - in the function  &quot;xdb_file_load&quot;  I found
</I>&gt;<i>   &quot;xmlnode_file(fname)&quot;   (I suppose this is where the read is done?)
</I>&gt;<i> - in the function &quot;xdb_file_phandler&quot;  I found
</I>&gt;<i>   &quot;xmlnode2file(full,file)&quot;   (so here the file is saved?)
</I>&gt;<i> 
</I>&gt;<i> And so all I did was simply replacing these two lines with my own 2
</I>&gt;<i> functions.  These functions simply &quot;cut&quot; the full pathname in to pieces and
</I>&gt;<i> determine the server_jid, username, etc...  Next, I use this info to store
</I>&gt;<i> the file into my database using ODBC. So I didn't change any code in Jabber
</I>&gt;<i> except for those two lines in xdb_file.c.
</I>&gt;<i> 
</I>&gt;<i> Now for my problem. My code seems to work fine. Running it seperately from
</I>&gt;<i> Jabber gives good results with retrievals, storing, etc. When I run Jabber
</I>&gt;<i> with a debugger, I can see the database is accessed, and the retrieval is
</I>&gt;<i> done properly. The user passes authorisation, so that &quot;should&quot; mean my code
</I>&gt;<i> gave back the user.xml all right.   But still, something must be wrong as
</I>&gt;<i> after authorisation I get a segmentation fault and an error from dnssrv.c.
</I>&gt;<i> 
</I>&gt;<i> Can anyone tell me what it is I am overlooking? Probably something more is
</I>&gt;<i> happening then just the read/write action I mentioned above...
</I>&gt;<i> 
</I>&gt;<i> Thanks in advance,
</I>&gt;<i> 
</I>&gt;<i> Michel.
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> _______________________________________________
</I>&gt;<i> jdev mailing list
</I>&gt;<i> <A HREF="http://mail.jabber.org/mailman/listinfo/jdev">jdev at jabber.org</A>
</I>&gt;<i> <A HREF="http://mailman.jabber.org/listinfo/jdev">http://mailman.jabber.org/listinfo/jdev</A>
</I>&gt;<i> 
</I>


-- 
Raditha Dissanayake
<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">raditha at mediasolv.com</A>
<A HREF="http://www.mediasolv.com/?rd">http://www.mediasolv.com/?rd</A>





</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="069881.html">[JDEV] XDB / ODBC
</A></li>
	<LI>Next message: <A HREF="069905.html">[JDEV] XDB / ODBC
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#69903">[ date ]</a>
              <a href="thread.html#69903">[ thread ]</a>
              <a href="subject.html#69903">[ subject ]</a>
              <a href="author.html#69903">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://mail.jabber.org/mailman/listinfo/jdev">More information about the JDev
mailing list</a><br>
</body></html>
