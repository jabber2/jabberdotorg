<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [JDEV] XDB / ODBC
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:jdev%40jabber.org?Subject=%5BJDEV%5D%20XDB%20/%20ODBC&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="011300.html">
   <LINK REL="Next"  HREF="011328.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[JDEV] XDB / ODBC</H1>
    <B>Michel Oosterbeek</B> 
    <A HREF="mailto:jdev%40jabber.org?Subject=%5BJDEV%5D%20XDB%20/%20ODBC&In-Reply-To="
       TITLE="[JDEV] XDB / ODBC">oosterbeek.mah at stu.hsbrabant.nl
       </A><BR>
    <I>Tue Feb 19 04:16:00 CST 2002</I>
    <P><UL>
        <LI>Previous message: <A HREF="011300.html">[JDEV] MSN and Yahoo transports in Jabber.org server
</A></li>
        <LI>Next message: <A HREF="011328.html">[JDEV] XDB / ODBC
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11306">[ date ]</a>
              <a href="thread.html#11306">[ thread ]</a>
              <a href="subject.html#11306">[ subject ]</a>
              <a href="author.html#11306">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi all,

So far I have gotten no response to my question. I really hope someone is
able to provide me with an answer as my graduation depends on it :o)


I'm using Jabber 1.4.1 on Red Hat 7.2 and I've tried to get XDB-ODBC
running, but for some reason nothing much seemed to happen.

Because after numerous attempts to get it right there were still no results,
I decided to give it a try myself, and started writing my own version. Again
I encountered a problem. I may have misunderstood the way xdb_file works,
but as far as I could comprehend the code, there are only two 'locations'
where the actual file (user.xml) is accessed:

In xdb_file.c:

- in the function  &quot;xdb_file_load&quot;  I found
  &quot;xmlnode_file(fname)&quot;   (I suppose this is where the read is done?)
- in the function &quot;xdb_file_phandler&quot;  I found
  &quot;xmlnode2file(full,file)&quot;   (so here the file is saved?)

And so all I did was simply replacing these two lines with my own 2
functions.  These functions simply &quot;cut&quot; the full pathname in to pieces and
determine the server_jid, username, etc...  Next, I use this info to store
the file into my database using ODBC. So I didn't change any code in Jabber
except for those two lines in xdb_file.c.

Now for my problem. My code seems to work fine. Running it seperately from
Jabber gives good results with retrievals, storing, etc. When I run Jabber
with a debugger, I can see the database is accessed, and the retrieval is
done properly. The user passes authorisation, so that &quot;should&quot; mean my code
gave back the user.xml all right.   But still, something must be wrong as
after authorisation I get a segmentation fault and an error from dnssrv.c.

Can anyone tell me what it is I am overlooking? Probably something more is
happening then just the read/write action I mentioned above...

Thanks in advance,

Michel.




</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="011300.html">[JDEV] MSN and Yahoo transports in Jabber.org server
</A></li>
	<LI>Next message: <A HREF="011328.html">[JDEV] XDB / ODBC
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11306">[ date ]</a>
              <a href="thread.html#11306">[ thread ]</a>
              <a href="subject.html#11306">[ subject ]</a>
              <a href="author.html#11306">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://mail.jabber.org/mailman/listinfo/jdev">More information about the JDev
mailing list</a><br>
</body></html>
