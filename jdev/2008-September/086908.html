<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [jdev] parsing xml (xmpp) with ruby
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:jdev%40jabber.org?Subject=Re%3A%20%5Bjdev%5D%20parsing%20xml%20%28xmpp%29%20with%20ruby&In-Reply-To=%3C20080929160901.GA16650%40tarantula.kolej.mff.cuni.cz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="086907.html">
   <LINK REL="Next"  HREF="086910.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[jdev] parsing xml (xmpp) with ruby</H1>
    <B>Michal 'vorner' Vaner</B> 
    <A HREF="mailto:jdev%40jabber.org?Subject=Re%3A%20%5Bjdev%5D%20parsing%20xml%20%28xmpp%29%20with%20ruby&In-Reply-To=%3C20080929160901.GA16650%40tarantula.kolej.mff.cuni.cz%3E"
       TITLE="[jdev] parsing xml (xmpp) with ruby">vorner at ucw.cz
       </A><BR>
    <I>Mon Sep 29 11:09:01 CDT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="086907.html">[jdev] parsing xml (xmpp) with ruby
</A></li>
        <LI>Next message: <A HREF="086910.html">[jdev] parsing xml (xmpp) with ruby
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#86908">[ date ]</a>
              <a href="thread.html#86908">[ thread ]</a>
              <a href="subject.html#86908">[ subject ]</a>
              <a href="author.html#86908">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello

On Mon, Sep 29, 2008 at 11:44:52AM -0400, Eric Will wrote:
&gt;<i> My question is this: how often could this happen, TODAY? In all the  
</I>&gt;<i> years I wrote IRC programs, I can't recall EVER getting a partial- 
</I>&gt;<i> line, and in my two years of messing with XMPP, I can't recall EVER  
</I>&gt;<i> getting a broken stanza. This should only really happen if the packets  
</I>&gt;<i> get fragmented very badly, someone's on a really bad connection, or  
</I>&gt;<i> the client is sending half a stanza at a time over TCP. I think that's  
</I>&gt;<i> the client's problem. The worst thing that could happen is the client  
</I>&gt;<i> gets booted and has to reconnect. I don't know if this possibility is  
</I>&gt;<i> worth costing all that performance. How bad could it be if I chose to  
</I>&gt;<i> simply ignore this and see what happens?
</I>
I can assure you these thinks happen in real life. I sometimes spend a
week with few other people and we _together_ have one gprs connection.
If some more traffic happens, the stanzas start getting generated faster
than the connection can send and they are put into packets one after
another, completely forgetting about the original boundaries. You do not
want to wait for end of stanza, you could wait tens of seconds. In these
conditions, I would not even log in with the way you want to do it.

Besides, you are not guaranteed every stanza would fit into usual-sized
ethernet packet (you can get 10k stanzas for example when
receiving/publishing vCard).

You probably should do some tricks like asynchronous sockets (read until
you run out of data, get error, return, once select tells you) or
threads.

-- 
I never finish anyth

Michal 'vorner' Vaner
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 197 bytes
Desc: not available
URL: &lt;<A HREF="https://www.jabber.org/jdev/attachments/20080929/6c0991f5/attachment-0003.pgp">https://www.jabber.org/jdev/attachments/20080929/6c0991f5/attachment-0003.pgp</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="086907.html">[jdev] parsing xml (xmpp) with ruby
</A></li>
	<LI>Next message: <A HREF="086910.html">[jdev] parsing xml (xmpp) with ruby
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#86908">[ date ]</a>
              <a href="thread.html#86908">[ thread ]</a>
              <a href="subject.html#86908">[ subject ]</a>
              <a href="author.html#86908">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://mail.jabber.org/mailman/listinfo/jdev">More information about the JDev
mailing list</a><br>
</body></html>
