<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [jdev] parsing xml (xmpp) with ruby
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:jdev%40jabber.org?Subject=Re%3A%20%5Bjdev%5D%20parsing%20xml%20%28xmpp%29%20with%20ruby&In-Reply-To=%3C200809290924.05045.justin-keyword-jabber.093179%40affinix.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="086897.html">
   <LINK REL="Next"  HREF="086899.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[jdev] parsing xml (xmpp) with ruby</H1>
    <B>Justin Karneges</B> 
    <A HREF="mailto:jdev%40jabber.org?Subject=Re%3A%20%5Bjdev%5D%20parsing%20xml%20%28xmpp%29%20with%20ruby&In-Reply-To=%3C200809290924.05045.justin-keyword-jabber.093179%40affinix.com%3E"
       TITLE="[jdev] parsing xml (xmpp) with ruby">justin-keyword-jabber.093179 at affinix.com
       </A><BR>
    <I>Mon Sep 29 11:24:04 CDT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="086897.html">[jdev] parsing xml (xmpp) with ruby
</A></li>
        <LI>Next message: <A HREF="086899.html">[jdev] parsing xml (xmpp) with ruby
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#86909">[ date ]</a>
              <a href="thread.html#86909">[ thread ]</a>
              <a href="subject.html#86909">[ subject ]</a>
              <a href="author.html#86909">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Monday 29 September 2008 00:29:18 Michal 'vorner' Vaner wrote:
&gt;<i> Hello
</I>&gt;<i>
</I>&gt;<i> On Mon, Sep 29, 2008 at 09:19:17AM +0200, Remko Tron&#231;on wrote:
</I>&gt;<i> &gt; &gt; I tried to create my own XMPP parser/library (for, ehm, educational
</I>&gt;<i> &gt; &gt; purposes). I never come across this issue. As far as I understand it, I
</I>&gt;<i> &gt; &gt; get proceed, but no more binary data.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; You mean you don't get binary data when you did a read() of
</I>&gt;<i> &gt; &lt;proceed/&gt;? You can't rely on that on a TCP connection.
</I>&gt;<i>
</I>&gt;<i> I could rely on that if the server sent them only as a response to _my_
</I>&gt;<i> binary data. If it is this:
</I>&gt;<i>
</I>&gt;<i> S: &lt;proceed/&gt;
</I>&gt;<i> C: Binary greeting
</I>&gt;<i> S: Binary response
</I>&gt;<i>
</I>&gt;<i> Then everything is OK, because I can get ready for binary before I send
</I>&gt;<i> my binary part. I'm not sure it is this way, but whenever I looked on a
</I>&gt;<i> TCP dump or expected this behaviour, it always worked this way.
</I>&gt;<i>
</I>&gt;<i> Of course, If this could happen too:
</I>&gt;<i> S: &lt;proceed/&gt;
</I>&gt;<i> S: Some binary data
</I>&gt;<i> C: Binary response
</I>&gt;<i>
</I>&gt;<i> Then I would be out of luck and couldn't expect it to come out as two
</I>&gt;<i> separate reads.
</I>&gt;<i>
</I>&gt;<i> I expect the proceed is ment as server telling me he is ready for _my_
</I>&gt;<i> binary data. It won't send me any binary data unless I do it first.
</I>
True, for TLS this is mostly an academic problem.  In the TLS protocol, the 
client speaks first, so you shouldn't receive TLS data from the server until 
the client has sent his data.  You'd probably have to do something like this:

&lt;starttls/&gt;[tls handshake] (client assumes starttls will succeed)
&lt;proceed/&gt;[tls handshake reply]

Tony Finch has suggested behavior like this for round-trip optimization.

-Justin

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="086897.html">[jdev] parsing xml (xmpp) with ruby
</A></li>
	<LI>Next message: <A HREF="086899.html">[jdev] parsing xml (xmpp) with ruby
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#86909">[ date ]</a>
              <a href="thread.html#86909">[ thread ]</a>
              <a href="subject.html#86909">[ subject ]</a>
              <a href="author.html#86909">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://mail.jabber.org/mailman/listinfo/jdev">More information about the JDev
mailing list</a><br>
</body></html>
