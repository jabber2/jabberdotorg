<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [jdev] parsing xml (xmpp) with ruby
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:jdev%40jabber.org?Subject=%5Bjdev%5D%20parsing%20xml%20%28xmpp%29%20with%20ruby&In-Reply-To=5b698f5a0809290146h55cf2260n4da25305b1890ed0%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="028324.html">
   <LINK REL="Next"  HREF="028332.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[jdev] parsing xml (xmpp) with ruby</H1>
    <B>Eric Will</B> 
    <A HREF="mailto:jdev%40jabber.org?Subject=%5Bjdev%5D%20parsing%20xml%20%28xmpp%29%20with%20ruby&In-Reply-To=5b698f5a0809290146h55cf2260n4da25305b1890ed0%40mail.gmail.com"
       TITLE="[jdev] parsing xml (xmpp) with ruby">rakaur at malkier.net
       </A><BR>
    <I>Mon Sep 29 10:44:52 CDT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="028324.html">[jdev] parsing xml (xmpp) with ruby
</A></li>
        <LI>Next message: <A HREF="028332.html">[jdev] parsing xml (xmpp) with ruby
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#28331">[ date ]</a>
              <a href="thread.html#28331">[ thread ]</a>
              <a href="subject.html#28331">[ subject ]</a>
              <a href="author.html#28331">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>My main problem isn't the TLS (I'm the server, so I don't have to  
worry about it since I send the initial binary), but how to figure out  
when I've read()'d a complete stanza. In IRC I can read and read and  
read until I get a &quot;\n&quot;, but that's not the case in XMPP. There is no  
simple way to reason out when a stanza has ended. The way everyone  
seems to use is &quot;use a SAX parser, then make a DOM out of that&quot; which,  
to me, sucks. Plus, I'm using Ruby, so if I'm using a C parser like  
libxml to do the SAX, and then do all this mumbo jumbo in Ruby, it's  
going to cost me in terms of performance pretty badly.

My question is this: how often could this happen, TODAY? In all the  
years I wrote IRC programs, I can't recall EVER getting a partial- 
line, and in my two years of messing with XMPP, I can't recall EVER  
getting a broken stanza. This should only really happen if the packets  
get fragmented very badly, someone's on a really bad connection, or  
the client is sending half a stanza at a time over TCP. I think that's  
the client's problem. The worst thing that could happen is the client  
gets booted and has to reconnect. I don't know if this possibility is  
worth costing all that performance. How bad could it be if I chose to  
simply ignore this and see what happens?

-- rakaur
</PRE>








<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="028324.html">[jdev] parsing xml (xmpp) with ruby
</A></li>
	<LI>Next message: <A HREF="028332.html">[jdev] parsing xml (xmpp) with ruby
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#28331">[ date ]</a>
              <a href="thread.html#28331">[ thread ]</a>
              <a href="subject.html#28331">[ subject ]</a>
              <a href="author.html#28331">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://mail.jabber.org/mailman/listinfo/jdev">More information about the JDev
mailing list</a><br>
</body></html>
