<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [jdev] Checking the from of iq replies
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:jdev%40jabber.org?Subject=Re%3A%20%5Bjdev%5D%20Checking%20the%20from%20of%20iq%20replies&In-Reply-To=%3C5315A71A.3070201%40public.noschinski.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="089891.html">
   <LINK REL="Next"  HREF="089893.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[jdev] Checking the from of iq replies</H1>
    <B>Lars Noschinski</B> 
    <A HREF="mailto:jdev%40jabber.org?Subject=Re%3A%20%5Bjdev%5D%20Checking%20the%20from%20of%20iq%20replies&In-Reply-To=%3C5315A71A.3070201%40public.noschinski.de%3E"
       TITLE="[jdev] Checking the from of iq replies">lars at public.noschinski.de
       </A><BR>
    <I>Tue Mar  4 10:12:42 UTC 2014</I>
    <P><UL>
        <LI>Previous message: <A HREF="089891.html">[jdev] Transport to tomorrow's XMPPUK meetup
</A></li>
        <LI>Next message: <A HREF="089893.html">[jdev] Checking the from of iq replies
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#89892">[ date ]</a>
              <a href="thread.html#89892">[ thread ]</a>
              <a href="subject.html#89892">[ subject ]</a>
              <a href="author.html#89892">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Hi everyone,

I am working on implementing better checks against spoofed iq-replies in
Smack. I want to avoid the pitfalls other projects fell into, so I
looked at Pidgin, Psi and PyXMPP to find the most sensible behaviour.
I'm detailing my findings here, maybe they are helpful for somebody.

The following table shows the IQ-replies accepted by P(i)dgin[1], P(s)i
(Task::iqVerify) and P(y)XMPP.

    From\to| e   | l   | bl  | dl+s | o
    -------+-----+-----+-----+------+-----
    e      | isy |     |     | s    |
    l      | isy | isy | s   | s    |
    bl     | isy | s   | isy | s    |
    dl+s   | isy | s   | s   | isy  |
    o      |     |     |     |      | isy

Legend
    e: empty
    l: local (client) jid
    bl: bare local jid
    dl: domainpart of local jid
    s: server jid
    o: other jid

Pidgin and PyXMPP behave very similar, while Psi is more lenient in the
answers it allows. Unfortunately, the repository history sheds no light
on whether this lenient behaviour was introduced to cope with real
problems.

Best regards,
   Lars


[1] &lt;<A HREF="https://hg.pidgin.im/pidgin/main/rev/b8e2a5fbffd3">https://hg.pidgin.im/pidgin/main/rev/b8e2a5fbffd3</A>&gt;
[2]
&lt;<A HREF="https://github.com/psi-im/iris/blob/master/src/xmpp/xmpp-im/xmpp_task.cpp">https://github.com/psi-im/iris/blob/master/src/xmpp/xmpp-im/xmpp_task.cpp</A>&gt;,
Task::iqVerify
[3]
&lt;<A HREF="https://github.com/Jajcus/pyxmpp/blob/master/pyxmpp/stanzaprocessor.py">https://github.com/Jajcus/pyxmpp/blob/master/pyxmpp/stanzaprocessor.py</A>&gt;,
process_iq
[4] <A HREF="http://xmpp.org/rfcs/rfc6120.html#stanzas-attributes-from">http://xmpp.org/rfcs/rfc6120.html#stanzas-attributes-from</A>

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1
Comment: Using GnuPG with Icedove - <A HREF="http://www.enigmail.net/">http://www.enigmail.net/</A>

iQEcBAEBAgAGBQJTFacaAAoJEOUX5T7UhMS6C0MH/R8kx7y7fwuYp68RUhTnY++3
wuDenZlkFdyhVu1Pb5/TRB4YE7KpxgK5h65G3M2Sf0ciHJY6Onxikyvr3jANVkox
O1ZGjbVkvSEAHtaq7eavae1VuSpLO7muKS3k1sbtax53DybRwWniTXzU/7BITJDP
Q7T1hM4IGIrk7ckkFpKC2lfFGk4NsjPtHa2B13vmizJ3yWB0xVOjzWrwZhweWGsR
1z6i63aALQW5ogN3JOV3LM0c3fx2nzfRgCiMin6HQU9xlQJIBqQW9ycBEyKxbd4r
LSJ7peIc523WdkHRz2UhzxJaKlOvyPdDIjl0LX+KdqE/Cs28zFd1NkkKIUzrGOw=
=8rGi
-----END PGP SIGNATURE-----
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="089891.html">[jdev] Transport to tomorrow's XMPPUK meetup
</A></li>
	<LI>Next message: <A HREF="089893.html">[jdev] Checking the from of iq replies
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#89892">[ date ]</a>
              <a href="thread.html#89892">[ thread ]</a>
              <a href="subject.html#89892">[ subject ]</a>
              <a href="author.html#89892">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://mail.jabber.org/mailman/listinfo/jdev">More information about the JDev
mailing list</a><br>
</body></html>
