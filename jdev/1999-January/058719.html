<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [JDEV] ICQ and AIM
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:jdev%40jabber.org?Subject=Re%3A%20%5BJDEV%5D%20ICQ%20and%20AIM&In-Reply-To=%3C369E5B32.A3CAA0BA%40softcom.net%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="058717.html">
   <LINK REL="Next"  HREF="058722.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[JDEV] ICQ and AIM</H1>
    <B>jswink at softcom.net</B> 
    <A HREF="mailto:jdev%40jabber.org?Subject=Re%3A%20%5BJDEV%5D%20ICQ%20and%20AIM&In-Reply-To=%3C369E5B32.A3CAA0BA%40softcom.net%3E"
       TITLE="[JDEV] ICQ and AIM">jswink at softcom.net
       </A><BR>
    <I>Thu Jan 14 15:01:38 CST 1999</I>
    <P><UL>
        <LI>Previous message: <A HREF="058717.html">[JDEV] ICQ and AIM
</A></li>
        <LI>Next message: <A HREF="058722.html">[JDEV] ICQ and AIM
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#58719">[ date ]</a>
              <a href="thread.html#58719">[ thread ]</a>
              <a href="subject.html#58719">[ subject ]</a>
              <a href="author.html#58719">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE><A HREF="http://mail.jabber.org/mailman/listinfo/jdev">qbradley at csc.UVic.CA</A> wrote:
&gt;<i> 
</I>&gt;<i> On Thu, 14 Jan 1999, <A HREF="http://mail.jabber.org/mailman/listinfo/jdev">jswink at softcom.net</A> wrote:
</I>&gt;<i> 
</I>&gt;<i> &gt;   Welcome to jabber.server.org!
</I>&gt;<i> &gt;   Available transports: Jabber AIM ICQ SMTP IRC...
</I>&gt;<i> &gt;     Do you wish to use the ICQ transport? y
</I>&gt;<i> 
</I>&gt;<i> Looks wonderful :-)  It could even be a form on a web page were you apply
</I>&gt;<i> for an account on a jabber server.  I guess it would be up to the people
</I>&gt;<i> hosting the server how exactly they get the above information.
</I>
More likely a command like client might look like the above, rather
than the server being intimately involved in conversations with
the user.

&gt;<i> &gt; I'm not understanding this other transport.  Does it have a single UIN
</I>&gt;<i> &gt; for its own purposes, to query the ICQ server about ICQ accounts?
</I>&gt;<i> &gt; Perhaps to send anonymous messages?
</I>&gt;<i> 
</I>&gt;<i> No.  Although that is an interesting idea.  My dream ICQ transport doesn't
</I>&gt;<i> do anything until I give it my ICQ name and password (in an EXT tag or
</I>&gt;<i> whatever).  Then it connects to ICQ on my behalf, forwarding jabber
</I>&gt;<i> packets to ICQ and ICQ packets to Jabber.  It sounded like you were
</I>&gt;<i> proposing something exactly the same except that as soon as you connected
</I>&gt;<i> with Jabber, it would create an ICQ number for you if you didn't already
</I>&gt;<i> have one (or perhaps it creates an ICQ number the first time you try to
</I>&gt;<i> send a message to an ICQ number).
</I>
I was, though I'm inclined to abandon that idea.  Maybe each
transport requiring a password should have an option to store
it, and if not, it'd request the password from the Jabber
client when you log in.  Then the client can prompt you, or
display a bright red button, or pop up a dialog, or whatever.

I still like the idea of establishing multiple nicks which
store a nickname, service, login, and possibly password, under
a Jabber account.


 - User starts up client for the first time, creates account
 - Client offers to set up new transports, user agrees
 - Client asks server for transport list
 - Server returns list
 - For each transport:
 -- Client asks user if they want to use it
 -- User agrees
 -- Client asks server for requirements on transport XYZ
 -- Server asks transport XYZ for requirements
 -- Transport responds
 -- Server passes requirements to client [1]
 -- Client gets info from user
 -- Client returns info to server        [2]
 -- Server saves the info under that username
 -- Server passes info to proper transport, for the purposes
    of the current session.
 
Executive summary: 
  Each transport has setup requirements, which the client need
  only examine while a user is adding a transport, and which
  the server relays between the transport and client without
  knowing or caring what it is.


[1] Server announces transport requirement to client
----------------------------------------------------

&lt;transport name='ICQ'&gt;
  &lt;field&gt;login&lt;/field&gt;
  &lt;field&gt;password&lt;/field&gt;
&lt;/transport&gt;

&lt;transport name='IRC'&gt;
  &lt;field&gt;ircnick&lt;/field&gt;
  &lt;field&gt;channel&lt;/field&gt;
  &lt;field&gt;server&lt;/field&gt;
  &lt;field&gt;port&lt;/field&gt;
&lt;/transport&gt;

&lt;transport name='SMTP'&gt;
  &lt;field&gt;address&lt;/field&gt;
&lt;/transport&gt;

[2] Client gets info from user and replies
------------------------------------------

&lt;alias action='add' name='Josh(ICQ)'&gt;
  &lt;transport name='ICQ'&gt;
    &lt;UIN&gt;6263130&lt;/UIN&gt;
    &lt;password&gt;xxxxxx&lt;/password&gt;
  &lt;/transport&gt;
&lt;/alias&gt;

&lt;alias action='add' name='Josh(IRC)'&gt;
  &lt;transport name='IRC'&gt;
    &lt;ircnick&gt;Yath&lt;/ircnick&gt;
    &lt;channel&gt;Jabber&lt;/channel&gt;
    &lt;server&gt;irc.dal.net&lt;/server&gt;
    &lt;port&gt;1116&lt;/port&gt;
  &lt;/transport&gt;
&lt;/alias&gt;

&lt;alias action='add' name='Josh(email)'&gt;
  &lt;transport name='SMTP'&gt;
    &lt;address&gt;<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">jswink at softcom.net</A>&lt;/address&gt;
  &lt;/transport&gt;
&lt;/alias&gt;

--------------------------------------

In this scenario, the server knows nothing
about the specific info that a transport needs,
just passing messages between a transport and
a client.  The client parses the description
of what's needed, gets info from the user, and
then forgets anything it ever knew about the
transport.

It could also be fun to allow a bit more complexity
in the &lt;service&gt; messages, so you could indicate a
number of IRC servers with priorities, to say which
one gets tried first, and a number of channels to
join.

&lt;transport name='IRC'&gt;
  &lt;field type='alpha'&gt;
    &lt;description&gt;IRC nickname&lt;/description&gt;
    ircnick
  &lt;/field&gt;
  &lt;field copymin='1' copymax='10'&gt;
    &lt;description&gt;Server name&lt;/description&gt;
    server
    &lt;field type='inet_address'&gt;address&lt;/field&gt;
    &lt;field type='integer' minimum='1' maximum='65535'&gt;port&lt;/field&gt;
    &lt;field type='integer' copymin='0'&gt;priority&lt;/field&gt;
  &lt;/field&gt;
  &lt;field type='alpha' copymin='1' copymax='10'&gt;
    channel
  &lt;/field&gt;
&lt;/transport&gt;

Early client prototypes could easily ignore much of
the markup and still work.

&lt;alias action='add' name='Josh(IRC)'&gt;
  &lt;transport name='IRC'&gt;
    &lt;ircnick&gt;Yath&lt;/ircnick&gt;
    &lt;server&gt;
      Dalnet
      &lt;address&gt;irc.dal.net&lt;/address&gt;
      &lt;port&gt;1116&lt;/port&gt;
      &lt;priority&gt;10&lt;/priority&gt;
    &lt;/server&gt;
    &lt;server&gt;
      Imaginary IRC server
      &lt;address&gt;irc.imaginary.net&lt;/address&gt;
      &lt;port&gt;1116&lt;/port&gt;
      &lt;priority&gt;5&lt;/priority&gt;
    &lt;/server&gt;
    &lt;channel&gt;Jabber&lt;/channel&gt;
    &lt;channel&gt;Hottub&lt;/channel&gt;
  &lt;/transport&gt;
&lt;/alias&gt;

&gt;<i> However, it makes perfect sense for each Jabber server to have an ICQ
</I>&gt;<i> transport configured with its own ICQ number.  Jabber messages to ICQ
</I>&gt;<i> numbers from people who have not yet logged in would be sent through this
</I>&gt;<i> number.
</I>&gt;<i> 
</I>&gt;<i> The problem with this is how does the Jabber ICQ transport know who to
</I>&gt;<i> send messages back to recieved from ICQ to this &quot;anonymous&quot; ICQ number?  I
</I>&gt;<i> don't know the ICQ protocol, but it seems like it would need to support a
</I>&gt;<i> way of sending an identifier of some kind in the message that was
</I>&gt;<i> guaranteed to be sent back on the reply.  I doubt this is possible, so
</I>&gt;<i> anonymous ICQ probably could only be one direction.
</I>
Probably not worth doing.


Joshua Swink
<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">jswink at softcom.net</A>

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="058717.html">[JDEV] ICQ and AIM
</A></li>
	<LI>Next message: <A HREF="058722.html">[JDEV] ICQ and AIM
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#58719">[ date ]</a>
              <a href="thread.html#58719">[ thread ]</a>
              <a href="subject.html#58719">[ subject ]</a>
              <a href="author.html#58719">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://mail.jabber.org/mailman/listinfo/jdev">More information about the JDev
mailing list</a><br>
</body></html>
