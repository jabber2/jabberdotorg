<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [xmppwg] Re: [JDEV] [SECURITY] Remote roster manipulation bug in various Jabber clients
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:jdev%40jabber.org?Subject=%5Bxmppwg%5D%20Re%3A%20%5BJDEV%5D%20%5BSECURITY%5D%20Remote%20roster%20manipulation%20bug%20in%20various%20Jabber%20clients&In-Reply-To=20030703162722.GB21872%40jabber.org">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="016969.html">
   <LINK REL="Next"  HREF="016961.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[xmppwg] Re: [JDEV] [SECURITY] Remote roster manipulation bug in various Jabber clients</H1>
    <B>Jacek Konieczny</B> 
    <A HREF="mailto:jdev%40jabber.org?Subject=%5Bxmppwg%5D%20Re%3A%20%5BJDEV%5D%20%5BSECURITY%5D%20Remote%20roster%20manipulation%20bug%20in%20various%20Jabber%20clients&In-Reply-To=20030703162722.GB21872%40jabber.org"
       TITLE="[xmppwg] Re: [JDEV] [SECURITY] Remote roster manipulation bug in various Jabber clients">jajcus at bnet.pl
       </A><BR>
    <I>Thu Jul  3 12:00:42 CDT 2003</I>
    <P><UL>
        <LI>Previous message: <A HREF="016969.html">[JDEV] [SECURITY] Remote roster manipulation bug in various Jabber clients
</A></li>
        <LI>Next message: <A HREF="016961.html">[JDEV] Lots of Presence: Distributed access to presence data from a server farm
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16970">[ date ]</a>
              <a href="thread.html#16970">[ thread ]</a>
              <a href="subject.html#16970">[ subject ]</a>
              <a href="author.html#16970">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Thu, Jul 03, 2003 at 11:27:22AM -0500, Peter Saint-Andre wrote:
&gt;<i> This is a server bug.
</I>
I wouldn't treat it like that. Server got stanza directed to a full jid, 
so it routed it to client. This is normal IQ handling and IMHO
should not depend on namespace. Probably there will be more namespaces
which should be handled only when sent by server and it is impossible to
make all servers handle all of them in special way. Special cases 
make protocol more complicated and complicated protocol is a bad
protocol. IMHO there should be no special cases in protocol. They may be
in implementations.

&gt;<i>  With what server did you test this? AFAIK, both
</I>&gt;<i> jabberd 1.4.* and the Jabber Inc. server do the right thing here.
</I>
I tested it with current (up to CVS) jabber 1.4.x and with wpjabber.

&gt;<i> The correct behavior is as follows (I have added this text to my working
</I>&gt;<i> copy of draft-ietf-xmpp-im):
</I>&gt;<i> 
</I>&gt;<i>   A server MUST ignore any 'to' address on a roster &quot;set&quot;, and 
</I>&gt;<i>   MUST treat any roster &quot;set&quot; as applying to the sender.
</I>
And the server does this - for stanzas received via client connection. I
thought it is a bug, but if specs say so...

But if the stanza is received from other server or component it is
normally routed to the proper client.

&gt;<i>    For added 
</I>&gt;<i>   safety, a client SHOULD check the &quot;from&quot; address of a roster &quot;push&quot; 
</I>&gt;<i>   to ensure that it is from a trusted source;
</I>
IMHO this should be a MUST. I know the complicated part should be in the
server (that is the Jabber philosophy), but for security it is the best
when most important checks are done at the final point.

Greets,
        Jacek

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="016969.html">[JDEV] [SECURITY] Remote roster manipulation bug in various Jabber clients
</A></li>
	<LI>Next message: <A HREF="016961.html">[JDEV] Lots of Presence: Distributed access to presence data from a server farm
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16970">[ date ]</a>
              <a href="thread.html#16970">[ thread ]</a>
              <a href="subject.html#16970">[ subject ]</a>
              <a href="author.html#16970">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://mail.jabber.org/mailman/listinfo/jdev">More information about the JDev
mailing list</a><br>
</body></html>
