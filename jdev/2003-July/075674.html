<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [JDEV] Re: Re: Re: xdb_sql
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:jdev%40jabber.org?Subject=Re%3A%20%5BJDEV%5D%20Re%3A%20Re%3A%20Re%3A%20xdb_sql&In-Reply-To=%3C200307211503440054.011D4DA3%40192.168.0.6%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="075673.html">
   <LINK REL="Next"  HREF="075689.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[JDEV] Re: Re: Re: xdb_sql</H1>
    <B>Anton Raharja</B> 
    <A HREF="mailto:jdev%40jabber.org?Subject=Re%3A%20%5BJDEV%5D%20Re%3A%20Re%3A%20Re%3A%20xdb_sql&In-Reply-To=%3C200307211503440054.011D4DA3%40192.168.0.6%3E"
       TITLE="[JDEV] Re: Re: Re: xdb_sql">anton at ngoprek.org
       </A><BR>
    <I>Mon Jul 21 03:03:44 CDT 2003</I>
    <P><UL>
        <LI>Previous message: <A HREF="075673.html">[JDEV] Re: Re: Re: xdb_sql
</A></li>
        <LI>Next message: <A HREF="075689.html">[JDEV] Re: Re: Re: Re: xdb_sql
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#75674">[ date ]</a>
              <a href="thread.html#75674">[ thread ]</a>
              <a href="subject.html#75674">[ subject ]</a>
              <a href="author.html#75674">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>keep your PHP script and db, dont change that
tblPerson is on my script and now everytime jabber client register or auth
jabber server pass it to xdb_sql and wrote everything to my tblPerson

all im trying to say is..just use same table for jabber and your script but keep your script and change the jabber part
use xdb_sql, try it..

if anyone can do better than that, we surely do need some advice here

*********** REPLY SEPARATOR  ***********

On 21/07/2003 at 2:17 Sonic98 wrote:

&gt;<i>I'm not sure I'm getting you. I actually haven't played around with
</I>&gt;<i>xdb_sql
</I>&gt;<i>at all. I'm still trying to learn about it. All I know is I want to add the
</I>&gt;<i>PHP/Jabber webmessenger I saw on my site, and I don't the memebers in my
</I>&gt;<i>site's database to have to register seperarely for the jabber server. Too
</I>&gt;<i>bad all the jabber servers that use databases instead of files are
</I>&gt;<i>commercial.
</I>&gt;<i>
</I>&gt;<i>&quot;Anton Raharja&quot; &lt;<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">anton at ngoprek.org</A>&gt; wrote in message
</I>&gt;<i>news:<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">200307210330330090.013B9B97 at 192.168.0.6...</A>
</I>&gt;&gt;<i> ok now you know that xdb_sql sent you <A HREF="http://mail.jabber.org/mailman/listinfo/jdev">user at domain</A> but your PHP script
</I>&gt;<i>more
</I>&gt;&gt;<i> to 'user' and 'domain' separately saved
</I>&gt;&gt;<i> my choice is to let PHP keep old setting and xdb_sql tricked
</I>&gt;&gt;<i> heres some example of my jabber-sql.xml:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>     &lt;queries&gt;
</I>&gt;&gt;<i>       &lt;!-- Authentication get query (all queries have standard names) --&gt;
</I>&gt;&gt;<i>       &lt;querydef name=&quot;auth-get&quot;&gt;
</I>&gt;&gt;<i>         &lt;text&gt;SELECT PersonPassword FROM tblPerson WHERE PersonUsername =
</I>&gt;&gt;<i> SUBSTRING_INDEX('$$username$$','@',1)&lt;/text&gt;
</I>&gt;&gt;<i>         &lt;bindvar name=&quot;user&quot;&gt;$$username$$&lt;/bindvar&gt;
</I>&gt;&gt;<i>         &lt;bindcol name=&quot;password&quot; offset=&quot;0&quot;/&gt;
</I>&gt;&gt;<i>       &lt;/querydef&gt;
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>       &lt;!-- Authentication set query --&gt;
</I>&gt;&gt;<i>       &lt;querydef name=&quot;auth-set&quot;&gt;
</I>&gt;&gt;<i>         &lt;text&gt;UPDATE tblPerson SET PersonPassword = '$$p$$' WHERE
</I>&gt;&gt;<i> PersonUsername = SUBSTRING_INDEX('$$username$$','@',1)&lt;/text&gt;
</I>&gt;&gt;<i>         &lt;bindvar name=&quot;user&quot;&gt;$$username$$&lt;/bindvar&gt;
</I>&gt;&gt;<i>         &lt;bindvar name=&quot;password&quot;&gt;$$p$$&lt;/bindvar&gt;
</I>&gt;&gt;<i>       &lt;/querydef&gt;
</I>&gt;&gt;<i>    ...
</I>&gt;&gt;<i>    ...
</I>&gt;&gt;<i>    &lt;/queries&gt;
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> there, when user auth xdb_sql pass <A HREF="http://mail.jabber.org/mailman/listinfo/jdev">user at domain</A> replacing $$username$$ but
</I>&gt;&gt;<i> than SUBSTRING_INDEX makes the query only recognize 'user' part
</I>&gt;&gt;<i> do some changes on xml file to suite your needs
</I>


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="075673.html">[JDEV] Re: Re: Re: xdb_sql
</A></li>
	<LI>Next message: <A HREF="075689.html">[JDEV] Re: Re: Re: Re: xdb_sql
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#75674">[ date ]</a>
              <a href="thread.html#75674">[ thread ]</a>
              <a href="subject.html#75674">[ subject ]</a>
              <a href="author.html#75674">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://mail.jabber.org/mailman/listinfo/jdev">More information about the JDev
mailing list</a><br>
</body></html>
