<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [JDEV] is it possible to make a &quot;trusted&quot; relay transport in jabberd?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:jdev%40jabber.org?Subject=Re%3A%20%5BJDEV%5D%20is%20it%20possible%20to%20make%20a%20%22trusted%22%20relay%20transport%20in%20jabberd%3F&In-Reply-To=%3C20030710182437.GI10214%40laptop%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="075600.html">
   <LINK REL="Next"  HREF="075604.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[JDEV] is it possible to make a &quot;trusted&quot; relay transport in jabberd?</H1>
    <B>Nick</B> 
    <A HREF="mailto:jdev%40jabber.org?Subject=Re%3A%20%5BJDEV%5D%20is%20it%20possible%20to%20make%20a%20%22trusted%22%20relay%20transport%20in%20jabberd%3F&In-Reply-To=%3C20030710182437.GI10214%40laptop%3E"
       TITLE="[JDEV] is it possible to make a &quot;trusted&quot; relay transport in jabberd?">nick at jabberstudio.org
       </A><BR>
    <I>Thu Jul 10 13:24:37 CDT 2003</I>
    <P><UL>
        <LI>Previous message: <A HREF="075600.html">[JDEV] is it possible to make a &quot;trusted&quot; relay transport in  jabberd?
</A></li>
        <LI>Next message: <A HREF="075604.html">[JDEV] peculiar Connection problem !
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#75601">[ date ]</a>
              <a href="thread.html#75601">[ thread ]</a>
              <a href="subject.html#75601">[ subject ]</a>
              <a href="author.html#75601">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>What ever floats your boat. But, instead of taking advantage of a (mis)
feature in the jabberd14 backbone, why not just send the recepient of 
the email a simple notification to IM this person? Also, what if 
someone sends an email (ie spam) that does _not_ have a jabber account 
with you? Simple enough to filter those emails out, I suppose, but if 
one gets through, then your users get spam they can't reply to, and 
have no recourse.

And maybe im being dense here, but what is the point of sending an 
email to someone on a local jabber server to intiate a jabber 
conversation, when you could just... jabber the person to begin with?

IMO this (mis)feature needs to (corrected?)enhanced to check froms so 
it's not allowed. Of course in PXR, this isn't an issue...
-- 

Nicholas Perez
Email: 	<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">nick at jabberstudio.org</A>
Jabber:	<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">nickperez at jabber.org</A>
Home:	303.759.0574




On 2003.07.10 12:05, Dov B Katz wrote:
&gt;<i> Nick,
</I>&gt;<i> 
</I>&gt;<i>  I did some testing, and it turns out that local transports on a
</I>&gt;<i> server can
</I>&gt;<i> spoof the from to send messages to anyone on that server... anything
</I>&gt;<i> that
</I>&gt;<i> needs to go via dialback will obviously not work since dialback
</I>&gt;<i> prohibits
</I>&gt;<i> it.
</I>&gt;<i> 
</I>&gt;<i> I am using this kind of relaying for several purposes. Among them is
</I>&gt;<i> taking
</I>&gt;<i> inbound email and routing them as jabber messages.... i.e. user A
</I>&gt;<i> sends
</I>&gt;<i> email to my mailpipe.. I re-route it to my jabber, but set the &quot;from&quot;
</I>&gt;<i> of
</I>&gt;<i> the jabber msg to be the User A's jabber account, not mail account.
</I>&gt;<i> This
</I>&gt;<i> allows externally initiated conversations, which continue in jabber...
</I>&gt;<i> Additionally, I want to have people send jabber messages to local
</I>&gt;<i> users via
</I>&gt;<i> a web form, and I believe a transport is more efficient than having
</I>&gt;<i> send
</I>&gt;<i> message scripts which constantly have to log in as the user on a  per
</I>&gt;<i> message basis.
</I>&gt;<i> 
</I>&gt;<i> I may work with joe to add such spoofability to the JGF if others see
</I>&gt;<i> a use
</I>&gt;<i> for it.
</I>&gt;<i> 
</I>&gt;<i> Think of spoofing the from, as being able to set a &quot;Reply to:&quot; in
</I>&gt;<i> jabber.
</I>&gt;<i> Since, ultimately when you reply, it goes where I wanted it to....
</I>&gt;<i> ---------
</I>&gt;<i> 
</I>&gt;<i> To sum up. After some experimentation, it appears that  a
</I>&gt;<i> gateway/transport
</I>&gt;<i> can send jabber traffic as anyone it wants ONLY if the dest user is on
</I>&gt;<i> the
</I>&gt;<i> same server as the transport.  If messages must undergo the scrutiny
</I>&gt;<i> of
</I>&gt;<i> dialback, they will be blocked for obvious reasons.
</I>&gt;<i> 
</I>&gt;<i> Best regards, and thanks for the response.
</I>&gt;<i> -Dov Katz
</I>&gt;<i> 
</I>&gt;<i> Nick wrote:
</I>&gt;<i> 
</I>&gt;<i> &gt; Why are you attempting to do something very not appropriate? Once
</I>&gt;<i> the
</I>&gt;<i> &gt; client receives that message and attempts to reply, is the return
</I>&gt;<i> &gt; address going to valid? Why not do what the other transports do and
</I>&gt;<i> &gt; have user%<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">otherserver at transport.yourserver</A>? In the &lt;message/&gt;
</I>&gt;<i> &lt;body/&gt;
</I>&gt;<i> &gt; just prepend the message with &quot;FROM: <A HREF="http://mail.jabber.org/mailman/listinfo/jdev">user at otherserver</A>&quot; in case you
</I>&gt;<i> are
</I>&gt;<i> &gt; worried about clarity.
</I>&gt;<i> &gt; --
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Nicholas Perez
</I>&gt;<i> &gt; Email:  <A HREF="http://mail.jabber.org/mailman/listinfo/jdev">nick at jabberstudio.org</A>
</I>&gt;<i> &gt; Jabber: <A HREF="http://mail.jabber.org/mailman/listinfo/jdev">nickperez at jabber.org</A>
</I>&gt;<i> &gt; Home:   303.759.0574
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; On 2003.07.10 09:13, Dov B Katz wrote:
</I>&gt;<i> &gt; &gt; Is there any way (either via modification to config or to jabberd
</I>&gt;<i> &gt; &gt; source
</I>&gt;<i> &gt; &gt; code) in jabberd 1.4 to permit a transport to set its &quot;from jid&quot;
</I>&gt;<i> to
</I>&gt;<i> &gt; &gt; anything it wants?
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; Lets say we have a server myserver, and a transport relay.
</I>&gt;<i> myserver
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; I need the transport to send jabber messages as <A HREF="http://mail.jabber.org/mailman/listinfo/jdev">user at myserver</A>, or
</I>&gt;<i> &gt; &gt; <A HREF="http://mail.jabber.org/mailman/listinfo/jdev">user at otherserver</A>, etc...
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; If you try that, I think jabberd disconnects the transport. How
</I>&gt;<i> can I
</I>&gt;<i> &gt; &gt; grant it permission to do something like that?
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; Thanks in advance.
</I>&gt;<i> &gt; &gt; -Dov
</I>&gt;<i> &gt; &gt; --
</I>&gt;<i> &gt; &gt; NOTICE: If received in error, please destroy and notify sender.
</I>&gt;<i> &gt; &gt; Sender
</I>&gt;<i> &gt; &gt; does not waive confidentiality or privilege, and use is
</I>&gt;<i> prohibited.
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; begin:vcard
</I>&gt;<i> &gt; &gt; n:Katz;Dov
</I>&gt;<i> &gt; &gt; tel;fax:+1 (212) 507-8304
</I>&gt;<i> &gt; &gt; tel;work:+1 (212) 762-2171
</I>&gt;<i> &gt; &gt; x-mozilla-html:FALSE
</I>&gt;<i> &gt; &gt; url:<A HREF="http://www.morganstanley.com">http://www.morganstanley.com</A>
</I>&gt;<i> &gt; &gt; org:&lt;img src=&quot;<A HREF="http://www.morganstanley.com/img/morgan.gif&quot;">http://www.morganstanley.com/img/morgan.gif&quot;</A>&gt;
</I>&gt;<i> &gt; &gt; ;Information Technology
</I>&gt;<i> &gt; &gt; version:2.1
</I>&gt;<i> &gt; &gt; email;internet:<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">Dov.Katz at morganstanley.com</A>
</I>&gt;<i> &gt; &gt; adr;quoted-printable:;;750 7th Avenue=0D=0A34th Floor;New
</I>&gt;<i> &gt; &gt; York;NY;10019;
</I>&gt;<i> &gt; &gt; fn:Dov Katz
</I>&gt;<i> &gt; &gt; end:vcard
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; _______________________________________________
</I>&gt;<i> &gt; jdev mailing list
</I>&gt;<i> &gt; <A HREF="http://mail.jabber.org/mailman/listinfo/jdev">jdev at jabber.org</A>
</I>&gt;<i> &gt; <A HREF="http://mailman.jabber.org/listinfo/jdev">http://mailman.jabber.org/listinfo/jdev</A>
</I>&gt;<i> 
</I>&gt;<i> --
</I>&gt;<i> NOTICE: If received in error, please destroy and notify sender.
</I>&gt;<i> Sender
</I>&gt;<i> does not waive confidentiality or privilege, and use is prohibited.
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> begin:vcard
</I>&gt;<i> n:Katz;Dov
</I>&gt;<i> tel;fax:+1 (212) 507-8304
</I>&gt;<i> tel;work:+1 (212) 762-2171
</I>&gt;<i> x-mozilla-html:FALSE
</I>&gt;<i> url:<A HREF="http://www.morganstanley.com">http://www.morganstanley.com</A>
</I>&gt;<i> org:&lt;img src=&quot;<A HREF="http://www.morganstanley.com/img/morgan.gif&quot;">http://www.morganstanley.com/img/morgan.gif&quot;</A>&gt;
</I>&gt;<i> ;Information Technology
</I>&gt;<i> version:2.1
</I>&gt;<i> email;internet:<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">Dov.Katz at morganstanley.com</A>
</I>&gt;<i> adr;quoted-printable:;;750 7th Avenue=0D=0A34th Floor;New
</I>&gt;<i> York;NY;10019;
</I>&gt;<i> fn:Dov Katz
</I>&gt;<i> end:vcard
</I>&gt;<i> 
</I>
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="075600.html">[JDEV] is it possible to make a &quot;trusted&quot; relay transport in  jabberd?
</A></li>
	<LI>Next message: <A HREF="075604.html">[JDEV] peculiar Connection problem !
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#75601">[ date ]</a>
              <a href="thread.html#75601">[ thread ]</a>
              <a href="subject.html#75601">[ subject ]</a>
              <a href="author.html#75601">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://mail.jabber.org/mailman/listinfo/jdev">More information about the JDev
mailing list</a><br>
</body></html>
