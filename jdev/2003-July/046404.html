<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [JDEV] Re: Re: Re: Re: xdb_sql
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:jdev%40jabber.org?Subject=Re%3A%20%5BJDEV%5D%20Re%3A%20Re%3A%20Re%3A%20Re%3A%20xdb_sql&In-Reply-To=%3Cbfkpcq%24vu2%241%40main.gmane.org%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="046389.html">
   <LINK REL="Next"  HREF="046411.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[JDEV] Re: Re: Re: Re: xdb_sql</H1>
    <B>Sonic98</B> 
    <A HREF="mailto:jdev%40jabber.org?Subject=Re%3A%20%5BJDEV%5D%20Re%3A%20Re%3A%20Re%3A%20Re%3A%20xdb_sql&In-Reply-To=%3Cbfkpcq%24vu2%241%40main.gmane.org%3E"
       TITLE="[JDEV] Re: Re: Re: Re: xdb_sql">raymondcox at redlasertech.com
       </A><BR>
    <I>Tue Jul 22 20:50:19 CDT 2003</I>
    <P><UL>
        <LI>Previous message: <A HREF="046389.html">[JDEV] Re: Re: Re: xdb_sql
</A></li>
        <LI>Next message: <A HREF="046411.html">[JDEV] Re: Re: Re: Re: xdb_sql
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#46404">[ date ]</a>
              <a href="thread.html#46404">[ thread ]</a>
              <a href="subject.html#46404">[ subject ]</a>
              <a href="author.html#46404">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Are you making a suggestion or did you actually get it to work this way?


&quot;Anton Raharja&quot; &lt;<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">anton at ngoprek.org</A>&gt; wrote in message
news:<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">200307211503440054.011D4DA3 at 192.168.0.6...</A>
&gt;<i> keep your PHP script and db, dont change that
</I>&gt;<i> tblPerson is on my script and now everytime jabber client register or auth
</I>&gt;<i> jabber server pass it to xdb_sql and wrote everything to my tblPerson
</I>&gt;<i>
</I>&gt;<i> all im trying to say is..just use same table for jabber and your script
</I>but keep your script and change the jabber part
&gt;<i> use xdb_sql, try it..
</I>&gt;<i>
</I>&gt;<i> if anyone can do better than that, we surely do need some advice here
</I>&gt;<i>
</I>&gt;<i> *********** REPLY SEPARATOR  ***********
</I>&gt;<i>
</I>&gt;<i> On 21/07/2003 at 2:17 Sonic98 wrote:
</I>&gt;<i>
</I>&gt;<i> &gt;I'm not sure I'm getting you. I actually haven't played around with
</I>&gt;<i> &gt;xdb_sql
</I>&gt;<i> &gt;at all. I'm still trying to learn about it. All I know is I want to add
</I>the
&gt;<i> &gt;PHP/Jabber webmessenger I saw on my site, and I don't the memebers in my
</I>&gt;<i> &gt;site's database to have to register seperarely for the jabber server. Too
</I>&gt;<i> &gt;bad all the jabber servers that use databases instead of files are
</I>&gt;<i> &gt;commercial.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;&quot;Anton Raharja&quot; &lt;<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">anton at ngoprek.org</A>&gt; wrote in message
</I>&gt;<i> &gt;news:<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">200307210330330090.013B9B97 at 192.168.0.6...</A>
</I>&gt;<i> &gt;&gt; ok now you know that xdb_sql sent you <A HREF="http://mail.jabber.org/mailman/listinfo/jdev">user at domain</A> but your PHP script
</I>&gt;<i> &gt;more
</I>&gt;<i> &gt;&gt; to 'user' and 'domain' separately saved
</I>&gt;<i> &gt;&gt; my choice is to let PHP keep old setting and xdb_sql tricked
</I>&gt;<i> &gt;&gt; heres some example of my jabber-sql.xml:
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;     &lt;queries&gt;
</I>&gt;<i> &gt;&gt;       &lt;!-- Authentication get query (all queries have standard
</I>names) --&gt;
&gt;<i> &gt;&gt;       &lt;querydef name=&quot;auth-get&quot;&gt;
</I>&gt;<i> &gt;&gt;         &lt;text&gt;SELECT PersonPassword FROM tblPerson WHERE PersonUsername
</I>=
&gt;<i> &gt;&gt; SUBSTRING_INDEX('$$username$$','@',1)&lt;/text&gt;
</I>&gt;<i> &gt;&gt;         &lt;bindvar name=&quot;user&quot;&gt;$$username$$&lt;/bindvar&gt;
</I>&gt;<i> &gt;&gt;         &lt;bindcol name=&quot;password&quot; offset=&quot;0&quot;/&gt;
</I>&gt;<i> &gt;&gt;       &lt;/querydef&gt;
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;       &lt;!-- Authentication set query --&gt;
</I>&gt;<i> &gt;&gt;       &lt;querydef name=&quot;auth-set&quot;&gt;
</I>&gt;<i> &gt;&gt;         &lt;text&gt;UPDATE tblPerson SET PersonPassword = '$$p$$' WHERE
</I>&gt;<i> &gt;&gt; PersonUsername = SUBSTRING_INDEX('$$username$$','@',1)&lt;/text&gt;
</I>&gt;<i> &gt;&gt;         &lt;bindvar name=&quot;user&quot;&gt;$$username$$&lt;/bindvar&gt;
</I>&gt;<i> &gt;&gt;         &lt;bindvar name=&quot;password&quot;&gt;$$p$$&lt;/bindvar&gt;
</I>&gt;<i> &gt;&gt;       &lt;/querydef&gt;
</I>&gt;<i> &gt;&gt;    ...
</I>&gt;<i> &gt;&gt;    ...
</I>&gt;<i> &gt;&gt;    &lt;/queries&gt;
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; there, when user auth xdb_sql pass <A HREF="http://mail.jabber.org/mailman/listinfo/jdev">user at domain</A> replacing $$username$$
</I>but
&gt;<i> &gt;&gt; than SUBSTRING_INDEX makes the query only recognize 'user' part
</I>&gt;<i> &gt;&gt; do some changes on xml file to suite your needs
</I>



</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="046389.html">[JDEV] Re: Re: Re: xdb_sql
</A></li>
	<LI>Next message: <A HREF="046411.html">[JDEV] Re: Re: Re: Re: xdb_sql
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#46404">[ date ]</a>
              <a href="thread.html#46404">[ thread ]</a>
              <a href="subject.html#46404">[ subject ]</a>
              <a href="author.html#46404">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://mail.jabber.org/mailman/listinfo/jdev">More information about the JDev
mailing list</a><br>
</body></html>
