<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [JDEV] Re: Re: Re: Re: xdb_sql
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:jdev%40jabber.org?Subject=%5BJDEV%5D%20Re%3A%20Re%3A%20Re%3A%20Re%3A%20xdb_sql&In-Reply-To=bfkpcq%24vu2%241%40main.gmane.org">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="017114.html">
   <LINK REL="Next"  HREF="017127.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[JDEV] Re: Re: Re: Re: xdb_sql</H1>
    <B>Anton Raharja</B> 
    <A HREF="mailto:jdev%40jabber.org?Subject=%5BJDEV%5D%20Re%3A%20Re%3A%20Re%3A%20Re%3A%20xdb_sql&In-Reply-To=bfkpcq%24vu2%241%40main.gmane.org"
       TITLE="[JDEV] Re: Re: Re: Re: xdb_sql">anton at ngoprek.org
       </A><BR>
    <I>Wed Jul 23 04:49:20 CDT 2003</I>
    <P><UL>
        <LI>Previous message: <A HREF="017114.html">[JDEV] Re: Re: Re: Re: xdb_sql
</A></li>
        <LI>Next message: <A HREF="017127.html">[JDEV] Re: Re: Re: Re: Re: xdb_sql
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17121">[ date ]</a>
              <a href="thread.html#17121">[ thread ]</a>
              <a href="subject.html#17121">[ subject ]</a>
              <a href="author.html#17121">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>actualy get it work
my example shows how the xdb_sql part changed, play with the xml file there and you'll understand what to do
the important thing is, if you dont change anything on xdb_sql codes, jabber pass to xdb_sql <A HREF="http://mail.jabber.org/mailman/listinfo/jdev">username at domain</A>
but than your script need username and domain separated, and i did that separation by using SUBSTRING_INDEX
do vice versa for actions like...register from web (not from jabber client) that will send username and domain separated to jabber via xdb_sql

jabber &lt;----(<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">username at domain</A>)----&gt; xdb_sql &lt;----(username and domain)----&gt; db tables

something likethat...

*********** REPLY SEPARATOR  ***********

On 22/07/2003 at 20:50 Sonic98 wrote:

&gt;<i>Are you making a suggestion or did you actually get it to work this way?
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>&quot;Anton Raharja&quot; &lt;<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">anton at ngoprek.org</A>&gt; wrote in message
</I>&gt;<i>news:<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">200307211503440054.011D4DA3 at 192.168.0.6...</A>
</I>&gt;&gt;<i> keep your PHP script and db, dont change that
</I>&gt;&gt;<i> tblPerson is on my script and now everytime jabber client register or
</I>&gt;<i>auth
</I>&gt;&gt;<i> jabber server pass it to xdb_sql and wrote everything to my tblPerson
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> all im trying to say is..just use same table for jabber and your script
</I>&gt;<i>but keep your script and change the jabber part
</I>&gt;&gt;<i> use xdb_sql, try it..
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> if anyone can do better than that, we surely do need some advice here
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> *********** REPLY SEPARATOR  ***********
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> On 21/07/2003 at 2:17 Sonic98 wrote:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> &gt;I'm not sure I'm getting you. I actually haven't played around with
</I>&gt;&gt;<i> &gt;xdb_sql
</I>&gt;&gt;<i> &gt;at all. I'm still trying to learn about it. All I know is I want to add
</I>&gt;<i>the
</I>&gt;&gt;<i> &gt;PHP/Jabber webmessenger I saw on my site, and I don't the memebers in my
</I>&gt;&gt;<i> &gt;site's database to have to register seperarely for the jabber server.
</I>&gt;<i>Too
</I>&gt;&gt;<i> &gt;bad all the jabber servers that use databases instead of files are
</I>&gt;&gt;<i> &gt;commercial.
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt;&quot;Anton Raharja&quot; &lt;<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">anton at ngoprek.org</A>&gt; wrote in message
</I>&gt;&gt;<i> &gt;news:<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">200307210330330090.013B9B97 at 192.168.0.6...</A>
</I>&gt;&gt;<i> &gt;&gt; ok now you know that xdb_sql sent you <A HREF="http://mail.jabber.org/mailman/listinfo/jdev">user at domain</A> but your PHP script
</I>&gt;&gt;<i> &gt;more
</I>&gt;&gt;<i> &gt;&gt; to 'user' and 'domain' separately saved
</I>&gt;&gt;<i> &gt;&gt; my choice is to let PHP keep old setting and xdb_sql tricked
</I>&gt;&gt;<i> &gt;&gt; heres some example of my jabber-sql.xml:
</I>&gt;&gt;<i> &gt;&gt;
</I>&gt;&gt;<i> &gt;&gt;     &lt;queries&gt;
</I>&gt;&gt;<i> &gt;&gt;       &lt;!-- Authentication get query (all queries have standard
</I>&gt;<i>names) --&gt;
</I>&gt;&gt;<i> &gt;&gt;       &lt;querydef name=&quot;auth-get&quot;&gt;
</I>&gt;&gt;<i> &gt;&gt;         &lt;text&gt;SELECT PersonPassword FROM tblPerson WHERE
</I>&gt;<i>PersonUsername
</I>&gt;<i>=
</I>&gt;&gt;<i> &gt;&gt; SUBSTRING_INDEX('$$username$$','@',1)&lt;/text&gt;
</I>&gt;&gt;<i> &gt;&gt;         &lt;bindvar name=&quot;user&quot;&gt;$$username$$&lt;/bindvar&gt;
</I>&gt;&gt;<i> &gt;&gt;         &lt;bindcol name=&quot;password&quot; offset=&quot;0&quot;/&gt;
</I>&gt;&gt;<i> &gt;&gt;       &lt;/querydef&gt;
</I>&gt;&gt;<i> &gt;&gt;
</I>&gt;&gt;<i> &gt;&gt;       &lt;!-- Authentication set query --&gt;
</I>&gt;&gt;<i> &gt;&gt;       &lt;querydef name=&quot;auth-set&quot;&gt;
</I>&gt;&gt;<i> &gt;&gt;         &lt;text&gt;UPDATE tblPerson SET PersonPassword = '$$p$$' WHERE
</I>&gt;&gt;<i> &gt;&gt; PersonUsername = SUBSTRING_INDEX('$$username$$','@',1)&lt;/text&gt;
</I>&gt;&gt;<i> &gt;&gt;         &lt;bindvar name=&quot;user&quot;&gt;$$username$$&lt;/bindvar&gt;
</I>&gt;&gt;<i> &gt;&gt;         &lt;bindvar name=&quot;password&quot;&gt;$$p$$&lt;/bindvar&gt;
</I>&gt;&gt;<i> &gt;&gt;       &lt;/querydef&gt;
</I>&gt;&gt;<i> &gt;&gt;    ...
</I>&gt;&gt;<i> &gt;&gt;    ...
</I>&gt;&gt;<i> &gt;&gt;    &lt;/queries&gt;
</I>&gt;&gt;<i> &gt;&gt;
</I>&gt;&gt;<i> &gt;&gt; there, when user auth xdb_sql pass <A HREF="http://mail.jabber.org/mailman/listinfo/jdev">user at domain</A> replacing $$username$$
</I>&gt;<i>but
</I>&gt;&gt;<i> &gt;&gt; than SUBSTRING_INDEX makes the query only recognize 'user' part
</I>&gt;&gt;<i> &gt;&gt; do some changes on xml file to suite your needs
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>_______________________________________________
</I>&gt;<i>jdev mailing list
</I>&gt;<i><A HREF="http://mail.jabber.org/mailman/listinfo/jdev">jdev at jabber.org</A>
</I>&gt;<i><A HREF="http://mailman.jabber.org/listinfo/jdev">http://mailman.jabber.org/listinfo/jdev</A>
</I>



</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="017114.html">[JDEV] Re: Re: Re: Re: xdb_sql
</A></li>
	<LI>Next message: <A HREF="017127.html">[JDEV] Re: Re: Re: Re: Re: xdb_sql
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17121">[ date ]</a>
              <a href="thread.html#17121">[ thread ]</a>
              <a href="subject.html#17121">[ subject ]</a>
              <a href="author.html#17121">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://mail.jabber.org/mailman/listinfo/jdev">More information about the JDev
mailing list</a><br>
</body></html>
