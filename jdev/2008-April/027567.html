<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [jdev] IPv6 readyness?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:jdev%40jabber.org?Subject=%5Bjdev%5D%20IPv6%20readyness%3F&In-Reply-To=8A006842-5D7B-4255-A5D2-0BF875717EE8%40sympatico.ca">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="027566.html">
   <LINK REL="Next"  HREF="027568.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[jdev] IPv6 readyness?</H1>
    <B>Dave Cridland</B> 
    <A HREF="mailto:jdev%40jabber.org?Subject=%5Bjdev%5D%20IPv6%20readyness%3F&In-Reply-To=8A006842-5D7B-4255-A5D2-0BF875717EE8%40sympatico.ca"
       TITLE="[jdev] IPv6 readyness?">dave at cridland.net
       </A><BR>
    <I>Fri Apr 18 03:49:27 CDT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="027566.html">[jdev] IPv6 readyness?
</A></li>
        <LI>Next message: <A HREF="027568.html">[jdev] IPv6 readyness?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#27567">[ date ]</a>
              <a href="thread.html#27567">[ thread ]</a>
              <a href="subject.html#27567">[ subject ]</a>
              <a href="author.html#27567">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Fri Apr 18 04:11:34 2008, Andre-John Mas wrote:
&gt;<i> 
</I>&gt;<i> On 17-Apr-08, at 02:15 , Johansson Olle E wrote:
</I>&gt;&gt;<i> It's not always that simple, there's a lot of gateway issues we  
</I>&gt;&gt;<i> need  to take care of too. If I have a jabber server on IPv4 only,
</I>&gt;&gt;<i> and your XMPP SRV records has IPv6 only, I need a configuration  
</I>&gt;&gt;<i> for  redirecting the jabber messages to an IPv4 to IPv6
</I>&gt;&gt;<i> gateway. There are application level issues to handle migration   
</I>&gt;&gt;<i> here, not only socket and DNS issues.
</I>&gt;<i> 
</I>&gt;<i> Is there any real world experience in this context?
</I>
Within SMTP, yes - the networking of SMTP is very similar to XMPP.

But I think we can probably assume that by the time there are  
IPv6-only servers, IPv6 will be commonplace. Most assumptions are  
that servers will remain dual-stack for a considerable time - clients  
are far more likely to end up IPv6-only.

The obvious solution for a server wishing to add IPv6 is tunnelling,  
though, and given it's really quite easy, I don't think IPv6-only  
clients will prove a problem. I'll flag Tony Finch on this, because I  
know he's had some experience in the SMTP world of IPv6 deployment.

The more interesting problem (which Tony Finch pointed out a while  
back) is that on a SRV lookup, you get the A/AAAA records &quot;for free&quot;  
in the additional section. But if you only get one or other, you  
can't assume that the other doesn't exist. So if you get only A, that  
doesn't mean that there's no IPv6 address.

The reason is that if records in the Additional section of the  
response are left out, there's no indication in the DNS response  
packet - the DNS response packet will only indicate if it couldn't  
fit all the SRV records in.

So in effect - and because you can miss out on only *some* of the A  
or AAAA records, you need to do potentially three queries for every  
SRV record instead of one. Technically, this isn't a new problem, but  
it's certainly an annoying byproduct of IPv6 increasing the DNS  
packet size.

Dave.
-- 
Dave Cridland - mailto:<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">dave at cridland.net</A> - xmpp:<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">dwd at jabber.org</A>
  - <A HREF="acap://acap.dave.cridland.net/byowner/user/dwd/bookmarks/">acap://acap.dave.cridland.net/byowner/user/dwd/bookmarks/</A>
  - <A HREF="http://dave.cridland.net/">http://dave.cridland.net/</A>
Infotrope Polymer - ACAP, IMAP, ESMTP, and Lemonade

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="027566.html">[jdev] IPv6 readyness?
</A></li>
	<LI>Next message: <A HREF="027568.html">[jdev] IPv6 readyness?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#27567">[ date ]</a>
              <a href="thread.html#27567">[ thread ]</a>
              <a href="subject.html#27567">[ subject ]</a>
              <a href="author.html#27567">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://mail.jabber.org/mailman/listinfo/jdev">More information about the JDev
mailing list</a><br>
</body></html>
