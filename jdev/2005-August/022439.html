<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [jdev] Presence delivery of roster items
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:jdev%40jabber.org?Subject=%5Bjdev%5D%20Presence%20delivery%20of%20roster%20items&In-Reply-To=a8f18ca305081022364ed269c2%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="022438.html">
   <LINK REL="Next"  HREF="022440.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[jdev] Presence delivery of roster items</H1>
    <B>Trejkaz</B> 
    <A HREF="mailto:jdev%40jabber.org?Subject=%5Bjdev%5D%20Presence%20delivery%20of%20roster%20items&In-Reply-To=a8f18ca305081022364ed269c2%40mail.gmail.com"
       TITLE="[jdev] Presence delivery of roster items">trejkaz at trypticon.org
       </A><BR>
    <I>Thu Aug 11 01:56:34 CDT 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="022438.html">[jdev] Presence delivery of roster items
</A></li>
        <LI>Next message: <A HREF="022440.html">[jdev] Presence delivery of roster items
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22439">[ date ]</a>
              <a href="thread.html#22439">[ thread ]</a>
              <a href="subject.html#22439">[ subject ]</a>
              <a href="author.html#22439">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Quoting Vinod Panicker &lt;<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">vinod.p at gmail.com</A>&gt;:
&gt;<i> Yes, thats exactly what I'm talking about.  But I dont see any mention
</I>&gt;<i> of &quot;how&quot; and &quot;when&quot; to do this in the RFC.  Also, you mentioned that
</I>&gt;<i> the server &quot;should&quot; send it after receiving initial presence from the
</I>&gt;<i> user - not &quot;must&quot;?
</I>
Well, I don't really have a habit of using RFC-speek in emails.

Here's the relevant information from RFC 3921, anyway.

Section 5.1.1  Initial Presence:
&gt;<i> Upon receiving initial presence from a client, the user's server MUST do the
</I>&gt;<i> following if there is not already one or more available resources for the
</I>&gt;<i> user (if there is already one or more available resources for the user, the
</I>&gt;<i> server obviously does not need to send the presence probes, since it already
</I>&gt;<i> possesses the requisite information):
</I>&gt;<i>    1. Send presence probes...&lt;snipped because it's pretty long&gt;
</I>
To summarise: after you send the initial presence, the server MUST send 
presence
probes to all contacts.

Section 5.1.3  Presence Probes:
&gt;<i> Upon receiving a presence probe from the user, the contact's server SHOULD
</I>&gt;<i> reply as follows:
</I>&gt;<i> &lt;snip&gt;
</I>&gt;<i>    4. Else, if the contact has at least one available resource, the server
</I>&gt;<i>       MUST reply to the presence probe by sending to the user the full XML of
</I>&gt;<i>       the last presence stanza with no 'to' attribute received by the server
</I>&gt;<i>       from each of the contact's available resources (again, subject to
</I>&gt;<i>       privacy lists in force for each session).
</I>
To summarise: after your server sends a probe to the other contact's server,
that server MUST reply by sending *you* the full XML of the last presence
stanzas.

Add the two together, and you'll see that the flood has to occur immediately
after you send your own one out.

&gt;<i> And what abt this restriction on not being able to
</I>&gt;<i> see contacts' presence before sending own initial presence?
</I>
This much is plain commonsense.  If your contact's server doesn't even know
you're online, it can't know you're there to send the presence to, let alone
know when to send it. :-)

TX


----------------------------------------------------------------
This message was sent using IMP, the Internet Messaging Program.


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="022438.html">[jdev] Presence delivery of roster items
</A></li>
	<LI>Next message: <A HREF="022440.html">[jdev] Presence delivery of roster items
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22439">[ date ]</a>
              <a href="thread.html#22439">[ thread ]</a>
              <a href="subject.html#22439">[ subject ]</a>
              <a href="author.html#22439">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://mail.jabber.org/mailman/listinfo/jdev">More information about the JDev
mailing list</a><br>
</body></html>
