<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [jdev] Presence delivery of roster items
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:jdev%40jabber.org?Subject=%5Bjdev%5D%20Presence%20delivery%20of%20roster%20items&In-Reply-To=20050811165634.kvpni3h1c0s4k4og%40home.trypticon.org">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="022439.html">
   <LINK REL="Next"  HREF="022441.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[jdev] Presence delivery of roster items</H1>
    <B>Vinod Panicker</B> 
    <A HREF="mailto:jdev%40jabber.org?Subject=%5Bjdev%5D%20Presence%20delivery%20of%20roster%20items&In-Reply-To=20050811165634.kvpni3h1c0s4k4og%40home.trypticon.org"
       TITLE="[jdev] Presence delivery of roster items">vinod.p at gmail.com
       </A><BR>
    <I>Thu Aug 11 02:29:21 CDT 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="022439.html">[jdev] Presence delivery of roster items
</A></li>
        <LI>Next message: <A HREF="022441.html">[jdev] Presence delivery of roster items
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22440">[ date ]</a>
              <a href="thread.html#22440">[ thread ]</a>
              <a href="subject.html#22440">[ subject ]</a>
              <a href="author.html#22440">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 8/11/05, Trejkaz &lt;<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">trejkaz at trypticon.org</A>&gt; wrote:
&gt;<i> Quoting Vinod Panicker &lt;<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">vinod.p at gmail.com</A>&gt;:
</I>&gt;<i> &gt; Yes, thats exactly what I'm talking about.  But I dont see any mention
</I>&gt;<i> &gt; of &quot;how&quot; and &quot;when&quot; to do this in the RFC.  Also, you mentioned that
</I>&gt;<i> &gt; the server &quot;should&quot; send it after receiving initial presence from the
</I>&gt;<i> &gt; user - not &quot;must&quot;?
</I>&gt;<i> 
</I>&gt;<i> Well, I don't really have a habit of using RFC-speek in emails.
</I>
That just goes to say that ur a perfectly normal human being ;)

&gt;<i> Here's the relevant information from RFC 3921, anyway.
</I>&gt;<i> 
</I>&gt;<i> Section 5.1.1  Initial Presence:
</I>&gt;<i> &gt; Upon receiving initial presence from a client, the user's server MUST do the
</I>&gt;<i> &gt; following if there is not already one or more available resources for the
</I>&gt;<i> &gt; user (if there is already one or more available resources for the user, the
</I>&gt;<i> &gt; server obviously does not need to send the presence probes, since it already
</I>&gt;<i> &gt; possesses the requisite information):
</I>&gt;<i> &gt;    1. Send presence probes...&lt;snipped because it's pretty long&gt;
</I>&gt;<i> 
</I>&gt;<i> To summarise: after you send the initial presence, the server MUST send
</I>&gt;<i> presence
</I>&gt;<i> probes to all contacts.
</I>
Yup.  I was basically bringing up the issue where presence probes are
not required - in which case, the contacts are local to the server.

&gt;<i> Section 5.1.3  Presence Probes:
</I>&gt;<i> &gt; Upon receiving a presence probe from the user, the contact's server SHOULD
</I>&gt;<i> &gt; reply as follows:
</I>&gt;<i> &gt; &lt;snip&gt;
</I>&gt;<i> &gt;    4. Else, if the contact has at least one available resource, the server
</I>&gt;<i> &gt;       MUST reply to the presence probe by sending to the user the full XML of
</I>&gt;<i> &gt;       the last presence stanza with no 'to' attribute received by the server
</I>&gt;<i> &gt;       from each of the contact's available resources (again, subject to
</I>&gt;<i> &gt;       privacy lists in force for each session).
</I>&gt;<i> 
</I>&gt;<i> To summarise: after your server sends a probe to the other contact's server,
</I>&gt;<i> that server MUST reply by sending *you* the full XML of the last presence
</I>&gt;<i> stanzas.
</I>&gt;<i> 
</I>&gt;<i> Add the two together, and you'll see that the flood has to occur immediately
</I>&gt;<i> after you send your own one out.
</I>
In this case, yes the flood will be individual presence stanza's that
come along from different parts of the world.  But there's no specific
information in the RFC of what has to be done about contact presence
which the server already has since they are local.

&gt;<i> &gt; And what abt this restriction on not being able to
</I>&gt;<i> &gt; see contacts' presence before sending own initial presence?
</I>&gt;<i> 
</I>&gt;<i> This much is plain commonsense.  If your contact's server doesn't even know
</I>&gt;<i> you're online, it can't know you're there to send the presence to, let alone
</I>&gt;<i> know when to send it. :-)
</I>
As I was reffering to earlier, what if the contacts are local to the
server - the server knows that both contact and user are online.

Regards,
Vinod.

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="022439.html">[jdev] Presence delivery of roster items
</A></li>
	<LI>Next message: <A HREF="022441.html">[jdev] Presence delivery of roster items
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22440">[ date ]</a>
              <a href="thread.html#22440">[ thread ]</a>
              <a href="subject.html#22440">[ subject ]</a>
              <a href="author.html#22440">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://mail.jabber.org/mailman/listinfo/jdev">More information about the JDev
mailing list</a><br>
</body></html>
