<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [JDEV] Writing presence-enabled agents/components
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:jdev%40jabber.org?Subject=%5BJDEV%5D%20Writing%20presence-enabled%20agents/components&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="014919.html">
   <LINK REL="Next"  HREF="014912.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[JDEV] Writing presence-enabled agents/components</H1>
    <B>Ralph Siemsen</B> 
    <A HREF="mailto:jdev%40jabber.org?Subject=%5BJDEV%5D%20Writing%20presence-enabled%20agents/components&In-Reply-To="
       TITLE="[JDEV] Writing presence-enabled agents/components">ralphs at blueairnetworks.com
       </A><BR>
    <I>Mon Nov 18 13:20:40 CST 2002</I>
    <P><UL>
        <LI>Previous message: <A HREF="014919.html">[JDEV] ps
</A></li>
        <LI>Next message: <A HREF="014912.html">[JDEV] Writing presence-enabled agents/components
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14903">[ date ]</a>
              <a href="thread.html#14903">[ thread ]</a>
              <a href="subject.html#14903">[ subject ]</a>
              <a href="author.html#14903">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I'm having some difficulties writing an external jabber component(agent) 
to behave correctly with regards to presence - eg. I want users to be 
able to subscribe my agent and see its presence, and vice versa.

The agent accepts presence subscriptions (replies with 'subscribed') and 
also sends back its own subscription request, which the user has to 
accept of course.  Then, the agent receives presence events whenever the 
user changes their status or disconnects - so far so good.

I'd like this to work the other way as well: if the agent disconnects 
for some reason, users who have it subscribed should see presence 
events.  However it seems that the server does not forward such events 
automatically - ie. the &quot;rebroadcasting&quot; of presence to all interested 
parties does not seem to occur for an agent.

The only way around this seems to be to have the agent permanently store 
the JIDs of all users who have subscribed the agent.  Then upon connect 
or disconnect, the agent has to explicitly send out presence events to 
all those JIDs.

Have I missed something obvious?  Is the intention for agents to 
explicitly store their subscriber lists (on disk)?  Or is there a way to 
make use of the existing code in jabberd but applied to an agent?

-Ralph



</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="014919.html">[JDEV] ps
</A></li>
	<LI>Next message: <A HREF="014912.html">[JDEV] Writing presence-enabled agents/components
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14903">[ date ]</a>
              <a href="thread.html#14903">[ thread ]</a>
              <a href="subject.html#14903">[ subject ]</a>
              <a href="author.html#14903">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://mail.jabber.org/mailman/listinfo/jdev">More information about the JDev
mailing list</a><br>
</body></html>
