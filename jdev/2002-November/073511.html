<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [JDEV] Re: How should a component auto-populate a roster and force a subscription?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:jdev%40jabber.org?Subject=Re%3A%20%5BJDEV%5D%20Re%3A%20How%20should%20a%20component%20auto-populate%20a%20roster%20and%20force%20a%20subscription%3F&In-Reply-To=%3C000601c290b9%242d3b5d90%24ac01a8c0%40vegas%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="073503.html">
   <LINK REL="Next"  HREF="073482.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[JDEV] Re: How should a component auto-populate a roster and force a subscription?</H1>
    <B>Mike Prince</B> 
    <A HREF="mailto:jdev%40jabber.org?Subject=Re%3A%20%5BJDEV%5D%20Re%3A%20How%20should%20a%20component%20auto-populate%20a%20roster%20and%20force%20a%20subscription%3F&In-Reply-To=%3C000601c290b9%242d3b5d90%24ac01a8c0%40vegas%3E"
       TITLE="[JDEV] Re: How should a component auto-populate a roster and force a subscription?">mike at mikeprince.com
       </A><BR>
    <I>Wed Nov 20 11:20:44 CST 2002</I>
    <P><UL>
        <LI>Previous message: <A HREF="073503.html">[JDEV] Re: How should a component auto-populate a roster and force a subscription?
</A></li>
        <LI>Next message: <A HREF="073482.html">[JDEV] java development
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#73511">[ date ]</a>
              <a href="thread.html#73511">[ thread ]</a>
              <a href="subject.html#73511">[ subject ]</a>
              <a href="author.html#73511">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Raditha,

Thanks for the pointers.  The solution I've arrived at is to update the
Jabber XML database with the new roster information, and then push the
same roster information to the client with an iq set.  It appears to
work ;)

I'm under the impression the client takes the baton from there and
negotiates presence.

Thanks again for your help,

Mike

&gt;<i> -----Original Message-----
</I>&gt;<i> From: <A HREF="http://mail.jabber.org/mailman/listinfo/jdev">jdev-admin at jabber.org</A> [mailto:<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">jdev-admin at jabber.org</A>] On 
</I>&gt;<i> Behalf Of Raditha Dissanayake
</I>&gt;<i> Sent: Tuesday, November 19, 2002 11:07 PM
</I>&gt;<i> To: <A HREF="http://mail.jabber.org/mailman/listinfo/jdev">jdev at jabber.org</A>
</I>&gt;<i> Subject: [JDEV] Re: How should a component auto-populate a 
</I>&gt;<i> roster and force a subscription?
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> Hi, 
</I>&gt;<i> 
</I>&gt;<i> The jabber programmers guide at docs.jabber.org might be the 
</I>&gt;<i> document you 
</I>&gt;<i> are looking for. It's also worthwhile to study the xml that 
</I>&gt;<i> is sent back and 
</I>&gt;<i> forth between the client and the server to get a good 
</I>&gt;<i> understanding of 
</I>&gt;<i> what's happening. 
</I>&gt;<i> 
</I>&gt;<i> Having said all that i think you are on the right track 
</I>&gt;<i> regards the presence 
</I>&gt;<i> packets. however i don't think most client will like it if 
</I>&gt;<i> you push iq set 
</I>&gt;<i> packets to them. You might be better off sending presence 
</I>&gt;<i> subsribe packets 
</I>&gt;<i> to both clients (yours and your buddy's). 
</I>&gt;<i> 
</I>&gt;<i> hope this helps. 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> Mike Prince writes: 
</I>&gt;<i> 
</I>&gt;<i> &gt; I'm writing a component that will auto-populate a roster and 
</I>&gt;<i> &gt; auto-subscribe the contacts.
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; My current tact is to use &lt;xdb&gt; to update the clients roster in the 
</I>&gt;<i> &gt; database, then push the roster change to the client via an &lt;iq 
</I>&gt;<i> &gt; type=&quot;set&quot;&gt;&lt;query...
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; I'd then like force the subscriptions (as much as possible) 
</I>&gt;<i> by forging 
</I>&gt;<i> &gt; the &lt;presence&gt; packet to the remote contact.
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; Am I going in the right direction?
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; As it stands, I'm crashing JIM with the &lt;iq&gt; set above and 
</I>&gt;<i> am swimming 
</I>&gt;<i> &gt; around and not finding any documentation about the above in 
</I>&gt;<i> regards to 
</I>&gt;<i> &gt; components.  I'm basing my guesstimates on client2server 
</I>&gt;<i> interactions.
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; Are there any docs around (even in pre-alpha form) that could 
</I>&gt;<i> &gt; enlighten me?  What's the &quot;right&quot; way to do this?
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; Thanks,
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; Mike
</I>


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="073503.html">[JDEV] Re: How should a component auto-populate a roster and force a subscription?
</A></li>
	<LI>Next message: <A HREF="073482.html">[JDEV] java development
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#73511">[ date ]</a>
              <a href="thread.html#73511">[ thread ]</a>
              <a href="subject.html#73511">[ subject ]</a>
              <a href="author.html#73511">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://mail.jabber.org/mailman/listinfo/jdev">More information about the JDev
mailing list</a><br>
</body></html>
