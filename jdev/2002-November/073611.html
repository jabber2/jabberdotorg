<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [JDEV] Current Debian Package Handover
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:jdev%40jabber.org?Subject=Re%3A%20%5BJDEV%5D%20Current%20Debian%20Package%20Handover&In-Reply-To=%3C20021127005718.GB13204%40lina.inka.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="073633.html">
   <LINK REL="Next"  HREF="073612.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[JDEV] Current Debian Package Handover</H1>
    <B>Bernd Eckenfels</B> 
    <A HREF="mailto:jdev%40jabber.org?Subject=Re%3A%20%5BJDEV%5D%20Current%20Debian%20Package%20Handover&In-Reply-To=%3C20021127005718.GB13204%40lina.inka.de%3E"
       TITLE="[JDEV] Current Debian Package Handover">lists at lina.inka.de
       </A><BR>
    <I>Tue Nov 26 18:57:18 CST 2002</I>
    <P><UL>
        <LI>Previous message: <A HREF="073633.html">[JDEV] Pam support for Jabber 1.4.2
</A></li>
        <LI>Next message: <A HREF="073612.html">[JDEV] jabber extensions available for handling locationinformation
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#73611">[ date ]</a>
              <a href="thread.html#73611">[ thread ]</a>
              <a href="subject.html#73611">[ subject ]</a>
              <a href="author.html#73611">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello Jamin, Dirk and JDevler.

As just announced on debiandevel, the maintainer for the debian packages
will switch over to Jamin, who is sponsored by Dirk. Attached is the current
diff file as it is stored inside the debian archive with some comments from
me, to see what the current differences to the (old) jabber distribution
are.

NOTE: I have uploaded the current jabber source archive with the version
number jabber_1.4.2a, since there was a fix to this archive from jabber web
site without change in version number which is not well handled on the
debian system. Otherwise the jabber_1.4.2a.orig.tar.gz is unaltered.

The configure script is changed to
a) support the DEB_BUILD_OPTIONS flag, which will compile with &quot;-g&quot; flag as
recommended by debian packaing manual if contains &quot;debug&quot;
b) allow to specify the JHOME and do not asume local compile directory
(needed if package is installed in FHS compliant place)
c) do not use systhem libpth. This might or might not be needed, there have
been problem reports with the debians version of libpth which is not
officially supported by jabber. For now debian's jabber is compiled with the
included static one.

--- jabber-1.4.2a.orig/configure
+++ jabber-1.4.2a/configure
@@ -27,12 +27,20 @@
 else
     CC=&quot;gcc&quot;;
 fi;
-CFLAGS=&quot;$CFLAGS -g -Wall -I. -I..&quot;
+case x$DEB_BUILD_OPTIONS in
+  *debug*)
+    CFLAGS=&quot;$CFLAGS -g&quot;;;
+esac;
+CFLAGS=&quot;$CFLAGS -Wall -I. -I..&quot;
 MCFLAGS=&quot;$MCFLAGS -shared&quot;
 LDFLAGS=&quot;$LDFLAGS&quot;
 LIBS=&quot;$LIBS&quot;
 XLDFLAGS=&quot;$XLDFLAGS &quot;
-JHOME=`pwd`
+if [ -n &quot;$JHOME&quot; ]; then
+	JHOME=&quot;$JHOME&quot;;
+else
+	JHOME=`pwd`;
+fi;
 
 ##
 # Print a cool header
@@ -77,17 +85,17 @@
 # Pth check
 ##
 printf &quot;Getting pth settings...&quot;
-PTH_CFLAGS=`pth-config --cflags`
-PTH_LDFLAGS=`pth-config --ldflags`
-PTH_LIBS=`pth-config --libs`
-PTH_LIBDIR=`pth-config --libdir`
-if [ -n &quot;$PTH_CFLAGS&quot; ]; then
-    CFLAGS=&quot;$CFLAGS $PTH_CFLAGS&quot;;
-    LDFLAGS=&quot;$LDFLAGS $PTH_LDFLAGS&quot;;
-    LIBS=&quot;$LIBS $PTH_LIBS&quot;;
-    SLIBS=&quot;$SLIBS $PTH_LIBDIR/libpth.a&quot;;
-    printf &quot;         Done.\n&quot;;
-else
+#PTH_CFLAGS=`pth-config --cflags`
+#PTH_LDFLAGS=`pth-config --ldflags`
+#PTH_LIBS=`pth-config --libs`
+#PTH_LIBDIR=`pth-config --libdir`
+#if [ -n &quot;$PTH_CFLAGS&quot; ]; then
+#    CFLAGS=&quot;$CFLAGS $PTH_CFLAGS&quot;;
+#    LDFLAGS=&quot;$LDFLAGS $PTH_LDFLAGS&quot;;
+#    LIBS=&quot;$LIBS $PTH_LIBS&quot;;
+#    SLIBS=&quot;$SLIBS $PTH_LIBDIR/libpth.a&quot;;
+#    printf &quot;         Done.\n&quot;;
+#else
     if [ -d &quot;jabberd/pth-1.4.0&quot; ]; then
         opwd=`pwd`
         cd jabberd/pth-1.4.0;
@@ -100,7 +108,7 @@
     else
         printf &quot;          Error.\n\n No version of PTH is available on this system\<A HREF="nhttp://www.gnu.org/software/pth/&quot;;">nhttp://www.gnu.org/software/pth/&quot;;</A>
     fi
-fi
+#fi
 

jabber.xml configuration template is enhanced to refer to debian. For
privacy reasons I turn off the auto update spy feature. Should be handeled
by debian packages anyway. I changed the default localtion for the jabber
spool to /var/lib/jabber/ and the log fiels to /var/log/jabber/ and the pid
file to /var/run/jabber/. All of them accessable by the jabber runtime
daemon user.

 
--- jabber-1.4.2a.orig/jabber.xml
+++ jabber-1.4.2a/jabber.xml
@@ -116,8 +116,8 @@
 
       &lt;vCard&gt;
         &lt;FN&gt;Jabber Server&lt;/FN&gt;
-        &lt;DESC&gt;A Jabber Server!&lt;/DESC&gt;
-        &lt;URL&gt;<A HREF="http://foo.bar/&lt;/URL">http://foo.bar/&lt;/URL</A>&gt;
+        &lt;DESC&gt;A Jabber Server on Debian GNU/Linux!&lt;/DESC&gt;
+        &lt;URL&gt;<A HREF="http://www.debian.org/&lt;/URL">http://www.debian.org/&lt;/URL</A>&gt;
       &lt;/vCard&gt;
 
       &lt;!-- 
@@ -140,7 +140,7 @@
 
       &lt;welcome&gt;
         &lt;subject&gt;Welcome!&lt;/subject&gt;
-        &lt;body&gt;Welcome to the Jabber server at localhost -- we hope you enjoy this service! For information about how to use Jabber, visit the Jabber User's Guide at <A HREF="http://docs.jabber.org/&lt;/body">http://docs.jabber.org/&lt;/body</A>&gt;
+        &lt;body&gt;Welcome to the Jabber server -- we hope you enjoy this service! For information about how to use Jabber, visit the Jabber User's Guide at <A HREF="http://docs.jabber.org/&lt;/body">http://docs.jabber.org/&lt;/body</A>&gt;
       &lt;/welcome&gt;
 
       &lt;!-- 
@@ -191,9 +191,11 @@
       feature, change 'localhost' to the hostname or IP address 
       of your server, making sure that it is the same as your 
       entry for &lt;host/&gt; above.
+
+      Turned OFF by Default on Debian GNU/Linux
       --&gt;
 
-      &lt;update&gt;&lt;jabberd:cmdline flag=&quot;h&quot;&gt;localhost&lt;/jabberd:cmdline&gt;&lt;/update&gt;
+      &lt;!-- &lt;update&gt;&lt;jabberd:cmdline flag=&quot;h&quot;&gt;localhost&lt;/jabberd:cmdline&gt;&lt;/update&gt; --&gt;
 
       &lt;!--
       This enables the server to automatically update the 
@@ -269,8 +271,7 @@
       &lt;mod_roster&gt;./jsm/jsm.so&lt;/mod_roster&gt;
       &lt;mod_time&gt;./jsm/jsm.so&lt;/mod_time&gt;
       &lt;mod_vcard&gt;./jsm/jsm.so&lt;/mod_vcard&gt;
-      &lt;mod_last&gt;./jsm/jsm.so&lt;/mod_last&gt;
-      &lt;mod_version&gt;./jsm/jsm.so&lt;/mod_version&gt;
+      &lt;!-- &lt;mod_version&gt;./jsm/jsm.so&lt;/mod_version&gt; --&gt;
       &lt;mod_announce&gt;./jsm/jsm.so&lt;/mod_announce&gt;
       &lt;mod_agents&gt;./jsm/jsm.so&lt;/mod_agents&gt;
       &lt;mod_browse&gt;./jsm/jsm.so&lt;/mod_browse&gt;
@@ -297,8 +298,9 @@
     &lt;load&gt;
       &lt;xdb_file&gt;./xdb_file/xdb_file.so&lt;/xdb_file&gt;
     &lt;/load&gt;
+    &lt;!-- BEWARE: do not add line breaks inside the &lt;spool&gt;&lt;/spool&gt; tags --&gt;
     &lt;xdb_file xmlns=&quot;jabber:config:xdb_file&quot;&gt;
-      &lt;spool&gt;&lt;jabberd:cmdline flag='s'&gt;./spool&lt;/jabberd:cmdline&gt;&lt;/spool&gt;
+      &lt;spool&gt;&lt;jabberd:cmdline flag='s'&gt;/var/lib/jabber&lt;/jabberd:cmdline&gt;&lt;/spool&gt;
     &lt;/xdb_file&gt;
   &lt;/xdb&gt;
 
@@ -359,7 +361,7 @@
     &lt;host/&gt;
     &lt;logtype/&gt;
     &lt;format&gt;%d: [%t] (%h): %s&lt;/format&gt;
-    &lt;file&gt;error.log&lt;/file&gt;
+    &lt;file&gt;/var/log/jabber/error.log&lt;/file&gt;
     &lt;stderr/&gt;
   &lt;/log&gt;
 
@@ -372,7 +374,7 @@
     &lt;host/&gt;
     &lt;logtype&gt;record&lt;/logtype&gt;
     &lt;format&gt;%d %h %s&lt;/format&gt;
-    &lt;file&gt;record.log&lt;/file&gt;
+    &lt;file&gt;/var/log/jabber/record.log&lt;/file&gt;
   &lt;/log&gt;
 
   &lt;!-- The following two services are for handling server-to-server traffic. --&gt;
@@ -596,7 +598,7 @@
   &lt;!--
   This specifies the file to store the pid of the process in.
   --&gt;
-  &lt;pidfile&gt;./jabber.pid&lt;/pidfile&gt;
+  &lt;pidfile&gt;/var/run/jabber/jabber.pid&lt;/pidfile&gt;
 
 
 &lt;/jabber&gt;



I upgraed the autoconfig stuff for better cross platform building. This can
be done by running &quot;libtoolize --force --copy&quot; as described in debian bugs
#153230, #142194)

--- jabber-1.4.2a.orig/jabberd/pth-1.4.0/aclocal.m4
+++ jabber-1.4.2a/jabberd/pth-1.4.0/aclocal.m4
...
--- jabber-1.4.2a.orig/jabberd/pth-1.4.0/config.sub
+++ jabber-1.4.2a/jabberd/pth-1.4.0/config.sub
...
--- jabber-1.4.2a.orig/jabberd/pth-1.4.0/ltmain.sh
+++ jabber-1.4.2a/jabberd/pth-1.4.0/ltmain.sh
...



Changed the makefile to use the right configuration file as needed by FHS
(NOTE: this will not work cause it will be ignored, so more patches are
needed, see below in config.c:


--- jabber-1.4.2a.orig/jabberd/Makefile
+++ jabber-1.4.2a/jabberd/Makefile
@@ -6,7 +6,7 @@
 ifeq ($(ISSINGLE),1)
 	DEFINES=-DHOME=&quot;\&quot;$(JHOME)\&quot;&quot; -DSINGLE -DSTATIC
 else
-	DEFINES=-DHOME=&quot;\&quot;$(JHOME)\&quot;&quot; -DCONFIGXML=&quot;\&quot;jabber.xml\&quot;&quot;
+	DEFINES=-DHOME=&quot;\&quot;$(JHOME)\&quot;&quot; -DCONFIGXML=&quot;\&quot;/etc/jabber/jabber.xml\&quot;&quot;
 endif
 ifeq ($(ISSTATIC),1)
 	DEFINES=-DHOME=&quot;\&quot;$(JHOME)\&quot;&quot; -DSTATIC
--- jabber-1.4.2a.orig/jabberd/config.c
+++ jabber-1.4.2a/jabberd/config.c
@@ -174,7 +174,7 @@
 
 int configurate(char *file)
 {
-    char def[] = &quot;jabber.xml&quot;;
+    char def[] = CONFIGXML;
     char *realfile = (char *)def;
     xmlnode incl;
     char *c;

Added the Debian Readme and changelog

--- jabber-1.4.2a.orig/debian/README.Debian
+++ jabber-1.4.2a/debian/README.Debian
@@ -0,0 +1,20 @@
+jabber Daemon for Debian
+------------------------
+
+Please consult the File /usr/share/doc/jabber/UPGRADE on how to upgrade from
+jabber-transport.
+
+This Package will configure itself to run with the hostname localhost. You
+can change this with the -h setting in /etc/jabber/jabber.cfg (which will be
+sourced by /etc/init.d/jabber.
+
+NOTE: the Default Configuration of this package will disable automatic
+version update.
+
+The Jabber Spool in this Version is recommended to be in
+/var/lib/jabber/&lt;servername&gt; which can be overwritten with the -s option,
+which in turn can be set in /etc/jabber/jabber.cfg
+
+ -- Bernd Eckenfels &lt;<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">ecki at debian.org</A>&gt;  Sat, 25 May 2002 19:35:04 +0200
+
+
--- jabber-1.4.2a.orig/debian/changelog
+++ jabber-1.4.2a/debian/changelog
@@ -0,0 +1,145 @@
+jabber (1.4.2a-5) unstable; urgency=low
+
+  * added config.sub by running libtoolize --force --copy
+    (Closes: Bug #153230, #142194)
+  * wont package transports, but you can du with -dev package now
+    (Closes: Bug #93862, #119151)
+  * upload to main (Closes: Bug #153770)
+
+ -- Bernd Eckenfels &lt;<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">ecki at debian.org</A>&gt;  Tue, 23 Jul 2002 21:20:07 +0200
+
+jabber (1.4.2a-4) unstable; urgency=low
+
+  * reupload 
+
+ -- Bernd Eckenfels &lt;<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">ecki at debian.org</A>&gt;  Wed,  3 Jul 2002 21:48:04 +0200
+
+jabber (1.4.2a-3) unstable; urgency=low
+
+  * fixed rules sillyness (install/chmod) reported by Michael Leuchtenburg
+
+ -- Bernd Eckenfels &lt;<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">ecki at debian.org</A>&gt;  Fri, 28 Jun 2002 03:44:09 +0200
+
+jabber (1.4.2a-2) unstable; urgency=high
+
+  * added jabber-dev patch from Jason Thomas (Closes: Bug #97576)
+  * allowed plain authentication since it is needed for creating users 
+    (Closes: Bug #138530)
+  * added minimum required versin to libssl09 (Closes: Bug #145927)
+
+ -- Bernd Eckenfels &lt;<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">ecki at debian.org</A>&gt;  Sat, 25 May 2002 19:23:27 +0200
+
+jabber (1.4.2a-1.1) unstable; urgency=low
+
+  * NMU
+  * Fix hppa problems.  Closes: #142194
+
+ -- LaMont Jones &lt;<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">lamont at debian.org</A>&gt;  Sun, 21 Apr 2002 21:49:39 -0600
+
+jabber (1.4.2a-1) unstable; urgency=high
+
+  * repackaged new upstream version with libpth-1.4.0
+  * build package with included libpth (Closes: #139797)
+  * added call to distclean for the pth-1.4.0 subdir
+
+ -- Bernd Eckenfels &lt;<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">ecki at debian.org</A>&gt;  Sun,  7 Apr 2002 19:45:50 +0200
+
+jabber (1.4.2-3) unstable; urgency=low
+
+  * fixed reload pid location (Closes: #134525)
+    NOTE: change this in jabber.xml to /var/run/jabber/jabber.pid
+  * fixed homedir (Closes: #134293)
+  * added qualified path to record.log (failure on startup) (Closes: #134529)
+  * thanks to Jason Thomas for patches!
+
+ -- Bernd Eckenfels &lt;<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">ecki at debian.org</A>&gt;  Mon, 18 Feb 2002 04:22:36 +0100
+
+jabber (1.4.2-2) unstable; urgency=low
+
+  * fixed section
+
+ -- Bernd Eckenfels &lt;<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">ecki at debian.org</A>&gt;  Mon, 11 Feb 2002 05:21:24 +0100
+
+jabber (1.4.2-1) unstable; urgency=low
+
+  * new upstream version
+  * enabled ssl build (Closes: Bug #99313)
+  * rebuild with libpth14 installed (Closes: Bug #129098)
+  * removed hostnae &quot;localhost&quot; from welcome message
+  * made -g depending on DEB_BUILD_OPTION, use dh_strip to strip (naked?)
+
+ -- Bernd Eckenfels &lt;<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">ecki at debian.org</A>&gt;  Fri,  8 Feb 2002 23:23:10 +0100
+
+jabber (1.4.1-2) unstable; urgency=low
+
+  * added manpage from Jeronimo Pellegrini
+  * upload to non-US because of SSL support
+
+ -- Bernd Eckenfels &lt;<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">ecki at debian.org</A>&gt;  Tue,  4 Dec 2001 00:33:34 +0100
+
+jabber (1.4.1-1) unstable; urgency=low
+
+  * now upstream version (Closes: #109541)
+  * Description already fixed (Closes: #78977)
+  * added undocumented link for jabberd as requested in #82647, #94408
+  * more recent standards version
+  * added note about not adding line breaks in &lt;spool&gt; (Closes: #109056)
+
+ -- Bernd Eckenfels &lt;<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">ecki at debian.org</A>&gt;  Fri, 14 Sep 2001 05:02:59 +0200
+
+jabber (1.4-2) unstable; urgency=low
+
+  * Non-NMU
+  * removed suidregister
+
+ -- Bernd Eckenfels &lt;<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">ecki at debian.org</A>&gt;  Sun, 18 Mar 2001 02:52:17 +0100
+
+jabber (1.4-1.1) unstable; urgency=low
+
+  * NMU add missing #include to jabberd/lib/lib.h (Closes: #87071).
+
+ -- Ingo Saitz &lt;<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">ingo at debian.org</A>&gt;  Fri, 16 Mar 2001 22:24:13
+
+jabber (1.4-1) unstable; urgency=low
+
+  * new upstream 1.4 final. No Auto-Upgrade supplied!
+
+ -- Bernd Eckenfels &lt;<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">ecki at debian.org</A>&gt;  Sun, 18 Feb 2001 17:29:35 +0100
+
+jabber (1.3pre1-1) unstable; urgency=low
+
+  * quick new repackaging of new alpha 1.4 upstream release
+
+ -- Bernd Eckenfels &lt;<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">ecki at debian.org</A>&gt;  Sun, 14 Jan 2001 02:53:51 +0100
+
+jabber (1.2-4) unstable; urgency=low
+
+  * xml error in sample config file fixed
+
+ -- Bernd Eckenfels &lt;<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">ecki at debian.org</A>&gt;  Wed, 13 Dec 2000 17:54:38 +0100
+
+jabber (1.2-3) unstable; urgency=low
+
+  * fixed default option for hostname, so localhost is completely
+    overwritten with -h
+  * fixed patch (type in configure noticed by Chad)
+  * replace jabber-transport
+  * fixed the layout of the package description (Closes bug: #78977)
+
+ -- Bernd Eckenfels &lt;<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">ecki at debian.org</A>&gt;  Mon, 11 Dec 2000 10:56:02 +0100
+
+jabber (1.2-2) unstable; urgency=low
+
+  * added log and spool dir, moved .so files to lib, first working version
+
+ -- Bernd Eckenfels &lt;<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">ecki at debian.org</A>&gt;  Tue,  5 Dec 2000 01:35:15 +0100
+
+jabber (1.2-1) unstable; urgency=low
+
+  * renamed jabber-transport to jabber (new upstream)
+
+ -- Bernd Eckenfels &lt;<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">ecki at debian.org</A>&gt;  Mon,  6 Nov 2000 23:39:49 +0100
+
+Local variables:
+mode: debian-changelog
+End:
--- jabber-1.4.2a.orig/debian/copyright
+++ jabber-1.4.2a/debian/copyright
@@ -0,0 +1,471 @@
+This package was debianized by Bernd Eckenfels &lt;<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">ecki at debian.org</A>&gt; on
+Sun, 21 May 2000 12:31:20 +0200. (jabber-transport) and 
+Mon,  6 Nov 2000 23:43:05 +0100 (jabber)
+Sun, 18 Feb 2001 17:30:34 +0100 (jabber 1.4)
+Fri, 14 Sep 2001 05:07:21 +0200 (jabbet 1.4.1 New License)
+
+It was downloaded from 
+<A HREF="http://download.jabber.org/dists/1.4/final/jabber-1.4.2.tar.gz">http://download.jabber.org/dists/1.4/final/jabber-1.4.2.tar.gz</A>
+
+Upstream Authors: The Jabber Team <A HREF="http://jabber.org/">http://jabber.org/</A>
+
+Copyright:
+
+/* --------------------------------------------------------------------------
+ *
+ * License
+ *
+ * The contents of this file are subject to the Jabber Open Source License
+ * Version 1.0 (the &quot;License&quot;).  You may not copy or use this file, in either
+ * source code or executable form, except in compliance with the License.  You
+ * may obtain a copy of the License at <A HREF="http://www.jabber.com/license/">http://www.jabber.com/license/</A> or at
+ * <A HREF="http://www.opensource.org/.">http://www.opensource.org/.</A>  
+ *
+ * Software distributed under the License is distributed on an &quot;AS IS&quot; basis,
+ * WITHOUT WARRANTY OF ANY KIND, either express or implied.  See the License
+ * for the specific language governing rights and limitations under the
+ * License.
+ *
+ * Copyrights
+ * 
+ * Portions created by or assigned to Jabber.com, Inc. are 
+ * Copyright (c) 1999-2000 Jabber.com, Inc.  All Rights Reserved.  Contact
+ * information for Jabber.com, Inc. is available at <A HREF="http://www.jabber.com/.">http://www.jabber.com/.</A>
+ *
+ * Portions Copyright (c) 1998-1999 Jeremie Miller.
+ * 
+ * Acknowledgements
+ * 
+ * Special thanks to the Jabber Open Source Contributors for their
+ * suggestions and support of Jabber.
+ * 
+ * --------------------------------------------------------------------------*/
+
+
+JABBER OPEN SOURCE LICENSE
+Version 1.0
+
+This Jabber Open Source License (the &quot;License&quot;) applies to Jabber Server and
+related software products as well as any updates or maintenance releases of
+that software (&quot;Jabber Products&quot;) that are distributed by Jabber.Com, Inc.
+(&quot;Licensor&quot;). Any Jabber Product licensed pursuant to this License is a
+&quot;Licensed Product.&quot; Licensed Product, in its entirety, is protected by U.S.
+copyright law. This License identifies the terms under which you may use,
+copy, distribute or modify Licensed Product.
+
+Preamble
+This Preamble is intended to describe, in plain English, the nature and
+scope of this License. However, this Preamble is not a part of this license.
+The legal effect of this License is dependent only upon the terms of the
+License and not this Preamble.
+This License complies with the Open Source Definition and has been approved
+by Open Source Initiative. Software distributed under this License may be
+marked as &quot;OSI Certified Open Source Software.&quot;
+
+This License provides that:
+
+   1. You may use, sell or give away the Licensed Product, alone or as a
+component of an aggregate software distribution containing programs from
+several different sources. No royalty or other fee is required.
+
+   2. Both Source Code and executable versions of the Licensed Product,
+including Modifications made by previous Contributors, are available for
+your use. (The terms &quot;Licensed Product,&quot; &quot;Modifications,&quot; &quot;Contributors&quot; and
+&quot;Source Code&quot; are defined in the License.)
+
+   3. You are allowed to make Modifications to the Licensed Product, and you
+can create Derivative Works from it. (The term &quot;Derivative Works&quot; is defined
+in the License.)
+
+   4. By accepting the Licensed Product under the provisions of this
+License, you agree that any Modifications you make to the Licensed Product
+and then distribute are governed by the provisions of this License. In
+particular, you must make the Source Code of your Modifications available to
+others.
+
+   5. You may use the Licensed Product for any purpose, but the Licensor is
+not providing you any warranty whatsoever, nor is the Licensor accepting any
+liability in the event that the Licensed Product doesn't work properly or
+causes you any injury or damages.
+
+   6. If you sublicense the Licensed Product or Derivative Works, you may
+charge fees for warranty or support, or for accepting indemnity or liability
+obligations to your customers. You cannot charge for the Source Code.
+
+   7. If you assert any patent claims against the Licensor relating to the
+Licensed Product, or if you breach any terms of the License, your rights to
+the Licensed Product under this License automatically terminate.
+
+      You may use this License to distribute your own Derivative Works, in
+which case the provisions of this License will apply to your Derivative
+Works just as they do to the original Licensed Product.
+
+      Alternatively, you may distribute your Derivative Works under any
+other OSI-approved Open Source license, or under a proprietary license of
+your choice. If you use any license other than this License, however, you
+must continue to fulfill the requirements of this License (including the
+provisions relating to publishing the Source Code) for those portions of
+your Derivative Works that consist of the Licensed Product, including the
+files containing Modifications.
+
+      New versions of this License may be published from time to time. You
+may choose to continue to use the license terms in this version of the
+License or those from the new version. However, only the Licensor has the
+right to change the License terms as they apply to the Licensed Product.
+      This License relies on precise definitions for certain terms. Those
+terms are defined when they are first used, and the definitions are repeated
+for your convenience in a Glossary at the end of the License.
+
+License Terms
+
+   1. Grant of License From Licensor. Licensor hereby grants you a
+world-wide, royalty-free, non-exclusive license, subject to third party
+intellectual property claims, to do the following:
+
+   1. Use, reproduce, modify, display, perform, sublicense and distribute
+Licensed Product or portions thereof (including Modifications as hereinafter
+defined), in both Source Code or as an executable program. &quot;Source Code&quot;
+means the preferred form for making modifications to the Licensed Product,
+including all modules contained therein, plus any associated interface
+definition files, scripts used to control compilation and installation of an
+executable program, or a list of differential comparisons against the Source
+Code of the Licensed Product.
+   2. Create Derivative Works (as that term is defined under U.S. copyright
+law) of Licensed Product by adding to or deleting from the substance or
+structure of said Licensed Product.
+   3. Under claims of patents now or hereafter owned or controlled by
+Licensor, to make, use, sell, offer for sale, have made, and/or otherwise
+dispose of Licensed Product or portions thereof, but solely to the extent
+that any such claim is necessary to enable you to make, use, sell, offer for
+sale, have made, and/or otherwise dispose of Licensed Product or portions
+thereof or Derivative Works thereof.
+
+   1. Grant of License to Modifications From Contributor. &quot;Modifications&quot;
+means any additions to or deletions from the substance or structure of (i) a
+file containing Licensed Product, or (ii) any new file that contains any
+part of Licensed Product. Hereinafter in this License, the term &quot;Licensed
+Product&quot; shall include all previous Modifications that you receive from any
+Contributor. By application of the provisions in Section 4(a) below, each
+person or entity who created or contributed to the creation of, and
+distributed, a Modification (a &quot;Contributor&quot;) hereby grants you a
+world-wide, royalty-free, non-exclusive license, subject to third party
+intellectual property claims, to do the following:
+
+   1. Use, reproduce, modify, display, perform, sublicense and distribute
+any Modifications created by such Contributor or portions thereof, in both
+Source Code or as an executable program, either on an unmodified basis or as
+part of Derivative Works.
+   2. Under claims of patents now or hereafter owned or controlled by
+Contributor, to make, use, sell, offer for sale, have made, and/or otherwise
+dispose of Modifications or portions thereof, but solely to the extent that
+any such claim is necessary to enable you to make, use, sell, offer for
+sale, have made, and/or otherwise dispose of Modifications or portions
+thereof or Derivative Works thereof.
+
+   1. Exclusions From License Grant. Nothing in this License shall be deemed
+to grant any rights to trademarks, copyrights, patents, trade secrets or any
+other intellectual property of Licensor or any Contributor except as
+expressly stated herein. No patent license is granted separate from the
+Licensed Product, for code that you delete from the Licensed Product, or for
+combinations of the Licensed Product with other software or hardware. No
+right is granted to the trademarks of Licensor or any Contributor even if
+such marks are included in the Licensed Product. Nothing in this License
+shall be interpreted to prohibit Licensor from licensing under different
+terms from this License any code that Licensor otherwise would have a right
+to license.
+
+   2. Your Obligations Regarding Distribution.
+
+   1. Application of This License to Your Modifications. As an express
+condition for your use of the Licensed Product, you hereby agree that any
+Modifications that you create or to which you contribute, and which you
+distribute, are governed by the terms of this License including, without
+limitation, Section 2. Any Modifications that you create or to which you
+contribute may be distributed only under the terms of this License or a
+future version of this License released under Section 7. You must include a
+copy of this License with every copy of the Modifications you distribute.
+You agree not to offer or impose any terms on any Source Code or executable
+version of the Licensed Product or Modifications that alter or restrict the
+applicable version of this License or the recipients' rights hereunder.
+However, you may include an additional document offering the additional
+rights described in Section 4(e).
+   2. Availability of Source Code. You must make available, under the terms
+of this License, the Source Code of the Licensed Product and any
+Modifications that you distribute, either on the same media as you
+distribute any executable or other form of the Licensed Product, or via a
+mechanism generally accepted in the software development community for the
+electronic transfer of data (an &quot;Electronic Distribution Mechanism&quot;). The
+Source Code for any version of Licensed Product or Modifications that you
+distribute must remain available for at least twelve (12) months after the
+date it initially became available, or at least six (6) months after a
+subsequent version of said Licensed Product or Modifications has been made
+available. You are responsible for ensuring that the Source Code version
+remains available even if the Electronic Distribution Mechanism is
+maintained by a third party.
+   3. Description of Modifications. You must cause any Modifications that
+you create or to which you contribute, and which you distribute, to contain
+a file documenting the additions, changes or deletions you made to create or
+contribute to those Modifications, and the dates of any such additions,
+changes or deletions. You must include a prominent statement that the
+Modifications are derived, directly or indirectly, from the Licensed Product
+and include the names of the Licensor and any Contributor to the Licensed
+Product in (i) the Source Code and (ii) in any notice displayed by a version
+of the Licensed Product you distribute or in related documentation in which
+you describe the origin or ownership of the Licensed Product. You may not
+modify or delete any preexisting copyright notices in the Licensed Product.
+   4. Intellectual Property Matters.
+
+   1. Third Party Claims. If you have knowledge that a license to a third
+party's intellectual property right is required to exercise the rights
+granted by this License, you must include a text file with the Source Code
+distribution titled &quot;LEGAL&quot; that describes the claim and the party making
+the claim in sufficient detail that a recipient will know whom to contact.
+If you obtain such knowledge after you make any Modifications available as
+described in Section 4(b), you shall promptly modify the LEGAL file in all
+copies you make available thereafter and shall take other steps (such as
+notifying appropriate mailing lists or newsgroups) reasonably calculated to
+inform those who received the Licensed Product from you that new knowledge
+has been obtained.
+   2. Contributor APIs. If your Modifications include an application
+programming interface (&quot;API&quot;) and you have knowledge of patent licenses that
+are reasonably necessary to implement that API, you must also include this
+information in the LEGAL file.
+   3. Representations. You represent that, except as disclosed pursuant to
+4(d)(i) above, you believe that any Modifications you distribute are your
+original creations and that you have sufficient rights to grant the rights
+conveyed by this License.
+
+   1. Required Notices. You must duplicate this License in any documentation
+you provide along with the Source Code of any Modifications you create or to
+which you contribute, and which you distribute, wherever you describe
+recipients' rights relating to Licensed Product. You must duplicate the
+notice contained in Exhibit A (the &quot;Notice&quot;) in each file of the Source Code
+of any copy you distribute of the Licensed Product. If you created a
+Modification, you may add your name as a Contributor to the Notice. If it is
+not possible to put the Notice in a particular Source Code file due to its
+structure, then you must include such Notice in a location (such as a
+relevant directory file) where a user would be likely to look for such a
+notice. You may choose to offer, and charge a fee for, warranty, support,
+indemnity or liability obligations to one or more recipients of Licensed
+Product. However, you may do so only on your own behalf, and not on behalf
+of the Licensor or any Contributor. You must make it clear that any such
+warranty, support, indemnity or liability obligation is offered by you
+alone, and you hereby agree to indemnify the Licensor and every Contributor
+for any liability incurred by the Licensor or such Contributor as a result
+of warranty, support, indemnity or liability terms you offer.
+   2. Distribution of Executable Versions. You may distribute Licensed
+Product as an executable program under a license of your choice that may
+contain terms different from this License provided (i) you have satisfied
+the requirements of Sections 4(a) through 4(e) for that distribution, (ii)
+you include a conspicuous notice in the executable version, related
+documentation and collateral materials stating that the Source Code version
+of the Licensed Product is available under the terms of this License,
+including a description of how and where you have fulfilled the obligations
+of Section 4(b), (iii) you retain all existing copyright notices in the
+Licensed Product, and (iv) you make it clear that any terms that differ from
+this License are offered by you alone, not by Licensor or any Contributor.
+You hereby agree to indemnify the Licensor and every Contributor for any
+liability incurred by Licensor or such Contributor as a result of any terms
+you offer.
+   3. Distribution of Derivative Works. You may create Derivative Works
+(e.g., combinations of some or all of the Licensed Product with other code)
+and distribute the Derivative Works as products under any other license you
+select, with the proviso that the requirements of this License are fulfilled
+for those portions of the Derivative Works that consist of the Licensed
+Product or any Modifications thereto.
+
+   1. Inability to Comply Due to Statute or Regulation. If it is impossible
+for you to comply with any of the terms of this License with respect to some
+or all of the Licensed Product due to statute, judicial order, or
+regulation, then you must (i) comply with the terms of this License to the
+maximum extent possible, (ii) cite the statute or regulation that prohibits
+you from adhering to the License, and (iii) describe the limitations and the
+code they affect. Such description must be included in the LEGAL file
+described in Section 4(d), and must be included with all distributions of
+the Source Code. Except to the extent prohibited by statute or regulation,
+such description must be sufficiently detailed for a recipient of ordinary
+skill at computer programming to be able to understand it.
+
+   2. Application of This License. This License applies to code to which
+Licensor or Contributor has attached the Notice in Exhibit A, which is
+incorporated herein by this reference.
+
+   3. Versions of This License.
+
+   1. New Versions. Licensor may publish from time to time revised and/or
+new versions of the License.
+   2. Effect of New Versions. Once Licensed Product has been published under
+a particular version of the License, you may always continue to use it under
+the terms of that version. You may also choose to use such Licensed Product
+under the terms of any subsequent version of the License published by
+Licensor. No one other than Lic ensor has the right to modify the terms
+applicable to Licensed Product created under this License.
+   3. Derivative Works of this License. If you create or use a modified
+version of this License, which you may do only in order to apply it to
+software that is not already a Licensed Product under this License, you must
+rename your license so that it is not confusingly similar to this License,
+and must make it clear that your license contains terms that differ from
+this License. In so naming your license, you may not use any trademark of
+Licensor or any Contributor.
+
+   1. Disclaimer of Warranty. LICENSED PRODUCT IS PROVIDED UNDER THIS
+LICENSE ON AN &quot;AS IS&quot; BASIS, WITHOUT WARRANTY OF ANY KIND, EITHER EXPRESS OR
+IMPLIED, INCLUDING, WITHOUT LIMITATION, WARRANTIES THAT THE LICENSED PRODUCT
+IS FREE OF DEFECTS, MERCHANTABLE, FIT FOR A PARTICULAR PURPOSE OR
+NON-INFRINGING. THE ENTIRE RISK AS TO THE QUALITY AND PERFORMANCE OF THE
+LICENSED PRODUCT IS WITH YOU. SHOULD LICENSED PRODUCT PROVE DEFECTIVE IN ANY
+RESPECT, YOU (AND NOT THE LICENSOR OR ANY OTHER CONTRIBUTOR) ASSUME THE COST
+OF ANY NECESSARY SERVICING, REPAIR OR CORRECTION. THIS DISCLAIMER OF
+WARRANTY CONSTITUTES AN ESSENTIAL PART OF THIS LICENSE. NO USE OF LICENSED
+PRODUCT IS AUTHORIZED HEREUNDER EXCEPT UNDER THIS DISCLAIMER.
+
+   2. Termination.
+
+   1. Automatic Termination Upon Breach. This license and the rights granted
+hereunder will terminate automatically if you fail to comply with the terms
+herein and fail to cure such breach within thirty (30) days of becoming
+aware of the breach. All sublicenses to the Licensed Product that are
+properly granted shall survive any termination of this license. Provisions
+that, by their nature, must remain in effect beyond the termination of this
+License, shall survive.
+   2. Termination Upon Assertion of Patent Infringement. If you initiate
+litigation by asserting a patent infringement claim (excluding declaratory
+judgment actions) against Licensor or a Contributor (Licensor or Contributor
+against whom you file such an action is referred to herein as &quot;Respondent&quot;)
+alleging that Licensed Product directly or indirectly infringes any patent,
+then any and all rights granted by such Respondent to you under Sections 1
+or 2 of this License shall terminate prospectively upon sixty (60) days
+notice from Respondent (the &quot;Notice Period&quot;) unless within that Notice
+Period you either agree in writing (i) to pay Respondent a mutually
+agreeable reasonably royalty for your past or future use of Licensed Product
+made by such Respondent, or (ii) withdraw your litigation claim with respect
+to Licensed Product against such Respondent. If within said Notice Period a
+reasonable royalty and payment arrangement are not mutually agreed upon in
+writing by the parties or the litigation claim is not withdrawn, the rights
+granted by Licensor to you under Sections 1 and 2 automatically terminate at
+the expiration of said Notice Period.
+   3. Reasonable Value of This License. If you assert a patent infringement
+claim against Respondent alleging that Licensed Product directly or
+indirectly infringes any patent where such claim is resolved (such as by
+license or settlement) prior to the initiation of patent infringement
+litigation, then the reasonable value of the licenses granted by said
+Respondent under Sections 1 and 2 shall be taken into account in determining
+the amount or value of any payment or license.
+   4. No Retroactive Effect of Termination. In the event of termination
+under Sections 9(a) or 9(b) above, all end user license agreements
+(excluding licenses to distributors and reselle rs) that have been validly
+granted by you or any distributor hereunder prior to termination shall
+survive termination.
+
+   1. Limitation of Liability. UNDER NO CIRCUMSTANCES AND UNDER NO LEGAL
+THEORY, WHETHER TORT (INCLUDING NEGLIGENCE), CONTRACT, OR OTHERWISE, SHALL
+THE LICENSOR, ANY CONTRIBUTOR, OR ANY DISTRIBUTOR OF LICENSED PRODUCT, OR
+ANY SUPPLIER OF ANY OF SUCH PARTIES, BE LIABLE TO ANY PERSON FOR ANY
+INDIRECT, SPECIAL, INCIDENTAL, OR CONSEQUENTIAL DAMAGES OF ANY CHARACTER
+INCLUDING, WITHOUT LIMITATION, DAMAGES FOR LOSS OF GOODWILL, WORK STOPPAGE,
+COMPUTER FAILURE OR MALFUNCTION, OR ANY AND ALL OTHER COMMERCIAL DAMAGES OR
+LOSSES, EVEN IF SUCH PARTY SHALL HAVE BEEN INFORMED OF THE POSSIBILITY OF
+SUCH DAMAGES. THIS LIMITATION OF LIABILITY SHALL NOT APPLY TO LIABILITY FOR
+DEATH OR PERSONAL INJURY RESULTING FROM SUCH PARTYO~S NEGLIGENCE TO THE
+EXTENT APPLICABLE LAW PROHIBITS SUCH LIMITATION. SOME JURISDICTIONS DO NOT
+ALLOW THE EXCLUSION OR LIMITATION OF INCIDENTAL OR CONSEQUENTIAL DAMAGES, SO
+THIS EXCLUSION AND LIMITATION MAY NOT APPLY TO YOU.
+
+   2. Responsibility for Claims. As between Licensor and Contributors, each
+party is responsible for claims and damages arising, directly or indirectly,
+out of its utilization of rights under this License. You agree to work with
+Licensor and Contributors to distribute such responsibility on an equitable
+basis. Nothing herein is intended or shall be deemed to constitute any
+admission of liability.
+
+   3. U.S. Government End Users. The Licensed Product is a &quot;commercial
+item,&quot; as that term is defined in 48 C.F.R. 2.101 (Oct. 1995), consisting of
+&quot;commercial computer software&quot; and &quot;commercial computer software
+documentation,&quot; as such terms are used in 48 C.F.R. 12.212 (Sept. 1995).
+Consistent with 48 C.F.R. 12.212 and 48 C.F.R. 227.7202-1 through 227.7202-4
+(June 1995), all U.S. Government End Users acquire Licensed Product with
+only those rights set forth herein.
+
+   4. Miscellaneous. This License represents the complete agreement
+concerning the subject matter hereof. If any provision of this License is
+held to be unenforceable, such provision shall be reformed only to the
+extent necessary to make it enforceable. This License shall be governed by
+California law provisions (except to the extent applicable law, if any,
+provides otherwise), excluding its conflict-of-law provisions. You expressly
+agree that any litigation relating to this license shall be subject to the
+jurisdiction of the Federal Courts of the Northern District of California or
+the Superior Court of the County of Santa Clara, California (as
+appropriate), with venue lying in Santa Clara County, California, with the
+losing party responsible for costs including, without limitation, court
+costs and reasonable attorneys' fees and expenses. The application of the
+United Nations Convention on Contracts for the International Sale of Goods
+is expressly excluded. You and Licensor expressly waive any rights to a jury
+trial in any litigation concerning Licensed Product or this License. Any law
+or regulation that provides that the language of a contract shall be
+construed against the drafter shall not apply to this License.
+
+   5. Definition of &quot;You&quot; in This License. &quot;You&quot; throughout this License,
+whether in upper or lower case, means an individual or a legal entity
+exercising rights under, and complying with all of the terms of, this
+License or a future version of this License issued under Section 7. For
+legal entities, &quot;you&quot; includes any entity that controls, is controlled by,
+or is under common control with you. For purposes of this definition,
+&quot;control&quot; means (i) the power, direct or indirect, to cause the direction or
+management of such entity, whether by contract or otherwise, or (ii)
+ownership of fifty percent (50%) or more of the outstanding shares, or (iii)
+beneficial ownership of such entity.
+
+   6. Glossary. All defined terms in this License that are used in more than
+one Section of this License are repeated here, in alphabetical order, for
+the convenience of the reader. The Section of this License in which each
+defined term is first used is shown in parentheses. Contributor: Each person
+or entity who created or contributed to the creation of, and distributed, a
+Modification. (See Section 2)
+      Derivative Works: That term as used in this License is defined under
+U.S. copyright law. (See Section 1(b))
+      License: This Jabber Open Source License. (See first paragraph of
+License)
+      Licensed Product: Any Jabber Product licensed pursuant to this
+License. The term
+      &quot;Licensed Product&quot; includes all previous Modifications from any
+Contributor that you receive. (See first paragraph of License and Section 2)
+      Licensor: Jabber.Com, Inc. (See first paragraph of License)
+      Modifications: Any additions to or deletions from the substance or
+structure of (i) a file containing Licensed Product, or (ii) any new file
+that contains any part of Licensed Product. (See Section 2)
+      Notice: The notice contained in Exhibit A. (See Section 4(e))
+      Source Code: The preferred form for making modifications to the
+Licensed Product, including all modules contained therein, plus any
+associated interface definition files, scripts used to control compilation
+and installation of an executable program, or a list of differential
+comparisons against the Source Code of the Licensed Product. (See Section
+1(a))
+      You: This term is defined in Section 14 of this License.
+
+EXHIBIT A
+The Notice below must appear in each file of the Source Code of any copy you
+distribute of the Licensed Product or any Modifications thereto.
+Contributors to any Modifications may add their own copyright notices to
+identify their own contributions.
+
+License:
+The contents of this file are subject to the Jabber Open Source License
+Version 1.0 (the &quot;License&quot;). You may not copy or use this file, in either
+source code or executable form, except in compliance with the License. You
+may obtain a copy of the License at <A HREF="http://www.jabber.com/license/">http://www.jabber.com/license/</A> or at
+<A HREF="http://www.opensource.org/.">http://www.opensource.org/.</A>
+Software distributed under the License is distributed on an &quot;AS IS&quot; basis,
+WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License for
+the specific language governing rights and limitations under the License.
+
+Copyrights:
+Portions created by or assigned to Jabber.com, Inc. are Copyright (c)
+1999-2000 Jabber.com, Inc.
+All Rights Reserved. Contact information for Jabber.com, Inc. is available
+at <A HREF="http://www.jabber.com/.">http://www.jabber.com/.</A>
+Portions Copyright (c) 1998-1999 Jeremie Miller.
+
+Acknowledgements
+Special thanks to the Jabber Open Source Contributors for their suggestions
+and support of Jabber.
+Modifications:


The follwoing are the debian scripts to build the packages. They might not
be the must pretty ones, but do work. jabber.cfg is sourced by the init.d
script to configure the command line switches for the hostname and so on. 


--- jabber-1.4.2a.orig/debian/dirs
+++ jabber-1.4.2a/debian/dirs
@@ -0,0 +1,11 @@
+etc/jabber
+usr/sbin
+usr/lib/jabber/pthsock
+usr/lib/jabber/jsm
+usr/lib/jabber/xdb_file
+usr/lib/jabber/dnsrv
+usr/lib/jabber/dialback
+usr/share/doc/jabber
+var/log/jabber
+var/lib/jabber
+var/run/jabber
--- jabber-1.4.2a.orig/debian/init.d
+++ jabber-1.4.2a/debian/init.d
@@ -0,0 +1,79 @@
+#! /bin/sh
+#
+# jabber	init script to start jabber daemon
+#
+#		Created from Bernd Eckenfels &lt;<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">ecki at lina.inka.de</A>&gt;
+#
+#		Written by Miquel van Smoorenburg &lt;<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">miquels at cistron.nl</A>&gt;.
+#		Modified for Debian GNU/Linux
+#		by Ian Murdock &lt;<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">imurdock at gnu.ai.mit.edu</A>&gt;.
+#
+# Version:	@(#)skeleton  1.8  03-Mar-1998  <A HREF="http://mail.jabber.org/mailman/listinfo/jdev">miquels at cistron.nl</A>
+#
+# This file was automatically customized by dh-make on Sun, 21 May 2000 12:31:20 +0200
+
+PATH=/usr/local/sbin:/usr/local/bin:/sbin:/bin:/usr/sbin:/usr/bin
+DAEMON=/usr/sbin/jabberd
+NAME=jabberd
+DESC=jabberd
+CONF=/etc/jabber/jabber.xml
+PID=/var/run/jabber/jabber.pid
+CMDLINE=&quot;&quot;
+
+test -f $DAEMON -a -f $CONF || exit 0
+
+# set some parameters like JABBER_HOSTNAME
+if test -x /etc/jabber/jabber.cfg; then
+ . /etc/jabber/jabber.cfg
+fi
+
+if [ x&quot;$JABBER_HOSTNAME&quot; != x&quot;&quot; ]; then
+	CMDLINE=&quot;$CMDLINE -h $JABBER_HOSTNAME&quot;
+fi
+if [ x&quot;$JABBER_SPOOL&quot; != x&quot;&quot; ]; then
+	CMDLINE=&quot;$CMDLINE -s $JABBER_SPOOL&quot;
+fi
+
+if [ x&quot;$CMDLINE&quot; != x&quot;&quot; ]; then
+	CMDLINE=&quot;-- $CMDLINE&quot;
+fi
+
+set -e
+
+case &quot;$1&quot; in
+  start)
+	echo -n &quot;Starting $DESC: &quot;
+	cd /usr/lib/jabber/
+	start-stop-daemon -b -c daemon --start --quiet --exec $DAEMON $CMDLINE || echo -n &quot;&lt;Failed&gt; &quot;
+	echo &quot;$NAME.&quot;
+	;;
+  stop)
+	echo -n &quot;Stopping $DESC: &quot;
+	start-stop-daemon --stop --quiet --exec $DAEMON || echo -n &quot;&lt;Failed&gt; &quot;
+	echo &quot;$NAME.&quot;
+	;;
+  reload)
+	echo &quot;Reloading $DESC configuration files.&quot;
+	start-stop-daemon --stop --signal 1 --quiet \
+		--pidfile $PID --exec $DAEMON
+  ;;
+  restart|force-reload)
+	#
+	#	If the &quot;reload&quot; option is implemented, move the &quot;force-reload&quot;
+	#	option to the &quot;reload&quot; entry above. If not, &quot;force-reload&quot; is
+	#	just the same as &quot;restart&quot;.
+	#
+	echo -n &quot;Restarting $DESC: &quot;
+	$0 stop
+	sleep 1
+	$0 start
+	;;
+  *)
+	N=/etc/init.d/$NAME
+	# echo &quot;Usage: $N {start|stop|restart|reload|force-reload}&quot; &gt;&amp;2
+	echo &quot;Usage: $N {start|stop|restart|force-reload}&quot; &gt;&amp;2
+	exit 1
+	;;
+esac
+
+exit 0
--- jabber-1.4.2a.orig/debian/control
+++ jabber-1.4.2a/debian/control
@@ -0,0 +1,38 @@
+Source: jabber
+Section: net
+Priority: optional
+Maintainer: Bernd Eckenfels &lt;<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">ecki at debian.org</A>&gt;
+Standards-Version: 3.5.6.0
+Build-Depends: libssl-dev (&gt;=0.9.5), debhelper
+
+Package: jabber
+Architecture: any
+Depends: ${shlibs:Depends}
+Replaces: jabber-transport
+Provides: jabber-transport
+Description: Daemon for the jabber.org Open Source Instant Messenger
+ Jabber is a Free Instant Messaging System
+ .
+ In this Package you will find jabberd, a message transport server
+ based on a XML Message Routing Infrastructure.
+ . 
+ All this high-tech is simply used to provide you with your own IM Server.
+ See <A HREF="http://www.jabber.org/">http://www.jabber.org/</A> for more details.
+ .
+ Jabber supports connecting to AIM, ICQ, IRC, MSM and a lot of others, so
+ you can use all available IM systems from one client.
+
+Package: jabber-dev
+Architecture: any
+Depends: libc6-dev, libssl-dev (&gt;=0.9.5)
+Description: Daemon for the jabber.org Open Source Instant Messenger
+ Jabber is a Free Instant Messaging System
+ .
+ In this Package you will find the jabber headers needed for building
+ jabber plugins e.g. transports.
+ .
+ All this high-tech is simply used to provide you with your own IM Server.
+ See <A HREF="http://www.jabber.org/">http://www.jabber.org/</A> for more details.
+ .
+ Jabber supports connecting to AIM, ICQ, IRC, MSM and a lot of others, so
+ you can use all available IM systems from one client.
--- jabber-1.4.2a.orig/debian/rules
+++ jabber-1.4.2a/debian/rules
@@ -0,0 +1,82 @@
+#!/usr/bin/make -f
+# Sample debian/rules that uses debhelper.
+# GNU copyright 1997 to 1999 by Joey Hess.
+
+# Uncomment this to turn on verbose mode.
+#export DH_VERBOSE=1
+
+# This is the debhelper compatability version to use.
+export DH_COMPAT=1
+export JHOME=/usr/lib/jabber
+
+build: build-stamp
+build-stamp:
+	dh_testdir
+	./configure --enable-ssl
+	$(MAKE)
+	# cd docs ; ${MAKE} html
+	touch build-stamp
+
+clean:
+	dh_testdir
+	dh_testroot
+	dh_clean
+	rm -f build-stamp modules-current.list
+	# -rm -rf docs/html
+	-touch platform-settings
+	-$(MAKE) clean
+	-$(MAKE) -C jabberd/pth-1.4.0 distclean
+	rm -f platform-settings
+
+install: build
+	dh_testdir
+	dh_testroot
+	dh_clean -k
+	dh_installdirs
+	install -m 755 -o root -g root jabberd/jabberd debian/tmp/usr/sbin/
+	install -m 755 -o root -g root pthsock/pthsock_client.so debian/tmp/usr/lib/jabber/pthsock/pthsock_client.so
+	install -m 755 -o root -g root dialback/dialback.so debian/tmp/usr/lib/jabber/dialback/dialback.so
+	install -m 755 -o root -g root dnsrv/dnsrv.so debian/tmp/usr/lib/jabber/dnsrv/dnsrv.so
+	install -m 755 -o root -g root xdb_file/xdb_file.so debian/tmp/usr/lib/jabber/xdb_file/xdb_file.so
+	install -m 755 -o root -g root jsm/jsm.so debian/tmp/usr/lib/jabber/jsm/jsm.so
+	install -m 644 -o root -g root jabber.xml debian/tmp/etc/jabber/jabber.xml
+	install -m 755 -o root -g root debian/jabber.cfg debian/tmp/etc/jabber/jabber.cfg
+	#
+	install -m 644 -o root -g root jabberd/jabberd.h debian/jabber-dev/usr/include/jabber/
+	install -m 644 -o root -g root jabberd/lib/lib.h debian/jabber-dev/usr/include/jabber/lib/
+	install -m 644 -o root -g root jabberd/lib/xmlparse.h debian/jabber-dev/usr/include/jabber/lib/
+
+# Build architecture-independent files here.
+binary-indep: build install
+# We have nothing to do by default.
+
+# Build architecture-dependent files here.
+binary-arch: build install
+#	dh_testversion
+	dh_testdir
+	dh_testroot
+#	dh_installdebconf	
+	dh_installdocs
+	dh_installexamples
+	dh_installmenu
+	dh_installinit
+	dh_installcron
+	dh_installmanpages -p jabber pth-config.1 pth.3 pthread-config.1 pthread.3
+	dh_installchangelogs
+	dh_link
+	dh_strip
+	dh_compress
+	dh_fixperms
+	chown -R daemon debian/tmp/var/lib/jabber
+	chown -R daemon debian/tmp/var/log/jabber
+	chown -R daemon debian/tmp/var/run/jabber
+#	dh_makeshlibs
+	dh_installdeb
+#	dh_perl
+	dh_shlibdeps
+	dh_gencontrol -- -isp
+	dh_md5sums
+	dh_builddeb
+
+binary: binary-indep binary-arch
+.PHONY: build clean binary-indep binary-arch binary install
--- jabber-1.4.2a.orig/debian/docs
+++ jabber-1.4.2a/debian/docs
@@ -0,0 +1,2 @@
+README
+UPGRADE
--- jabber-1.4.2a.orig/debian/conffiles
+++ jabber-1.4.2a/debian/conffiles
@@ -0,0 +1,3 @@
+/etc/jabber/jabber.xml
+/etc/init.d/jabber
+/etc/jabber/jabber.cfg
--- jabber-1.4.2a.orig/debian/jabber.cfg
+++ jabber-1.4.2a/debian/jabber.cfg
@@ -0,0 +1,22 @@
+#!/bin/sh
+#
+# jabber.cfg
+#
+# Copyright (c) 2000, Bernd Eckenfels &lt;<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">ecki at debian.org</A>&gt;
+#
+# This File is licensed under the GPL.
+#
+# This Shell script will be sourced by /etc/init.d/jabber to set variables
+#
+# NOTE: take care to actually USE &lt;host&gt;&lt;jabberd:cmdline flag=&quot;h&quot;/&gt;&lt;/host&gt;
+# and 
+# &lt;spool&gt;&lt;jabberd:cmdline flag=&quot;s&quot;&gt;/var/lib/jabber&lt;/jabberd:cmdline&gt;&lt;/spool&gt;
+# in the /etc/jabber/jabber.xml file
+
+# JABBER_HOSTNAME (which is then passed to jabberd in the -h switch)
+# JABBER_HOSTNAME=localhost
+
+# JABBER_SPOOL (whic is passed to jabberd in the -s switch)
+# JABBER_SPOOL=/var/lib/jabber
+
+export JABBER_HOSTNAME JABBER_SPOOL



This man page is contributed by Jeronimo Pellegrini.


--- jabber-1.4.2a.orig/debian/jabberd.8
+++ jabber-1.4.2a/debian/jabberd.8
@@ -0,0 +1,128 @@
+.TH JABBERD 8 2001-12-03 Debian
+.SH NAME
+jabberd \- The jabber server
+.SH SYNOPSIS
+.B &quot;jabberd &quot;
+[
+.B \-c
+.I configfile
+] [
+.B \-H 
+.I path
+] [ 
+.B -h
+.I hostname
+] [ 
+.B -s
+.I spooldir
+] [\-DVv ]
+.SH DESCRIPTION
+.LP
+Jabber is a Free Instant Messaging System, which is designed to interoperate
+with several other IM systems, such as AIM, ICQ, IRC, MSM, so you only need
+one client to use all these IM systems.
+.br
+This manpage describes the jabber server daemon, \fIjabberd\fR.
+.br
+The daemon, when called, will look for its the configuration file, in
+\fI/etc/jabber/jabber.xml\fR (or elsewhere if you use the \-c option), and
+start
+listening on port 5222.
+.br
+You will find more information on Jabber at <A HREF="http://www.jabber.org/">http://www.jabber.org/</A>
+.br
+Note: on Debian GNU/Linux Jabber is started by \fI/etc/init.d/jabber\fR which is
+sourcing \fI/etc/jabber/jabber.cfg\fR for initial daemon options like
+\fIhostname\fR and \fIspooldir\fR.
+.SH OPTIONS
+.TP
+\fB\-c\fR &lt;\fIconfigfile\fR&gt;
+Tells the server which config file to use
+.TP
+\fB\-D\fR
+Enable debug output
+.TP
+\fB\-h\fR &lt;\fIhostname\fR&gt;
+Hostname to be used
+.TP
+\fB\-H\fR &lt;\fIpath\fR&gt;
+Location of home folder
+.TP
+\fB\-s\fR &lt;\fIpath\fR&gt;
+Location of the spool folder. This is not a builtin option, but referenced
+by the config file with the following line:
+.br
+&lt;spool&gt;&lt;jabberd:cmdline flag='s'&gt;/var/lib/jabber&lt;/jabberd:cmdline&gt;&lt;/spool&gt;
+.TP
+\fB-v\fR
+Shows server version
+
+.SH ENVIRONMENT
+
+.SH AUTHOR
+This manual page contributed by Jeronimo Pellegrini and extended by Bernd
+Eckenfels.
+.TH JABBERD 8 2001-12-03 Debian
+.SH NAME
+jabberd \- The jabber server
+.SH SYNOPSIS
+.B &quot;jabberd &quot;
+[
+.B \-c
+.I configfile
+] [
+.B \-H 
+.I path
+] [ 
+.B -h
+.I hostname
+] [ 
+.B -s
+.I spooldir
+] [\-DVv ]
+.SH DESCRIPTION
+.LP
+Jabber is a Free Instant Messaging System, which is designed to interoperate
+with several other IM systems, such as AIM, ICQ, IRC, MSM, so you only need
+one client to use all these IM systems.
+.br
+This manpage describes the jabber server daemon, \fIjabberd\fR.
+.br
+The daemon, when called, will look for its the configuration file, in
+\fI/etc/jabber/jabber.xml\fR (or elsewhere if you use the \-c option), and
+start
+listening on port 5222.
+.br
+You will find more information on Jabber at <A HREF="http://www.jabber.org/">http://www.jabber.org/</A>
+.br
+Note: on Debian GNU/Linux Jabber is started by \fI/etc/init.d/jabber\fR which is
+sourcing \fI/etc/jabber/jabber.cfg\fR for initial daemon options like
+\fIhostname\fR and \fIspooldir\fR.
+.SH OPTIONS
+.TP
+\fB\-c\fR &lt;\fIconfigfile\fR&gt;
+Tells the server which config file to use
+.TP
+\fB\-D\fR
+Enable debug output
+.TP
+\fB\-h\fR &lt;\fIhostname\fR&gt;
+Hostname to be used
+.TP
+\fB\-H\fR &lt;\fIpath\fR&gt;
+Location of home folder
+.TP
+\fB\-s\fR &lt;\fIpath\fR&gt;
+Location of the spool folder. This is not a builtin option, but referenced
+by the config file with the following line:
+.br
+&lt;spool&gt;&lt;jabberd:cmdline flag='s'&gt;/var/lib/jabber&lt;/jabberd:cmdline&gt;&lt;/spool&gt;
+.TP
+\fB-v\fR
+Shows server version
+
+.SH ENVIRONMENT
+
+.SH AUTHOR
+This manual page contributed by Jeronimo Pellegrini and extended by Bernd
+Eckenfels.
--- jabber-1.4.2a.orig/debian/jabber-dev.dirs
+++ jabber-1.4.2a/debian/jabber-dev.dirs
@@ -0,0 +1 @@
+usr/include/jabber/lib



So for the Jabber team I would suggest to at least check the config.c and
JHOME issue for betting building, together with updating the libtool files
from libpth.

Greetings
Bernd

PS: I do maintain the libadns package for debian, too.
-- 
  (OO)      -- <A HREF="http://mail.jabber.org/mailman/listinfo/jdev">Bernd_Eckenfels at Wendelinusstrasse39.76646Bruchsal.de</A> --
 ( .. )  ecki@{inka.de,linux.de,debian.org} <A HREF="http://home.pages.de/~eckes/">http://home.pages.de/~eckes/</A>
  o--o     *plush*  2048/93600EFD  <A HREF="http://mail.jabber.org/mailman/listinfo/jdev">eckes at irc</A>  +497257930613  BE5-RIPE
(O____O)  When cryptography is outlawed, bayl bhgynjf jvyy unir cevinpl!

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="073633.html">[JDEV] Pam support for Jabber 1.4.2
</A></li>
	<LI>Next message: <A HREF="073612.html">[JDEV] jabber extensions available for handling locationinformation
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#73611">[ date ]</a>
              <a href="thread.html#73611">[ thread ]</a>
              <a href="subject.html#73611">[ subject ]</a>
              <a href="author.html#73611">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://mail.jabber.org/mailman/listinfo/jdev">More information about the JDev
mailing list</a><br>
</body></html>
