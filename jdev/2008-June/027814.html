<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [jdev] How is a client crash communicated to the XMPP server?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:jdev%40jabber.org?Subject=%5Bjdev%5D%20How%20is%20a%20client%20crash%20communicated%20to%20the%20XMPP%20server%3F&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="027813.html">
   <LINK REL="Next"  HREF="027815.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[jdev] How is a client crash communicated to the XMPP server?</H1>
    <B>JabberForum</B> 
    <A HREF="mailto:jdev%40jabber.org?Subject=%5Bjdev%5D%20How%20is%20a%20client%20crash%20communicated%20to%20the%20XMPP%20server%3F&In-Reply-To="
       TITLE="[jdev] How is a client crash communicated to the XMPP server?">list-jdev at jabberforum.org
       </A><BR>
    <I>Mon Jun  2 03:25:02 CDT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="027813.html">[jdev] Any Clients Supporting XEP-0080  User Location ?
</A></li>
        <LI>Next message: <A HREF="027815.html">[jdev] How is a client crash communicated to the XMPP server?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#27814">[ date ]</a>
              <a href="thread.html#27814">[ thread ]</a>
              <a href="subject.html#27814">[ subject ]</a>
              <a href="author.html#27814">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
Hi,
I would like to discuss about what happens when an XMPP client crashes
and how this information is communicated to the server..

I have a server S and 2 clients C1 and C2 connected to the server. C1
has C2 in its roster list and C2 has C1 in its roster list. 

If C1 gracefully logs out, then an iq stanza of type unavailable is
sent to the server and the server broadcasts that stanza to all JIDs
which have a subscription of from or both.

However, I have been trying to search for what happens when the
client crashes (or exits ungracefully). I havent arrived at the answer
yet. Here is what RFC 3291 says : 

&quot;5.1.5.  Unavailable Presence

Before ending its session with a server, a client SHOULD gracefully
become 
unavailable by sending a final presence stanza that possesses no 'to' 
attribute and that possesses a 'type' attribute whose value is 
&quot;unavailable&quot; (optionally, the final presence stanza MAY contain one or

more &lt;status/&gt; elements specifying the reason why the user is no longer

available). *However, the user's server MUST NOT depend on receiving
final 
presence from an available resource, since the resource may become 
unavailable unexpectedly or may be timed out by the server. If one of
the 
user's resources becomes unavailable for any reason (either gracefully
or 
ungracefully), the user's server MUST broadcast unavailable presence to

all contacts *(1) that are in the user's roster with a subscription
type of 
&quot;from&quot; or &quot;both&quot;, (2) to whom the user has not blocked outbound
presence,
and (3) from whom the server has not received a presence error during
the 
user's session; the user's server MUST also send that unavailable
presence 
stanza to any of the user's other available resources, as well as to
any 
entities to which the user has sent directed presence during the user's

session for that resource (if the user has not yet sent directed 
unavailable presence to that entity). Any presence stanza with no
'type' 
attribute and no 'to' attribute that is sent after sending directed 
unavailable presence or broadcasted unavailable presence MUST be 
broadcasted by the server to all subscribers. &quot;

Do we interpret that as : &quot;the server will 'somehow' know that the
client has crashed and then publish the unavailable stanzas to everyone
subscribed to that JID ?

Please clarify.. :-)

-santhosh


-- 
santhosh.kulandaiyan
------------------------------------------------------------------------
santhosh.kulandaiyan's Profile: <A HREF="http://www.jabberforum.org/member.php?userid=16912">http://www.jabberforum.org/member.php?userid=16912</A>
View this thread: <A HREF="http://www.jabberforum.org/showthread.php?t=200">http://www.jabberforum.org/showthread.php?t=200</A>


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="027813.html">[jdev] Any Clients Supporting XEP-0080  User Location ?
</A></li>
	<LI>Next message: <A HREF="027815.html">[jdev] How is a client crash communicated to the XMPP server?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#27814">[ date ]</a>
              <a href="thread.html#27814">[ thread ]</a>
              <a href="subject.html#27814">[ subject ]</a>
              <a href="author.html#27814">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://mail.jabber.org/mailman/listinfo/jdev">More information about the JDev
mailing list</a><br>
</body></html>
