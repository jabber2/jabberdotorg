<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [JDEV] s2s/dialback/SOCKS
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:jdev%40jabber.org?Subject=%5BJDEV%5D%20s2s/dialback/SOCKS&In-Reply-To=F163zvsjC7dYBGbEsfB000184f1%40hotmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="016069.html">
   <LINK REL="Next"  HREF="016071.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[JDEV] s2s/dialback/SOCKS</H1>
    <B>Adrian Rapa</B> 
    <A HREF="mailto:jdev%40jabber.org?Subject=%5BJDEV%5D%20s2s/dialback/SOCKS&In-Reply-To=F163zvsjC7dYBGbEsfB000184f1%40hotmail.com"
       TITLE="[JDEV] s2s/dialback/SOCKS">adrian at dtedu.net
       </A><BR>
    <I>Tue Mar 25 15:22:27 CST 2003</I>
    <P><UL>
        <LI>Previous message: <A HREF="016069.html">[JDEV] s2s/dialback/SOCKS
</A></li>
        <LI>Next message: <A HREF="016071.html">[JDEV] jabberd patch (updated)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16070">[ date ]</a>
              <a href="thread.html#16070">[ thread ]</a>
              <a href="subject.html#16070">[ subject ]</a>
              <a href="author.html#16070">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>microsoft will gone kill u :) <A HREF="http://mail.jabber.org/mailman/listinfo/jdev">jabber_dev at hotmail.com</A> .... ha ah ha ha

:<i>))))
</I>

Adrian Rapa

Pe Tue, 25 Mar 2003 13:13:30 -0800
&quot;Ragavan S&quot; &lt;<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">jabber_dev at hotmail.com</A>&gt; a scris:

&gt;<i> Hello,
</I>&gt;<i> 
</I>&gt;<i> I am trying to setup s2s communications between 2 jabber 1.4.2 servers
</I>&gt;<i> on Linux machines with static IP addresses -- one on the internet and
</I>&gt;<i> the other on a company intranet (behind a firewall).
</I>&gt;<i> 
</I>&gt;<i> Using ssh port forwards and iptables, I am able to establish network 
</I>&gt;<i> connectivity between these two machines. So, for example, from the
</I>&gt;<i> external server (jabber-external.company.com), I am able to telnet to
</I>&gt;<i> port 5269 of the internal server (jabber-internal.company.com) and
</I>&gt;<i> similarly, from the internal server I am able to telnet out (using
</I>&gt;<i> SOCKS).
</I>&gt;<i> 
</I>&gt;<i> I run the jabberd process on the external machine in a straightforward
</I>&gt;<i> manner, while I socksify the jabberd process on the internal machine
</I>&gt;<i> (so it can go outside).
</I>&gt;<i> 
</I>&gt;<i> However, the dialback protocol seems to fail. Thus, even though the
</I>&gt;<i> two servers have network connectivity going both sides, the actual
</I>&gt;<i> dialback process doesn't get validated and I get a Server Connect
</I>&gt;<i> Failed error. A look at the jabberd debug logs reveals that the
</I>&gt;<i> external server stops with a &lt;db:result&gt;33345..&lt;/db:result&gt; exchange
</I>&gt;<i> while the internal server's last exchange seems to be a
</I>&gt;<i> &lt;db:verify&gt;33345..&lt;/db:verify&gt; before it reports a &lt;stream:error&gt;I
</I>&gt;<i> guess we're trying to use the wrong name, sorry&lt;/stream:error&gt;.
</I>&gt;<i> 
</I>&gt;<i> So, I am curious to find out if people have successfully gotten s2s 
</I>&gt;<i> communications working in such a scenario (inside/outside firewall),
</I>&gt;<i> and if so, was there anything other than having bi-directional network
</I>&gt;<i> connectivity open? Also, does anyone know if having a SOCKS server in
</I>&gt;<i> between affect the dialback process (if the SOCKS server doesn't do
</I>&gt;<i> any form of DNS function).
</I>&gt;<i> 
</I>&gt;<i> If this does have something to do with the dialback protocol itself,
</I>&gt;<i> besides the upcoming SASL support for s2s in jabberd2, are there other
</I>&gt;<i> options I can look at?
</I>&gt;<i> 
</I>&gt;<i> By the way, I can post the detailed debug logs if that would be more 
</I>&gt;<i> helpful, but I wanted to figure out if someone already has such a
</I>&gt;<i> setup working well for them. I will also continue looking into this
</I>&gt;<i> (maybe strace or tcpdump).
</I>&gt;<i> 
</I>&gt;<i> Thanks in advance for any insights, and let me know if you need more 
</I>&gt;<i> clarifications.
</I>&gt;<i> 
</I>&gt;<i> Ragavan
</I>&gt;<i> 
</I>&gt;<i> _________________________________________________________________
</I>&gt;<i> Add photos to your e-mail with MSN 8. Get 2 months FREE*.  
</I>&gt;<i> <A HREF="http://join.msn.com/?page=features/featuredemail">http://join.msn.com/?page=features/featuredemail</A>
</I>&gt;<i> 
</I>&gt;<i> _______________________________________________
</I>&gt;<i> jdev mailing list
</I>&gt;<i> <A HREF="http://mail.jabber.org/mailman/listinfo/jdev">jdev at jabber.org</A>
</I>&gt;<i> <A HREF="http://mailman.jabber.org/listinfo/jdev">http://mailman.jabber.org/listinfo/jdev</A>
</I>&gt;<i> 
</I>
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="016069.html">[JDEV] s2s/dialback/SOCKS
</A></li>
	<LI>Next message: <A HREF="016071.html">[JDEV] jabberd patch (updated)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16070">[ date ]</a>
              <a href="thread.html#16070">[ thread ]</a>
              <a href="subject.html#16070">[ subject ]</a>
              <a href="author.html#16070">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://mail.jabber.org/mailman/listinfo/jdev">More information about the JDev
mailing list</a><br>
</body></html>
