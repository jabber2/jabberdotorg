<tt>
&lt;!DOCTYPE&nbsp;HTML&nbsp;PUBLIC&nbsp;&quot;-//W3C//DTD&nbsp;HTML&nbsp;3.2//EN&quot;&gt;<br>
&lt;HTML&gt;<br>
&lt;HEAD&gt;<br>
&lt;META&nbsp;HTTP-EQUIV=&quot;Content-Type&quot;&nbsp;CONTENT=&quot;text/html;&nbsp;charset=gb2312&quot;&gt;<br>
&lt;META&nbsp;NAME=&quot;Generator&quot;&nbsp;CONTENT=&quot;MS&nbsp;Exchange&nbsp;Server&nbsp;version&nbsp;6.0.4417.0&quot;&gt;<br>
&lt;TITLE&gt;Plz&nbsp;Help&lt;/TITLE&gt;<br>
&lt;/HEAD&gt;<br>
&lt;BODY&gt;<br>
&lt;!--&nbsp;Converted&nbsp;from&nbsp;text/plain&nbsp;format&nbsp;--&gt;<br>
<br>
&lt;P&gt;&lt;FONT&nbsp;SIZE=2&gt;Hi,&nbsp;all&lt;/FONT&gt;<br>
&lt;/P&gt;<br>
<br>
&lt;P&gt;&lt;FONT&nbsp;SIZE=2&gt;In&nbsp;order&nbsp;to&nbsp;observe&nbsp;how&nbsp;deliver&nbsp;module&nbsp;(&nbsp;deliver.c&nbsp;)&nbsp;of&nbsp;jabberd&nbsp;to&nbsp;work,&nbsp;I&nbsp;inserted&nbsp;some&nbsp;lines&nbsp;of&nbsp;code&nbsp;into&nbsp;the&nbsp;deliver.c&nbsp;.&nbsp;Compilatian&nbsp;was&nbsp;successfull.&nbsp;But&nbsp;when&nbsp;I&nbsp;try&nbsp;to&nbsp;start&nbsp;the&nbsp;jabberd,&nbsp;some&nbsp;error&nbsp;occured,&nbsp;the&nbsp;jabberd&nbsp;exited&nbsp;without&nbsp;any&nbsp;notice&nbsp;and&nbsp;there&nbsp;were&nbsp;nothing&nbsp;in&nbsp;the&nbsp;error.log.&lt;/FONT&gt;&lt;/P&gt;<br>
<br>
&lt;P&gt;&lt;FONT&nbsp;SIZE=2&gt;Could&nbsp;someone&nbsp;help&nbsp;me&nbsp;settle&nbsp;the&nbsp;problem?&lt;/FONT&gt;<br>
&lt;/P&gt;<br>
<br>
&lt;P&gt;&lt;FONT&nbsp;SIZE=2&gt;Following&nbsp;demonstrating&nbsp;how&nbsp;I&nbsp;modified&nbsp;the&nbsp;code&nbsp;(&nbsp;hometojabber/jabberd/deliver.c):&lt;/FONT&gt;<br>
&lt;/P&gt;<br>
<br>
&lt;P&gt;&lt;FONT&nbsp;SIZE=2&gt;void&nbsp;deliver(dpacket&nbsp;p,&nbsp;instance&nbsp;i)&lt;/FONT&gt;<br>
<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;{&lt;/FONT&gt;<br>
<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;ilist&nbsp;a,&nbsp;b;&lt;/FONT&gt;<br>
<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&lt;/FONT&gt;<br>
<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;//&nbsp;following&nbsp;3&nbsp;lines&nbsp;is&nbsp;added&nbsp;to&nbsp;observe&nbsp;how&nbsp;the&nbsp;module&nbsp;works&lt;/FONT&gt;<br>
<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&lt;/FONT&gt;<br>
<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;xmlnode&nbsp;temp=xmlnode_dup(p-&amp;gt;x);&lt;/FONT&gt;<br>
<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;fprintf(stderr,&amp;quot;Destination:&nbsp;%s&nbsp;Packet:&nbsp;%s&nbsp;\n&amp;quot;,&nbsp;i-&amp;gt;id,&nbsp;xmlnode2str(temp));&lt;/FONT&gt;<br>
<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;xmlnode_free(temp);&amp;nbsp;&nbsp;//end&nbsp;of&nbsp;my&nbsp;additional&nbsp;code&lt;/FONT&gt;<br>
<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&lt;/FONT&gt;<br>
&lt;/P&gt;<br>
<br>
&lt;P&gt;&lt;FONT&nbsp;SIZE=2&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;if(deliver__flag&nbsp;==&nbsp;1&nbsp;&amp;amp;&amp;amp;&nbsp;p&nbsp;==&nbsp;NULL&nbsp;&amp;amp;&amp;amp;&nbsp;i&nbsp;==&nbsp;NULL)&lt;/FONT&gt;<br>
&lt;/P&gt;<br>
<br>
&lt;P&gt;&lt;FONT&nbsp;SIZE=2&gt;...&lt;/FONT&gt;<br>
&lt;/P&gt;<br>
<br>
&lt;P&gt;&lt;FONT&nbsp;SIZE=2&gt;}&lt;/FONT&gt;<br>
&lt;/P&gt;<br>
<br>
&lt;P&gt;&lt;FONT&nbsp;SIZE=2&gt;Many&nbsp;thx&nbsp;in&nbsp;advance.&lt;/FONT&gt;<br>
&lt;/P&gt;<br>
<br>
&lt;P&gt;&lt;FONT&nbsp;SIZE=2&gt;Rui&nbsp;Da&lt;/FONT&gt;<br>
&lt;/P&gt;<br>
<br>
&lt;/BODY&gt;<br>
&lt;/HTML&gt;
</tt>
