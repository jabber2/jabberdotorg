<tt>
&lt;!DOCTYPE&nbsp;HTML&nbsp;PUBLIC&nbsp;&quot;-//W3C//DTD&nbsp;HTML&nbsp;4.0&nbsp;Transitional//EN&quot;&gt;<br>
&lt;HTML&gt;&lt;HEAD&gt;<br>
&lt;META&nbsp;http-equiv=Content-Type&nbsp;content=&quot;text/html;&nbsp;charset=big5&quot;&gt;<br>
&lt;META&nbsp;content=&quot;MSHTML&nbsp;6.00.2800.1515&quot;&nbsp;name=GENERATOR&gt;<br>
&lt;STYLE&gt;&lt;/STYLE&gt;<br>
&lt;/HEAD&gt;<br>
&lt;BODY&nbsp;bgColor=#ffffff&gt;<br>
&lt;DIV&gt;&lt;FONT&nbsp;size=2&gt;<br>
&lt;DIV&gt;&lt;FONT&nbsp;size=2&gt;&lt;/FONT&gt;&amp;nbsp;&lt;/DIV&gt;<br>
&lt;DIV&gt;&lt;FONT&nbsp;size=2&gt;Sorry!&nbsp;My&nbsp;english&nbsp;is&nbsp;very&nbsp;poor!&lt;/FONT&gt;&lt;/DIV&gt;<br>
&lt;DIV&gt;&lt;FONT&nbsp;size=2&gt;&lt;/FONT&gt;&amp;nbsp;&lt;/DIV&gt;<br>
&lt;DIV&gt;&lt;FONT&nbsp;size=2&gt;How&nbsp;to&nbsp;handle&nbsp;chinese&nbsp;<br>
mesage&amp;nbsp;using&amp;nbsp;Net::Jabber??&lt;/FONT&gt;&lt;/DIV&gt;<br>
&lt;DIV&gt;&lt;FONT&nbsp;size=2&gt;I&nbsp;use&nbsp;the&nbsp;Exodus,&nbsp;Gush,&nbsp;Pandion,&nbsp;Psi,&nbsp;Trillian&nbsp;Pro&nbsp;client&nbsp;to&nbsp;<br>
receive&nbsp;the&nbsp;message.But&nbsp;it&nbsp;have&nbsp;error&nbsp;in&lt;/FONT&gt;&lt;/DIV&gt;<br>
&lt;DIV&gt;&lt;FONT&nbsp;size=2&gt;showing&nbsp;chinese&nbsp;message.&lt;/FONT&gt;&lt;/DIV&gt;<br>
&lt;DIV&gt;&lt;FONT&nbsp;size=2&gt;use&nbsp;Encode&nbsp;---&nbsp;Encode::from_to($subject,&nbsp;&quot;big5&quot;,&nbsp;&quot;utf-8&quot;&nbsp;)&nbsp;---&nbsp;<br>
&lt;/FONT&gt;&lt;FONT&nbsp;size=2&gt;can&nbsp;not&nbsp;make&nbsp;it&nbsp;correct.&lt;/FONT&gt;&lt;/DIV&gt;<br>
&lt;DIV&gt;<br>
&lt;DIV&gt;&lt;FONT&nbsp;size=2&gt;&lt;/FONT&gt;&amp;nbsp;&lt;/DIV&gt;<br>
&lt;DIV&gt;&lt;FONT&nbsp;size=2&gt;PS:&lt;/FONT&gt;&lt;/DIV&gt;<br>
&lt;DIV&gt;&lt;FONT&nbsp;size=2&gt;Net::Jabber&nbsp;V2.0&lt;/FONT&gt;&lt;/DIV&gt;<br>
&lt;DIV&gt;&lt;FONT&nbsp;size=2&gt;perl&nbsp;5.8.7&nbsp;(&nbsp;ActivePerl&nbsp;Build&nbsp;813)&lt;/FONT&gt;&lt;/DIV&gt;<br>
&lt;DIV&gt;WIN2K&lt;/DIV&gt;<br>
&lt;DIV&gt;&lt;FONT&nbsp;<br>
size=2&gt;===============================================================&lt;/FONT&gt;&lt;/DIV&gt;&lt;/DIV&gt;<br>
&lt;DIV&gt;&lt;FONT&nbsp;size=2&gt;use&nbsp;strict;&lt;BR&gt;use&nbsp;Net::Jabber;&lt;/FONT&gt;&lt;/DIV&gt;<br>
&lt;DIV&gt;&amp;nbsp;&lt;/DIV&gt;<br>
&lt;DIV&gt;&lt;FONT&nbsp;size=2&gt;#&nbsp;Declare&nbsp;our&nbsp;constants&lt;BR&gt;#&nbsp;---------------------&lt;BR&gt;use&nbsp;<br>
constant&nbsp;RECIPIENT&nbsp;=&amp;gt;&nbsp;&lt;A&nbsp;<br>
href=&quot;mailto:'luke@localhost'&quot;&gt;'luke@localhost'&lt;/A&gt;;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;<br>
#&nbsp;Jabber&nbsp;ID&nbsp;to&nbsp;be&nbsp;notified&lt;BR&gt;use&nbsp;constant&nbsp;SERVER&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;=&amp;gt;&nbsp;<br>
'localhost';&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;#&nbsp;Jabber&nbsp;server&nbsp;to&nbsp;<br>
connect&nbsp;to&lt;BR&gt;use&nbsp;constant&nbsp;PORT&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;=&amp;gt;&nbsp;<br>
5222;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;#&nbsp;Port&nbsp;to&nbsp;connect&nbsp;<br>
to&lt;BR&gt;use&nbsp;constant&nbsp;USER&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;=&amp;gt;&nbsp;<br>
'luke';&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;#&nbsp;user&nbsp;this&nbsp;script&nbsp;connects&nbsp;as&lt;BR&gt;use&nbsp;<br>
constant&nbsp;PASSWORD&amp;nbsp;&nbsp;=&amp;gt;&nbsp;&lt;A&nbsp;<br>
href=&quot;mailto:'luke!@#'&quot;&gt;'luke!@#'&lt;/A&gt;;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;#&nbsp;password&nbsp;<br>
associated&nbsp;with&nbsp;USER&lt;BR&gt;use&nbsp;constant&nbsp;RESOURCE&amp;nbsp;&nbsp;=&amp;gt;&nbsp;<br>
'perlscript';&lt;/FONT&gt;&lt;/DIV&gt;<br>
&lt;DIV&gt;&amp;nbsp;&lt;/DIV&gt;<br>
&lt;DIV&gt;&lt;FONT&nbsp;size=2&gt;#&nbsp;Read&nbsp;and&nbsp;parse&nbsp;email&nbsp;and&nbsp;extract&nbsp;header&nbsp;info&lt;BR&gt;#&nbsp;<br>
--------------------------------------------&lt;BR&gt;&lt;/FONT&gt;&lt;FONT&nbsp;size=2&gt;#&nbsp;Create&nbsp;a&nbsp;<br>
new&nbsp;Jabber&nbsp;client&nbsp;and&nbsp;connect&lt;BR&gt;#&nbsp;--------------------------------------&lt;BR&gt;my&nbsp;<br>
$connection&nbsp;=&nbsp;Net::Jabber::Client-&amp;gt;new();&lt;BR&gt;$connection-&amp;gt;Connect(&nbsp;<br>
&quot;hostname&quot;&nbsp;=&amp;gt;&nbsp;<br>
SERVER,&lt;BR&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;<br>
&quot;port&quot;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;=&amp;gt;&nbsp;PORT&nbsp;)&lt;BR&gt;&amp;nbsp;&amp;nbsp;&nbsp;or&nbsp;die&nbsp;&quot;Cannot&nbsp;<br>
connect&nbsp;($!)\n&quot;;&lt;/FONT&gt;&lt;/DIV&gt;<br>
&lt;DIV&gt;&amp;nbsp;&lt;/DIV&gt;<br>
&lt;DIV&gt;&lt;FONT&nbsp;size=2&gt;#&nbsp;Identify&nbsp;and&nbsp;authenticate&nbsp;with&nbsp;the&nbsp;server&lt;BR&gt;#&nbsp;<br>
-----------------------------------------&lt;BR&gt;my&nbsp;@result&nbsp;=&nbsp;<br>
$connection-&amp;gt;AuthSend(&nbsp;&quot;username&quot;&nbsp;=&amp;gt;&nbsp;<br>
USER,&lt;BR&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;<br>
&quot;password&quot;&nbsp;=&amp;gt;&nbsp;<br>
PASSWORD,&lt;BR&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;<br>
&quot;resource&quot;&nbsp;=&amp;gt;&nbsp;RESOURCE&nbsp;);&lt;BR&gt;if&nbsp;($result[0]&nbsp;ne&nbsp;&quot;ok&quot;)&nbsp;{&lt;BR&gt;&amp;nbsp;&nbsp;die&nbsp;<br>
&quot;Ident/Auth&nbsp;with&nbsp;server&nbsp;failed:&nbsp;$result[0]&nbsp;-&nbsp;$result[1]\n&quot;;&lt;BR&gt;}&lt;/FONT&gt;&lt;/DIV&gt;<br>
&lt;DIV&gt;&amp;nbsp;&lt;/DIV&gt;<br>
&lt;DIV&gt;&lt;FONT&nbsp;size=2&gt;open(HANDLE,&quot;mailerd.log&quot;);&lt;BR&gt;while&nbsp;(&amp;lt;HANDLE&amp;gt;){&lt;BR&gt;if&nbsp;<br>
($_=~/^\[(.*)\]\s+\[(.*)\]\s+(.*)&amp;lt;(.*)&amp;gt;\s+\-&amp;gt;\s+&amp;lt;(.*)&amp;gt;\s+\((.*)/){&lt;BR&gt;#&nbsp;<br>
Create&nbsp;a&nbsp;message&nbsp;and&nbsp;build&nbsp;it&nbsp;up&lt;BR&gt;#&nbsp;--------------------------------&lt;BR&gt;my&nbsp;<br>
$time=$1;&lt;BR&gt;my&nbsp;$from=$4;&lt;BR&gt;my&nbsp;$to=$5;&lt;BR&gt;my&nbsp;$subject=$6;&lt;BR&gt;&lt;FONT&nbsp;<br>
color=#ff0000&gt;use&nbsp;Encode;&lt;BR&gt;Encode::from_to($subject,&nbsp;&quot;big5&quot;,&nbsp;&quot;utf-8&quot;&nbsp;)&nbsp;<br>
;&lt;/FONT&gt;&lt;BR&gt;&amp;nbsp;&lt;BR&gt;my&nbsp;$msg&nbsp;=&nbsp;<br>
Net::Jabber::Message-&amp;gt;new();&lt;BR&gt;$msg-&amp;gt;SetMessage(&nbsp;<br>
&quot;to&quot;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;=&amp;gt;&nbsp;<br>
RECIPIENT,&lt;BR&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;<br>
&quot;subject&quot;&nbsp;=&amp;gt;&nbsp;&quot;Email&nbsp;from&nbsp;<br>
$from&quot;,&lt;BR&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;<br>
&quot;body&quot;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;=&amp;gt;&nbsp;join(&quot;\n&quot;,&nbsp;&quot;Subject:&nbsp;<br>
$subject&quot;,&lt;BR&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;<br>
&quot;Date:&nbsp;$time&quot;)&nbsp;);&lt;BR&gt;#&nbsp;Send&nbsp;the&nbsp;message&lt;BR&gt;#&nbsp;<br>
----------------&lt;BR&gt;$connection-&amp;gt;Send($msg);&lt;BR&gt;&amp;nbsp;&lt;BR&gt;}&lt;BR&gt;}&lt;BR&gt;#&nbsp;<br>
Disconnect&nbsp;from&nbsp;the&nbsp;Jabber&nbsp;server&lt;BR&gt;#&nbsp;<br>
---------------------------------&lt;BR&gt;$connection-&amp;gt;Disconnect();&lt;/FONT&gt;&lt;/DIV&gt;<br>
&lt;DIV&gt;&amp;nbsp;&lt;/DIV&gt;<br>
&lt;DIV&gt;&lt;FONT&nbsp;size=2&gt;exit;&lt;BR&gt;&lt;/FONT&gt;&lt;/DIV&gt;&lt;/FONT&gt;&lt;/DIV&gt;&lt;/BODY&gt;&lt;/HTML&gt;<br>

</tt>
