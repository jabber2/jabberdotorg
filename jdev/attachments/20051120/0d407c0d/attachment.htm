<tt>
I&nbsp;have&nbsp;started&amp;nbsp;&nbsp;coding&nbsp;with&nbsp;Jabber&nbsp;but&nbsp;am&nbsp;having&nbsp;problems&nbsp;early&nbsp;on&nbsp;with&nbsp;what&nbsp;i&nbsp;suspect&nbsp;in&nbsp;bad&nbsp;formatting&nbsp;in&nbsp;the&nbsp;Xml.&lt;br&gt;<br>
I&nbsp;send&nbsp;the&nbsp;initial&nbsp;xml&nbsp;to&nbsp;make&nbsp;the&nbsp;stream&nbsp;connection&nbsp;and&nbsp;then&nbsp;try&nbsp;to<br>
register&nbsp;an&nbsp;account&nbsp;but&nbsp;the&nbsp;server&nbsp;closes&nbsp;the&nbsp;connection.&nbsp;When&nbsp;trying<br>
this&nbsp;on&nbsp;a&nbsp;telnet&nbsp;client&nbsp;it&nbsp;does&nbsp;give&nbsp;me&nbsp;a&nbsp;stream&nbsp;error&nbsp;which&nbsp;says<br>
disconnected.&nbsp;Occasionally&nbsp;upon&nbsp;trying&nbsp;other&nbsp;xml&nbsp;such&nbsp;as&nbsp;a&nbsp;login&nbsp;stream<br>
it&nbsp;might&nbsp;say&nbsp;invalid&nbsp;xml.&lt;br&gt;<br>
I&nbsp;put&nbsp;together&nbsp;this&nbsp;quick&nbsp;example&nbsp;below&nbsp;to&nbsp;illustrate&nbsp;the&nbsp;problem.&lt;br&gt;<br>
Any&nbsp;help&nbsp;would&nbsp;be&nbsp;greatly&nbsp;appreciated&lt;br&gt;<br>
&lt;br&gt;<br>
Paul&lt;br&gt;<br>
&lt;br&gt;<br>
import&nbsp;java.util.*;&lt;br&gt;<br>
import&nbsp;java.net.*;&lt;br&gt;<br>
import&nbsp;java.io.*;&lt;br&gt;<br>
&lt;br&gt;<br>
public&nbsp;class&nbsp;JabberTest&nbsp;implements&nbsp;Runnable&lt;br&gt;<br>
{&lt;br&gt;<br>
private&nbsp;Socket&nbsp;socket;&lt;br&gt;<br>
private&nbsp;BufferedReader&nbsp;dataIn;&lt;br&gt;<br>
private&nbsp;PrintWriter&nbsp;dataOut;&lt;br&gt;<br>
private&nbsp;String&nbsp;line;&lt;br&gt;<br>
&lt;br&gt;<br>
public&nbsp;JabberTest()&lt;br&gt;<br>
&amp;nbsp;&nbsp;{&lt;br&gt;<br>
&amp;nbsp;&nbsp;new&nbsp;Thread(this).start();&lt;br&gt;<br>
&amp;nbsp;&nbsp;}&lt;br&gt;<br>
&lt;br&gt;<br>
public&nbsp;void&nbsp;run()&lt;br&gt;<br>
&amp;nbsp;&nbsp;{&lt;br&gt;<br>
&amp;nbsp;&nbsp;String&nbsp;hostname&nbsp;=&nbsp;&amp;quot;&lt;a&nbsp;href=&quot;http://netmindz.net&quot;&gt;netmindz.net&lt;/a&gt;&amp;quot;;&lt;br&gt;<br>
&amp;nbsp;&nbsp;String&nbsp;line;&lt;br&gt;<br>
&lt;br&gt;<br>
&amp;nbsp;&nbsp;System.out.println(&amp;quot;Connecting..&amp;quot;);&lt;br&gt;<br>
&amp;nbsp;&nbsp;try&lt;br&gt;<br>
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;{&lt;br&gt;<br>
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;socket&nbsp;=&nbsp;new&nbsp;Socket(hostname,5222);&lt;br&gt;<br>
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;dataIn&nbsp;=&nbsp;new&nbsp;BufferedReader(new&nbsp;InputStreamReader(socket.getInputStream()));&lt;br&gt;<br>
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;dataOut&nbsp;=&nbsp;new&nbsp;PrintWriter(new&nbsp;OutputStreamWriter(socket.getOutputStream()),true);&lt;br&gt;<br>
&lt;br&gt;<br>
&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;String&nbsp;s1&nbsp;=&nbsp;&amp;quot;&amp;lt;?xml&nbsp;version='1.0'?&amp;gt;&amp;quot;;&lt;br&gt;<br>
&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;s1&nbsp;+=&nbsp;&amp;quot;&amp;lt;stream:stream&nbsp;&amp;quot;;&lt;br&gt;<br>
&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;s1&nbsp;+=&nbsp;&amp;quot;xmlns:stream='&lt;a&nbsp;href=&quot;http://etherx.jabber.org/streams&quot;&gt;http://etherx.jabber.org/streams&lt;/a&gt;'&nbsp;&amp;quot;;&lt;br&gt;<br>
&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;s1&nbsp;+=&nbsp;&amp;quot;xmlns='jabber:client'&nbsp;&amp;quot;;&lt;br&gt;<br>
&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;s1&nbsp;+=&nbsp;&amp;quot;to='&lt;a&nbsp;href=&quot;http://netmindz.net&quot;&gt;netmindz.net&lt;/a&gt;'/&amp;gt;&amp;quot;;&lt;br&gt;<br>
&lt;br&gt;<br>
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;send(s1);&lt;br&gt;<br>
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;while((line&nbsp;=&nbsp;dataIn.readLine())&nbsp;!=&nbsp;null)&lt;br&gt;<br>
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;{&lt;br&gt;<br>
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;System.out.println(line);&lt;br&gt;<br>
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;}&lt;br&gt;<br>
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&lt;br&gt;<br>
&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;String&nbsp;s2&nbsp;=&nbsp;&amp;quot;&nbsp;&amp;lt;iq&nbsp;type='set'&nbsp;id='reg2'&amp;gt;&nbsp;&amp;quot;;&lt;br&gt;<br>
&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;s2&nbsp;+=&nbsp;&amp;quot;&nbsp;&amp;lt;query&nbsp;xmlns='jabber:iq:register'&amp;gt;&nbsp;&amp;quot;;&lt;br&gt;<br>
&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;s2&nbsp;+=&nbsp;&amp;quot;&nbsp;&amp;lt;username&amp;gt;test&nbsp;user&amp;lt;/username&amp;gt;&nbsp;&amp;quot;;&lt;br&gt;<br>
&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;s2&nbsp;+=&nbsp;&amp;quot;&nbsp;&amp;lt;password&amp;gt;test&nbsp;user&amp;lt;/password&amp;gt;&nbsp;&amp;quot;;&lt;br&gt;<br>
&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;s2&nbsp;+=&nbsp;&amp;quot;&nbsp;&amp;lt;/query&amp;gt;&nbsp;&amp;quot;;&lt;br&gt;<br>
&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;s2&nbsp;+=&nbsp;&amp;quot;&nbsp;&amp;lt;/iq&amp;gt;&nbsp;&amp;quot;;&lt;br&gt;<br>
&lt;br&gt;<br>
&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;send(s2);&lt;br&gt;<br>
&lt;br&gt;<br>
&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;while((line&nbsp;=&nbsp;dataIn.readLine())&nbsp;!=&nbsp;null)&lt;br&gt;<br>
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;{&lt;br&gt;<br>
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;System.out.println(line);&lt;br&gt;<br>
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;}&lt;br&gt;<br>
&lt;br&gt;<br>
&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;socket.close();&lt;br&gt;<br>
&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;}&lt;br&gt;<br>
&amp;nbsp;&nbsp;catch(Exception&nbsp;e)&lt;br&gt;<br>
&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;{&lt;br&gt;<br>
&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;e.printStackTrace();&lt;br&gt;<br>
&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;}&lt;br&gt;<br>
&amp;nbsp;&nbsp;}&lt;br&gt;<br>
&lt;br&gt;<br>
public&amp;nbsp;&nbsp;void&nbsp;send(String&nbsp;message)&nbsp;throws&nbsp;java.io.IOException&lt;br&gt;<br>
&amp;nbsp;&nbsp;{&lt;br&gt;<br>
&amp;nbsp;&nbsp;dataOut.println(message);&lt;br&gt;<br>
&amp;nbsp;&nbsp;dataOut.flush();&lt;br&gt;<br>
&amp;nbsp;&nbsp;}&lt;br&gt;<br>
&lt;br&gt;<br>
public&nbsp;static&nbsp;void&nbsp;main(String[]&nbsp;params)&lt;br&gt;<br>
&amp;nbsp;&nbsp;{&lt;br&gt;<br>
&amp;nbsp;&nbsp;new&nbsp;JabberTest();&lt;br&gt;<br>
&amp;nbsp;&nbsp;}&lt;br&gt;<br>
&lt;br&gt;<br>
}&lt;br&gt;<br>

</tt>
