<tt>
&lt;!DOCTYPE&nbsp;HTML&nbsp;PUBLIC&nbsp;&quot;-//W3C//DTD&nbsp;HTML&nbsp;3.2//EN&quot;&gt;<br>
&lt;HTML&gt;<br>
&lt;HEAD&gt;<br>
&lt;META&nbsp;HTTP-EQUIV=&quot;Content-Type&quot;&nbsp;CONTENT=&quot;text/html;&nbsp;charset=iso-8859-1&quot;&gt;<br>
&lt;META&nbsp;NAME=&quot;Generator&quot;&nbsp;CONTENT=&quot;MS&nbsp;Exchange&nbsp;Server&nbsp;version&nbsp;6.0.6249.1&quot;&gt;<br>
&lt;TITLE&gt;Question&nbsp;about&nbsp;jabber:iq:auth&nbsp;packets&nbsp;and&nbsp;XDB&lt;/TITLE&gt;<br>
&lt;/HEAD&gt;<br>
&lt;BODY&gt;<br>
&lt;!--&nbsp;Converted&nbsp;from&nbsp;text/rtf&nbsp;format&nbsp;--&gt;<br>
<br>
&lt;P&gt;&lt;FONT&nbsp;SIZE=2&nbsp;FACE=&quot;Arial&quot;&gt;All,&lt;/FONT&gt;<br>
&lt;/P&gt;<br>
<br>
&lt;P&gt;&lt;FONT&nbsp;SIZE=2&nbsp;FACE=&quot;Arial&quot;&gt;I&nbsp;have&nbsp;noticed&nbsp;a&nbsp;quirk,&nbsp;if&nbsp;you&nbsp;will,&nbsp;in&nbsp;the&nbsp;way&nbsp;jabberd&nbsp;passes&nbsp;jabber:iq:auth&nbsp;packets&nbsp;to&nbsp;XDB.&nbsp;If&nbsp;you&nbsp;look&nbsp;at&nbsp;the&nbsp;output&nbsp;from&nbsp;my&nbsp;debug&nbsp;log&nbsp;(greatly&nbsp;edited&nbsp;for&nbsp;brevity)&nbsp;it&nbsp;looks&nbsp;like&nbsp;the&nbsp;client&nbsp;is&nbsp;sending&nbsp;a&nbsp;&amp;lt;resource&amp;gt;&nbsp;tag&nbsp;which&nbsp;is&nbsp;getting&nbsp;stripped&nbsp;from&nbsp;the&nbsp;stream&nbsp;when&nbsp;the&nbsp;packet&nbsp;is&nbsp;forwarded&nbsp;to&nbsp;my&nbsp;XDB&nbsp;service.&nbsp;&lt;/FONT&gt;&lt;/P&gt;<br>
<br>
&lt;P&gt;&lt;FONT&nbsp;SIZE=2&nbsp;FACE=&quot;Arial&quot;&gt;My&nbsp;guess&nbsp;is&nbsp;that&nbsp;deliver.c&nbsp;is&nbsp;responsible&nbsp;for&nbsp;rewriting&nbsp;the&nbsp;XML,&nbsp;but&nbsp;I&nbsp;can't&nbsp;figure&nbsp;out&nbsp;where&nbsp;as&nbsp;my&nbsp;C&nbsp;is&nbsp;so&nbsp;poor&nbsp;that&nbsp;I&nbsp;wouldn't&nbsp;begin&nbsp;to&nbsp;claim&nbsp;to&nbsp;understand&nbsp;what&nbsp;the&nbsp;program&nbsp;is&nbsp;doing.&nbsp;I&nbsp;want&nbsp;to&nbsp;be&nbsp;able&nbsp;to&nbsp;store&nbsp;the&nbsp;resources&nbsp;a&nbsp;user&nbsp;is&nbsp;sending&nbsp;like&nbsp;xdb_sql&nbsp;does&nbsp;and&nbsp;it&nbsp;seems&nbsp;to&nbsp;me&nbsp;the&nbsp;perfect&nbsp;time&nbsp;to&nbsp;do&nbsp;this&nbsp;would&nbsp;be&nbsp;when&nbsp;an&nbsp;iq:auth&nbsp;packet&nbsp;is&nbsp;received,&nbsp;except&nbsp;that&nbsp;this&nbsp;handy-dandy&nbsp;piece&nbsp;of&nbsp;information&nbsp;is&nbsp;not&nbsp;being&nbsp;passed&nbsp;to&nbsp;my&nbsp;component.&nbsp;Any&nbsp;help&nbsp;here&nbsp;would&nbsp;be&nbsp;appreciated.&nbsp;Thanks&nbsp;in&nbsp;advance.&lt;/FONT&gt;&lt;/P&gt;<br>
<br>
&lt;P&gt;&lt;FONT&nbsp;SIZE=2&nbsp;FACE=&quot;Arial&quot;&gt;---------------------------------------------------------------BEGIN&nbsp;TRACE-----------------------------------------------------------------------------------------------------------&lt;/FONT&gt;&lt;/P&gt;<br>
<br>
&lt;P&gt;&lt;FONT&nbsp;SIZE=2&nbsp;FACE=&quot;Courier&nbsp;New&quot;&gt;Fri&nbsp;Oct&nbsp;18&nbsp;08:57:22&nbsp;2002&amp;nbsp;&nbsp;mio.c:760&nbsp;MIO&nbsp;read&nbsp;from&nbsp;socket&nbsp;15:&nbsp;&amp;lt;iq&nbsp;type='set'&nbsp;id='__AUTH__'&amp;gt;&amp;lt;query&nbsp;xmlns='jabber:iq:auth'&amp;gt;&amp;lt;username&amp;gt;joehep&amp;lt;/username&amp;gt;&amp;lt;resource&amp;gt;GAIM&amp;lt;/resource&amp;gt;&amp;lt;password&amp;gt;password&amp;lt;/password&amp;gt;&amp;lt;/query&amp;gt;&amp;lt;/iq&amp;gt;&lt;/FONT&gt;&lt;/P&gt;<br>
<br>
&lt;P&gt;&lt;FONT&nbsp;SIZE=2&nbsp;FACE=&quot;Courier&nbsp;New&quot;&gt;Fri&nbsp;Oct&nbsp;18&nbsp;08:57:22&nbsp;2002&amp;nbsp;&nbsp;deliver.c:474&nbsp;DELIVER&nbsp;4:shrieker.ena.com&nbsp;&amp;lt;route&nbsp;type='auth'&nbsp;to='joehep@shrieker.ena.com/GAIM'&nbsp;from='15@c2s/812F628'&amp;gt;&amp;lt;iq&nbsp;type='set'&nbsp;id='__AUTH__'&amp;gt;&amp;lt;query&nbsp;xmlns='jabber:iq:auth'&amp;gt;&amp;lt;username&amp;gt;joehep&amp;lt;/username&amp;gt;&amp;lt;resource&amp;gt;GAIM&amp;lt;/resource&amp;gt;&amp;lt;password&amp;gt;password&amp;lt;/password&amp;gt;&amp;lt;/query&amp;gt;&amp;lt;/iq&amp;gt;&amp;lt;/route&amp;gt;&lt;/FONT&gt;&lt;/P&gt;<br>
<br>
&lt;P&gt;&lt;FONT&nbsp;SIZE=2&nbsp;FACE=&quot;Courier&nbsp;New&quot;&gt;Fri&nbsp;Oct&nbsp;18&nbsp;08:57:22&nbsp;2002&amp;nbsp;&nbsp;deliver.c:94&nbsp;(80D84A0)incoming&nbsp;packet&nbsp;&amp;lt;route&nbsp;type='auth'&nbsp;to='joehep@shrieker.ena.com/GAIM'&nbsp;from='15@c2s/812F628'&amp;gt;&amp;lt;iq&nbsp;type='set'&nbsp;id='__AUTH__'&amp;gt;&amp;lt;query&nbsp;xmlns='jabber:iq:auth'&amp;gt;&amp;lt;username&amp;gt;joehep&amp;lt;/username&amp;gt;&amp;lt;resource&amp;gt;GAIM&amp;lt;/resource&amp;gt;&amp;lt;password&amp;gt;password&amp;lt;/password&amp;gt;&amp;lt;/query&amp;gt;&amp;lt;/iq&amp;gt;&amp;lt;/route&amp;gt;&lt;/FONT&gt;&lt;/P&gt;<br>
<br>
&lt;P&gt;&lt;FONT&nbsp;SIZE=2&nbsp;FACE=&quot;Courier&nbsp;New&quot;&gt;Fri&nbsp;Oct&nbsp;18&nbsp;08:57:22&nbsp;2002&amp;nbsp;&nbsp;deliver.c:474&nbsp;DELIVER&nbsp;2:shrieker.ena.com&nbsp;&amp;lt;xdb&nbsp;type='set'&nbsp;action='check'&nbsp;to='joehep@shrieker.ena.com'&nbsp;from='sessions'&nbsp;ns='jabber:iq:auth'&nbsp;id='85'&amp;gt;&amp;lt;password&amp;gt;password&amp;lt;/password&amp;gt;&amp;lt;/xdb&amp;gt;&lt;/FONT&gt;&lt;/P&gt;<br>
<br>
&lt;P&gt;&lt;FONT&nbsp;SIZE=2&nbsp;FACE=&quot;Arial&quot;&gt;------------------------------------------------------------------END&nbsp;TRACE-----------------------------------------------------------------------------------------------------------&lt;/FONT&gt;&lt;/P&gt;<br>
<br>
&lt;P&gt;&lt;FONT&nbsp;SIZE=2&nbsp;FACE=&quot;Arial&quot;&gt;Again,&nbsp;thanks&nbsp;for&nbsp;the&nbsp;help,&lt;/FONT&gt;<br>
&lt;/P&gt;<br>
<br>
&lt;P&gt;&lt;FONT&nbsp;SIZE=2&nbsp;FACE=&quot;Arial&quot;&gt;--Joe&nbsp;Breeden&lt;/FONT&gt;<br>
&lt;/P&gt;<br>
<br>
&lt;P&gt;&lt;FONT&nbsp;SIZE=1&nbsp;FACE=&quot;Arial&quot;&gt;From&nbsp;Murphy's&nbsp;Laws&nbsp;of&nbsp;Computing:&lt;/FONT&gt;<br>
<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=1&nbsp;FACE=&quot;Arial&quot;&gt;9.&nbsp;A&nbsp;complex&nbsp;system&nbsp;that&nbsp;does&nbsp;not&nbsp;work&nbsp;is&nbsp;invariably&nbsp;found&nbsp;to&nbsp;have&nbsp;evolved&nbsp;from&nbsp;a&nbsp;simpler&nbsp;system&nbsp;that&nbsp;worked&nbsp;just&nbsp;fine.&lt;/FONT&gt;<br>
&lt;/P&gt;<br>
&lt;BR&gt;<br>
<br>
&lt;/BODY&gt;<br>
&lt;/HTML&gt;
</tt>
