<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&gt;&lt;div&gt;Thanks&nbsp;for&nbsp;all&nbsp;the&nbsp;replies.&nbsp;I&nbsp;agree&nbsp;that&nbsp;this&nbsp;should&nbsp;probably&nbsp;be&nbsp;clarified&nbsp;as&nbsp;the&nbsp;current&nbsp;explanation&nbsp;is&nbsp;not&nbsp;as&nbsp;clear&nbsp;as&nbsp;it&nbsp;should&nbsp;be.&lt;br&gt;&lt;/div&gt;It&nbsp;looks&nbsp;as&nbsp;if&nbsp;you&#39;d&nbsp;need&nbsp;to&nbsp;use&nbsp;the&nbsp;&quot;stream:&quot;&nbsp;prefix&nbsp;for&nbsp;&quot;features&quot;&nbsp;but&nbsp;you&nbsp;shouldn&#39;t/mustn&#39;t&nbsp;use&nbsp;it&nbsp;for&nbsp;&quot;error&quot;.&nbsp;More&nbsp;examples&nbsp;or&nbsp;writing&nbsp;it&nbsp;in&nbsp;a&nbsp;better&nbsp;way&nbsp;would&nbsp;help,&nbsp;I&nbsp;assume.&nbsp;&lt;br&gt;&lt;br&gt;&lt;/div&gt;Best,&lt;br&gt;Michael&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_extra&quot;&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;2015-02-03&nbsp;10:53&nbsp;GMT+01:00&nbsp;Hund,&nbsp;Johannes&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&lt;&lt;a&nbsp;href=&quot;mailto:johannes.hund@siemens.com&quot;&nbsp;target=&quot;_blank&quot;&gt;johannes.hund@siemens.com&lt;/a&gt;&gt;&lt;/span&gt;:&lt;br&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;&gt;&nbsp;I&nbsp;called&nbsp;this&nbsp;out&nbsp;in&nbsp;7395&nbsp;because&nbsp;both&nbsp;stream&nbsp;features&nbsp;and&nbsp;errors&lt;br&gt;<br>
&gt;&nbsp;traditionally&nbsp;use&nbsp;the&nbsp;&#39;stream&#39;&nbsp;prefix&nbsp;while&nbsp;relying&nbsp;on&nbsp;the&nbsp;opening&nbsp;&lt;stream&gt;&lt;br&gt;<br>
&gt;&nbsp;tag&nbsp;to&nbsp;define&nbsp;to&nbsp;define&nbsp;the&nbsp;prefix.&nbsp;But&nbsp;for&nbsp;WebSocket&nbsp;there&nbsp;is&nbsp;no&nbsp;parent&lt;br&gt;<br>
&gt;&nbsp;&lt;stream&gt;&nbsp;tag&nbsp;providing&nbsp;those&nbsp;declarations,&nbsp;and&nbsp;it&nbsp;seemed&nbsp;like&nbsp;an&nbsp;easy&nbsp;item&nbsp;for&lt;br&gt;<br>
&gt;&nbsp;implementors&nbsp;to&nbsp;either&nbsp;miss&nbsp;entirely&nbsp;or&nbsp;do&nbsp;incorrectly&nbsp;like&nbsp;so:&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;//&nbsp;Not&nbsp;define&nbsp;the&nbsp;namespace&nbsp;or&nbsp;prefix&nbsp;at&nbsp;all&nbsp;&lt;stream:features&nbsp;/&gt;&nbsp;&lt;stream:error&lt;br&gt;<br>
&gt;&nbsp;/&gt;&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;//&nbsp;Define&nbsp;the&nbsp;namespace&nbsp;without&nbsp;a&nbsp;prefix,&nbsp;while&nbsp;still&nbsp;using&nbsp;a&nbsp;prefix&lt;br&gt;<br>
&gt;&nbsp;&lt;stream:features&nbsp;xmlns=&quot;&lt;a&nbsp;href=&quot;http://etherx.jabber.org/streams&quot;&nbsp;target=&quot;_blank&quot;&gt;http://etherx.jabber.org/streams&lt;/a&gt;&quot;&nbsp;/&gt;&nbsp;&lt;stream:error&lt;br&gt;<br>
&gt;&nbsp;xmlns=&quot;&lt;a&nbsp;href=&quot;http://etherx.jabber.org/streams&quot;&nbsp;target=&quot;_blank&quot;&gt;http://etherx.jabber.org/streams&lt;/a&gt;&quot;&nbsp;/&gt;&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;//&nbsp;Stamp&nbsp;&#39;jabber:client&#39;&nbsp;as&nbsp;the&nbsp;namespace&nbsp;because&nbsp;it&nbsp;has&nbsp;no&nbsp;xmlns&nbsp;attribute&lt;br&gt;<br>
&gt;&nbsp;&lt;stream:error&nbsp;xmlns=&quot;jabber:client&quot;&nbsp;/&gt;&nbsp;&lt;stream:features&nbsp;xmlns=&quot;jabber:client&quot;&lt;br&gt;<br>
&gt;&nbsp;/&gt;&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;â€”&nbsp;Lance&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
Yes,&nbsp;there&nbsp;we&nbsp;saw&nbsp;there&nbsp;is&nbsp;a&nbsp;statement&nbsp;somewhere&nbsp;in&nbsp;the&nbsp;RFC&nbsp;that&nbsp;you&nbsp;should&nbsp;use&nbsp;the&nbsp;prefix&nbsp;&quot;stream&quot;&nbsp;...if&nbsp;you&nbsp;use&nbsp;a&nbsp;prefix.&lt;br&gt;<br>
I&nbsp;think&nbsp;this&nbsp;confuses&nbsp;many&nbsp;developers,&nbsp;as&nbsp;we&nbsp;have&nbsp;seen&nbsp;implementations&nbsp;that&nbsp;refuse&nbsp;fragments&nbsp;as&nbsp;invalid&nbsp;xml&nbsp;if&nbsp;it&nbsp;does&nbsp;not&nbsp;have&nbsp;a&nbsp;prefix&nbsp;(but&nbsp;declares&nbsp;the&nbsp;ns&nbsp;for&nbsp;the&nbsp;element)&nbsp;or&nbsp;uses&nbsp;a&nbsp;prefix&nbsp;differently&nbsp;to&nbsp;stream.&lt;br&gt;<br>
&lt;br&gt;<br>
This&nbsp;gives&nbsp;us&nbsp;problems&nbsp;when&nbsp;using&nbsp;EXI,&nbsp;as&nbsp;it&nbsp;will&nbsp;normally&nbsp;just&nbsp;produce&nbsp;valid&nbsp;xml.&nbsp;Therefore,&nbsp;it&nbsp;is&nbsp;up&nbsp;to&nbsp;the&nbsp;codec&nbsp;to&nbsp;just&nbsp;assign&nbsp;a&nbsp;namespace&nbsp;to&nbsp;any&nbsp;prefix&nbsp;(if&nbsp;necessary).&nbsp;There&nbsp;are&nbsp;flags/codec&nbsp;options&nbsp;defined&nbsp;in&nbsp;the&nbsp;EXI&nbsp;standard&nbsp;for&nbsp;exactly&nbsp;this&nbsp;(namespace&nbsp;preservation),&nbsp;but&nbsp;it&nbsp;reduces&nbsp;performance&nbsp;(as&nbsp;you&nbsp;have&nbsp;to&nbsp;communicate&nbsp;every&nbsp;use&nbsp;prefix),&nbsp;does&nbsp;not&nbsp;work&nbsp;when&nbsp;you&nbsp;build&nbsp;it&nbsp;from&nbsp;a&nbsp;memory&nbsp;representation&nbsp;and&nbsp;is&nbsp;a&nbsp;quirks&nbsp;mode&nbsp;IMHO.&lt;br&gt;<br>
&lt;br&gt;<br>
Maybe&nbsp;it&nbsp;would&nbsp;be&nbsp;good&nbsp;to&nbsp;give&nbsp;some&nbsp;more&nbsp;implementation&nbsp;notes/advice&nbsp;to&nbsp;clarify&nbsp;what&nbsp;is&nbsp;valid&nbsp;and&nbsp;what&nbsp;is&nbsp;not?&lt;br&gt;<br>
&lt;br&gt;<br>
/Johannes&lt;br&gt;<br>
_______________________________________________&lt;br&gt;<br>
JDev&nbsp;mailing&nbsp;list&lt;br&gt;<br>
Info:&nbsp;&lt;a&nbsp;href=&quot;http://mail.jabber.org/mailman/listinfo/jdev&quot;&nbsp;target=&quot;_blank&quot;&gt;http://mail.jabber.org/mailman/listinfo/jdev&lt;/a&gt;&lt;br&gt;<br>
Unsubscribe:&nbsp;&lt;a&nbsp;href=&quot;mailto:JDev-unsubscribe@jabber.org&quot;&gt;JDev-unsubscribe@jabber.org&lt;/a&gt;&lt;br&gt;<br>
_______________________________________________&lt;br&gt;<br>
&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;&lt;/div&gt;<br>

</tt>
