<tt>
&lt;html&gt;&lt;head&gt;&lt;/head&gt;&lt;body&nbsp;bgcolor=&quot;#FFFFFF&quot;&gt;&lt;div&gt;Thanks&nbsp;for&nbsp;the&nbsp;quick&nbsp;response.&lt;br&gt;It's&nbsp;with&nbsp;a&nbsp;particular&nbsp;windows&nbsp;client&nbsp;that&nbsp;uses&nbsp;jabber&nbsp;of&nbsp;server1&nbsp;to&nbsp;communicate&nbsp;with&nbsp;a&nbsp;service&nbsp;in&nbsp;server2&nbsp;which&nbsp;also&nbsp;uses&nbsp;jabber.&lt;/div&gt;&lt;div&gt;I'll&nbsp;checkout&nbsp;the&nbsp;XEP-0198...&nbsp;By&nbsp;the&nbsp;way&nbsp;We're&nbsp;using&nbsp;jabber&nbsp;1.4&nbsp;in&nbsp;the&nbsp;servers&nbsp;and&nbsp;centos4.&lt;br&gt;<br>
&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;Wed,&nbsp;Mar&nbsp;21,&nbsp;2012&nbsp;at&nbsp;5:50&nbsp;PM,&nbsp;&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&lt;&lt;a&nbsp;href=&quot;mailto:dave@cridland.net&quot;&gt;dave@cridland.net&lt;/a&gt;&gt;&lt;/span&gt;&nbsp;wrote:&lt;br&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;<br>
&lt;div&gt;&lt;p&gt;I&nbsp;think&nbsp;you&nbsp;might&nbsp;see&nbsp;this&nbsp;if&nbsp;there's&nbsp;no&nbsp;XEP-0198&nbsp;between&nbsp;servers&nbsp;and&nbsp;the&nbsp;old&nbsp;TCP&nbsp;session&nbsp;is&nbsp;still&nbsp;present&nbsp;on&nbsp;server2.&lt;br&gt;&lt;br&gt;The&nbsp;presence&nbsp;response&nbsp;would&nbsp;go&nbsp;down&nbsp;this&nbsp;dead&nbsp;session,&nbsp;then&nbsp;it'd&nbsp;be&nbsp;detected&nbsp;as&nbsp;dead&nbsp;(TCP&nbsp;RST&nbsp;from&nbsp;server1),&nbsp;but&nbsp;typically&nbsp;the&nbsp;presence&nbsp;won't&nbsp;be&nbsp;resent,&nbsp;as&nbsp;it'll&nbsp;have&nbsp;been&nbsp;lost&nbsp;on&nbsp;the&nbsp;wire.&lt;br&gt;<br>
&lt;br&gt;The&nbsp;solution&nbsp;is&nbsp;basically&nbsp;XEP-0198&nbsp;on&nbsp;S2S&nbsp;links&nbsp;-&nbsp;you&nbsp;don't&nbsp;even&nbsp;need&nbsp;to&nbsp;do&nbsp;session&nbsp;resumption&nbsp;for&nbsp;it&nbsp;to&nbsp;be&nbsp;a&nbsp;substantial&nbsp;improvement&nbsp;here.&lt;br&gt;&lt;br&gt;&lt;font&nbsp;color=&quot;#888888&quot;&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font&nbsp;color=&quot;#888888&quot;&gt;&lt;font&nbsp;color=&quot;#888888&quot;&gt;Sent&nbsp;from&nbsp;my&nbsp;android&nbsp;device.&lt;/font&gt;&lt;/font&gt;&lt;/p&gt;<br>
&lt;font&nbsp;color=&quot;#888888&quot;&gt;<br>
&lt;/font&gt;&lt;p&gt;&lt;/p&gt;&lt;div&gt;&lt;div&nbsp;class=&quot;h5&quot;&gt;<br>
&lt;br&gt;&lt;br&gt;-----Original&nbsp;Message-----&lt;br&gt;From:&nbsp;Kevin&nbsp;Smith&nbsp;&lt;&lt;a&nbsp;href=&quot;mailto:kevin@kismith.co.uk&quot;&nbsp;target=&quot;_blank&quot;&gt;kevin@kismith.co.uk&lt;/a&gt;&gt;&lt;br&gt;To:&nbsp;Jabber/XMPP&nbsp;software&nbsp;development&nbsp;list&nbsp;&lt;&lt;a&nbsp;href=&quot;mailto:jdev@jabber.org&quot;&nbsp;target=&quot;_blank&quot;&gt;jdev@jabber.org&lt;/a&gt;&gt;&lt;br&gt;<br>
Sent:&nbsp;Wed,&nbsp;21&nbsp;Mar&nbsp;2012&nbsp;9:20&nbsp;&lt;br&gt;Subject:&nbsp;Re:&nbsp;[jdev]&nbsp;Problem&nbsp;receiving&nbsp;presence&nbsp;after&nbsp;power&nbsp;outag&lt;br&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;HOEnZb&quot;&gt;&lt;div&nbsp;class=&quot;h5&quot;&gt;&lt;p&gt;On&nbsp;Wed,&nbsp;Mar&nbsp;21,&nbsp;2012&nbsp;at&nbsp;9:12&nbsp;AM,&nbsp;Mark&nbsp;Gabriel&nbsp;Paylaga<br>
&lt;br&gt;<br>
&lt;&lt;a&nbsp;href=&quot;mailto:mpaylaga@gmail.com&quot;&nbsp;target=&quot;_blank&quot;&gt;mpaylaga@gmail.com&lt;/a&gt;&gt;&nbsp;wrote:<br>
&lt;br&gt;<br>
&gt;&nbsp;Hello,<br>
&lt;br&gt;<br>
&gt;<br>
&lt;br&gt;<br>
&gt;&nbsp;Has&nbsp;anyone&nbsp;tried&nbsp;this&nbsp;before?&nbsp;:<br>
&lt;br&gt;<br>
&gt;<br>
&lt;br&gt;<br>
&gt;&nbsp;1.)&nbsp;&nbsp;Server1&nbsp;receives&nbsp;presence&nbsp;from&nbsp;Server2.<br>
&lt;br&gt;<br>
&gt;<br>
&lt;br&gt;<br>
&gt;&nbsp;2.)&nbsp;&nbsp;Power&nbsp;off&nbsp;Server1&nbsp;(meaning&nbsp;no&nbsp;graceful&nbsp;exit,&nbsp;jabber&nbsp;still&nbsp;running&nbsp;and<br>
&lt;br&gt;<br>
&gt;&nbsp;other&nbsp;services&nbsp;then&nbsp;literally&nbsp;just&nbsp;switch&nbsp;off&nbsp;the&nbsp;server&nbsp;or&nbsp;unplug&nbsp;it).<br>
&lt;br&gt;<br>
&gt;<br>
&lt;br&gt;<br>
&gt;&nbsp;3.)&nbsp;&nbsp;Restart&nbsp;Server1&nbsp;(start&nbsp;all&nbsp;services&nbsp;including&nbsp;jabber).<br>
&lt;br&gt;<br>
&gt;<br>
&lt;br&gt;<br>
&gt;&nbsp;Result:&nbsp;&nbsp;Server1&nbsp;does&nbsp;not&nbsp;receive&nbsp;Server2's&nbsp;presence.<br>
&lt;br&gt;<br>
&gt;&nbsp;Solution:&nbsp;Restart&nbsp;services&nbsp;in&nbsp;Server2.&nbsp;&nbsp;Server1&nbsp;will&nbsp;receive&nbsp;the&nbsp;presence.<br>
&lt;br&gt;<br>
&gt;<br>
&lt;br&gt;<br>
&gt;&nbsp;Is&nbsp;this&nbsp;because&nbsp;Server2&nbsp;is&nbsp;still&nbsp;holding&nbsp;on&nbsp;to&nbsp;the&nbsp;old&nbsp;jabber&nbsp;session&nbsp;ID&nbsp;or<br>
&lt;br&gt;<br>
&gt;&nbsp;something?<br>
&lt;br&gt;<br>
<br>
&lt;br&gt;<br>
This&nbsp;shouldn't&nbsp;happen.&nbsp;When&nbsp;Server1&nbsp;comes&nbsp;back&nbsp;online,&nbsp;it'll&nbsp;signal<br>
&lt;br&gt;<br>
that&nbsp;it&nbsp;wants&nbsp;presence&nbsp;for&nbsp;the&nbsp;newly&nbsp;online&nbsp;user@server1,&nbsp;and&nbsp;server2<br>
&lt;br&gt;<br>
should&nbsp;be&nbsp;willing&nbsp;to&nbsp;provide&nbsp;it&nbsp;(subject&nbsp;to&nbsp;subscription&nbsp;states&nbsp;being<br>
&lt;br&gt;<br>
right,&nbsp;etc.).<br>
&lt;br&gt;<br>
<br>
&lt;br&gt;<br>
Is&nbsp;this&nbsp;a&nbsp;&nbsp;general&nbsp;problem&nbsp;you&nbsp;see,&nbsp;or&nbsp;with&nbsp;specific&nbsp;services?<br>
&lt;br&gt;<br>
<br>
&lt;br&gt;<br>
/K<br>
&lt;br&gt;<br>
_______________________________________________<br>
&lt;br&gt;<br>
JDev&nbsp;mailing&nbsp;list<br>
&lt;br&gt;<br>
Info:&nbsp;&lt;a&nbsp;href=&quot;http://mail.jabber.org/mailman/listinfo/jdev&quot;&nbsp;target=&quot;_blank&quot;&gt;http://mail.jabber.org/mailman/listinfo/jdev&lt;/a&gt;<br>
&lt;br&gt;<br>
Unsubscribe:&nbsp;&lt;a&nbsp;href=&quot;mailto:JDev-unsubscribe@jabber.org&quot;&nbsp;target=&quot;_blank&quot;&gt;JDev-unsubscribe@jabber.org&lt;/a&gt;<br>
&lt;br&gt;<br>
_______________________________________________<br>
&lt;br&gt;<br>
&lt;/p&gt;<br>
&lt;/div&gt;&lt;/div&gt;&lt;br&gt;_______________________________________________&lt;br&gt;<br>
JDev&nbsp;mailing&nbsp;list&lt;br&gt;<br>
Info:&nbsp;&lt;a&nbsp;href=&quot;http://mail.jabber.org/mailman/listinfo/jdev&quot;&nbsp;target=&quot;_blank&quot;&gt;http://mail.jabber.org/mailman/listinfo/jdev&lt;/a&gt;&lt;br&gt;<br>
Unsubscribe:&nbsp;&lt;a&nbsp;href=&quot;mailto:JDev-unsubscribe@jabber.org&quot;&gt;JDev-unsubscribe@jabber.org&lt;/a&gt;&lt;br&gt;<br>
_______________________________________________&lt;br&gt;<br>
&lt;br&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;<br>
&lt;/div&gt;&lt;/body&gt;&lt;/html&gt;
</tt>
