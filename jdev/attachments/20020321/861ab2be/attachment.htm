<tt>
&lt;!DOCTYPE&nbsp;HTML&nbsp;PUBLIC&nbsp;&quot;-//W3C//DTD&nbsp;HTML&nbsp;3.2//EN&quot;&gt;<br>
&lt;HTML&gt;<br>
&lt;HEAD&gt;<br>
&lt;META&nbsp;HTTP-EQUIV=&quot;Content-Type&quot;&nbsp;CONTENT=&quot;text/html;&nbsp;charset=US-ASCII&quot;&gt;<br>
&lt;META&nbsp;NAME=&quot;Generator&quot;&nbsp;CONTENT=&quot;MS&nbsp;Exchange&nbsp;Server&nbsp;version&nbsp;5.5.2653.12&quot;&gt;<br>
&lt;TITLE&gt;RE:&nbsp;[JDEV]&nbsp;Question&nbsp;on&nbsp;using&nbsp;NIO&nbsp;with&nbsp;SAX&lt;/TITLE&gt;<br>
&lt;/HEAD&gt;<br>
&lt;BODY&gt;<br>
<br>
&lt;P&gt;&lt;FONT&nbsp;SIZE=2&gt;Thanks.&nbsp;I&nbsp;guess&nbsp;I&nbsp;will&nbsp;have&nbsp;to&nbsp;live&nbsp;with&nbsp;this&nbsp;until&nbsp;the&nbsp;SAX&nbsp;API&nbsp;provide&nbsp;API&nbsp;for&nbsp;this&nbsp;push-model&nbsp;parser.&amp;nbsp;&nbsp;&lt;/FONT&gt;<br>
&lt;/P&gt;<br>
<br>
&lt;P&gt;&lt;FONT&nbsp;SIZE=2&gt;I&nbsp;looked&nbsp;at&nbsp;the&nbsp;Xerces-J&nbsp;parser's&nbsp;parseSome()&nbsp;method,&nbsp;but&nbsp;it&nbsp;is&nbsp;only&nbsp;for&nbsp;parsing&nbsp;the&nbsp;first&nbsp;line&nbsp;of&nbsp;XML&nbsp;document&nbsp;to&nbsp;get&nbsp;the&nbsp;encoding&nbsp;in&nbsp;XML&nbsp;Declaration,&nbsp;so&nbsp;it&nbsp;does&nbsp;not&nbsp;work&nbsp;in&nbsp;the&nbsp;way&nbsp;that&nbsp;I&nbsp;needed.&lt;/FONT&gt;&lt;/P&gt;<br>
<br>
&lt;P&gt;&lt;FONT&nbsp;SIZE=2&gt;Thanks&nbsp;again,&lt;/FONT&gt;<br>
&lt;/P&gt;<br>
<br>
&lt;P&gt;&lt;FONT&nbsp;SIZE=2&gt;Oscar&lt;/FONT&gt;<br>
&lt;/P&gt;<br>
<br>
&lt;P&gt;&lt;FONT&nbsp;SIZE=2&gt;-----Original&nbsp;Message-----&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;From:&nbsp;David&nbsp;Waite&nbsp;[&lt;A&nbsp;HREF=&quot;mailto:mass@akuma.org&quot;&gt;mailto:mass@akuma.org&lt;/A&gt;]&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;Sent:&nbsp;Thursday,&nbsp;March&nbsp;21,&nbsp;2002&nbsp;5:16&nbsp;PM&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;To:&nbsp;jdev@jabber.org&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;Subject:&nbsp;Re:&nbsp;[JDEV]&nbsp;Question&nbsp;on&nbsp;using&nbsp;NIO&nbsp;with&nbsp;SAX&lt;/FONT&gt;<br>
&lt;/P&gt;<br>
&lt;BR&gt;<br>
<br>
&lt;P&gt;&lt;FONT&nbsp;SIZE=2&gt;This&nbsp;is&nbsp;an&nbsp;issue&nbsp;with&nbsp;the&nbsp;SAX&nbsp;Api&nbsp;(which&nbsp;understandably,&nbsp;we&nbsp;can't&nbsp;&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;change).&nbsp;What&nbsp;you&nbsp;want&nbsp;is&nbsp;a&nbsp;push-model&nbsp;parser&nbsp;(like&nbsp;SAX)&nbsp;which&nbsp;takes&nbsp;a&nbsp;&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;block&nbsp;of&nbsp;bytes/characters&nbsp;and&nbsp;calls&nbsp;events&nbsp;on&nbsp;the&nbsp;DocumentHandler&nbsp;(on&nbsp;&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;that&nbsp;thread)&nbsp;until&nbsp;that&nbsp;block&nbsp;of&nbsp;data&nbsp;has&nbsp;been&nbsp;processed,&nbsp;then&nbsp;returns&nbsp;&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;or&nbsp;saves&nbsp;the&nbsp;remainder&nbsp;until&nbsp;the&nbsp;next&nbsp;time&nbsp;it&nbsp;is&nbsp;passed.&amp;nbsp;&nbsp;SAX&nbsp;does&nbsp;not&nbsp;&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;define&nbsp;this,&nbsp;and&nbsp;anything&nbsp;which&nbsp;does&nbsp;this&nbsp;at&nbsp;least&nbsp;is&nbsp;extending&nbsp;SAX.&lt;/FONT&gt;<br>
&lt;/P&gt;<br>
<br>
&lt;P&gt;&lt;FONT&nbsp;SIZE=2&gt;I&nbsp;believe&nbsp;Xerces-J&nbsp;at&nbsp;least&nbsp;defines&nbsp;a&nbsp;parseSome&nbsp;method&nbsp;on&nbsp;its&nbsp;XmlParser&nbsp;&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;method,&nbsp;but&nbsp;I&nbsp;don't&nbsp;know&nbsp;if&nbsp;this&nbsp;does&nbsp;what&nbsp;you&nbsp;want.&lt;/FONT&gt;<br>
&lt;/P&gt;<br>
<br>
&lt;P&gt;&lt;FONT&nbsp;SIZE=2&gt;-David&nbsp;Waite&lt;/FONT&gt;<br>
&lt;/P&gt;<br>
<br>
&lt;P&gt;&lt;FONT&nbsp;SIZE=2&gt;Chan,&nbsp;Oscar&nbsp;wrote:&lt;/FONT&gt;<br>
&lt;/P&gt;<br>
<br>
&lt;P&gt;&lt;FONT&nbsp;SIZE=2&gt;&amp;gt;&nbsp;Hi&nbsp;all,&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&amp;gt;&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&amp;gt;&nbsp;I&nbsp;am&nbsp;new&nbsp;here.&amp;nbsp;&nbsp;I&nbsp;am&nbsp;now&nbsp;developing&nbsp;a&nbsp;message&nbsp;server&nbsp;based&nbsp;on&nbsp;the&nbsp;&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&amp;gt;&nbsp;subset&nbsp;of&nbsp;Jabber&nbsp;protocol.&nbsp;I&nbsp;am&nbsp;building&nbsp;using&nbsp;Java,&nbsp;and&nbsp;SAX&nbsp;parser&nbsp;in&nbsp;&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&amp;gt;&nbsp;javax.xml.parsers&nbsp;package.&amp;nbsp;&amp;nbsp;&nbsp;My&nbsp;problem&nbsp;is&nbsp;that&nbsp;I&nbsp;am&nbsp;trying&nbsp;to&nbsp;code&nbsp;&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&amp;gt;&nbsp;the&nbsp;server&nbsp;so&nbsp;that&nbsp;it&nbsp;can&nbsp;use&nbsp;NIO&nbsp;(new&nbsp;i/o)&nbsp;package&nbsp;once&nbsp;java&nbsp;1.4&nbsp;is&nbsp;&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&amp;gt;&nbsp;stable&nbsp;enough&nbsp;to&nbsp;use.&amp;nbsp;&nbsp;By&nbsp;using&nbsp;NIO,&nbsp;it&nbsp;eliminates&nbsp;the&nbsp;problem&nbsp;of&nbsp;&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&amp;gt;&nbsp;having&nbsp;a&nbsp;thread&nbsp;per&nbsp;socket&nbsp;because&nbsp;it&nbsp;multiplexes&nbsp;the&nbsp;input&nbsp;and&nbsp;store&nbsp;&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&amp;gt;&nbsp;the&nbsp;data&nbsp;in&nbsp;a&nbsp;buffer&nbsp;instead&nbsp;of&nbsp;blocking&nbsp;the&nbsp;call&nbsp;and&nbsp;waiting&nbsp;until&nbsp;&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&amp;gt;&nbsp;data&nbsp;is&nbsp;available.&amp;nbsp;&nbsp;Usually,&nbsp;the&nbsp;server&nbsp;machine&nbsp;will&nbsp;slow&nbsp;down&nbsp;when&nbsp;&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&amp;gt;&nbsp;the&nbsp;number&nbsp;of&nbsp;thread&nbsp;reach&nbsp;about&nbsp;1000.&amp;nbsp;&nbsp;Therefore,&nbsp;NIO&nbsp;will&nbsp;increase&nbsp;&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&amp;gt;&nbsp;the&nbsp;number&nbsp;of&nbsp;connection&nbsp;that&nbsp;we&nbsp;can&nbsp;have.&nbsp;&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&amp;gt;&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&amp;gt;&nbsp;Since&nbsp;parse()&nbsp;method&nbsp;in&nbsp;java.xml.parsers.SAXParser&nbsp;is&nbsp;using&nbsp;a&nbsp;blocking&nbsp;&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&amp;gt;&nbsp;I/O&nbsp;and,&nbsp;hence,&nbsp;it&nbsp;increase&nbsp;the&nbsp;number&nbsp;of&nbsp;threads.&nbsp;Does&nbsp;anyone&nbsp;know&nbsp;&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&amp;gt;&nbsp;any&nbsp;workaround&nbsp;for&nbsp;it,&nbsp;or&nbsp;any&nbsp;future&nbsp;support&nbsp;for&nbsp;SAX&nbsp;using&nbsp;NIO?&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&amp;gt;&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&amp;gt;&nbsp;Thanks&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&amp;gt;&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&amp;gt;&nbsp;Oscar&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&amp;gt;&lt;/FONT&gt;<br>
&lt;/P&gt;<br>
&lt;BR&gt;<br>
&lt;BR&gt;<br>
<br>
&lt;P&gt;&lt;FONT&nbsp;SIZE=2&gt;_______________________________________________&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;jdev&nbsp;mailing&nbsp;list&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;jdev@jabber.org&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&lt;A&nbsp;HREF=&quot;http://mailman.jabber.org/listinfo/jdev&quot;&nbsp;TARGET=&quot;_blank&quot;&gt;http://mailman.jabber.org/listinfo/jdev&lt;/A&gt;&lt;/FONT&gt;<br>
&lt;/P&gt;<br>
<br>
&lt;/BODY&gt;<br>
&lt;/HTML&gt;
</tt>
