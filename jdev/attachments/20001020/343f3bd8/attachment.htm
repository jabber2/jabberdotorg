<tt>
&lt;html&gt;&lt;head&gt;&lt;/head&gt;&lt;body&gt;&lt;br&gt;<br>
to&nbsp;give&nbsp;you&nbsp;an&nbsp;idea,&nbsp;look&nbsp;at&nbsp;this&nbsp;diff...&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;a&nbsp;class=&quot;moz-txt-link-abbreviated&quot;&nbsp;href=&quot;mailto:oliver@devilmask:~/projects/jabber/jabber-1.1.3/pthsock$&quot;&gt;oliver@devilmask:~/projects/jabber/jabber-1.1.3/pthsock$&lt;/a&gt;&nbsp;diff&nbsp;client.c&nbsp;flatclient.c&nbsp;&lt;br&gt;<br>
137a138&lt;br&gt;<br>
&amp;gt;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;io_write_null(cur);&lt;br&gt;<br>
173a175&lt;br&gt;<br>
&amp;gt;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;io_write_null(cur);&lt;br&gt;<br>
193c195,196&lt;br&gt;<br>
&amp;lt;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;io_write_str(c,xstream_header_char(h));&lt;br&gt;<br>
---&lt;br&gt;<br>
&amp;gt;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;io_write_str(c,xstream_flatheader_char(h));&lt;br&gt;<br>
&amp;gt;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;io_write_null(c);&lt;br&gt;<br>
240a244&lt;br&gt;<br>
&amp;gt;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;io_write_null(c);&lt;br&gt;<br>
280a285&lt;br&gt;<br>
&amp;gt;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;int&nbsp;index;&lt;br&gt;<br>
292c297,302&lt;br&gt;<br>
&amp;lt;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;ret=xstream_eat(c-&amp;gt;xs,buffer,bufsz);&lt;br&gt;<br>
---&lt;br&gt;<br>
&amp;gt;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;index=0;&lt;br&gt;<br>
&amp;gt;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;while&nbsp;(index&amp;lt;bufsz)&nbsp;{&lt;br&gt;<br>
&amp;gt;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;if&nbsp;(buffer[index]&nbsp;!=&nbsp;'\0')&lt;br&gt;<br>
&amp;gt;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;ret=xstream_eat(c-&amp;gt;xs,&amp;amp;buffer[index],1);&lt;br&gt;<br>
&amp;gt;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;index++;&lt;br&gt;<br>
&amp;gt;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;}&lt;br&gt;<br>
&lt;br&gt;<br>
and&nbsp;this&nbsp;is&nbsp;the&nbsp;addition&nbsp;to&nbsp;io_select.c&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
void&nbsp;io_write_null(sock&nbsp;c)&lt;br&gt;<br>
{&lt;br&gt;<br>
&nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;if(c-&amp;gt;xbuffer!=NULL)&nbsp;_io_write_dump(c);&lt;br&gt;<br>
&nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;pth_write(c-&amp;gt;fd,&quot;\0&quot;,1);&lt;br&gt;<br>
}&lt;br&gt;<br>
&lt;br&gt;<br>
these&nbsp;changes&nbsp;will&nbsp;be&nbsp;included&nbsp;with&nbsp;a&nbsp;namespace&nbsp;switch,&nbsp;initially&nbsp;i'm&nbsp;just<br>
&nbsp;compiling&nbsp;as&nbsp;a&nbsp;separate&nbsp;.so&nbsp;and&nbsp;listening&nbsp;on&nbsp;a&nbsp;separate&nbsp;socket.&lt;br&gt;<br>
&lt;br&gt;<br>
Hope&nbsp;this&nbsp;is&nbsp;useful.&nbsp;Oliver.&lt;br&gt;<br>
dlb&nbsp;wrote:&lt;br&gt;<br>
&lt;blockquote&nbsp;type=&quot;cite&quot;&nbsp;cite=&quot;mid:39EF87FC.9E3B83B2@worldnet.att.net&quot;&gt;<br>
congratulations&nbsp;on&nbsp;getting&nbsp;this&nbsp;to&nbsp;work&nbsp;!<br>
&lt;br&gt;<br>
Have&nbsp;you&nbsp;implemented&nbsp;the&nbsp;revision&nbsp;to&nbsp;io_select's&nbsp;io_write_dump&nbsp;function<br>
which&nbsp;you&nbsp;had&nbsp;discussed&nbsp;-&nbsp;using&nbsp;a&nbsp;buffer&nbsp;length&nbsp;variable&nbsp;?&amp;nbsp;&nbsp;OR&nbsp;perhaps<br>
another&nbsp;means&nbsp;??<br>
<br>
&nbsp;&nbsp;&lt;p&gt;any&nbsp;advice&nbsp;you&nbsp;can&nbsp;provide&nbsp;will&nbsp;be&nbsp;greatly&nbsp;appreciated.&amp;nbsp;&nbsp;I've&nbsp;heard<br>
that&nbsp;building&nbsp;and&nbsp;configuring&nbsp;jabber&nbsp;is&nbsp;no&nbsp;small&nbsp;feat,&nbsp;but&nbsp;I'll&nbsp;give&nbsp;it<br>
a&nbsp;shot&nbsp;if&nbsp;this&nbsp;work-around&nbsp;is&nbsp;effective.<br>
&lt;/p&gt;<br>
&nbsp;&nbsp;&lt;p&gt;I'd&nbsp;been&nbsp;contemplating&nbsp;developing&nbsp;a&nbsp;socket&nbsp;interchange&nbsp;in&nbsp;TCL&nbsp;-&nbsp;to&nbsp;intermediate<br>
and&nbsp;filter&nbsp;the&nbsp;stream&nbsp;from&nbsp;F5-&amp;nbsp;&nbsp;which&nbsp;would&nbsp;address&nbsp;this&nbsp;same&nbsp;problem,<br>
but&nbsp;your&nbsp;solution&nbsp;is&nbsp;preferable.<br>
&lt;/p&gt;<br>
&nbsp;&nbsp;&lt;p&gt;nice&nbsp;work<br>
&lt;br&gt;&amp;nbsp;<br>
&lt;/p&gt;<br>
&nbsp;&nbsp;&lt;p&gt;Oliver&nbsp;George&nbsp;wrote:<br>
&lt;/p&gt;<br>
&nbsp;&nbsp;&lt;blockquote&nbsp;type=&quot;CITE&quot;&gt;Hi&nbsp;JDEVers,<br>
&lt;p&gt;(in&nbsp;case&nbsp;anyone&nbsp;is&nbsp;interested&nbsp;i&nbsp;have&nbsp;successfully&nbsp;interfaced&nbsp;flash&nbsp;5<br>
with<br>
&lt;br&gt;jabber&nbsp;and&nbsp;hopefully&nbsp;i&nbsp;will&nbsp;integrate&nbsp;these&nbsp;changes&nbsp;to&nbsp;the&nbsp;jabber&nbsp;source<br>
&lt;br&gt;-&nbsp;thanks&nbsp;to&nbsp;all&nbsp;who&nbsp;helped)<br>
&lt;br&gt;&amp;nbsp;<br>
&lt;br&gt;&lt;a&nbsp;href=&quot;http://mailman.jabber.org/listinfo/jdev&quot;&gt;&lt;/a&gt;&amp;nbsp;&lt;/p&gt;&lt;/blockquote&gt;<br>
<br>
&lt;/blockquote&gt;<br>
&lt;/body&gt;<br>
&lt;/html&gt;<br>

</tt>
