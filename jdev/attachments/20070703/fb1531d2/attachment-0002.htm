<tt>
I&nbsp;have&nbsp;been&nbsp;following&nbsp;the&nbsp;implementation&nbsp;of&nbsp;agsXMPP&nbsp;and&nbsp;Jabber.NET&nbsp;to&nbsp;see&nbsp;how&nbsp;they&nbsp;did&nbsp;it&nbsp;and&nbsp;afaik&nbsp;I&nbsp;have&nbsp;cloned&nbsp;that&nbsp;part&nbsp;fairly&nbsp;closely.&amp;nbsp;&nbsp;I&nbsp;don&amp;#39;t&nbsp;use&nbsp;the&nbsp;same&nbsp;stream&nbsp;again&nbsp;I&nbsp;assign&nbsp;the&nbsp;new&nbsp;sslstream&nbsp;to&nbsp;the&nbsp;same&nbsp;variable&nbsp;the&nbsp;old&nbsp;networkstream&nbsp;was.&amp;nbsp;&nbsp;If&nbsp;anyone&nbsp;can&nbsp;see&nbsp;what&nbsp;I&nbsp;am&nbsp;doing&nbsp;wrong&nbsp;please&nbsp;feel&nbsp;free&nbsp;to&nbsp;fix&nbsp;it.<br>
&lt;br&gt;&lt;br&gt;&lt;div&gt;&lt;span&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;7/3/07,&nbsp;&lt;b&nbsp;class=&quot;gmail_sendername&quot;&gt;Chris&nbsp;Mullins&lt;/b&gt;&nbsp;&amp;lt;&lt;a&nbsp;href=&quot;mailto:chris.mullins@coversant.net&quot;&gt;chris.mullins@coversant.net&lt;/a&gt;&amp;gt;&nbsp;wrote:&lt;/span&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;border-left:&nbsp;1px&nbsp;solid&nbsp;rgb(204,&nbsp;204,&nbsp;204);&nbsp;margin:&nbsp;0pt&nbsp;0pt&nbsp;0pt&nbsp;0.8ex;&nbsp;padding-left:&nbsp;1ex;&quot;&gt;<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
&lt;div&nbsp;link=&quot;blue&quot;&nbsp;vlink=&quot;purple&quot;&nbsp;lang=&quot;EN-US&quot;&gt;<br>
<br>
&lt;div&gt;<br>
<br>
&lt;p&gt;&lt;span&nbsp;style=&quot;font-size:&nbsp;11pt;&nbsp;color:&nbsp;rgb(31,&nbsp;73,&nbsp;125);&quot;&gt;Doing&nbsp;this&nbsp;is…&nbsp;a&nbsp;lot&nbsp;of&nbsp;work.&nbsp;Getting&nbsp;the&nbsp;SASL&nbsp;libraries&nbsp;right,<br>
and&nbsp;the&nbsp;feature&nbsp;negotiation&nbsp;is&nbsp;difficult.&lt;/span&gt;&lt;/p&gt;<br>
<br>
&lt;p&gt;&lt;span&nbsp;style=&quot;font-size:&nbsp;11pt;&nbsp;color:&nbsp;rgb(31,&nbsp;73,&nbsp;125);&quot;&gt;&amp;nbsp;&lt;/span&gt;&lt;/p&gt;<br>
<br>
&lt;p&gt;&lt;span&nbsp;style=&quot;font-size:&nbsp;11pt;&nbsp;color:&nbsp;rgb(31,&nbsp;73,&nbsp;125);&quot;&gt;There&nbsp;are&nbsp;three&nbsp;C#&nbsp;libs&nbsp;out&nbsp;there&nbsp;that&nbsp;already&nbsp;do&nbsp;this.&nbsp;You&nbsp;can<br>
look&nbsp;at&nbsp;source&nbsp;code&nbsp;for&nbsp;all&nbsp;of&nbsp;them:&lt;/span&gt;&lt;/p&gt;<br>
<br>
&lt;p&nbsp;style=&quot;text-indent:&nbsp;-0.25in;&quot;&gt;&lt;span&nbsp;style=&quot;font-size:&nbsp;11pt;&nbsp;color:&nbsp;rgb(31,&nbsp;73,&nbsp;125);&quot;&gt;&lt;span&gt;-&lt;span&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;<br>
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span&nbsp;style=&quot;font-size:&nbsp;11pt;&nbsp;color:&nbsp;rgb(31,&nbsp;73,&nbsp;125);&quot;&gt;SoapBox&nbsp;Framework&nbsp;-&nbsp;&lt;a&nbsp;href=&quot;http://www.coversant.com/Products/SoapBoxStudio/Overview/tabid/106/Default.aspx&quot;&nbsp;target=&quot;_blank&quot;&nbsp;onclick=&quot;return&nbsp;top.js.OpenExtLink(window,event,this)&quot;&gt;<br>
http://www.coversant.com/Products/SoapBoxStudio/Overview/tabid/106/Default.aspx&lt;/a&gt;&lt;/span&gt;&lt;/p&gt;<br>
<br>
&lt;p&nbsp;style=&quot;text-indent:&nbsp;-0.25in;&quot;&gt;&lt;span&nbsp;style=&quot;font-size:&nbsp;11pt;&nbsp;color:&nbsp;rgb(31,&nbsp;73,&nbsp;125);&quot;&gt;&lt;span&gt;-&lt;span&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;<br>
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span&nbsp;style=&quot;font-size:&nbsp;11pt;&nbsp;color:&nbsp;rgb(31,&nbsp;73,&nbsp;125);&quot;&gt;Jabber.Net&nbsp;-&nbsp;&lt;a&nbsp;href=&quot;http://code.google.com/p/jabber-net/&quot;&nbsp;target=&quot;_blank&quot;&nbsp;onclick=&quot;return&nbsp;top.js.OpenExtLink(window,event,this)&quot;&gt;http://code.google.com/p/jabber-net/<br>
&lt;/a&gt;&lt;/span&gt;&lt;/p&gt;<br>
<br>
&lt;p&nbsp;style=&quot;text-indent:&nbsp;-0.25in;&quot;&gt;&lt;span&nbsp;style=&quot;font-size:&nbsp;11pt;&nbsp;color:&nbsp;rgb(31,&nbsp;73,&nbsp;125);&quot;&gt;&lt;span&gt;-&lt;span&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;<br>
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span&nbsp;style=&quot;font-size:&nbsp;11pt;&nbsp;color:&nbsp;rgb(31,&nbsp;73,&nbsp;125);&quot;&gt;agsXMPP&nbsp;-&nbsp;&lt;a&nbsp;href=&quot;http://www.ag-software.de/index.php?page=agsxmpp-sdk&quot;&nbsp;target=&quot;_blank&quot;&nbsp;onclick=&quot;return&nbsp;top.js.OpenExtLink(window,event,this)&quot;&gt;<br>
http://www.ag-software.de/index.php?page=agsxmpp-sdk&lt;/a&gt;&lt;/span&gt;&lt;/p&gt;<br>
<br>
&lt;p&gt;&lt;span&nbsp;style=&quot;font-size:&nbsp;11pt;&nbsp;color:&nbsp;rgb(31,&nbsp;73,&nbsp;125);&quot;&gt;&amp;nbsp;&lt;/span&gt;&lt;/p&gt;<br>
<br>
&lt;p&gt;&lt;span&nbsp;style=&quot;font-size:&nbsp;11pt;&nbsp;color:&nbsp;rgb(31,&nbsp;73,&nbsp;125);&quot;&gt;I&nbsp;would&nbsp;recommend&nbsp;taking&nbsp;a&nbsp;look&nbsp;at&nbsp;how&nbsp;those&nbsp;SDK's&nbsp;are&nbsp;using&nbsp;the<br>
.Net&nbsp;SSL&nbsp;Stream&nbsp;class.&nbsp;&lt;/span&gt;&lt;/p&gt;<br>
<br>
&lt;p&gt;&lt;span&nbsp;style=&quot;font-size:&nbsp;11pt;&nbsp;color:&nbsp;rgb(31,&nbsp;73,&nbsp;125);&quot;&gt;&amp;nbsp;&lt;/span&gt;&lt;/p&gt;<br>
<br>
&lt;p&gt;&lt;span&nbsp;style=&quot;font-size:&nbsp;11pt;&nbsp;color:&nbsp;rgb(31,&nbsp;73,&nbsp;125);&quot;&gt;--&lt;/span&gt;&lt;/p&gt;<br>
<br>
&lt;p&gt;&lt;span&nbsp;style=&quot;font-size:&nbsp;11pt;&nbsp;color:&nbsp;rgb(31,&nbsp;73,&nbsp;125);&quot;&gt;Chris&nbsp;Mullins&lt;/span&gt;&lt;/p&gt;<br>
<br>
&lt;p&gt;&lt;span&nbsp;style=&quot;font-size:&nbsp;11pt;&nbsp;color:&nbsp;rgb(31,&nbsp;73,&nbsp;125);&quot;&gt;&amp;nbsp;&lt;/span&gt;&lt;/p&gt;<br>
<br>
&lt;div&nbsp;style=&quot;border-style:&nbsp;solid&nbsp;none&nbsp;none;&nbsp;border-color:&nbsp;rgb(181,&nbsp;196,&nbsp;223)&nbsp;-moz-use-text-color&nbsp;-moz-use-text-color;&nbsp;border-width:&nbsp;1pt&nbsp;medium&nbsp;medium;&nbsp;padding:&nbsp;3pt&nbsp;0in&nbsp;0in;&quot;&gt;<br>
<br>
&lt;p&gt;&lt;b&gt;&lt;span&nbsp;style=&quot;font-size:&nbsp;10pt;&quot;&gt;From:&lt;/span&gt;&lt;/b&gt;&lt;span&nbsp;style=&quot;font-size:&nbsp;10pt;&quot;&gt;<br>
&lt;a&nbsp;href=&quot;mailto:jdev-bounces@jabber.org&quot;&nbsp;target=&quot;_blank&quot;&nbsp;onclick=&quot;return&nbsp;top.js.OpenExtLink(window,event,this)&quot;&gt;jdev-bounces@jabber.org&lt;/a&gt;&nbsp;[mailto:&lt;a&nbsp;href=&quot;mailto:jdev-bounces@jabber.org&quot;&nbsp;target=&quot;_blank&quot;&nbsp;onclick=&quot;return&nbsp;top.js.OpenExtLink(window,event,this)&quot;&gt;<br>
jdev-bounces@jabber.org&lt;/a&gt;]&nbsp;&lt;b&gt;On&nbsp;Behalf&nbsp;Of&nbsp;&lt;/b&gt;Dieter<br>
Lunn&lt;br&gt;<br>
&lt;b&gt;Sent:&lt;/b&gt;&nbsp;Tuesday,&nbsp;July&nbsp;03,&nbsp;2007&nbsp;8:30&nbsp;AM&lt;br&gt;<br>
&lt;b&gt;To:&lt;/b&gt;&nbsp;Jabber&nbsp;software&nbsp;development&nbsp;list&lt;br&gt;<br>
&lt;b&gt;Subject:&lt;/b&gt;&nbsp;[jdev]&nbsp;C#&nbsp;SslStream&nbsp;Issues&lt;/span&gt;&lt;/p&gt;<br>
<br>
&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;class=&quot;e&quot;&nbsp;id=&quot;q_1138dba425096ae3_1&quot;&gt;<br>
<br>
&lt;p&gt;&amp;nbsp;&lt;/p&gt;<br>
<br>
&lt;p&gt;Hi&lt;br&gt;<br>
I&nbsp;am&nbsp;writing&nbsp;a&nbsp;library&nbsp;in&nbsp;C#&nbsp;and&nbsp;I&nbsp;am&nbsp;having&nbsp;issues&nbsp;changing&nbsp;to&nbsp;a&nbsp;secure<br>
stream.&amp;nbsp;&nbsp;When&nbsp;I&nbsp;start&nbsp;the&nbsp;authenticate&nbsp;as&nbsp;client&nbsp;and&nbsp;it&nbsp;receives&nbsp;the&nbsp;data<br>
and&nbsp;runs&nbsp;it&nbsp;through&nbsp;the&nbsp;xml&nbsp;parser&nbsp;and&nbsp;I&nbsp;get&nbsp;an&nbsp;error.&amp;nbsp;&nbsp;The&nbsp;socket&nbsp;code<br>
can&nbsp;be&nbsp;found&nbsp;here:&nbsp;&lt;a&nbsp;href=&quot;http://xmppnet.googlecode.com/svn/trunk/xmpp/net/AsyncSocket.cs&quot;&nbsp;target=&quot;_blank&quot;&nbsp;onclick=&quot;return&nbsp;top.js.OpenExtLink(window,event,this)&quot;&gt;http://xmppnet.googlecode.com/svn/trunk/xmpp/net/AsyncSocket.cs<br>
&lt;/a&gt;&lt;br&nbsp;clear=&quot;all&quot;&gt;<br>
&lt;br&gt;<br>
--&nbsp;&lt;br&gt;<br>
Dieter&nbsp;Lunn&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;http://www.coder2000.ca&quot;&nbsp;target=&quot;_blank&quot;&nbsp;onclick=&quot;return&nbsp;top.js.OpenExtLink(window,event,this)&quot;&gt;http://www.coder2000.ca&nbsp;&lt;/a&gt;&lt;/p&gt;<br>
<br>
&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;<br>
<br>
&lt;/div&gt;<br>
<br>
<br>
&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;&lt;br&nbsp;clear=&quot;all&quot;&gt;&lt;br&gt;--&nbsp;&lt;br&gt;Dieter&nbsp;Lunn&lt;br&gt;&lt;a&nbsp;href=&quot;http://www.coder2000.ca&quot;&gt;http://www.coder2000.ca&lt;/a&gt;<br>

</tt>
