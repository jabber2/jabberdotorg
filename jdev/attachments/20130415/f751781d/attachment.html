<tt>
&lt;p&nbsp;dir=&quot;ltr&quot;&gt;&lt;br&gt;<br>
On&nbsp;15&nbsp;Apr&nbsp;2013&nbsp;12:17,&nbsp;&quot;Maninder&nbsp;Obhrai&quot;&nbsp;&lt;&lt;a&nbsp;href=&quot;mailto:maninder.obhrai@gamesys.co.uk&quot;&gt;maninder.obhrai@gamesys.co.uk&lt;/a&gt;&gt;&nbsp;wrote:&lt;br&gt;<br>
&gt;&nbsp;We&#39;d&nbsp;like&nbsp;to&nbsp;be&nbsp;able&nbsp;to&nbsp;tell&nbsp;whether&nbsp;a&nbsp;chat&nbsp;user&nbsp;in&nbsp;a&nbsp;room&nbsp;is&nbsp;on&nbsp;a&nbsp;mobile&nbsp;device&nbsp;or&nbsp;a&nbsp;desktop&nbsp;device&nbsp;and&nbsp;we&#39;re&nbsp;trying&nbsp;to&nbsp;work&nbsp;out&nbsp;the&nbsp;best&nbsp;way&nbsp;to&nbsp;do&nbsp;this.&nbsp;Our&nbsp;current&nbsp;plan&nbsp;involves&nbsp;making&nbsp;the&nbsp;client&nbsp;set&nbsp;the&nbsp;device&nbsp;type&nbsp;(mobile/desktop)&nbsp;as&nbsp;part&nbsp;of&nbsp;the&nbsp;resource,&nbsp;and&nbsp;then&nbsp;exposing&nbsp;full&nbsp;JIDs&nbsp;to&nbsp;all&nbsp;users.&nbsp;The&nbsp;client&nbsp;we&#39;ve&nbsp;written&nbsp;can&nbsp;then&nbsp;parse&nbsp;this&nbsp;and&nbsp;show&nbsp;an&nbsp;icon&nbsp;next&nbsp;to&nbsp;chat&nbsp;messages.&nbsp;We&nbsp;looked&nbsp;at&nbsp;PEP&nbsp;and&nbsp;it&nbsp;seems&nbsp;a&nbsp;little&nbsp;over&nbsp;the&nbsp;top,&nbsp;and&nbsp;we&nbsp;didn&#39;t&nbsp;want&nbsp;to&nbsp;hack&nbsp;stuff&nbsp;into&nbsp;the&nbsp;presence&nbsp;status.&lt;/p&gt;<br>
<br>
&lt;p&nbsp;dir=&quot;ltr&quot;&gt;As&nbsp;Kev&nbsp;says,&nbsp;a&nbsp;disco#info&nbsp;request&nbsp;will&nbsp;give&nbsp;you&nbsp;the&nbsp;device&nbsp;type.&lt;/p&gt;<br>
&lt;p&nbsp;dir=&quot;ltr&quot;&gt;PEP&nbsp;won&#39;t&nbsp;work&nbsp;very&nbsp;smoothly&nbsp;because&nbsp;it&nbsp;works&nbsp;on&nbsp;a&nbsp;user-level,&nbsp;so&nbsp;you&#39;d&nbsp;have&nbsp;to&nbsp;stick&nbsp;a&nbsp;per-resource&nbsp;level&nbsp;over&nbsp;the&nbsp;top,&nbsp;somehow.&lt;/p&gt;<br>
&lt;p&nbsp;dir=&quot;ltr&quot;&gt;Hacking&nbsp;stuff&nbsp;into&nbsp;the&nbsp;presence&nbsp;stanza&nbsp;*will*&nbsp;work,&nbsp;and&nbsp;would&nbsp;be&nbsp;reasonable&nbsp;if&nbsp;it&nbsp;weren&#39;t&nbsp;for&nbsp;disco#info&nbsp;already&nbsp;giving&nbsp;you&nbsp;that&nbsp;information.&nbsp;As&nbsp;it&nbsp;is,&nbsp;XEP-0115&nbsp;will&nbsp;allow&nbsp;you&nbsp;to&nbsp;hash&nbsp;the&nbsp;device&nbsp;type&nbsp;into&nbsp;the&nbsp;presence&nbsp;stanza,&nbsp;and&nbsp;you&nbsp;can&nbsp;hardcode&nbsp;those&nbsp;hashes&nbsp;(ie,&nbsp;pre-fill&nbsp;the&nbsp;cache)&nbsp;to&nbsp;avoid&nbsp;any&nbsp;lookup&nbsp;at&nbsp;all.&lt;/p&gt;<br>
<br>
&lt;p&nbsp;dir=&quot;ltr&quot;&gt;However,&nbsp;if&nbsp;you&nbsp;really&nbsp;want&nbsp;this&nbsp;to&nbsp;be&nbsp;per-message,&nbsp;and&nbsp;not&nbsp;per-occupant,&nbsp;you&#39;re&nbsp;going&nbsp;to&nbsp;need&nbsp;to&nbsp;put&nbsp;the&nbsp;information&nbsp;(probably&nbsp;a&nbsp;XEP-0115&nbsp;caps&nbsp;element)&nbsp;into&nbsp;the&nbsp;message&nbsp;stanza.&nbsp;Whether&nbsp;or&nbsp;not&nbsp;this&nbsp;makes&nbsp;sense&nbsp;really&nbsp;depends&nbsp;on&nbsp;whether&nbsp;you&nbsp;have&nbsp;nick-sharing&nbsp;going&nbsp;on&nbsp;or&nbsp;not,&nbsp;and&nbsp;whether&nbsp;you&nbsp;want&nbsp;to&nbsp;spend&nbsp;the&nbsp;extra&nbsp;bandwidth.&lt;/p&gt;<br>
<br>
&lt;p&nbsp;dir=&quot;ltr&quot;&gt;Dave.&lt;/p&gt;<br>

</tt>
