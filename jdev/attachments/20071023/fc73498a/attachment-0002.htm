<tt>
I&amp;#39;m&nbsp;working&nbsp;on&nbsp;the&nbsp;DIGEST-MD5&nbsp;SASL&nbsp;authentication&nbsp;and&nbsp;feel&nbsp;like&nbsp;I&amp;#39;m&nbsp;doing&nbsp;it&nbsp;perfectly,&nbsp;but&nbsp;my&nbsp;server&nbsp;is&nbsp;telling&nbsp;me&nbsp;I&amp;#39;ve&nbsp;got&nbsp;an&nbsp;incorrect&nbsp;auth&nbsp;for&nbsp;the&nbsp;right&nbsp;username&nbsp;and&nbsp;password.&nbsp;This&nbsp;is&nbsp;in&nbsp;Flash&amp;#39;s&nbsp;ActionScript.&nbsp;Can&nbsp;you&nbsp;spot&nbsp;anything&nbsp;obvious&nbsp;I&amp;#39;m&nbsp;doing&nbsp;wrong?<br>
&lt;div&gt;&lt;br&nbsp;class=&quot;webkit-block-placeholder&quot;&gt;&lt;/div&gt;&lt;div&gt;I&nbsp;really&nbsp;appreciate&nbsp;it.&nbsp;Thanks!&lt;/div&gt;&lt;div&gt;&lt;br&nbsp;class=&quot;webkit-block-placeholder&quot;&gt;&lt;/div&gt;&lt;div&gt;Jacob&nbsp;Wright&lt;br&gt;&lt;div&gt;&lt;br&nbsp;class=&quot;webkit-block-placeholder&quot;&gt;&lt;/div&gt;&lt;div&gt;&lt;p&nbsp;style=&quot;margin:&nbsp;0.0px&nbsp;0.0px&nbsp;0.0px&nbsp;0.0px;&nbsp;font:&nbsp;11.0px&nbsp;Monaco&quot;&gt;<br>
&lt;p&nbsp;style=&quot;margin:&nbsp;0.0px&nbsp;0.0px&nbsp;0.0px&nbsp;0.0px;&nbsp;font:&nbsp;11.0px&nbsp;Monaco&quot;&gt;base64decoder.decode(packet.toString());&lt;/p&gt;<br>
&lt;p&nbsp;style=&quot;margin:&nbsp;0.0px&nbsp;0.0px&nbsp;0.0px&nbsp;0.0px;&nbsp;font:&nbsp;11.0px&nbsp;Monaco&quot;&gt;bytes&nbsp;=&amp;nbsp;base64decoder.flush();&lt;/p&gt;<br>
&lt;p&nbsp;style=&quot;margin:&nbsp;0.0px&nbsp;0.0px&nbsp;0.0px&nbsp;0.0px;&nbsp;font:&nbsp;11.0px&nbsp;Monaco&quot;&gt;&lt;span&nbsp;style=&quot;color:&nbsp;#6699cc&quot;&gt;var&lt;/span&gt;&nbsp;dataStr:String&nbsp;=&nbsp;bytes.readUTFBytes(bytes.bytesAvailable);&lt;/p&gt;<br>
&lt;p&nbsp;style=&quot;margin:&nbsp;0.0px&nbsp;0.0px&nbsp;0.0px&nbsp;0.0px;&nbsp;font:&nbsp;11.0px&nbsp;Monaco;&nbsp;color:&nbsp;#009900&quot;&gt;//&nbsp;transcode&nbsp;the&nbsp;string&nbsp;into&nbsp;an&nbsp;object&lt;/p&gt;<br>
&lt;p&nbsp;style=&quot;margin:&nbsp;0.0px&nbsp;0.0px&nbsp;0.0px&nbsp;0.0px;&nbsp;font:&nbsp;11.0px&nbsp;Monaco&quot;&gt;&lt;span&nbsp;style=&quot;color:&nbsp;#6699cc&quot;&gt;var&lt;/span&gt;&nbsp;data:Object&nbsp;=&nbsp;stringToObject(dataStr);&lt;/p&gt;<br>
&lt;p&nbsp;style=&quot;margin:&nbsp;0.0px&nbsp;0.0px&nbsp;0.0px&nbsp;0.0px;&nbsp;font:&nbsp;11.0px&nbsp;Monaco;&nbsp;min-height:&nbsp;15.0px&quot;&gt;&lt;br&gt;&lt;/p&gt;<br>
&lt;p&nbsp;style=&quot;margin:&nbsp;0.0px&nbsp;0.0px&nbsp;0.0px&nbsp;0.0px;&nbsp;font:&nbsp;11.0px&nbsp;Monaco;&nbsp;color:&nbsp;#009900&quot;&gt;//&nbsp;set&nbsp;up&nbsp;the&nbsp;return&nbsp;object&nbsp;which&nbsp;will&nbsp;be&nbsp;transcoded&nbsp;into&nbsp;a&nbsp;string&nbsp;later&lt;/p&gt;<br>
&lt;p&nbsp;style=&quot;margin:&nbsp;0.0px&nbsp;0.0px&nbsp;0.0px&nbsp;0.0px;&nbsp;font:&nbsp;11.0px&nbsp;Monaco&quot;&gt;&lt;span&nbsp;style=&quot;color:&nbsp;#6699cc&quot;&gt;var&lt;/span&gt;&nbsp;obj:Object&nbsp;=&nbsp;{};&lt;/p&gt;<br>
&lt;p&nbsp;style=&quot;margin:&nbsp;0.0px&nbsp;0.0px&nbsp;0.0px&nbsp;0.0px;&nbsp;font:&nbsp;11.0px&nbsp;Monaco;&nbsp;min-height:&nbsp;15.0px&quot;&gt;&lt;br&gt;&lt;/p&gt;<br>
&lt;p&nbsp;style=&quot;margin:&nbsp;0.0px&nbsp;0.0px&nbsp;0.0px&nbsp;0.0px;&nbsp;font:&nbsp;11.0px&nbsp;Monaco&quot;&gt;obj.username&nbsp;=&nbsp;username;&lt;/p&gt;<br>
&lt;p&nbsp;style=&quot;margin:&nbsp;0.0px&nbsp;0.0px&nbsp;0.0px&nbsp;0.0px;&nbsp;font:&nbsp;11.0px&nbsp;Monaco&quot;&gt;obj.realm&nbsp;=&nbsp;data.realm;&lt;/p&gt;<br>
&lt;p&nbsp;style=&quot;margin:&nbsp;0.0px&nbsp;0.0px&nbsp;0.0px&nbsp;0.0px;&nbsp;font:&nbsp;11.0px&nbsp;Monaco&quot;&gt;obj.nonce&nbsp;=&nbsp;data.nonce;&lt;/p&gt;<br>
&lt;p&nbsp;style=&quot;margin:&nbsp;0.0px&nbsp;0.0px&nbsp;0.0px&nbsp;0.0px;&nbsp;font:&nbsp;11.0px&nbsp;Monaco&quot;&gt;obj.charset&nbsp;=&nbsp;&lt;span&nbsp;style=&quot;color:&nbsp;#990000&quot;&gt;&amp;quot;utf-8&amp;quot;&lt;/span&gt;;&lt;/p&gt;<br>
&lt;p&nbsp;style=&quot;margin:&nbsp;0.0px&nbsp;0.0px&nbsp;0.0px&nbsp;0.0px;&nbsp;font:&nbsp;11.0px&nbsp;Monaco&quot;&gt;obj[&lt;span&nbsp;style=&quot;color:&nbsp;#990000&quot;&gt;&amp;quot;digest-uri&amp;quot;&lt;/span&gt;]&nbsp;=&nbsp;&lt;span&nbsp;style=&quot;color:&nbsp;#990000&quot;&gt;&amp;quot;xmpp/&amp;quot;&lt;/span&gt;&nbsp;+&nbsp;(conn.domain&nbsp;||&nbsp;conn.host);&lt;/p&gt;<br>
&lt;p&nbsp;style=&quot;margin:&nbsp;0.0px&nbsp;0.0px&nbsp;0.0px&nbsp;0.0px;&nbsp;font:&nbsp;11.0px&nbsp;Monaco&quot;&gt;&lt;span&nbsp;style=&quot;color:&nbsp;#0033ff&quot;&gt;if&lt;/span&gt;&nbsp;(data.algorithm)&lt;/p&gt;<br>
&lt;p&nbsp;style=&quot;margin:&nbsp;0.0px&nbsp;0.0px&nbsp;0.0px&nbsp;0.0px;&nbsp;font:&nbsp;11.0px&nbsp;Monaco&quot;&gt;&lt;span&nbsp;class=&quot;Apple-tab-span&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&lt;/span&gt;obj.algorithm&nbsp;=&nbsp;data.algorithm;&lt;/p&gt;<br>
&lt;p&nbsp;style=&quot;margin:&nbsp;0.0px&nbsp;0.0px&nbsp;0.0px&nbsp;0.0px;&nbsp;font:&nbsp;11.0px&nbsp;Monaco&quot;&gt;&lt;a&nbsp;href=&quot;http://obj.nc&quot;&gt;obj.nc&lt;/a&gt;&nbsp;=&nbsp;&lt;span&nbsp;style=&quot;color:&nbsp;#990000&quot;&gt;&amp;quot;00000001&amp;quot;&lt;/span&gt;;&lt;/p&gt;<br>
&lt;p&nbsp;style=&quot;margin:&nbsp;0.0px&nbsp;0.0px&nbsp;0.0px&nbsp;0.0px;&nbsp;font:&nbsp;11.0px&nbsp;Monaco&quot;&gt;&lt;span&nbsp;style=&quot;color:&nbsp;#0033ff&quot;&gt;if&lt;/span&gt;&nbsp;(data.qop)&lt;/p&gt;<br>
&lt;p&nbsp;style=&quot;margin:&nbsp;0.0px&nbsp;0.0px&nbsp;0.0px&nbsp;0.0px;&nbsp;font:&nbsp;11.0px&nbsp;Monaco&quot;&gt;&lt;span&nbsp;class=&quot;Apple-tab-span&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&lt;/span&gt;obj.qop&nbsp;=&nbsp;&lt;span&nbsp;style=&quot;color:&nbsp;#990000&quot;&gt;&amp;quot;auth&amp;quot;&lt;/span&gt;;&lt;/p&gt;<br>
&lt;p&nbsp;style=&quot;margin:&nbsp;0.0px&nbsp;0.0px&nbsp;0.0px&nbsp;0.0px;&nbsp;font:&nbsp;11.0px&nbsp;Monaco&quot;&gt;obj.cnonce&nbsp;=&nbsp;conn.generateId();&lt;/p&gt;<br>
&lt;p&nbsp;style=&quot;margin:&nbsp;0.0px&nbsp;0.0px&nbsp;0.0px&nbsp;0.0px;&nbsp;font:&nbsp;11.0px&nbsp;Monaco&quot;&gt;&lt;span&nbsp;style=&quot;color:&nbsp;#6699cc&quot;&gt;var&lt;/span&gt;&nbsp;a1:String,&nbsp;a2:String;&lt;/p&gt;<br>
&lt;p&nbsp;style=&quot;margin:&nbsp;0.0px&nbsp;0.0px&nbsp;0.0px&nbsp;0.0px;&nbsp;font:&nbsp;11.0px&nbsp;Monaco;&nbsp;min-height:&nbsp;15.0px&quot;&gt;&lt;br&gt;&lt;/p&gt;<br>
&lt;p&nbsp;style=&quot;margin:&nbsp;0.0px&nbsp;0.0px&nbsp;0.0px&nbsp;0.0px;&nbsp;font:&nbsp;11.0px&nbsp;Monaco&quot;&gt;a1&nbsp;=&nbsp;MD5.hash(obj.username&nbsp;+&nbsp;&lt;span&nbsp;style=&quot;color:&nbsp;#990000&quot;&gt;&amp;quot;:&amp;quot;&lt;/span&gt;&nbsp;+&nbsp;obj.realm&nbsp;+&nbsp;&lt;span&nbsp;style=&quot;color:&nbsp;#990000&quot;&gt;&amp;quot;:&amp;quot;&lt;/span&gt;&nbsp;+&nbsp;password)&nbsp;+&nbsp;<br>
&lt;span&nbsp;style=&quot;color:&nbsp;#990000&quot;&gt;&amp;quot;:&amp;quot;&lt;/span&gt;&nbsp;+&nbsp;obj.nonce&nbsp;+&nbsp;&lt;span&nbsp;style=&quot;color:&nbsp;#990000&quot;&gt;&amp;quot;:&amp;quot;&lt;/span&gt;&nbsp;+&nbsp;obj.cnonce;&lt;/p&gt;<br>
&lt;p&nbsp;style=&quot;margin:&nbsp;0.0px&nbsp;0.0px&nbsp;0.0px&nbsp;0.0px;&nbsp;font:&nbsp;11.0px&nbsp;Monaco;&nbsp;color:&nbsp;#990000&quot;&gt;&lt;span&nbsp;style=&quot;color:&nbsp;#000000&quot;&gt;a2&nbsp;=&nbsp;&lt;/span&gt;&amp;quot;AUTHENTICATE:&amp;quot;&lt;span&nbsp;style=&quot;color:&nbsp;#000000&quot;&gt;&nbsp;+&nbsp;obj[&lt;/span&gt;&amp;quot;digest-uri&amp;quot;&lt;span&nbsp;style=&quot;color:&nbsp;#000000&quot;&gt;<br>
];&lt;/span&gt;&lt;/p&gt;<br>
&lt;p&nbsp;style=&quot;margin:&nbsp;0.0px&nbsp;0.0px&nbsp;0.0px&nbsp;0.0px;&nbsp;font:&nbsp;11.0px&nbsp;Monaco;&nbsp;min-height:&nbsp;15.0px&quot;&gt;&lt;br&gt;&lt;/p&gt;<br>
&lt;p&nbsp;style=&quot;margin:&nbsp;0.0px&nbsp;0.0px&nbsp;0.0px&nbsp;0.0px;&nbsp;font:&nbsp;11.0px&nbsp;Monaco&quot;&gt;&lt;span&nbsp;style=&quot;color:&nbsp;#6699cc&quot;&gt;var&lt;/span&gt;&nbsp;response:String;&lt;/p&gt;<br>
&lt;p&nbsp;style=&quot;margin:&nbsp;0.0px&nbsp;0.0px&nbsp;0.0px&nbsp;0.0px;&nbsp;font:&nbsp;11.0px&nbsp;Monaco;&nbsp;min-height:&nbsp;15.0px&quot;&gt;&lt;br&gt;&lt;/p&gt;<br>
&lt;p&nbsp;style=&quot;margin:&nbsp;0.0px&nbsp;0.0px&nbsp;0.0px&nbsp;0.0px;&nbsp;font:&nbsp;11.0px&nbsp;Monaco&quot;&gt;&lt;span&nbsp;style=&quot;color:&nbsp;#0033ff&quot;&gt;if&lt;/span&gt;&nbsp;(obj.qop)&lt;/p&gt;<br>
&lt;p&nbsp;style=&quot;margin:&nbsp;0.0px&nbsp;0.0px&nbsp;0.0px&nbsp;0.0px;&nbsp;font:&nbsp;11.0px&nbsp;Monaco&quot;&gt;&lt;span&nbsp;class=&quot;Apple-tab-span&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&lt;/span&gt;response&nbsp;=&nbsp;MD5.hash(MD5.hash(a1)&nbsp;+&nbsp;&lt;span&nbsp;style=&quot;color:&nbsp;#990000&quot;&gt;&amp;quot;:&amp;quot;&lt;/span&gt;&nbsp;+&nbsp;obj.nonce<br>
&nbsp;+&nbsp;&lt;span&nbsp;style=&quot;color:&nbsp;#990000&quot;&gt;&amp;quot;:&amp;quot;&lt;/span&gt;&nbsp;+&nbsp;&lt;a&nbsp;href=&quot;http://obj.nc&quot;&gt;obj.nc&lt;/a&gt;&nbsp;+&nbsp;&lt;span&nbsp;style=&quot;color:&nbsp;#990000&quot;&gt;&amp;quot;:&amp;quot;&lt;/span&gt;&nbsp;+&nbsp;obj.cnonce&nbsp;+&nbsp;&lt;span&nbsp;style=&quot;color:&nbsp;#990000&quot;&gt;&amp;quot;:&amp;quot;&lt;/span&gt;&nbsp;+&nbsp;obj.qop&nbsp;+&nbsp;&lt;span&nbsp;style=&quot;color:&nbsp;#990000&quot;&gt;<br>
&amp;quot;:&amp;quot;&lt;/span&gt;&nbsp;+&nbsp;MD5.hash(a2));&lt;/p&gt;<br>
&lt;p&nbsp;style=&quot;margin:&nbsp;0.0px&nbsp;0.0px&nbsp;0.0px&nbsp;0.0px;&nbsp;font:&nbsp;11.0px&nbsp;Monaco;&nbsp;color:&nbsp;#0033ff&quot;&gt;else&lt;/p&gt;<br>
&lt;p&nbsp;style=&quot;margin:&nbsp;0.0px&nbsp;0.0px&nbsp;0.0px&nbsp;0.0px;&nbsp;font:&nbsp;11.0px&nbsp;Monaco&quot;&gt;&lt;span&nbsp;class=&quot;Apple-tab-span&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&lt;/span&gt;response&nbsp;=&nbsp;MD5.hash(MD5.hash(a1)&nbsp;+&nbsp;&lt;span&nbsp;style=&quot;color:&nbsp;#990000&quot;&gt;&amp;quot;:&amp;quot;&lt;/span&gt;&nbsp;+&nbsp;obj.nonce<br>
&nbsp;+&nbsp;&lt;span&nbsp;style=&quot;color:&nbsp;#990000&quot;&gt;&amp;quot;:&amp;quot;&lt;/span&gt;&nbsp;+&nbsp;MD5.hash(a2));&lt;/p&gt;<br>
&lt;p&nbsp;style=&quot;margin:&nbsp;0.0px&nbsp;0.0px&nbsp;0.0px&nbsp;0.0px;&nbsp;font:&nbsp;11.0px&nbsp;Monaco;&nbsp;min-height:&nbsp;15.0px&quot;&gt;&lt;br&gt;&lt;/p&gt;<br>
&lt;p&nbsp;style=&quot;margin:&nbsp;0.0px&nbsp;0.0px&nbsp;0.0px&nbsp;0.0px;&nbsp;font:&nbsp;11.0px&nbsp;Monaco&quot;&gt;obj.response&nbsp;=&nbsp;response;&lt;/p&gt;<br>
&lt;p&nbsp;style=&quot;margin:&nbsp;0.0px&nbsp;0.0px&nbsp;0.0px&nbsp;0.0px;&nbsp;font:&nbsp;11.0px&nbsp;Monaco;&nbsp;min-height:&nbsp;15.0px&quot;&gt;&lt;br&gt;&lt;/p&gt;<br>
&lt;p&nbsp;style=&quot;margin:&nbsp;0.0px&nbsp;0.0px&nbsp;0.0px&nbsp;0.0px;&nbsp;font:&nbsp;11.0px&nbsp;Monaco&quot;&gt;&lt;span&nbsp;style=&quot;color:&nbsp;#6699cc&quot;&gt;var&lt;/span&gt;&nbsp;resultStr:String&nbsp;=&nbsp;objectToString(obj);&lt;/p&gt;<br>
&lt;p&nbsp;style=&quot;margin:&nbsp;0.0px&nbsp;0.0px&nbsp;0.0px&nbsp;0.0px;&nbsp;font:&nbsp;11.0px&nbsp;Monaco&quot;&gt;base64encoder.encode(resultStr);&lt;/p&gt;<br>
&lt;p&nbsp;style=&quot;margin:&nbsp;0.0px&nbsp;0.0px&nbsp;0.0px&nbsp;0.0px;&nbsp;font:&nbsp;11.0px&nbsp;Monaco&quot;&gt;resultStr&nbsp;=&amp;nbsp;base64encoder.flush();&lt;/p&gt;<br>
&lt;p&nbsp;style=&quot;margin:&nbsp;0.0px&nbsp;0.0px&nbsp;0.0px&nbsp;0.0px;&nbsp;font:&nbsp;11.0px&nbsp;Monaco;&nbsp;min-height:&nbsp;15.0px&quot;&gt;&lt;br&gt;&lt;/p&gt;<br>
&lt;p&nbsp;style=&quot;margin:&nbsp;0.0px&nbsp;0.0px&nbsp;0.0px&nbsp;0.0px;&nbsp;font:&nbsp;11.0px&nbsp;Monaco&quot;&gt;&lt;span&nbsp;style=&quot;color:&nbsp;#6699cc&quot;&gt;var&lt;/span&gt;&nbsp;result:XML&nbsp;=&nbsp;&amp;lt;response&nbsp;xmlns={saslNS}&amp;gt;{resultStr}&amp;lt;/response&amp;gt;;&lt;/p&gt;<br>
&lt;p&nbsp;style=&quot;margin:&nbsp;0.0px&nbsp;0.0px&nbsp;0.0px&nbsp;0.0px;&nbsp;font:&nbsp;11.0px&nbsp;Monaco;&nbsp;min-height:&nbsp;15.0px&quot;&gt;&lt;br&gt;&lt;/p&gt;<br>
&lt;p&nbsp;style=&quot;margin:&nbsp;0.0px&nbsp;0.0px&nbsp;0.0px&nbsp;0.0px;&nbsp;font:&nbsp;11.0px&nbsp;Monaco&quot;&gt;conn.send(result);&lt;/p&gt;<br>
&lt;/p&gt;<br>
&lt;/div&gt;&lt;/div&gt;<br>

</tt>
