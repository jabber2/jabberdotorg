<tt>
&lt;!DOCTYPE&nbsp;HTML&nbsp;PUBLIC&nbsp;&quot;-//W3C//DTD&nbsp;HTML&nbsp;4.0&nbsp;Transitional//EN&quot;&gt;<br>
&lt;HTML&gt;&lt;HEAD&gt;<br>
&lt;META&nbsp;HTTP-EQUIV=&quot;Content-Type&quot;&nbsp;CONTENT=&quot;text/html;&nbsp;charset=windows-1252&quot;&gt;<br>
&lt;TITLE&gt;&lt;/TITLE&gt;<br>
<br>
&lt;META&nbsp;content=&quot;MSHTML&nbsp;5.50.4134.600&quot;&nbsp;name=GENERATOR&gt;&lt;/HEAD&gt;<br>
&lt;BODY&gt;<br>
&lt;DIV&gt;&lt;SPAN&nbsp;class=666081921-12072001&gt;&lt;FONT&nbsp;face=Arial&nbsp;color=#0000ff&nbsp;<br>
size=2&gt;Actually,&nbsp;I&nbsp;was&nbsp;composing&nbsp;an&nbsp;email&nbsp;regarding&nbsp;truncation&nbsp;of&nbsp;offline&nbsp;<br>
messages,&nbsp;when&nbsp;I&nbsp;saw&nbsp;your&nbsp;email&nbsp;:-)&lt;/FONT&gt;&lt;/SPAN&gt;&lt;/DIV&gt;<br>
&lt;DIV&gt;&lt;SPAN&nbsp;class=666081921-12072001&gt;&lt;FONT&nbsp;face=Arial&nbsp;color=#0000ff&nbsp;<br>
size=2&gt;&lt;/FONT&gt;&lt;/SPAN&gt;&amp;nbsp;&lt;/DIV&gt;<br>
&lt;DIV&gt;&lt;SPAN&nbsp;class=666081921-12072001&gt;&lt;FONT&nbsp;face=Arial&nbsp;color=#0000ff&nbsp;size=2&gt;I&nbsp;am&nbsp;<br>
running&nbsp;jabber&nbsp;server&nbsp;1.4.1&nbsp;on&nbsp;Linux.&lt;/FONT&gt;&lt;/SPAN&gt;&lt;/DIV&gt;<br>
&lt;DIV&gt;&lt;SPAN&nbsp;class=666081921-12072001&gt;&lt;FONT&nbsp;face=Arial&nbsp;color=#0000ff&nbsp;<br>
size=2&gt;&lt;/FONT&gt;&lt;/SPAN&gt;&amp;nbsp;&lt;/DIV&gt;<br>
&lt;DIV&gt;&lt;SPAN&nbsp;class=666081921-12072001&gt;&lt;FONT&nbsp;face=Arial&nbsp;color=#0000ff&nbsp;size=2&gt;This&nbsp;<br>
problem&nbsp;only&nbsp;happens&nbsp;when&nbsp;the&nbsp;receiving&nbsp;user&nbsp;is&nbsp;offline,&nbsp;and&nbsp;is&nbsp;not&nbsp;just&nbsp;<br>
restricted&nbsp;to&nbsp;status&nbsp;elements.&amp;nbsp;&amp;nbsp;&nbsp;I&nbsp;noticed&nbsp;this&nbsp;problem&nbsp;during&nbsp;sending&nbsp;<br>
regular&nbsp;messages.&amp;nbsp;&amp;nbsp;&nbsp;Here's&nbsp;the&nbsp;problem's&nbsp;I&nbsp;<br>
observed:&lt;/FONT&gt;&lt;/SPAN&gt;&lt;/DIV&gt;<br>
&lt;DIV&gt;&lt;SPAN&nbsp;class=666081921-12072001&gt;&lt;FONT&nbsp;face=Arial&nbsp;color=#0000ff&nbsp;size=2&gt;1.&nbsp;<br>
Sending&nbsp;a&nbsp;message&nbsp;with&nbsp;&amp;lt;body&amp;gt;'message&amp;lt;/body&amp;gt;&amp;nbsp;&amp;nbsp;&nbsp;will&nbsp;end&nbsp;up&nbsp;<br>
with&nbsp;only&nbsp;&amp;lt;body&amp;gt;&amp;amp;apos;&amp;lt;/body&amp;gt;&nbsp;in&nbsp;the&nbsp;&amp;lt;username&amp;gt;.xml&nbsp;<br>
file&lt;/FONT&gt;&lt;/SPAN&gt;&lt;/DIV&gt;<br>
&lt;DIV&gt;&lt;SPAN&nbsp;class=666081921-12072001&gt;&lt;FONT&nbsp;face=Arial&nbsp;color=#0000ff&nbsp;size=2&gt;2.&nbsp;<br>
Sending&nbsp;a&nbsp;message&nbsp;with&nbsp;&amp;lt;body&amp;gt;&quot;message&amp;lt;/body&amp;gt;&amp;nbsp;&amp;nbsp;&nbsp;will&nbsp;end&nbsp;up&nbsp;<br>
with&nbsp;only&nbsp;&amp;lt;body&amp;gt;&amp;amp;quot;&amp;lt;/body&amp;gt;&nbsp;in&nbsp;the&nbsp;&amp;lt;username&amp;gt;.xml&nbsp;<br>
file&lt;/FONT&gt;&lt;/SPAN&gt;&lt;/DIV&gt;<br>
&lt;DIV&gt;&lt;SPAN&nbsp;class=666081921-12072001&gt;&lt;FONT&nbsp;face=Arial&nbsp;color=#0000ff&nbsp;size=2&gt;3.&nbsp;<br>
Sending&nbsp;a&nbsp;message&nbsp;with&nbsp;&amp;lt;body&amp;gt;part1&quot;part2&amp;lt;/body&amp;gt;&amp;nbsp;&amp;nbsp;&nbsp;will&nbsp;end&nbsp;<br>
up&nbsp;with&nbsp;only&nbsp;&amp;lt;body&amp;gt;part1&amp;lt;/body&amp;gt;&nbsp;in&nbsp;the&nbsp;&amp;lt;username&amp;gt;.xml&nbsp;<br>
file&lt;/FONT&gt;&lt;/SPAN&gt;&lt;/DIV&gt;<br>
&lt;DIV&gt;&lt;SPAN&nbsp;class=666081921-12072001&gt;&lt;FONT&nbsp;face=Arial&nbsp;color=#0000ff&nbsp;size=2&gt;4.&nbsp;<br>
Sending&nbsp;a&nbsp;message&nbsp;with&nbsp;&amp;lt;body&amp;gt;part1'part2&amp;lt;/body&amp;gt;&amp;nbsp;&amp;nbsp;&nbsp;will&nbsp;end&nbsp;<br>
up&nbsp;with&nbsp;only&nbsp;&amp;lt;body&amp;gt;part1&amp;lt;/body&amp;gt;&nbsp;in&nbsp;the&nbsp;&amp;lt;username&amp;gt;.xml&nbsp;<br>
file&lt;/FONT&gt;&lt;/SPAN&gt;&lt;/DIV&gt;<br>
&lt;DIV&gt;&lt;SPAN&nbsp;class=666081921-12072001&gt;&lt;FONT&nbsp;face=Arial&nbsp;color=#0000ff&nbsp;<br>
size=2&gt;&lt;/FONT&gt;&lt;/SPAN&gt;&amp;nbsp;&lt;/DIV&gt;<br>
&lt;DIV&gt;&lt;SPAN&nbsp;class=666081921-12072001&gt;&lt;FONT&nbsp;face=Arial&nbsp;color=#0000ff&nbsp;size=2&gt;Maybe&nbsp;<br>
it's&nbsp;a&nbsp;bug&nbsp;in&nbsp;xdb_file,&nbsp;since&nbsp;the&nbsp;messages&nbsp;are&nbsp;sent&nbsp;fine&nbsp;if&nbsp;both&nbsp;users&nbsp;are&nbsp;<br>
online.&lt;/FONT&gt;&lt;/SPAN&gt;&lt;/DIV&gt;<br>
&lt;DIV&gt;&lt;SPAN&nbsp;class=666081921-12072001&gt;&lt;FONT&nbsp;face=Arial&nbsp;color=#0000ff&nbsp;<br>
size=2&gt;&lt;/FONT&gt;&lt;/SPAN&gt;&amp;nbsp;&lt;/DIV&gt;<br>
&lt;DIV&gt;&lt;SPAN&nbsp;class=666081921-12072001&gt;&lt;FONT&nbsp;face=Arial&nbsp;color=#0000ff&nbsp;<br>
size=2&gt;Interestingly,&nbsp;this&nbsp;does&nbsp;not&nbsp;happen&nbsp;on&nbsp;the&nbsp;jabber.org&nbsp;<br>
server...&amp;nbsp;&amp;nbsp;&nbsp;Is&nbsp;jabber.org&nbsp;using&nbsp;xdb_file?&amp;nbsp;&amp;nbsp;&nbsp;or&nbsp;<br>
xdb_&amp;lt;something&nbsp;else&amp;gt;&lt;/FONT&gt;&lt;/SPAN&gt;&lt;/DIV&gt;<br>
&lt;DIV&gt;&lt;SPAN&nbsp;class=666081921-12072001&gt;&lt;FONT&nbsp;face=Arial&nbsp;color=#0000ff&nbsp;size=2&gt;Or&nbsp;has&nbsp;<br>
a&nbsp;fix&nbsp;been&nbsp;applied&nbsp;to&nbsp;jabber.org?&lt;/FONT&gt;&lt;/SPAN&gt;&lt;/DIV&gt;<br>
&lt;DIV&gt;&lt;SPAN&nbsp;class=666081921-12072001&gt;&lt;FONT&nbsp;face=Arial&nbsp;color=#0000ff&nbsp;<br>
size=2&gt;&lt;/FONT&gt;&lt;/SPAN&gt;&amp;nbsp;&lt;/DIV&gt;<br>
&lt;DIV&gt;&lt;SPAN&nbsp;class=666081921-12072001&gt;&lt;FONT&nbsp;face=Arial&nbsp;color=#0000ff&nbsp;<br>
size=2&gt;&lt;/FONT&gt;&lt;/SPAN&gt;&amp;nbsp;&lt;/DIV&gt;<br>
&lt;DIV&gt;&lt;SPAN&nbsp;class=666081921-12072001&gt;&lt;FONT&nbsp;face=Arial&nbsp;color=#0000ff&nbsp;size=2&gt;Thanks&nbsp;<br>
for&nbsp;any&nbsp;information,&lt;/FONT&gt;&lt;/SPAN&gt;&lt;/DIV&gt;<br>
&lt;DIV&gt;&lt;SPAN&nbsp;class=666081921-12072001&gt;&lt;FONT&nbsp;face=Arial&nbsp;color=#0000ff&nbsp;<br>
size=2&gt;&lt;/FONT&gt;&lt;/SPAN&gt;&amp;nbsp;&lt;/DIV&gt;<br>
&lt;DIV&gt;&lt;SPAN&nbsp;class=666081921-12072001&gt;&lt;FONT&nbsp;face=Arial&nbsp;color=#0000ff&nbsp;<br>
size=2&gt;-sek&lt;/FONT&gt;&lt;/SPAN&gt;&lt;/DIV&gt;<br>
&lt;DIV&gt;&lt;SPAN&nbsp;class=666081921-12072001&gt;&lt;/SPAN&gt;&lt;FONT&nbsp;face=Tahoma&gt;&lt;FONT&nbsp;face=Arial&nbsp;<br>
color=#0000ff&nbsp;size=2&gt;&lt;/FONT&gt;&lt;FONT&nbsp;face=Arial&nbsp;color=#0000ff&nbsp;size=2&gt;&lt;/FONT&gt;&lt;FONT&nbsp;<br>
face=Arial&nbsp;color=#0000ff&nbsp;size=2&gt;&lt;/FONT&gt;&lt;FONT&nbsp;face=Arial&nbsp;color=#0000ff&nbsp;<br>
size=2&gt;&lt;/FONT&gt;&lt;FONT&nbsp;face=Arial&nbsp;color=#0000ff&nbsp;size=2&gt;&lt;/FONT&gt;&lt;/FONT&gt;&amp;nbsp;&lt;/DIV&gt;<br>
&lt;DIV&gt;&lt;FONT&nbsp;face=Tahoma&gt;&lt;FONT&nbsp;face=Arial&nbsp;color=#0000ff&nbsp;size=2&gt;&lt;/FONT&gt;&amp;nbsp;&lt;/DIV&gt;<br>
&lt;DIV&gt;&lt;FONT&nbsp;face=Arial&nbsp;color=#0000ff&nbsp;size=2&gt;&lt;/FONT&gt;&lt;BR&gt;&lt;FONT&nbsp;size=2&gt;-----Original&nbsp;<br>
Message-----&lt;BR&gt;&lt;B&gt;From:&lt;/B&gt;&nbsp;Jens&nbsp;Alfke&nbsp;[mailto:jens@mac.com]&lt;BR&gt;&lt;B&gt;Sent:&lt;/B&gt;&nbsp;<br>
Thursday,&nbsp;July&nbsp;12,&nbsp;2001&nbsp;12:03&nbsp;PM&lt;BR&gt;&lt;B&gt;To:&lt;/B&gt;&nbsp;<br>
jdev@jabber.org&lt;BR&gt;&lt;B&gt;Subject:&lt;/B&gt;&nbsp;[JDEV]&nbsp;Bug:&nbsp;Status&nbsp;messages&nbsp;truncated&nbsp;before&nbsp;<br>
quote&nbsp;char&lt;BR&gt;&lt;BR&gt;&lt;/DIV&gt;&lt;/FONT&gt;&lt;/FONT&gt;<br>
&lt;BLOCKQUOTE&nbsp;dir=ltr&nbsp;style=&quot;MARGIN-RIGHT:&nbsp;0px&quot;&gt;<br>
&nbsp;&nbsp;&lt;P&gt;I&nbsp;have&nbsp;noticed&nbsp;that&nbsp;status&nbsp;messages&nbsp;(i.e.&nbsp;&amp;lt;status&amp;gt;&nbsp;elements&nbsp;in&nbsp;a&nbsp;<br>
&nbsp;&nbsp;&amp;lt;presence&amp;gt;&nbsp;element)&nbsp;containing&nbsp;a&nbsp;quote&nbsp;character&nbsp;are&nbsp;truncated&nbsp;before&nbsp;<br>
&nbsp;&nbsp;that&nbsp;character&nbsp;—&nbsp;but&nbsp;only&nbsp;when&nbsp;forwarded&nbsp;by&nbsp;the&nbsp;server&nbsp;upon&nbsp;client&nbsp;login,&nbsp;not&nbsp;<br>
&nbsp;&nbsp;when&nbsp;they're&nbsp;sent&nbsp;in&nbsp;real&nbsp;time&nbsp;to&nbsp;an&nbsp;already&nbsp;logged&nbsp;in&nbsp;client.&nbsp;&lt;/P&gt;&lt;BR&gt;<br>
&nbsp;&nbsp;&lt;P&gt;I've&nbsp;verified&nbsp;that&nbsp;my&nbsp;client&lt;I&gt;&nbsp;sends&lt;/I&gt;&nbsp;XML&nbsp;metachars&nbsp;properly&nbsp;to&nbsp;the&nbsp;<br>
&nbsp;&nbsp;server,&nbsp;and&nbsp;that&nbsp;the&nbsp;problem&nbsp;exists&nbsp;in&nbsp;the&nbsp;raw&nbsp;XML&nbsp;received&nbsp;by&nbsp;the&nbsp;client,&nbsp;not&nbsp;<br>
&nbsp;&nbsp;in&nbsp;my&nbsp;XML&nbsp;parsing.&nbsp;&lt;/P&gt;&lt;BR&gt;<br>
&nbsp;&nbsp;&lt;P&gt;This&nbsp;is&nbsp;with&nbsp;the&nbsp;1.4.1&nbsp;server&nbsp;running&nbsp;on&nbsp;Solaris.&nbsp;Anyone&nbsp;else&nbsp;seen&nbsp;this?&nbsp;<br>
&nbsp;&nbsp;&lt;/P&gt;&lt;BR&gt;<br>
&nbsp;&nbsp;&lt;P&gt;&lt;FONT&nbsp;face=&quot;Marker&nbsp;Felt&quot;&nbsp;color=#005101&nbsp;<br>
size=7&gt;—Jens&lt;/FONT&gt;&lt;/P&gt;&lt;/BLOCKQUOTE&gt;&lt;/BODY&gt;&lt;/HTML&gt;<br>

</tt>
