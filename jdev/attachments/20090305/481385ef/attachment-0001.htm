<tt>
&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;Thu,&nbsp;Mar&nbsp;5,&nbsp;2009&nbsp;at&nbsp;9:45&nbsp;PM,&nbsp;Martijn&nbsp;van&nbsp;Beers&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&amp;lt;&lt;a&nbsp;href=&quot;mailto:martijn@eekeek.org&quot;&gt;martijn@eekeek.org&lt;/a&gt;&amp;gt;&lt;/span&gt;&nbsp;wrote:&lt;br&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex;&quot;&gt;<br>
&lt;div&nbsp;class=&quot;im&quot;&gt;Hi,&nbsp;I&nbsp;thought&nbsp;I&amp;#39;d&nbsp;implement&nbsp;quickly&nbsp;implement&nbsp;compression&nbsp;since&nbsp;you&nbsp;so&lt;/div&gt;<br>
graciously&nbsp;offered&nbsp;a&nbsp;host&nbsp;to&nbsp;test&nbsp;against,&nbsp;but&nbsp;after&nbsp;succesfully&lt;br&gt;<br>
negotiating&nbsp;TLS&nbsp;and&nbsp;receiving&nbsp;the&nbsp;new&nbsp;stream&nbsp;features,&nbsp;when&nbsp;I&nbsp;try&nbsp;to&lt;br&gt;<br>
negotiate&nbsp;compression,&nbsp;I&nbsp;don&amp;#39;t&nbsp;get&nbsp;anything&nbsp;back&nbsp;after&nbsp;I&nbsp;send&nbsp;&amp;lt;compress&lt;br&gt;<br>
xmlns=&amp;quot;&lt;a&nbsp;href=&quot;http://jabber.org/features/compress&quot;&nbsp;target=&quot;_blank&quot;&gt;http://jabber.org/features/compress&lt;/a&gt;&amp;quot;&amp;gt;&amp;lt;method&amp;gt;zlib&amp;lt;/method&amp;gt;&amp;lt;/compress&amp;gt;&lt;br&gt;<br>
&lt;/blockquote&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I&nbsp;get&nbsp;this&nbsp;(on&nbsp;port&nbsp;5222&nbsp;and&nbsp;5269):&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;s2c: &amp;lt;?xml&nbsp;version=&amp;#39;1.0&amp;#39;?&amp;gt;&amp;lt;stream:stream&nbsp;xmlns:stream=&amp;#39;&lt;a&nbsp;href=&quot;http://etherx.jabber.org/streams&quot;&gt;http://etherx.jabber.org/streams&lt;/a&gt;&amp;#39;&nbsp;xmlns=&amp;#39;jabber:{client,server}&amp;#39;&nbsp;from=&amp;#39;&lt;a&nbsp;href=&quot;http://darkskies.za.net&quot;&gt;darkskies.za.net&lt;/a&gt;&amp;#39;&nbsp;version=&amp;#39;1.0&amp;#39;&nbsp;id=&amp;#39;stream_id&amp;#39;&amp;gt;&amp;lt;stream:features&nbsp;xmlns:stream=&amp;#39;&lt;a&nbsp;href=&quot;http://etherx.jabber.org/streams&quot;&gt;http://etherx.jabber.org/streams&lt;/a&gt;&amp;#39;&amp;gt;&amp;lt;starttls&nbsp;xmlns=&amp;#39;urn:ietf:params:xml:ns:xmpp-tls&amp;#39;/&amp;gt;&amp;lt;compression&nbsp;xmlns=&amp;#39;&lt;a&nbsp;href=&quot;http://jabber.org/features/compress&quot;&gt;http://jabber.org/features/compress&lt;/a&gt;&amp;#39;&amp;gt;&amp;lt;method&amp;gt;zlib&amp;lt;/method&amp;gt;&amp;lt;/compression&amp;gt;&amp;lt;auth&nbsp;xmlns=&amp;#39;&lt;a&nbsp;href=&quot;http://jabber.org/features/iq-auth&amp;#39;/&quot;&gt;http://jabber.org/features/iq-auth&amp;#39;/&lt;/a&gt;&amp;gt;&amp;lt;/stream:features&amp;gt;&lt;/div&gt;<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;c2s: &amp;lt;compress&nbsp;xmlns=&amp;#39;&lt;a&nbsp;href=&quot;http://jabber.org/protocol/compress&quot;&gt;http://jabber.org/protocol/compress&lt;/a&gt;&amp;#39;&amp;gt;&amp;lt;method&amp;gt;zlib&amp;lt;/method&amp;gt;&amp;lt;/compress&amp;gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;s2c: &amp;lt;compressed&nbsp;xmlns=&amp;#39;&lt;a&nbsp;href=&quot;http://jabber.org/protocol/compress&amp;#39;/&quot;&gt;http://jabber.org/protocol/compress&amp;#39;/&lt;/a&gt;&amp;gt;&lt;/div&gt;<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;and&nbsp;then&nbsp;the&nbsp;compressed&nbsp;data&nbsp;starts&lt;/div&gt;&lt;div&gt; &lt;/div&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex;&quot;&gt;XEP&nbsp;170&nbsp;*does*&nbsp;say&nbsp;you&nbsp;should&nbsp;do&nbsp;sasl&nbsp;before&nbsp;compression,&nbsp;but&nbsp;shouldn&amp;#39;t&lt;br&gt;<br>
<br>
there&nbsp;be&nbsp;at&nbsp;least&nbsp;an&nbsp;error&nbsp;message&nbsp;and/or&nbsp;disconnect&nbsp;if&nbsp;you&nbsp;try&nbsp;to&nbsp;do&nbsp;it&lt;br&gt;<br>
without&nbsp;sasl?&lt;br&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;correct,&nbsp;jabberd2&nbsp;doesn&amp;#39;t&nbsp;support&nbsp;sasl&nbsp;yet,&nbsp;and&nbsp;I&nbsp;couldn&amp;#39;t&nbsp;figure&nbsp;out&nbsp;how&nbsp;to&nbsp;do&nbsp;it&nbsp;after&nbsp;dialback.&nbsp; I&nbsp;think&nbsp;part&nbsp;of&nbsp;the&nbsp;problem&nbsp;is&nbsp;that&nbsp;there&amp;#39;s&nbsp;currently&nbsp;no&nbsp;re-announcement&nbsp;of&nbsp;features&nbsp;after&nbsp;dialback,&nbsp;so&nbsp;I&nbsp;couldn&amp;#39;t&nbsp;figure&nbsp;out&nbsp;how&nbsp;to&nbsp;plumb&nbsp;it&nbsp;in.&nbsp; Also&nbsp;having&nbsp;to&nbsp;do&nbsp;dialback&nbsp;to&nbsp;debug&nbsp;is&nbsp;a&nbsp;pain&nbsp;-&nbsp;I&nbsp;can&amp;#39;t&nbsp;figure&nbsp;out&nbsp;which&nbsp;order&nbsp;what&nbsp;stuff&nbsp;goes&nbsp;where,&nbsp;also&nbsp;jabberd2&nbsp;tries&nbsp;to&nbsp;initiate&nbsp;the&nbsp;connection&nbsp;in&nbsp;the&nbsp;opposite&nbsp;direction&nbsp;in&nbsp;anticipation&nbsp;of&nbsp;a&nbsp;returning&nbsp;stanza.&lt;br&nbsp;clear=&quot;all&quot;&gt;<br>
&lt;br&gt;--&nbsp;&lt;br&gt;-&nbsp;Norman&nbsp;Rasmussen&lt;br&gt;&nbsp;-&nbsp;Email:&nbsp;&lt;a&nbsp;href=&quot;mailto:norman@rasmussen.co.za&quot;&gt;norman@rasmussen.co.za&lt;/a&gt;&lt;br&gt;&nbsp;-&nbsp;Home&nbsp;page:&nbsp;&lt;a&nbsp;href=&quot;http://norman.rasmussen.co.za/&quot;&gt;http://norman.rasmussen.co.za/&lt;/a&gt;&lt;br&gt;<br>

</tt>
