<tt>
&lt;!DOCTYPE&nbsp;HTML&nbsp;PUBLIC&nbsp;&quot;-//W3C//DTD&nbsp;HTML&nbsp;4.0&nbsp;Transitional//EN&quot;&gt;<br>
&lt;HTML&gt;&lt;HEAD&gt;<br>
&lt;META&nbsp;HTTP-EQUIV=&quot;Content-Type&quot;&nbsp;CONTENT=&quot;text/html;&nbsp;charset=iso-8859-1&quot;&gt;<br>
&lt;TITLE&gt;&lt;/TITLE&gt;<br>
<br>
&lt;META&nbsp;content=&quot;MSHTML&nbsp;5.50.4134.600&quot;&nbsp;name=GENERATOR&gt;&lt;/HEAD&gt;<br>
&lt;BODY&gt;<br>
&lt;DIV&gt;&lt;SPAN&nbsp;class=024540401-29032001&gt;&lt;FONT&nbsp;face=Arial&nbsp;color=#0000ff&nbsp;size=2&gt;My&nbsp;<br>
group&nbsp;is&nbsp;about&nbsp;to&nbsp;embark&nbsp;on&nbsp;just&nbsp;this&nbsp;task&nbsp;(transferring&nbsp;files&nbsp;P2P).&amp;nbsp;&nbsp;I&nbsp;<br>
haven't&nbsp;recently&nbsp;looked&nbsp;through&nbsp;the&nbsp;existing&nbsp;specs&nbsp;but&nbsp;I&nbsp;don't&nbsp;remember&nbsp;there&nbsp;<br>
being&nbsp;anything&nbsp;specific&nbsp;besides&nbsp;the&nbsp;&quot;use&nbsp;OOB&nbsp;messages&quot;&nbsp;bit.&lt;/FONT&gt;&lt;/SPAN&gt;&lt;/DIV&gt;<br>
&lt;DIV&gt;&lt;SPAN&nbsp;class=024540401-29032001&gt;&lt;FONT&nbsp;face=Arial&nbsp;color=#0000ff&nbsp;<br>
size=2&gt;&lt;/FONT&gt;&lt;/SPAN&gt;&amp;nbsp;&lt;/DIV&gt;<br>
&lt;DIV&gt;&lt;SPAN&nbsp;class=024540401-29032001&gt;&lt;FONT&nbsp;face=Arial&nbsp;color=#0000ff&nbsp;size=2&gt;I&nbsp;<br>
agree&nbsp;that&nbsp;it&nbsp;would&nbsp;be&nbsp;useful&nbsp;to&nbsp;have&nbsp;a&nbsp;standard&nbsp;refusal/cancel&nbsp;message&nbsp;so&nbsp;the&nbsp;<br>
sender&nbsp;can&nbsp;be&nbsp;sure&nbsp;to&nbsp;kill&nbsp;the&nbsp;listen...&nbsp;what&nbsp;else&nbsp;is&nbsp;<br>
missing.&lt;/FONT&gt;&lt;/SPAN&gt;&lt;/DIV&gt;<br>
&lt;DIV&gt;&lt;SPAN&nbsp;class=024540401-29032001&gt;&lt;FONT&nbsp;face=Arial&nbsp;color=#0000ff&nbsp;<br>
size=2&gt;&lt;/FONT&gt;&lt;/SPAN&gt;&amp;nbsp;&lt;/DIV&gt;<br>
&lt;DIV&gt;&lt;SPAN&nbsp;class=024540401-29032001&gt;&lt;FONT&nbsp;face=Arial&nbsp;color=#0000ff&nbsp;size=2&gt;The&nbsp;<br>
whole&nbsp;firewall/NAT&nbsp;thing&nbsp;is&nbsp;a&nbsp;pain&nbsp;too,&nbsp;but&nbsp;normal&nbsp;HTTP&nbsp;requests&nbsp;get&nbsp;through&nbsp;all&nbsp;<br>
these&nbsp;so&nbsp;maybe&nbsp;making&nbsp;this&nbsp;tranfer&nbsp;look&nbsp;like&nbsp;one&nbsp;of&nbsp;those&nbsp;would&nbsp;do&nbsp;the&nbsp;trick...&nbsp;<br>
only&nbsp;catch&nbsp;is&nbsp;(like&nbsp;I&nbsp;believe&nbsp;you&nbsp;said)&nbsp;if&nbsp;both&nbsp;users&nbsp;are&nbsp;behind&nbsp;a&nbsp;firewall/NAT,&nbsp;<br>
then&nbsp;we&nbsp;get&nbsp;into&nbsp;talking&nbsp;about&nbsp;modifying&nbsp;the&nbsp;server&nbsp;which&nbsp;I&nbsp;want&nbsp;to&nbsp;avoid&nbsp;if&nbsp;<br>
possible.&amp;nbsp;&nbsp;Another&nbsp;possible&nbsp;solution&nbsp;is&nbsp;to&nbsp;have&nbsp;a&nbsp;&quot;temporary&nbsp;storage&quot;&nbsp;app&nbsp;<br>
on&nbsp;a&nbsp;server&nbsp;which&nbsp;would&nbsp;accept&nbsp;files&nbsp;with&nbsp;a&nbsp;randomly&nbsp;generated&nbsp;name&nbsp;which&nbsp;you&nbsp;<br>
pass&nbsp;to&nbsp;the&nbsp;receiver&nbsp;client&nbsp;so&nbsp;that&nbsp;they&nbsp;can&nbsp;make&nbsp;that&nbsp;request&nbsp;of&nbsp;the&nbsp;<br>
server.&amp;nbsp;&nbsp;Would&nbsp;work,&nbsp;but&nbsp;means&nbsp;more&nbsp;server&nbsp;load&nbsp;and&nbsp;more&nbsp;to&nbsp;<br>
manage.&lt;/FONT&gt;&lt;/SPAN&gt;&lt;/DIV&gt;<br>
&lt;DIV&gt;&lt;SPAN&nbsp;class=024540401-29032001&gt;&lt;FONT&nbsp;face=Arial&nbsp;color=#0000ff&nbsp;<br>
size=2&gt;&lt;/FONT&gt;&lt;/SPAN&gt;&amp;nbsp;&lt;/DIV&gt;<br>
&lt;DIV&gt;&lt;SPAN&nbsp;class=024540401-29032001&gt;&lt;FONT&nbsp;face=Arial&nbsp;color=#0000ff&nbsp;size=2&gt;I'm&nbsp;<br>
currently&nbsp;not&nbsp;concerned&nbsp;about&nbsp;security,&nbsp;but&nbsp;this&nbsp;may&nbsp;change.&lt;/FONT&gt;&lt;/SPAN&gt;&lt;/DIV&gt;<br>
&lt;DIV&gt;&lt;SPAN&nbsp;class=024540401-29032001&gt;&lt;FONT&nbsp;face=Arial&nbsp;color=#0000ff&nbsp;<br>
size=2&gt;&lt;/FONT&gt;&lt;/SPAN&gt;&amp;nbsp;&lt;/DIV&gt;<br>
&lt;DIV&gt;&lt;SPAN&nbsp;class=024540401-29032001&gt;&lt;FONT&nbsp;face=Arial&nbsp;color=#0000ff&nbsp;size=2&gt;I'm&nbsp;<br>
sure&nbsp;I&nbsp;will&nbsp;hitting&nbsp;on&nbsp;some&nbsp;needs&nbsp;and&nbsp;ideas&nbsp;soon&nbsp;enough,&nbsp;post&nbsp;more&nbsp;if&nbsp;you&nbsp;have&nbsp;<br>
any&nbsp;ideas&nbsp;and&nbsp;I&nbsp;will&nbsp;do&nbsp;the&nbsp;same.&lt;/FONT&gt;&lt;/SPAN&gt;&lt;/DIV&gt;<br>
&lt;DIV&gt;&lt;SPAN&nbsp;class=024540401-29032001&gt;&lt;FONT&nbsp;face=Arial&nbsp;color=#0000ff&nbsp;<br>
size=2&gt;&lt;/FONT&gt;&lt;/SPAN&gt;&amp;nbsp;&lt;/DIV&gt;<br>
&lt;DIV&gt;&lt;SPAN&nbsp;class=024540401-29032001&gt;&lt;FONT&nbsp;face=Arial&nbsp;color=#0000ff&nbsp;<br>
size=2&gt;Colin&lt;/FONT&gt;&lt;/SPAN&gt;&lt;/DIV&gt;<br>
&lt;BLOCKQUOTE&nbsp;dir=ltr&nbsp;<br>
style=&quot;PADDING-LEFT:&nbsp;5px;&nbsp;MARGIN-LEFT:&nbsp;5px;&nbsp;BORDER-LEFT:&nbsp;#0000ff&nbsp;2px&nbsp;solid;&nbsp;MARGIN-RIGHT:&nbsp;0px&quot;&gt;<br>
&nbsp;&nbsp;&lt;DIV&nbsp;class=OutlookMessageHeader&nbsp;dir=ltr&nbsp;align=left&gt;&lt;FONT&nbsp;face=Tahoma&nbsp;<br>
&nbsp;&nbsp;size=2&gt;-----Original&nbsp;Message-----&lt;BR&gt;&lt;B&gt;From:&lt;/B&gt;&nbsp;Jens&nbsp;Alfke&nbsp;<br>
&nbsp;&nbsp;[mailto:jens@mac.com]&lt;BR&gt;&lt;B&gt;Sent:&lt;/B&gt;&nbsp;Wednesday,&nbsp;March&nbsp;28,&nbsp;2001&nbsp;12:03&nbsp;<br>
&nbsp;&nbsp;PM&lt;BR&gt;&lt;B&gt;To:&lt;/B&gt;&nbsp;jdev@jabber.org&lt;BR&gt;&lt;B&gt;Subject:&lt;/B&gt;&nbsp;[JDEV]&nbsp;Q:&nbsp;oob&nbsp;and&nbsp;direct&nbsp;<br>
&nbsp;&nbsp;P2P&nbsp;communications&lt;BR&gt;&lt;BR&gt;&lt;/FONT&gt;&lt;/DIV&gt;<br>
&nbsp;&nbsp;&lt;P&gt;(I&nbsp;brought&nbsp;this&nbsp;up&nbsp;within&nbsp;an&nbsp;earlier&nbsp;message&nbsp;but&nbsp;I&nbsp;think&nbsp;it's&nbsp;worth&nbsp;raising&nbsp;<br>
&nbsp;&nbsp;to&nbsp;a&nbsp;separate&nbsp;thread,&nbsp;esp.&nbsp;since&nbsp;I&nbsp;got&nbsp;no&nbsp;answers&nbsp;/&nbsp;comments.)&nbsp;&lt;/P&gt;&lt;BR&gt;<br>
&nbsp;&nbsp;&lt;P&gt;The&nbsp;'oob'&nbsp;namespace&nbsp;seems&nbsp;to&nbsp;be&nbsp;Jabber's&nbsp;current&nbsp;answer&nbsp;for&nbsp;direct&nbsp;<br>
&nbsp;&nbsp;peer-to-peer&nbsp;communications,&nbsp;particularly&nbsp;file&nbsp;transfer.&nbsp;However,&nbsp;the&nbsp;<br>
&nbsp;&nbsp;documentation&nbsp;I've&nbsp;seen&nbsp;is&nbsp;really&nbsp;vague&nbsp;and&nbsp;leaves&nbsp;me&nbsp;with&nbsp;worries&nbsp;about&nbsp;its&nbsp;<br>
&nbsp;&nbsp;reliability&nbsp;and&nbsp;security.&nbsp;Let&nbsp;me&nbsp;list&nbsp;the&nbsp;problems&nbsp;I&nbsp;see,&nbsp;together&nbsp;with&nbsp;some&nbsp;<br>
&nbsp;&nbsp;possible&nbsp;solutions.&nbsp;&lt;/P&gt;&lt;BR&gt;<br>
&nbsp;&nbsp;&lt;P&gt;Also,&nbsp;have&nbsp;any&nbsp;clients&nbsp;implemented&nbsp;file&nbsp;transfer&nbsp;or&nbsp;other&nbsp;oob&nbsp;<br>
&nbsp;&nbsp;communications&nbsp;yet?&nbsp;&lt;/P&gt;&lt;BR&gt;<br>
&nbsp;&nbsp;&lt;P&gt;As&nbsp;I&nbsp;understand&nbsp;it&nbsp;the&nbsp;flow&nbsp;of&nbsp;control&nbsp;looks&nbsp;like&nbsp;this:&nbsp;&lt;/P&gt;<br>
&nbsp;&nbsp;&lt;P&gt;*&nbsp;Sender&nbsp;opens&nbsp;a&nbsp;TCP&nbsp;port&nbsp;on&nbsp;its&nbsp;host&nbsp;and&nbsp;listens&nbsp;for&nbsp;HTTP&nbsp;connections&nbsp;on&nbsp;<br>
&nbsp;&nbsp;it.&nbsp;&lt;/P&gt;<br>
&nbsp;&nbsp;&lt;P&gt;*&nbsp;Sender&nbsp;sends&nbsp;a&nbsp;Jabber&nbsp;message&nbsp;to&nbsp;receiver&nbsp;with&nbsp;an&nbsp;'oob'-namespace&nbsp;element&nbsp;<br>
&nbsp;&nbsp;containing&nbsp;an&nbsp;HTTP&nbsp;URL&nbsp;pointing&nbsp;to&nbsp;its&nbsp;own&nbsp;IP&nbsp;address&nbsp;and&nbsp;the&nbsp;opened&nbsp;port.&nbsp;<br>
&lt;/P&gt;<br>
&nbsp;&nbsp;&lt;P&gt;*&nbsp;Receiver&nbsp;initiates&nbsp;an&nbsp;HTTP&nbsp;download&nbsp;via&nbsp;the&nbsp;URL.&nbsp;&lt;/P&gt;<br>
&nbsp;&nbsp;&lt;P&gt;*&nbsp;Sender&nbsp;gets&nbsp;the&nbsp;HTTP&nbsp;connection&nbsp;on&nbsp;the&nbsp;port&nbsp;it&nbsp;opened&nbsp;and&nbsp;sends&nbsp;the&nbsp;file&nbsp;<br>
&nbsp;&nbsp;data.&nbsp;&lt;/P&gt;<br>
&nbsp;&nbsp;&lt;P&gt;*&nbsp;Both&nbsp;sides&nbsp;close&nbsp;the&nbsp;connection,&nbsp;and&nbsp;the&nbsp;sender&nbsp;stops&nbsp;listening&nbsp;on&nbsp;that&nbsp;<br>
&nbsp;&nbsp;port.&nbsp;&lt;/P&gt;&lt;BR&gt;<br>
&nbsp;&nbsp;&lt;P&gt;&lt;B&gt;Major&nbsp;concern.&lt;/B&gt;&nbsp;&lt;/P&gt;<br>
&nbsp;&nbsp;&lt;P&gt;This&nbsp;does&nbsp;not&nbsp;work&nbsp;if&nbsp;the&nbsp;sender&nbsp;is&nbsp;behind&nbsp;any&nbsp;sort&nbsp;of&nbsp;a&nbsp;firewall&nbsp;and/or&nbsp;a&nbsp;<br>
&nbsp;&nbsp;NAT&nbsp;(network&nbsp;address&nbsp;translation)&nbsp;service.&nbsp;This&nbsp;applies&nbsp;to&nbsp;me&nbsp;personally&nbsp;both&nbsp;<br>
&nbsp;&nbsp;at&nbsp;home&nbsp;and&nbsp;at&nbsp;work.&nbsp;It&nbsp;does&nbsp;however&nbsp;support&nbsp;the&lt;I&gt;&nbsp;receiver&lt;/I&gt;&nbsp;being&nbsp;behind&nbsp;<br>
&nbsp;&nbsp;any&nbsp;sort&nbsp;of&nbsp;firewall&nbsp;that&nbsp;allows&nbsp;HTTP&nbsp;connections&nbsp;(though&nbsp;the&nbsp;receiver's&nbsp;<br>
&nbsp;&nbsp;client&nbsp;may&nbsp;need&nbsp;to&nbsp;go&nbsp;through&nbsp;an&nbsp;HTTP&nbsp;proxy&nbsp;server.)&nbsp;&lt;/P&gt;<br>
&nbsp;&nbsp;&lt;P&gt;It&nbsp;also&nbsp;relies&nbsp;on&nbsp;the&nbsp;sender&nbsp;giving&nbsp;out&nbsp;its&nbsp;IP&nbsp;address,&nbsp;which&nbsp;many&nbsp;people&nbsp;<br>
&nbsp;&nbsp;are&nbsp;loath&nbsp;to&nbsp;do&nbsp;for&nbsp;security&nbsp;reasons.&nbsp;&lt;/P&gt;&lt;BR&gt;<br>
&nbsp;&nbsp;&lt;P&gt;This&nbsp;can&nbsp;be&nbsp;addressed&nbsp;by&nbsp;allowing&nbsp;the&nbsp;sender's&nbsp;Jabber&nbsp;server&nbsp;to&nbsp;act&nbsp;as&nbsp;a&nbsp;<br>
&nbsp;&nbsp;proxy:&nbsp;the&nbsp;message&nbsp;is&nbsp;rewritten&nbsp;to&nbsp;include&nbsp;a&nbsp;URL&nbsp;pointing&nbsp;to&nbsp;the&nbsp;server,&nbsp;and&nbsp;<br>
&nbsp;&nbsp;the&nbsp;server&nbsp;then&nbsp;proxies&nbsp;the&nbsp;incoming&nbsp;request&nbsp;through&nbsp;to&nbsp;the&nbsp;sender.&nbsp;This&nbsp;does&nbsp;<br>
&nbsp;&nbsp;of&nbsp;course&nbsp;require&nbsp;additional&nbsp;smarts&nbsp;on&nbsp;the&nbsp;part&nbsp;of&nbsp;the&nbsp;server,&nbsp;as&nbsp;well&nbsp;as&nbsp;<br>
&nbsp;&nbsp;placing&nbsp;additional&nbsp;bandwidth&nbsp;demands&nbsp;on&nbsp;it&nbsp;(but&nbsp;no&nbsp;more&nbsp;than&nbsp;the&nbsp;kinds&nbsp;of&nbsp;<br>
&nbsp;&nbsp;demands&nbsp;that&nbsp;are&nbsp;currently&nbsp;made&nbsp;on&nbsp;HTTP&nbsp;proxies,&nbsp;for&nbsp;instance.)&nbsp;&lt;/P&gt;&lt;BR&gt;<br>
&nbsp;&nbsp;&lt;P&gt;&lt;B&gt;Secondary&nbsp;concern.&lt;/B&gt;&nbsp;&lt;/P&gt;<br>
&nbsp;&nbsp;&lt;P&gt;I'm&nbsp;unsure&nbsp;how&nbsp;a&nbsp;secure&nbsp;association&nbsp;can&nbsp;be&nbsp;made&nbsp;on&nbsp;the&nbsp;sender&nbsp;between&nbsp;the&nbsp;<br>
&nbsp;&nbsp;outgoing&nbsp;file&nbsp;transfer&nbsp;offer&nbsp;and&nbsp;the&nbsp;incoming&nbsp;HTTP&nbsp;request.&nbsp;The&nbsp;sender&nbsp;<br>
&nbsp;&nbsp;generally&nbsp;wants&nbsp;to&nbsp;be&nbsp;sure&nbsp;that&nbsp;only&nbsp;the&nbsp;specific&nbsp;entity&nbsp;the&nbsp;message&nbsp;was&nbsp;sent&nbsp;<br>
&nbsp;&nbsp;to&nbsp;can&nbsp;download&nbsp;the&nbsp;file,&nbsp;not&nbsp;some&nbsp;random&nbsp;other&nbsp;entity&nbsp;that&nbsp;may&nbsp;be&nbsp;probing&nbsp;the&nbsp;<br>
&nbsp;&nbsp;sender's&nbsp;machine&nbsp;for&nbsp;open&nbsp;ports.&nbsp;&lt;/P&gt;&lt;BR&gt;<br>
&nbsp;&nbsp;&lt;P&gt;This&nbsp;can&nbsp;be&nbsp;addressed&nbsp;in&nbsp;a&nbsp;weak&nbsp;way&nbsp;by&nbsp;using&nbsp;a&nbsp;random&nbsp;port&nbsp;number,&nbsp;but&nbsp;<br>
&nbsp;&nbsp;since&nbsp;only&nbsp;64536&nbsp;numbers&nbsp;are&nbsp;generally&nbsp;available,&nbsp;that's&nbsp;not&nbsp;very&nbsp;secure.&nbsp;<br>
&nbsp;&nbsp;&lt;/P&gt;&lt;BR&gt;<br>
&nbsp;&nbsp;&lt;P&gt;Stronger&nbsp;security&nbsp;could&nbsp;be&nbsp;obtained&nbsp;via&nbsp;regular&nbsp;HTTP&nbsp;authentication,&nbsp;by&nbsp;<br>
&nbsp;&nbsp;adding&nbsp;a&nbsp;username&nbsp;and&nbsp;(randomly&nbsp;generated)&nbsp;password&nbsp;to&nbsp;the&nbsp;URL.&nbsp;&lt;/P&gt;&lt;BR&gt;<br>
&nbsp;&nbsp;&lt;P&gt;Of&nbsp;course,&nbsp;for&nbsp;greatest&nbsp;security,&nbsp;the&nbsp;entire&nbsp;message&nbsp;containing&nbsp;the&nbsp;URL&nbsp;<br>
&nbsp;&nbsp;would&nbsp;have&nbsp;to&nbsp;be&nbsp;encrypted&nbsp;to&nbsp;guard&nbsp;against&nbsp;interception.&nbsp;&lt;/P&gt;&lt;BR&gt;<br>
&nbsp;&nbsp;&lt;P&gt;&lt;B&gt;Third&nbsp;(tertiary?)&nbsp;concern.&lt;/B&gt;&nbsp;&lt;/P&gt;<br>
&nbsp;&nbsp;&lt;P&gt;The&nbsp;receiver&nbsp;may&nbsp;well&nbsp;decide&nbsp;not&nbsp;to&nbsp;download&nbsp;the&nbsp;file&nbsp;at&nbsp;all&nbsp;(especially&nbsp;if&nbsp;<br>
&nbsp;&nbsp;it's&nbsp;named&nbsp;something&nbsp;like&nbsp;&quot;sexy_babes.exe&quot;.)&nbsp;There&nbsp;doesn't&nbsp;seem&nbsp;to&nbsp;be&nbsp;any&nbsp;<br>
&nbsp;&nbsp;defined&nbsp;mechanism&nbsp;for&nbsp;the&nbsp;receiver's&nbsp;client&nbsp;to&nbsp;indicate&nbsp;to&nbsp;the&nbsp;sender&nbsp;that&nbsp;<br>
&nbsp;&nbsp;this&nbsp;has&nbsp;occurred.&nbsp;&lt;/P&gt;<br>
&nbsp;&nbsp;&lt;P&gt;This&nbsp;means&nbsp;that&nbsp;the&nbsp;sender's&nbsp;client&nbsp;has&nbsp;to&nbsp;keep&nbsp;listening&nbsp;on&nbsp;that&nbsp;port&nbsp;<br>
&nbsp;&nbsp;until&nbsp;some&nbsp;kind&nbsp;of&nbsp;time-out&nbsp;occurs,&nbsp;and&nbsp;the&nbsp;sender&nbsp;him/herself&nbsp;may&nbsp;get&nbsp;<br>
&nbsp;&nbsp;confused&nbsp;wondering&nbsp;when&nbsp;the&nbsp;receiver&nbsp;is&nbsp;going&nbsp;to&nbsp;get&nbsp;around&nbsp;to&nbsp;receiving&nbsp;the&nbsp;<br>
&nbsp;&nbsp;file.&nbsp;&lt;/P&gt;&lt;BR&gt;<br>
&nbsp;&nbsp;&lt;P&gt;Looks&nbsp;like&nbsp;there&nbsp;ought&nbsp;to&nbsp;be&nbsp;some&nbsp;kind&nbsp;of&nbsp;standard&nbsp;reply&nbsp;message&nbsp;type&nbsp;<br>
&nbsp;&nbsp;indicating&nbsp;a&nbsp;refusal&nbsp;to&nbsp;download&nbsp;the&nbsp;file,&nbsp;so&nbsp;the&nbsp;sender's&nbsp;client&nbsp;can&nbsp;close&nbsp;<br>
&nbsp;&nbsp;the&nbsp;port&nbsp;and&nbsp;present&nbsp;a&nbsp;GUI&nbsp;notification.&nbsp;&lt;/P&gt;&lt;BR&gt;<br>
&nbsp;&nbsp;&lt;P&gt;--Jens&nbsp;Alfke&lt;/P&gt;&lt;/BLOCKQUOTE&gt;&lt;/BODY&gt;&lt;/HTML&gt;<br>

</tt>
