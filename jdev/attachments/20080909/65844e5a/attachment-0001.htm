<tt>
&lt;html&gt;<br>
&lt;head&gt;<br>
&lt;style&gt;<br>
.hmmessage&nbsp;P<br>
{<br>
margin:0px;<br>
padding:0px<br>
}<br>
body.hmmessage<br>
{<br>
FONT-SIZE:&nbsp;10pt;<br>
FONT-FAMILY:Tahoma<br>
}<br>
&lt;/style&gt;<br>
&lt;/head&gt;<br>
&lt;body&nbsp;class='hmmessage'&gt;Hi,&nbsp;I&nbsp;thought&nbsp;I&nbsp;would&nbsp;put&nbsp;together&nbsp;a&nbsp;simple&nbsp;&quot;cookbook&quot;&nbsp;on&nbsp;how&nbsp;to&nbsp;add&nbsp;GEOLOC&nbsp;XEP-0080&nbsp;support&nbsp;to&nbsp;a&nbsp;client.&nbsp;Hopefully&nbsp;it&nbsp;will&nbsp;help&nbsp;someone&nbsp;else&nbsp;out.&nbsp;If&nbsp;anyone&nbsp;sees&nbsp;any&nbsp;problems&nbsp;with&nbsp;the&nbsp;steps&nbsp;below,&nbsp;please&nbsp;let&nbsp;me&nbsp;know.&nbsp;BTW,&nbsp;I&nbsp;am&nbsp;not&nbsp;sure&nbsp;why&nbsp;Step&nbsp;1&nbsp;is&nbsp;needed&nbsp;since&nbsp;Step&nbsp;2&nbsp;advertises&nbsp;the&nbsp;same&nbsp;capabilities.&lt;BR&gt;<br>
&amp;nbsp;&lt;BR&gt;<br>
STEPS&nbsp;TO&nbsp;ADD&nbsp;GEOLOC&nbsp;SUPPORT:&lt;BR&gt;<br>
1)&nbsp;Client&nbsp;should&nbsp;respond&nbsp;to&nbsp;iq&nbsp;query&nbsp;&lt;A&nbsp;href=&quot;http://jabber.org/protocol/disco#info&quot;&gt;http://jabber.org/protocol/disco#info&lt;/A&gt;&nbsp;with&nbsp;a&nbsp;stanza&nbsp;like:&nbsp;&lt;BR&gt;&amp;lt;iq&nbsp;type='result'...&amp;gt;&lt;BR&gt;&amp;lt;&amp;lt;query&nbsp;xmlns='http://jabber.org/protocol/disco#info'&amp;gt;&lt;BR&gt;&amp;lt;feature&nbsp;var='http://jabber.org/geoloc'/&amp;gt;&lt;BR&gt;&amp;lt;feature&nbsp;var='http://jabber.org/geoloc+notify'/&amp;gt;&lt;BR&gt;<br>
&amp;nbsp;&lt;BR&gt;<br>
2)&nbsp;Client&nbsp;should&nbsp;add&nbsp;&amp;lt;c&amp;gt;&nbsp;stanza&nbsp;to&nbsp;presence&nbsp;stanza&nbsp;with&nbsp;the&nbsp;proper&nbsp;&quot;ver&quot;&nbsp;attribute&nbsp;indicating&nbsp;geoloc&nbsp;support.&nbsp;&lt;BR&gt;The&nbsp;&quot;ver&quot;&nbsp;attribute&nbsp;is&nbsp;a&nbsp;SHA-1&nbsp;hash&nbsp;of&nbsp;a&nbsp;string&nbsp;like:&lt;BR&gt;&quot;client/pc//fooclient&nbsp;1.0&amp;lt;&lt;A&nbsp;href=&quot;http://jabber.org/protcol/geoloc&lt;http://jabber.org/protcol/geoloc+notify&quot;&gt;http://jabber.org/protcol/geoloc&amp;lt;http://jabber.org/protcol/geoloc+notify&lt;/A&gt;&amp;lt;&quot;&lt;BR&gt;<br>
&amp;nbsp;&lt;BR&gt;<br>
The&nbsp;stanza&nbsp;looks&nbsp;something&amp;nbsp;like:&lt;BR&gt;<br>
&amp;lt;presence&nbsp;&lt;A&nbsp;href=&quot;mailto:from='romeo@montague.lit/orchard'&quot;&gt;from='romeo@montague.lit/orchard'&lt;/A&gt;&amp;gt;&lt;BR&gt;&amp;nbsp;&nbsp;&amp;lt;c&nbsp;xmlns='http://jabber.org/protocol/caps'&nbsp;&lt;BR&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;hash='sha-1'&lt;BR&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;node='http://www.chatopus.com'&lt;BR&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;ver='zHyEOgxTrkpSdGcQKH8EFPLsriY='/&amp;gt;&lt;BR&gt;&amp;lt;/presence&amp;gt;&lt;BR&gt;<br>
&amp;nbsp;&lt;BR&gt;<br>
3)&nbsp;When&nbsp;location&nbsp;changes&nbsp;the&nbsp;client&nbsp;publishes&nbsp;its&nbsp;new&nbsp;location:&lt;BR&gt;<br>
&amp;lt;iq&nbsp;type='set'&nbsp;&lt;A&nbsp;href=&quot;mailto:from='portia@merchantofvenice.lit/pda'&quot;&gt;from='portia@merchantofvenice.lit/pda'&lt;/A&gt;&nbsp;id='publish1'&amp;gt;&lt;BR&gt;&amp;nbsp;&nbsp;&amp;lt;pubsub&nbsp;xmlns='http://jabber.org/protocol/pubsub'&amp;gt;&lt;BR&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;lt;publish&nbsp;node='http://jabber.org/protocol/geoloc'&amp;gt;&lt;BR&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;lt;item&amp;gt;&lt;BR&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;lt;geoloc&nbsp;xmlns='http://jabber.org/protocol/geoloc'&nbsp;xml:lang='en'&amp;gt;&lt;BR&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;lt;country&amp;gt;Italy&amp;lt;/country&amp;gt;&lt;BR&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;lt;lat&amp;gt;45.44&amp;lt;/lat&amp;gt;&lt;BR&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;lt;locality&amp;gt;Venice&amp;lt;/locality&amp;gt;&lt;BR&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;lt;lon&amp;gt;12.33&amp;lt;/lon&amp;gt;&lt;BR&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;lt;/geoloc&amp;gt;&lt;BR&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;lt;/item&amp;gt;&lt;BR&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;lt;/publish&amp;gt;&lt;BR&gt;&amp;nbsp;&nbsp;&amp;lt;/pubsub&amp;gt;&lt;BR&gt;&amp;lt;/iq&amp;gt;&lt;BR&gt;<br>
&lt;BR&gt;4)&nbsp;Subscribers&nbsp;will&nbsp;receive:&lt;BR&gt;&amp;lt;message&nbsp;&lt;A&nbsp;href=&quot;mailto:from='portia@merchantofvenice.lit'&quot;&gt;from='portia@merchantofvenice.lit'&lt;/A&gt;&nbsp;&lt;BR&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&lt;A&nbsp;href=&quot;mailto:to='bassanio@merchantofvenice.lit'&quot;&gt;to='bassanio@merchantofvenice.lit'&lt;/A&gt;&amp;gt;&lt;BR&gt;&amp;nbsp;&nbsp;&amp;lt;event&nbsp;xmlns='http://jabber.org/protocol/pubsub#event'&amp;gt;&lt;BR&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;lt;items&nbsp;node='http://jabber.org/protocol/geoloc'&amp;gt;&lt;BR&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;lt;item&nbsp;id='d81a52b8-0f9c-11dc-9bc8-001143d5d5db'&amp;gt;&lt;BR&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;lt;geoloc&nbsp;xmlns='http://jabber.org/protocol/geoloc'&nbsp;xml:lang='en'&amp;gt;&lt;BR&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;lt;country&amp;gt;Italy&amp;lt;/country&amp;gt;&lt;BR&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;lt;lat&amp;gt;45.44&amp;lt;/lat&amp;gt;&lt;BR&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;lt;locality&amp;gt;Venice&amp;lt;/locality&amp;gt;&lt;BR&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;lt;lon&amp;gt;12.33&amp;lt;/lon&amp;gt;&lt;BR&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;lt;/geoloc&amp;gt;&lt;BR&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;lt;/item&amp;gt;&lt;BR&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;lt;/items&amp;gt;&lt;BR&gt;&amp;nbsp;&nbsp;&amp;lt;/event&amp;gt;&lt;BR&gt;&amp;lt;/message&amp;gt;&lt;BR&gt;<br>
&lt;BR&gt;&amp;nbsp;&lt;BR&gt;&lt;br&nbsp;/&gt;&lt;hr&nbsp;/&gt;Stay&nbsp;up&nbsp;to&nbsp;date&nbsp;on&nbsp;your&nbsp;PC,&nbsp;the&nbsp;Web,&nbsp;and&nbsp;your&nbsp;mobile&nbsp;phone&nbsp;with&nbsp;Windows&nbsp;Live.&nbsp;&lt;a&nbsp;href='http://clk.atdmt.com/MRT/go/msnnkwxp1020093185mrt/direct/01/'&nbsp;target='_new'&gt;See&nbsp;Now&lt;/a&gt;&lt;/body&gt;<br>
&lt;/html&gt;
</tt>
