<tt>
&lt;!doctype&nbsp;html&nbsp;public&nbsp;&quot;-//w3c//dtd&nbsp;html&nbsp;4.0&nbsp;transitional//en&quot;&gt;<br>
&lt;html&gt;<br>
&lt;tt&gt;If&nbsp;I&nbsp;wanted&nbsp;to&nbsp;take&nbsp;jabberd&nbsp;and&nbsp;add&nbsp;a&nbsp;tag&nbsp;which&nbsp;cc's&nbsp;all&nbsp;presence&nbsp;and<br>
messages&nbsp;to&nbsp;a&nbsp;server&nbsp;component,&nbsp;please&nbsp;let&nbsp;me&nbsp;know&nbsp;if&nbsp;what&nbsp;I'm&nbsp;planning<br>
on&nbsp;doing&nbsp;makes&nbsp;sense:&lt;/tt&gt;<br>
&lt;br&gt;&lt;tt&gt;(this&nbsp;is&nbsp;all&nbsp;for&nbsp;1.4.2)&lt;/tt&gt;&lt;tt&gt;&lt;/tt&gt;<br>
&lt;p&gt;&lt;tt&gt;I&nbsp;want&nbsp;to&nbsp;make&nbsp;a&nbsp;&amp;lt;src&gt;/jabberd/base/base_carboncopy.c&lt;/tt&gt;&lt;tt&gt;&lt;/tt&gt;<br>
&lt;p&gt;&lt;tt&gt;Then&nbsp;put&nbsp;a&nbsp;&amp;lt;carboncopy&gt;some_jid_or_internal_component_id&amp;lt;/carboncopy&gt;&lt;/tt&gt;&lt;tt&gt;&lt;/tt&gt;<br>
&lt;p&gt;&lt;tt&gt;high&nbsp;up&nbsp;in&nbsp;the&nbsp;sessions&nbsp;service,&nbsp;so&nbsp;it&nbsp;sees&nbsp;everything.&lt;/tt&gt;<br>
&lt;br&gt;&lt;tt&gt;&amp;nbsp;&amp;lt;service&nbsp;id=&quot;sessions&quot;&gt;&lt;/tt&gt;<br>
&lt;br&gt;&lt;tt&gt;&amp;nbsp;&amp;nbsp;&nbsp;&amp;lt;host&gt;&amp;lt;jabberd:cmdline&nbsp;flag=&quot;h&quot;&gt;localhost&amp;lt;/jabberd:cmdline&gt;&amp;lt;/host&gt;&lt;/tt&gt;<br>
&lt;br&gt;&lt;tt&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;lt;carboncopy&gt;mycomponent.localhost&amp;lt;/carboncopy&gt;&lt;/tt&gt;<br>
&lt;br&gt;&lt;tt&gt;.....&lt;/tt&gt;<br>
&lt;br&gt;&lt;tt&gt;&lt;/tt&gt;&amp;nbsp;&lt;tt&gt;&lt;/tt&gt;<br>
&lt;p&gt;&lt;tt&gt;In&nbsp;base_carboncopy.c&nbsp;I&nbsp;want&nbsp;to&nbsp;do&nbsp;this:&nbsp;(this&nbsp;is&nbsp;the&nbsp;part&nbsp;I'd&nbsp;like<br>
some&nbsp;advice&nbsp;on:&lt;/tt&gt;<br>
&lt;br&gt;&lt;tt&gt;result&nbsp;base_forward_deliver(instance&nbsp;id,&nbsp;dpacket&nbsp;p,&nbsp;void*&nbsp;arg){&lt;/tt&gt;<br>
&lt;br&gt;&lt;tt&gt;&amp;nbsp;&lt;/tt&gt;<br>
&lt;br&gt;&lt;tt&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;if&nbsp;my&nbsp;packet&nbsp;is&nbsp;a&nbsp;message,&nbsp;or&nbsp;presence&lt;/tt&gt;<br>
&lt;br&gt;&lt;tt&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;copy&nbsp;it,&nbsp;wrap&nbsp;in&nbsp;route&nbsp;tag,&nbsp;and&nbsp;deliver&nbsp;to&nbsp;component<br>
which&nbsp;is&nbsp;defined&nbsp;in&nbsp;the&nbsp;config.&lt;/tt&gt;<br>
&lt;br&gt;&lt;tt&gt;}&lt;/tt&gt;<br>
&lt;br&gt;&lt;tt&gt;&lt;/tt&gt;&amp;nbsp;&lt;tt&gt;&lt;/tt&gt;<br>
&lt;p&gt;&lt;tt&gt;Any&nbsp;advice?&lt;/tt&gt;<br>
&lt;br&gt;&lt;tt&gt;Thanks&lt;/tt&gt;<br>
&lt;br&gt;&lt;tt&gt;-Dov&lt;/tt&gt;<br>
&lt;br&gt;&lt;tt&gt;&lt;/tt&gt;&amp;nbsp;&lt;tt&gt;&lt;/tt&gt;<br>
&lt;p&gt;&lt;tt&gt;--&lt;/tt&gt;<br>
&lt;br&gt;&lt;tt&gt;This&nbsp;communication&nbsp;is&nbsp;intended&nbsp;for&nbsp;the&nbsp;addressee(s)&nbsp;and&nbsp;may&nbsp;contain<br>
confidential&nbsp;and&nbsp;legally&nbsp;privileged&nbsp;information.&amp;nbsp;&nbsp;We&nbsp;do&nbsp;not&nbsp;waive<br>
confidentiality&nbsp;or&nbsp;privilege&nbsp;by&nbsp;mistransmission.&amp;nbsp;&nbsp;If&nbsp;you&nbsp;have&nbsp;received<br>
this&nbsp;communication&nbsp;in&nbsp;error,&nbsp;any&nbsp;use,&nbsp;dissemination,&nbsp;printing&nbsp;or&nbsp;copying<br>
is&nbsp;strictly&nbsp;prohibited;&nbsp;please&nbsp;destroy&nbsp;all&nbsp;electronic&nbsp;and&nbsp;paper&nbsp;copies<br>
and&nbsp;notify&nbsp;the&nbsp;sender&nbsp;immediately.&lt;/tt&gt;<br>
&lt;br&gt;&lt;tt&gt;&lt;/tt&gt;&amp;nbsp;&lt;/html&gt;<br>

</tt>
