<tt>
&lt;!DOCTYPE&nbsp;HTML&nbsp;PUBLIC&nbsp;&quot;-//W3C//DTD&nbsp;W3&nbsp;HTML//EN&quot;&gt;<br>
&lt;HTML&gt;<br>
&lt;HEAD&gt;<br>
<br>
&lt;META&nbsp;content=text/html;charset=iso-8859-1&nbsp;http-equiv=Content-Type&gt;<br>
&lt;META&nbsp;content='&quot;MSHTML&nbsp;4.72.3110.7&quot;'&nbsp;name=GENERATOR&gt;<br>
&lt;/HEAD&gt;<br>
&lt;BODY&nbsp;bgColor=#ffffff&gt;<br>
&lt;DIV&gt;&lt;FONT&nbsp;size=2&gt;&lt;/FONT&gt;Hey&nbsp;there&nbsp;Jabber-folks&nbsp;...&lt;/DIV&gt;<br>
&lt;DIV&gt;&amp;nbsp;&lt;/DIV&gt;<br>
&lt;DIV&gt;I&nbsp;have&nbsp;had&nbsp;a&nbsp;problem&nbsp;with&nbsp;my&nbsp;transport&nbsp;server&nbsp;crashing&nbsp;when&nbsp;a&nbsp;client&nbsp;is&nbsp;<br>
killed&nbsp;without&nbsp;cleanly&nbsp;disconnecting&nbsp;from&nbsp;the&nbsp;socket&nbsp;first&nbsp;...&nbsp;i.e.&nbsp;I&nbsp;control-c&nbsp;<br>
the&nbsp;rug&nbsp;out&nbsp;from&nbsp;underneath&nbsp;the&nbsp;carpet&nbsp;of&nbsp;my&nbsp;client&nbsp;app,&nbsp;so&nbsp;it&nbsp;doesn't&nbsp;get&nbsp;to&nbsp;<br>
send&nbsp;its&nbsp;logout&nbsp;message&nbsp;&amp;amp;&nbsp;do&nbsp;a&nbsp;socket&nbsp;close.&amp;nbsp;&nbsp;The&nbsp;read()&nbsp;call&nbsp;in&nbsp;io.c&nbsp;<br>
fails&nbsp;and&nbsp;h_err()&nbsp;kills&nbsp;my&nbsp;transport.&lt;/DIV&gt;<br>
&lt;DIV&gt;&amp;nbsp;&lt;/DIV&gt;<br>
&lt;DIV&gt;A&nbsp;small&nbsp;little&nbsp;fix&nbsp;takes&nbsp;care&nbsp;of&nbsp;this&nbsp;for&nbsp;me&nbsp;...&nbsp;so&nbsp;I&nbsp;thought&nbsp;I'd&nbsp;mail&nbsp;it&nbsp;<br>
in&nbsp;&amp;amp;&nbsp;see&nbsp;if&nbsp;it&nbsp;helped&nbsp;out&nbsp;anyone&nbsp;else&nbsp;as&nbsp;well.&lt;/DIV&gt;<br>
&lt;DIV&gt;&amp;nbsp;&lt;/DIV&gt;<br>
&lt;DIV&gt;&lt;STRONG&gt;&lt;U&gt;io.c:&lt;/U&gt;&lt;/STRONG&gt;&lt;/DIV&gt;<br>
&lt;DIV&gt;diff&nbsp;io.c&nbsp;io.c.new&lt;BR&gt;1a2&lt;BR&gt;&amp;gt;&nbsp;#include&nbsp;<br>
&amp;lt;errno.h&amp;gt;&lt;BR&gt;83c84,85&lt;BR&gt;&amp;lt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;<br>
h_err(nbytes,&amp;quot;read&amp;quot;);&lt;BR&gt;---&lt;BR&gt;&amp;gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;<br>
if(errno&nbsp;!=&nbsp;<br>
ECONNRESET)&lt;BR&gt;&amp;gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;<br>
h_err(nbytes,&amp;quot;read&amp;quot;);&lt;BR&gt;&lt;/DIV&gt;<br>
&lt;DIV&gt;&amp;nbsp;&lt;/DIV&gt;<br>
&lt;DIV&gt;&lt;FONT&nbsp;color=#000000&nbsp;size=2&gt;This&nbsp;way&nbsp;if&nbsp;the&nbsp;connection&nbsp;was&nbsp;killed,&nbsp;then&nbsp;<br>
read()&nbsp;failing&nbsp;&amp;amp;&nbsp;returning&nbsp;-1&nbsp;lets&nbsp;us&nbsp;&amp;quot;drop&nbsp;the&nbsp;connection&amp;quot;&nbsp;(and&nbsp;<br>
the&nbsp;user&nbsp;session)&nbsp;cleanly&nbsp;on&nbsp;our&nbsp;side.&lt;/FONT&gt;&lt;/DIV&gt;<br>
&lt;DIV&gt;&amp;nbsp;&lt;/DIV&gt;<br>
&lt;DIV&gt;---------------------------------------------------------------------------------------------------------&lt;BR&gt;Scott&nbsp;<br>
Perrine&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;<br>
ph:&nbsp;415.777.9641&lt;BR&gt;Xuma&nbsp;Technologies&nbsp;<br>
LLC&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;<br>
&lt;A&nbsp;href=&quot;http://www.xuma.com&quot;&gt;http://www.xuma.com&lt;/A&gt;&lt;BR&gt;World&nbsp;Class&nbsp;Engineering&nbsp;<br>
For&nbsp;<br>
E-Business&lt;BR&gt;---------------------------------------------------------------------------------------------------------&lt;/DIV&gt;&lt;/BODY&gt;&lt;/HTML&gt;<br>

</tt>
