<tt>
&lt;html&gt;<br>
&lt;head&gt;<br>
&lt;style&gt;<br>
.hmmessage&nbsp;P<br>
{<br>
margin:0px;<br>
padding:0px<br>
}<br>
body.hmmessage<br>
{<br>
FONT-SIZE:&nbsp;10pt;<br>
FONT-FAMILY:Tahoma<br>
}<br>
&lt;/style&gt;<br>
&lt;/head&gt;<br>
&lt;body&nbsp;class='hmmessage'&gt;Thanks&nbsp;for&nbsp;the&nbsp;reply.&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;<br>
<br>
&lt;HR&nbsp;id=stopSpelling&gt;<br>
&lt;BR&gt;<br>
&amp;gt;&nbsp;From:&nbsp;hildjj@gmail.com&lt;BR&gt;&amp;gt;&nbsp;To:&nbsp;jdev@jabber.org&lt;BR&gt;&amp;gt;&nbsp;Date:&nbsp;Thu,&nbsp;11&nbsp;Sep&nbsp;2008&nbsp;16:26:44&nbsp;-0600&lt;BR&gt;&amp;gt;&nbsp;Subject:&nbsp;Re:&nbsp;[jdev]&nbsp;GEOLOC&nbsp;Support&lt;BR&gt;&amp;gt;&nbsp;&lt;BR&gt;&amp;gt;&nbsp;&lt;BR&gt;&amp;gt;&nbsp;On&nbsp;Sep&nbsp;9,&nbsp;2008,&nbsp;at&nbsp;10:24&nbsp;AM,&nbsp;Stephen&nbsp;Pendleton&nbsp;wrote:&lt;BR&gt;&amp;gt;&nbsp;&lt;BR&gt;&amp;gt;&nbsp;&amp;gt;&nbsp;Hi,&nbsp;I&nbsp;thought&nbsp;I&nbsp;would&nbsp;put&nbsp;together&nbsp;a&nbsp;simple&nbsp;&quot;cookbook&quot;&nbsp;on&nbsp;how&nbsp;to&nbsp;add&nbsp;&lt;BR&gt;&amp;gt;&nbsp;&amp;gt;&nbsp;GEOLOC&nbsp;XEP-0080&nbsp;support&nbsp;to&nbsp;a&nbsp;client.&nbsp;Hopefully&nbsp;it&nbsp;will&nbsp;help&nbsp;someone&nbsp;&lt;BR&gt;&amp;gt;&nbsp;&amp;gt;&nbsp;else&nbsp;out.&nbsp;If&nbsp;anyone&nbsp;sees&nbsp;any&nbsp;problems&nbsp;with&nbsp;the&nbsp;steps&nbsp;below,&nbsp;please&nbsp;&lt;BR&gt;&amp;gt;&nbsp;&amp;gt;&nbsp;let&nbsp;me&nbsp;know.&nbsp;BTW,&nbsp;I&nbsp;am&nbsp;not&nbsp;sure&nbsp;why&nbsp;Step&nbsp;1&nbsp;is&nbsp;needed&nbsp;since&nbsp;Step&nbsp;2&nbsp;&lt;BR&gt;&amp;gt;&nbsp;&amp;gt;&nbsp;advertises&nbsp;the&nbsp;same&nbsp;capabilities.&lt;BR&gt;&amp;gt;&nbsp;&lt;BR&gt;&amp;gt;&nbsp;Step&nbsp;1&nbsp;is&nbsp;required,&nbsp;because&nbsp;when&nbsp;someone&nbsp;asks&nbsp;what&nbsp;your&nbsp;caps&nbsp;hash&nbsp;&lt;BR&gt;&amp;gt;&nbsp;means,&nbsp;you&nbsp;have&nbsp;to&nbsp;be&nbsp;able&nbsp;to&nbsp;answer.&nbsp;It's&nbsp;important&nbsp;that&nbsp;the&nbsp;results&nbsp;&lt;BR&gt;&amp;gt;&nbsp;from&nbsp;step&nbsp;1&nbsp;match&nbsp;the&nbsp;stuff&nbsp;that&nbsp;is&nbsp;hashed&nbsp;in&nbsp;step&nbsp;2.&lt;BR&gt;<br>
&lt;BR&gt;I&nbsp;misunderstood&nbsp;the&nbsp;purpose&nbsp;of&nbsp;the&nbsp;hash.&nbsp;I&nbsp;thought&nbsp;the&nbsp;client&nbsp;was&nbsp;expected&nbsp;to&nbsp;unhash&nbsp;it&nbsp;and&nbsp;use&nbsp;it&nbsp;to&nbsp;determine&nbsp;the&nbsp;capabilities.&nbsp;I&nbsp;didnt&nbsp;realize&nbsp;it&nbsp;was&nbsp;used&nbsp;to&nbsp;compare&nbsp;caps&nbsp;efficiently.&lt;BR&gt;<br>
&amp;nbsp;&lt;BR&gt;<br>
So&nbsp;based&nbsp;on&nbsp;your&nbsp;feedback&nbsp;the&nbsp;correct&nbsp;&quot;cookbook&quot;&nbsp;would&nbsp;be:&lt;BR&gt;<br>
&amp;nbsp;&lt;BR&gt;<br>
&amp;nbsp;&lt;BR&gt;<br>
&amp;nbsp;&lt;BR&gt;STEPS&nbsp;TO&nbsp;ADD&nbsp;GEOLOC&nbsp;SUPPORT:&lt;BR&gt;1)&nbsp;Client&nbsp;should&nbsp;respond&nbsp;to&nbsp;iq&nbsp;query&nbsp;http://jabber.org/protocol/disco#info&nbsp;&lt;BR&gt;with&nbsp;a&nbsp;stanza&nbsp;like:&lt;BR&gt;&amp;lt;iq&nbsp;type='result'...&amp;gt;&lt;BR&gt;&amp;lt;query&nbsp;xmlns='http://jabber.org/protocol/disco#info'&amp;gt;&lt;BR&gt;&amp;lt;feature&nbsp;var='http://jabber.org/geoloc+notify'/&amp;gt;&lt;BR&gt;&amp;nbsp;&lt;BR&gt;2)&nbsp;Client&nbsp;should&nbsp;add&nbsp;&amp;lt;c&amp;gt;&nbsp;stanza&nbsp;to&nbsp;presence&nbsp;stanza&nbsp;with&nbsp;the&nbsp;proper&nbsp;&lt;BR&gt;&quot;ver&quot;&nbsp;attribute&nbsp;indicating&nbsp;geoloc&nbsp;support.&lt;BR&gt;The&nbsp;&quot;ver&quot;&nbsp;attribute&nbsp;is&nbsp;a&nbsp;SHA-1&nbsp;hash&nbsp;of&nbsp;a&nbsp;string&nbsp;like:&lt;BR&gt;&quot;client/pc//fooclient&nbsp;1.0&amp;lt;http://jabber.org/protcol/geoloc+notify&amp;lt;&quot;&lt;BR&gt;&lt;BR&gt;The&nbsp;stanza&nbsp;looks&nbsp;something&nbsp;like:&lt;BR&gt;&amp;lt;presence&nbsp;from='romeo@montague.lit/orchard'&amp;gt;&lt;BR&gt;&amp;lt;c&nbsp;xmlns='http://jabber.org/protocol/caps'&amp;nbsp;hash='sha-1'&nbsp;node='http://www.chatopus.com'&nbsp;ver='zHyEOgxTrkpSdGcQKH8EFPLsriY='/&amp;gt;&lt;BR&gt;&amp;lt;/presence&amp;gt;&lt;BR&gt;&lt;BR&gt;3)&nbsp;When&nbsp;location&nbsp;changes&nbsp;the&nbsp;client&nbsp;publishes&nbsp;its&nbsp;new&nbsp;location:&lt;BR&gt;&amp;lt;iq&nbsp;type='set'&nbsp;from='portia@merchantofvenice.lit/pda'&nbsp;id='publish1'&amp;gt;&lt;BR&gt;&amp;lt;pubsub&nbsp;xmlns='http://jabber.org/protocol/pubsub'&amp;gt;&lt;BR&gt;&amp;lt;publish&nbsp;node='http://jabber.org/protocol/geoloc'&amp;gt;&lt;BR&gt;&amp;lt;item&amp;gt;&lt;BR&gt;&amp;lt;geoloc&nbsp;xmlns='http://jabber.org/protocol/geoloc'&nbsp;xml:lang='en'&amp;gt;&lt;BR&gt;&amp;lt;country&amp;gt;Italy&amp;lt;/country&amp;gt;&lt;BR&gt;&amp;lt;lat&amp;gt;45.44&amp;lt;/lat&amp;gt;&lt;BR&gt;&amp;lt;locality&amp;gt;Venice&amp;lt;/locality&amp;gt;&lt;BR&gt;&amp;lt;lon&amp;gt;12.33&amp;lt;/lon&amp;gt;&lt;BR&gt;&amp;lt;/geoloc&amp;gt;&lt;BR&gt;&amp;lt;/item&amp;gt;&lt;BR&gt;&amp;lt;/publish&amp;gt;&lt;BR&gt;&amp;lt;/pubsub&amp;gt;&lt;BR&gt;&amp;lt;/iq&amp;gt;&lt;BR&gt;&lt;BR&gt;<br>
4)&nbsp;If&nbsp;a&nbsp;client&nbsp;receives&nbsp;a&nbsp;location&nbsp;update&nbsp;it&nbsp;will&nbsp;be&nbsp;in&nbsp;the&nbsp;form:&lt;BR&gt;<br>
&amp;lt;message&nbsp;from='portia@merchantofvenice.lit'&nbsp;&lt;BR&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;to='bassanio@merchantofvenice.lit'&amp;gt;&lt;BR&gt;&amp;nbsp;&nbsp;&amp;lt;event&nbsp;xmlns='http://jabber.org/protocol/pubsub#event'&amp;gt;&lt;BR&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;lt;items&nbsp;node='http://jabber.org/protocol/geoloc'&amp;gt;&lt;BR&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;lt;item&nbsp;id='d81a52b8-0f9c-11dc-9bc8-001143d5d5db'&amp;gt;&lt;BR&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;lt;geoloc&nbsp;xmlns='http://jabber.org/protocol/geoloc'&nbsp;xml:lang='en'&amp;gt;&lt;BR&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;lt;country&amp;gt;Italy&amp;lt;/country&amp;gt;&lt;BR&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;lt;lat&amp;gt;45.44&amp;lt;/lat&amp;gt;&lt;BR&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;lt;locality&amp;gt;Venice&amp;lt;/locality&amp;gt;&lt;BR&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;lt;lon&amp;gt;12.33&amp;lt;/lon&amp;gt;&lt;BR&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;lt;accuracy&amp;gt;20&amp;lt;/accuracy&amp;gt;&lt;BR&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;lt;/geoloc&amp;gt;&lt;BR&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;lt;/item&amp;gt;&lt;BR&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;lt;/items&amp;gt;&lt;BR&gt;&amp;nbsp;&nbsp;&amp;lt;/event&amp;gt;&lt;BR&gt;&amp;lt;/message&amp;gt;&lt;BR&gt;The&nbsp;client&nbsp;then&nbsp;should&nbsp;use&nbsp;the&nbsp;location&nbsp;information&nbsp;in&nbsp;this&nbsp;packet&nbsp;as&nbsp;it&nbsp;sees&nbsp;fit!&lt;BR&gt;<br>
&amp;nbsp;&lt;BR&gt;<br>
Thanks&lt;BR&gt;<br>
&amp;nbsp;&lt;BR&gt;&lt;br&nbsp;/&gt;&lt;hr&nbsp;/&gt;Store,&nbsp;manage&nbsp;and&nbsp;share&nbsp;up&nbsp;to&nbsp;5GB&nbsp;with&nbsp;Windows&nbsp;Live&nbsp;SkyDrive.&nbsp;&lt;a&nbsp;href='http://skydrive.live.com/welcome.aspx?provision=1?ocid=TXT_TAGLM_WL_skydrive_102008'&nbsp;target='_new'&gt;Start&nbsp;uploading&nbsp;now&lt;/a&gt;&lt;/body&gt;<br>
&lt;/html&gt;
</tt>
