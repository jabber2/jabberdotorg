[From nobody Tue Nov  3 07:48:32 2009
Return-Path: &lt;faim-devel-return-93-temas=tamu.edu@n.ml.org&gt;
Delivered-To: temas@box5.net
Received: (qmail 27843 invoked from network); 23 Jul 1999 17:42:32 -0000
Received: from unix.tamu.edu (HELO fox.tamu.edu) (root@128.194.103.25)
	by box5.net with SMTP; 23 Jul 1999 17:42:32 -0000
Received: from mail.tamu.edu (mail.tamu.edu [128.194.103.38])
	by fox.tamu.edu (8.9.3/8.9.3) with ESMTP id MAA26605
	for &lt;tjm5188@unix.tamu.edu&gt;; Fri, 23 Jul 1999 12:49:19 -0500 (CDT)
Received: (from daemon@localhost) by mail.tamu.edu (8.9.3/8.9.3) id MAA03686
	for tjm5188@unix.tamu.edu; Fri, 23 Jul 1999 12:49:19 -0500 (CDT)
Received: from mail.n.ml.org (qmailr@narnia.idsi.net [208.195.228.60])
	by mail.tamu.edu (8.9.3/8.9.3) with SMTP id MAA03628
	for &lt;temas@tamu.edu&gt;; Fri, 23 Jul 1999 12:49:11 -0500 (CDT)
Received: (qmail 26240 invoked by alias); 23 Jul 1999 12:46:59 -0000
Mailing-List: contact faim-devel-help@n.ml.org; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Reply-To: faim-devel@n.ml.org
Delivered-To: mailing list faim-devel@n.ml.org
Received: (qmail 26235 invoked from network); 23 Jul 1999 12:46:54 -0000
Date: Fri, 23 Jul 1999 18:52:07 +0000 (UTC)
X-PH: V4.4.7@mail.tamu.edu
From: Adam Fritzler &lt;mid@auk.cx&gt;
To: faim-devel@n.ml.org
Message-ID: &lt;Pine.LNX.4.10.9907231847550.726-200000@auk.cx&gt;
MIME-Version: 1.0
Content-Type: MULTIPART/MIXED; BOUNDARY=&quot;-1513193453-1315441997-932755927=:726&quot;
Subject: [faim-devel-93] I suppose you want libfaim fixed now that AOL broke
	it....
X-Mozilla-Status2: 00000000

  This message is in MIME format.  The first part should be readable text,
  while the remaining parts are likely unreadable without MIME-aware tools.
  Send mail to mime@docserver.cac.washington.edu for more info.

---1513193453-1315441997-932755927=:726
Content-Type: TEXT/PLAIN; charset=US-ASCII


And so I did.  Easy fix.  In the BOS redirect, they now send the IP as
&quot;xxx.xxx.xxx.xxx:xxxx&quot; instead of just the IP.  Attached is a drop-in
replacement for libfaim-snap25apr1999's aim_conn.c.

Copied into naims libfaim/, recompiled and it works just fine again.

Thanks to Eric Peyton (author of the MacOS X libfaim port) for pointing
out the problem.

Have fun... 
mid

---
  Adam Fritzler
  { mid@auk.cx, afritz@iname.com}
    http://www.auk.cx/~mid/
   &quot;Behold the power of cheese.&quot;  -- National Dairy Council

---1513193453-1315441997-932755927=:726
Content-Type: TEXT/PLAIN; charset=US-ASCII; name=&quot;aim_conn.c&quot;
Content-Transfer-Encoding: BASE64
Content-ID: &lt;Pine.LNX.4.10.9907231852070.726@auk.cx&gt;
Content-Description: 
Content-Disposition: attachment; filename=&quot;aim_conn.c&quot;

DQovKg0KICogIGFpbV9jb25uLmMNCiAqDQogKiBEb2VzIGFsbCB0aGlzIGds
b3Jpb3VzbHkgbmlmdHkgY29ubmVjdGlvbiBoYW5kbGluZyBzdHVmZi4uLg0K
ICoNCiAqLw0KDQojaW5jbHVkZSAiYWltLmgiDQoNCnZvaWQgYWltX2Nvbm5y
c3Qodm9pZCkNCnsNCiAgaW50IGk7DQogIGZvciAoaSA9IDA7IGkgPCBBSU1f
Q09OTl9NQVg7IGkrKykNCiAgICB7DQogICAgICBhaW1fY29ubnNbaV0uZmQg
PSAtMTsNCiAgICAgIGFpbV9jb25uc1tpXS50eXBlID0gLTE7DQogICAgICBh
aW1fY29ubnNbaV0uc3RhdHVzID0gMDsNCiAgICB9DQoNCn0NCg0Kc3RydWN0
IGFpbV9jb25uX3QgKmFpbV9jb25uX2dldG5leHQodm9pZCkNCnsNCiAgaW50
IGk7DQogIGZvciAoaT0wO2k8QUlNX0NPTk5fTUFYO2krKykNCiAgICBpZiAo
YWltX2Nvbm5zW2ldLmZkID09IC0xKQ0KICAgICAgcmV0dXJuICYoYWltX2Nv
bm5zW2ldKTsNCiAgcmV0dXJuIE5VTEw7DQp9DQoNCnZvaWQgYWltX2Nvbm5f
Y2xvc2Uoc3RydWN0IGFpbV9jb25uX3QgKmRlYWRjb25uKQ0Kew0KICBpZiAo
ZGVhZGNvbm4tPmZkID49IDMpDQogICAgY2xvc2UoZGVhZGNvbm4tPmZkKTsN
CiAgZGVhZGNvbm4tPmZkID0gLTE7DQogIGRlYWRjb25uLT50eXBlID0gLTE7
DQp9DQoNCnN0cnVjdCBhaW1fY29ubl90ICphaW1fZ2V0Y29ubl90eXBlKGlu
dCB0eXBlKQ0Kew0KICBpbnQgaTsNCiAgZm9yIChpPTA7IGk8QUlNX0NPTk5f
TUFYOyBpKyspDQogICAgaWYgKGFpbV9jb25uc1tpXS50eXBlID09IHR5cGUp
DQogICAgICByZXR1cm4gJihhaW1fY29ubnNbaV0pOw0KICByZXR1cm4gTlVM
TDsNCn0NCg0KLyoNCiAqIGFpbV9uZXdjb25uKHR5cGUsIGRlc3QpDQogKg0K
ICogT3BlbnMgYSBuZXcgY29ubmVjdGlvbiB0byB0aGUgc3BlY2lmaWVkIGRl
c3QgaG9zdCBvZiB0eXBlIHR5cGUuDQogKg0KICogVE9ETzogZml4IGZvciBw
cm94aWVzDQogKiBGSVhNRTogUmV0dXJuIGVycm9ycyBpbiBhIG1vcmUgc2Fu
ZSB3YXkuDQogKg0KICovDQpzdHJ1Y3QgYWltX2Nvbm5fdCAqYWltX25ld2Nv
bm4oaW50IHR5cGUsIGNoYXIgKmRlc3QpDQp7DQogIHN0cnVjdCBhaW1fY29u
bl90ICpjb25uc3RydWN0Ow0KICBpbnQgcmV0Ow0KICBzdHJ1Y3Qgc29ja2Fk
ZHJfaW4gc2E7DQogIHN0cnVjdCBob3N0ZW50ICpocDsNCiAgaW50IHBvcnQg
PSBGQUlNX0xPR0lOX1BPUlQ7DQogIGludCBpPTA7DQogIA0KICBpZiAoIWRl
c3QgfHwgKChjb25uc3RydWN0PWFpbV9jb25uX2dldG5leHQoKSk9PU5VTEwp
KQ0KICAgIHJldHVybiBOVUxMOw0KDQogIGNvbm5zdHJ1Y3QtPnR5cGUgPSB0
eXBlOw0KDQogIC8qIA0KICAgKiBBcyBvZiAyMyBKdWwgMTk5OSwgQU9MIG5v
dyBzZW5kcyB0aGUgcG9ydCBudW1iZXIsIHByZWNlZGVkIGJ5IGEgDQogICAq
IGNvbG9uLCBpbiB0aGUgQk9TIHJlZGlyZWN0LiAgVGhpcyBmYXRhbGx5IGJy
ZWFrcyBhbGwgcHJldmlvdXMgDQogICAqIGxpYmZhaW1zLiAgQmFkLCBiYWQg
QU9MLg0KICAgKg0KICAgKiBXZSBwdXQgdGhpcyBoZXJlIHRvIGNhdGNoIGV2
ZXJ5IGNhc2UuIA0KICAgKg0KICAgKi8NCiAgZm9yKGk9MDsoaTxzdHJsZW4o
ZGVzdCkpO2krKykNCiAgICBpZiAoZGVzdFtpXSA9PSAnOicpIGJyZWFrOyAN
CiAgaWYgKGk8c3RybGVuKGRlc3QpKQ0KICAgICAgew0KCXBvcnQgPSBhdG9p
KGRlc3QraSk7DQoJZGVzdFtpXSA9ICdcMCc7DQogICAgICB9DQoNCiAgaHAg
PSBnZXRob3N0YnluYW1lMihkZXN0LCBBRl9JTkVUKTsNCiAgaWYgKGhwID09
IE5VTEwpDQogICAgew0KICAgICAgY29ubnN0cnVjdC0+c3RhdHVzID0gKGhf
ZXJybm8gfCBBSU1fQ09OTl9TVEFUVVNfUkVTT0xWRVJSKTsNCiAgICAgIHJl
dHVybiBjb25uc3RydWN0Ow0KICAgIH0NCg0KICBtZW1zZXQoJnNhLnNpbl96
ZXJvLCAwLCA4KTsNCiAgc2Euc2luX3BvcnQgPSBodG9ucyhGQUlNX0xPR0lO
X1BPUlQpOw0KICBtZW1jcHkoJnNhLnNpbl9hZGRyLCBocC0+aF9hZGRyLCBo
cC0+aF9sZW5ndGgpOw0KICBzYS5zaW5fZmFtaWx5ID0gaHAtPmhfYWRkcnR5
cGU7DQogIA0KICBjb25uc3RydWN0LT5mZCA9IHNvY2tldChocC0+aF9hZGRy
dHlwZSwgU09DS19TVFJFQU0sIDApOw0KICByZXQgPSBjb25uZWN0KGNvbm5z
dHJ1Y3QtPmZkLCAoc3RydWN0IHNvY2thZGRyICopJnNhLCBzaXplb2Yoc3Ry
dWN0IHNvY2thZGRyX2luKSk7DQogIGlmKCByZXQgPCAwKQ0KICAgIHsNCiAg
ICAgIGNvbm5zdHJ1Y3QtPmZkID0gLTE7DQogICAgICBjb25uc3RydWN0LT5z
dGF0dXMgPSAoZXJybm8gfCBBSU1fQ09OTl9TVEFUVVNfQ09OTkVSUik7DQog
ICAgICByZXR1cm4gY29ubnN0cnVjdDsNCiAgICB9DQoNCiAgcmV0dXJuIGNv
bm5zdHJ1Y3Q7DQp9DQoNCmludCBhaW1fY29ubmdldG1heGZkKHZvaWQpDQp7
DQogIGludCBpLGo7DQogIGo9MDsNCiAgZm9yIChpPTA7aTxBSU1fQ09OTl9N
QVg7aSsrKQ0KICAgIGlmKGFpbV9jb25uc1tpXS5mZCA+IGopDQogICAgICBq
ID0gYWltX2Nvbm5zW2ldLmZkOw0KICByZXR1cm4gajsNCn0NCg0KaW50IGFp
bV9jb3VudGNvbm4odm9pZCkNCnsNCiAgaW50IGksY250Ow0KICBjbnQgPSAw
Ow0KICBmb3IgKGk9MDtpPEFJTV9DT05OX01BWDtpKyspDQogICAgaWYgKGFp
bV9jb25uc1tpXS5mZCA+IC0xKQ0KICAgICAgY250Kys7DQogIHJldHVybiBj
bnQ7DQp9DQoNCi8qDQogKiBhaW1fc2VsZWN0KHRpbWVvdXQpDQogKg0KICog
V2FpdHMgZm9yIGEgc29ja2V0IHdpdGggZGF0YSBvciBmb3IgdGltZW91dCwg
d2hpY2hldmVyIGNvbWVzIGZpcnN0Lg0KICogU2VlIHNlbGVjdCgyKS4NCiAq
IA0KICovIA0Kc3RydWN0IGFpbV9jb25uX3QgKmFpbV9zZWxlY3Qoc3RydWN0
IHRpbWV2YWwgKnRpbWVvdXQpDQp7DQogIGZkX3NldCBmZHM7DQogIGZkX3Nl
dCBlcnJmZHM7DQogIGludCBpOw0KDQogIGlmIChhaW1fY291bnRjb25uKCkg
PD0gMCkNCiAgICByZXR1cm4gMDsNCiAgDQogIEZEX1pFUk8oJmZkcyk7DQog
IEZEX1pFUk8oJmVycmZkcyk7DQogIA0KICBmb3IoaT0wO2k8QUlNX0NPTk5f
TUFYO2krKykNCiAgICBpZiAoYWltX2Nvbm5zW2ldLmZkPi0xKQ0KICAgICAg
ew0KCUZEX1NFVChhaW1fY29ubnNbaV0uZmQsICZmZHMpOw0KCUZEX1NFVChh
aW1fY29ubnNbaV0uZmQsICZlcnJmZHMpOw0KICAgICAgfQ0KICANCiAgaSA9
IHNlbGVjdChhaW1fY29ubmdldG1heGZkKCkrMSwgJmZkcywgTlVMTCwgJmVy
cmZkcywgdGltZW91dCk7DQogIGlmIChpPj0xKQ0KICAgIHsNCiAgICAgIGlu
dCBqOw0KICAgICAgZm9yIChqPTA7ajxBSU1fQ09OTl9NQVg7aisrKQ0KCXsN
CgkgIGlmICgoRkRfSVNTRVQoYWltX2Nvbm5zW2pdLmZkLCAmZXJyZmRzKSkp
DQoJICAgIHsNCgkgICAgICAvKiBnb3QgYW4gZXhjZXB0aW9uOyBjbG9zZSB3
aGF0cyBsZWZ0IG9mIGl0IHVwICovDQoJICAgICAgYWltX2Nvbm5fY2xvc2Uo
JihhaW1fY29ubnNbal0pKTsNCgkgICAgICByZXR1cm4gKHN0cnVjdCBhaW1f
Y29ubl90ICopLTE7DQoJICAgIH0NCgkgIGVsc2UgaWYgKChGRF9JU1NFVChh
aW1fY29ubnNbal0uZmQsICZmZHMpKSkNCgkgICAgcmV0dXJuICYoYWltX2Nv
bm5zW2pdKTsgIC8qIHJldHVybiB0aGUgZmlyc3Qgd2FpdGluZyBzdHJ1Y3Qg
Ki8NCgl9DQogICAgICAvKiBzaG91bGQgbmV2ZXIgZ2V0IGhlcmUgKi8NCiAg
ICB9DQogIGVsc2UNCiAgICByZXR1cm4gKHN0cnVjdCBhaW1fY29ubl90ICop
aTsgIC8qIG5vIHdhaXRpbmcgb3IgZXJyb3IsIHJldHVybiAtLSBGSVhNRTog
cmV0dXJuIHR5cGUgZnVubmllcyAqLw0KICByZXR1cm4gTlVMTDsgLyogTk8g
UkVBQ0ggKi8NCn0NCg0KaW50IGFpbV9jb25uX2lzcmVhZHkoc3RydWN0IGFp
bV9jb25uX3QgKmNvbm4pDQp7DQogIGlmIChjb25uKQ0KICAgIHJldHVybiAo
Y29ubi0+c3RhdHVzICYgMHgwMDAxKTsNCiAgZWxzZQ0KICAgIHJldHVybiAt
MTsNCn0NCg0KaW50IGFpbV9jb25uX3NldHN0YXR1cyhzdHJ1Y3QgYWltX2Nv
bm5fdCAqY29ubiwgaW50IHN0YXR1cykNCnsNCiAgaWYgKGNvbm4pDQogICAg
cmV0dXJuIChjb25uLT5zdGF0dXMgXj0gc3RhdHVzKTsNCiAgZWxzZQ0KICAg
IHJldHVybiAtMTsNCn0NCg0K
---1513193453-1315441997-932755927=:726--

]