<tt>
I&amp;#39;d&nbsp;rather&nbsp;see:&lt;br&gt;&lt;br&gt;&lt;span&nbsp;class=&quot;q&quot;&gt;&lt;/span&gt;&amp;lt;message&nbsp;to=&amp;#39;&lt;a&nbsp;href=&quot;http://mari@mus.se/work&quot;&gt;mari@mus.se/work&lt;/a&gt;&amp;#39;&nbsp;type=&amp;#39;chat&amp;#39;&amp;gt;&lt;br&gt;&amp;nbsp;&nbsp;&amp;lt;thread&amp;gt;ee2944c6&amp;lt;/thread&amp;gt;&lt;br&gt;&amp;nbsp;&nbsp;&amp;lt;x&nbsp;xmlns=&amp;#39;&lt;a&nbsp;href=&quot;http://jabber.org/protocol/svgwb&amp;#39;&quot;&gt;<br>
http://jabber.org/protocol/svgwb&amp;#39;&lt;/a&gt;&amp;gt;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;lt;image&nbsp;x=&amp;#39;32.0&amp;#39;&nbsp;y=&amp;#39;32.0&amp;#39;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;xlink:href=&amp;#39;&lt;a&nbsp;href=&quot;http://xmpp:mats@home.se/coci?sipub=pub0123&quot;&gt;xmpp:mats@home.se/coci?sipub=pub0123&lt;/a&gt;<br>
&amp;#39;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;id=&amp;#39;158229644&amp;#39;&nbsp;width=&amp;#39;128&amp;#39;&nbsp;height=&amp;#39;128&amp;#39;&amp;gt;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;lt;/image&amp;gt;&lt;br&gt;&amp;nbsp;&nbsp;&amp;lt;/x&amp;gt;&lt;br&gt;&amp;nbsp;&nbsp;&amp;lt;sipub&nbsp;xmlns=&amp;#39;&lt;a&nbsp;href=&quot;http://jabber.org/protocol/si-pub&quot;&gt;http://jabber.org/protocol/si-pub<br>
&lt;/a&gt;&amp;#39;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;id=&amp;#39;publish-0123&amp;#39;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;mime-type=&amp;#39;image/png&amp;#39;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;profile=&amp;#39;&lt;a&nbsp;href=&quot;http://jabber.org/protocol/si/profile/file-transfer&amp;#39;&quot;&gt;http://jabber.org/protocol/si/profile/file-transfer&amp;#39;<br>
&lt;/a&gt;&amp;gt;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;lt;file&nbsp;xmlns=&amp;#39;&lt;a&nbsp;href=&quot;http://jabber.org/protocol/si/profile/file-transfer&quot;&gt;http://jabber.org/protocol/si/profile/file-transfer&lt;/a&gt;&amp;#39;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;name=&amp;#39;blender.png&amp;#39;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;size=&amp;#39;12582&amp;#39;<br>
&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;date=&amp;#39;2004-01-28T10:07Z&amp;#39;&amp;gt;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;lt;desc&amp;gt;All&nbsp;Shakespearean&nbsp;characters&nbsp;must&nbsp;sign&nbsp;and&nbsp;return&nbsp;this&nbsp;NDA&nbsp;ASAP&amp;lt;/desc&amp;gt;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;lt;/file&amp;gt;&lt;br&gt;&amp;nbsp;&nbsp;&amp;lt;/sipub&amp;gt;&lt;br&gt;&amp;lt;/message&amp;gt;&lt;br&gt;&lt;br&gt;and&nbsp;then&nbsp;the&nbsp;start/starting/si&nbsp;as&nbsp;defined&nbsp;in&nbsp;the&nbsp;si-pub&nbsp;xep.<br>
&lt;br&gt;&lt;br&gt;Is&nbsp;there&nbsp;a&nbsp;particular&nbsp;reason&nbsp;to&nbsp;use&nbsp;sipub&nbsp;instead&nbsp;of&nbsp;start/starting?&lt;br&gt;&lt;br&gt;(Except&nbsp;for&nbsp;tying&nbsp;the&nbsp;sipub&nbsp;id&nbsp;to&nbsp;the&nbsp;si&nbsp;sid,&nbsp;which&nbsp;if&nbsp;you&nbsp;want&nbsp;to&nbsp;do,&nbsp;then&nbsp;let&amp;#39;s&nbsp;rather&nbsp;see&nbsp;if&nbsp;we&nbsp;can&nbsp;change&nbsp;the&nbsp;xep&nbsp;to&nbsp;ask&nbsp;for&nbsp;that,&nbsp;instead&nbsp;of&nbsp;creating&nbsp;brand&nbsp;new&nbsp;elements.&amp;nbsp;&nbsp;You&nbsp;should&nbsp;be&nbsp;able&nbsp;to&nbsp;track&nbsp;them&nbsp;via&nbsp;your&nbsp;iq&amp;#39;s&nbsp;id&nbsp;anyways).<br>
&lt;br&gt;&lt;br&gt;Norman&lt;br&gt;&lt;br&gt;&lt;div&gt;&lt;span&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;9/28/07,&nbsp;&lt;b&nbsp;class=&quot;gmail_sendername&quot;&gt;Mats&nbsp;Bengtsson&lt;/b&gt;&nbsp;&amp;lt;&lt;a&nbsp;href=&quot;mailto:matben@privat.utfors.se&quot;&gt;matben@privat.utfors.se&lt;/a&gt;&amp;gt;&nbsp;wrote:&lt;/span&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;border-left:&nbsp;1px&nbsp;solid&nbsp;rgb(204,&nbsp;204,&nbsp;204);&nbsp;margin:&nbsp;0pt&nbsp;0pt&nbsp;0pt&nbsp;0.8ex;&nbsp;padding-left:&nbsp;1ex;&quot;&gt;<br>
More&nbsp;thoughts:&lt;br&gt;&lt;br&gt;Somewhat&nbsp;based&nbsp;on&nbsp;XHTML&nbsp;Inband&nbsp;Images&lt;br&gt;&lt;a&nbsp;href=&quot;http://wiki.jabber.org/index.php/XHTML_Inband_Images&quot;&gt;http://wiki.jabber.org/index.php/XHTML_Inband_Images&lt;/a&gt;&lt;br&gt;I&nbsp;have&nbsp;come&nbsp;up&nbsp;with&nbsp;another&nbsp;suggestion.<br>
&lt;br&gt;&lt;br&gt;Define&nbsp;an&nbsp;URI&nbsp;form&nbsp;&lt;a&nbsp;href=&quot;http://xmpp:mats@home.se/coci?sipub=pub0123&quot;&gt;xmpp:mats@home.se/coci?sipub=pub0123&lt;/a&gt;&lt;br&gt;which&nbsp;defines&nbsp;a&nbsp;unique&nbsp;resource&nbsp;identifier&nbsp;to&nbsp;a&nbsp;file&nbsp;or&nbsp;other&nbsp;entity.&lt;br&gt;A&nbsp;client,&nbsp;the&nbsp;initiator,&nbsp;can&nbsp;include&nbsp;this&nbsp;in&nbsp;any&nbsp;appropriate&nbsp;place,<br>
&lt;br&gt;for&nbsp;instance,&nbsp;in&nbsp;a&nbsp;SVG&nbsp;image&nbsp;element&nbsp;(seen&nbsp;from&nbsp;the&nbsp;initiator&nbsp;side):&lt;br&gt;&lt;br&gt;SEND:&lt;br&gt;&amp;lt;message&nbsp;to=&amp;#39;&lt;a&nbsp;href=&quot;http://mari@mus.se/work&quot;&gt;mari@mus.se/work&lt;/a&gt;&amp;#39;&nbsp;type=&amp;#39;chat&amp;#39;&amp;gt;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;lt;thread&amp;gt;ee2944c6&amp;lt;/thread&amp;gt;<br>
&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;lt;x&nbsp;xmlns=&amp;#39;&lt;a&nbsp;href=&quot;http://jabber.org/protocol/svgwb&amp;#39;&quot;&gt;http://jabber.org/protocol/svgwb&amp;#39;&lt;/a&gt;&amp;gt;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;image&nbsp;x=&amp;#39;32.0&amp;#39;&nbsp;y=&amp;#39;32.0&amp;#39;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;xlink:href=&amp;#39;&lt;a&nbsp;href=&quot;http://xmpp:mats@home.se/coci?sipub=pub0123&quot;&gt;<br>
xmpp:mats@home.se/coci?sipub=pub0123&lt;/a&gt;&amp;#39;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;id=&amp;#39;158229644&amp;#39;&nbsp;width=&amp;#39;128&amp;#39;&nbsp;height=&amp;#39;128&amp;#39;&amp;gt;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;file&nbsp;xmlns=&amp;#39;&lt;a&nbsp;href=&quot;http://jabber.org/protocol/si/profile/file-transfer&quot;&gt;http://jabber.org/protocol/si/profile/file-transfer<br>
&lt;/a&gt;&amp;#39;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;name=&amp;#39;blender.png&amp;#39;&nbsp;size=&amp;#39;12582&amp;#39;/&amp;gt;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;/image&amp;gt;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;lt;/x&amp;gt;&lt;br&gt;&amp;lt;/message&amp;gt;&lt;br&gt;&lt;br&gt;The&nbsp;initiator&nbsp;then&nbsp;caches&nbsp;the&nbsp;mapping&nbsp;from&nbsp;the&nbsp;sipub&nbsp;identifier&nbsp;(pub0123)&lt;br&gt;to&nbsp;the&nbsp;actual&nbsp;file&nbsp;or&nbsp;entity.&nbsp;The&nbsp;target&nbsp;can&nbsp;then&nbsp;request&nbsp;this&nbsp;file&nbsp;using:<br>
&lt;br&gt;&lt;br&gt;RECV:&lt;br&gt;&amp;lt;iq&nbsp;type=&amp;#39;get&amp;#39;&nbsp;from=&amp;#39;&lt;a&nbsp;href=&quot;http://mari@mus.se/work&quot;&gt;mari@mus.se/work&lt;/a&gt;&amp;#39;&nbsp;to=&amp;#39;&lt;a&nbsp;href=&quot;http://mats@home.se/coci&quot;&gt;mats@home.se/coci&lt;/a&gt;&amp;#39;&nbsp;id=&amp;#39;3210&amp;#39;&amp;gt;&lt;br&gt;&amp;nbsp;&amp;nbsp;&nbsp;&amp;lt;sipub&nbsp;xmlns=&amp;#39;<br>
&lt;a&nbsp;href=&quot;http://jabber.org/protocol/si-pub&quot;&gt;http://jabber.org/protocol/si-pub&lt;/a&gt;&amp;#39;&nbsp;id=&amp;#39;pub0123&amp;#39;/&amp;gt;&lt;br&gt;&amp;lt;/iq&amp;gt;&lt;br&gt;&lt;br&gt;The&nbsp;initiator&nbsp;then&nbsp;looks&nbsp;up&nbsp;the&nbsp;second&nbsp;id&nbsp;here,&nbsp;the&nbsp;sipub&nbsp;id&nbsp;attribute,&lt;br&gt;and&nbsp;if&nbsp;it&nbsp;indeed&nbsp;has&nbsp;a&nbsp;file&nbsp;reference&nbsp;cached&nbsp;for&nbsp;this&nbsp;id,&nbsp;it&nbsp;initiates&nbsp;an<br>
&lt;br&gt;ordinary&nbsp;si-set/si&nbsp;query&nbsp;after&nbsp;sending&nbsp;a&nbsp;result:&lt;br&gt;&lt;br&gt;SEND:&lt;br&gt;&amp;lt;iq&nbsp;type=&amp;#39;result&amp;#39;&nbsp;to=&amp;#39;&lt;a&nbsp;href=&quot;http://mari@mus.se/work&quot;&gt;mari@mus.se/work&lt;/a&gt;&amp;#39;&nbsp;id=&amp;#39;3210&amp;#39;&amp;gt;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;lt;sipub&nbsp;xmlns=&amp;#39;&lt;a&nbsp;href=&quot;http://jabber.org/protocol/si-pub&quot;&gt;<br>
http://jabber.org/protocol/si-pub&lt;/a&gt;&amp;#39;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;id=&amp;#39;pub0123&amp;#39;&nbsp;sid=&amp;#39;3c803c10-6983032b&amp;#39;/&amp;gt;&lt;br&gt;&amp;lt;/iq&amp;gt;&lt;br&gt;&lt;br&gt;Note&nbsp;that&nbsp;a&nbsp;sid&nbsp;attribute&nbsp;MUST&nbsp;be&nbsp;included&nbsp;which&nbsp;references&nbsp;the&nbsp;si&nbsp;id&nbsp;attribute&lt;br&gt;to&nbsp;expect&nbsp;when&nbsp;the&nbsp;target&nbsp;receives&nbsp;the&nbsp;iq-set/si&nbsp;query.&nbsp;The&nbsp;target&nbsp;must&nbsp;be&nbsp;sure<br>
&lt;br&gt;to&nbsp;understand&nbsp;that&nbsp;when&nbsp;it&nbsp;gets&nbsp;the&nbsp;corresponding&nbsp;iq-set/si&nbsp;it&nbsp;must&nbsp;not&lt;br&gt;be&nbsp;handled&nbsp;as&nbsp;an&nbsp;ordinary&nbsp;user&nbsp;initiated&nbsp;file&nbsp;transfer.&lt;br&gt;&lt;br&gt;Everything&nbsp;continues&nbsp;unchanged&nbsp;from&nbsp;existing&nbsp;Stream&nbsp;Initiation.&nbsp;If&nbsp;the&nbsp;initiator<br>
&lt;br&gt;can&amp;#39;t&nbsp;find&nbsp;the&nbsp;sipub&nbsp;id&nbsp;reference&nbsp;it&nbsp;answers&nbsp;with&nbsp;an&nbsp;error&nbsp;as&nbsp;usual.&lt;br&gt;Note&nbsp;that&nbsp;this&nbsp;XMPP&nbsp;URI&nbsp;is&nbsp;persistant&nbsp;since&nbsp;each&nbsp;request&nbsp;for&nbsp;it&nbsp;generates&lt;br&gt;a&nbsp;new&nbsp;si&nbsp;stream.&nbsp;The&nbsp;si&nbsp;streams&nbsp;are,&nbsp;of&nbsp;course,&nbsp;not&nbsp;persistant,&nbsp;but&nbsp;the<br>
&lt;br&gt;reference&nbsp;from&nbsp;the&nbsp;sipub&nbsp;identifier&nbsp;to&nbsp;the&nbsp;actual&nbsp;file&nbsp;or&nbsp;entity&nbsp;is.&lt;br&gt;It&nbsp;is&nbsp;up&nbsp;to&nbsp;the&nbsp;initiating&nbsp;entity&nbsp;to&nbsp;decide&nbsp;on&nbsp;the&nbsp;lifetime&nbsp;of&nbsp;this&nbsp;relation.&lt;br&gt;&lt;br&gt;There&nbsp;is&nbsp;a&nbsp;slightly&nbsp;alternative&nbsp;solution.&nbsp;The&nbsp;initiators&nbsp;iq-set/si&nbsp;must&nbsp;be<br>
&lt;br&gt;handled&nbsp;in&nbsp;the&nbsp;context&nbsp;of&nbsp;the&nbsp;original&nbsp;XMPP&nbsp;URI&nbsp;which&nbsp;the&nbsp;iq-set/si&nbsp;element&lt;br&gt;doesn&amp;#39;t&nbsp;say&nbsp;anything&nbsp;about.&nbsp;It&nbsp;can&nbsp;therefore&nbsp;be&nbsp;mistaken&nbsp;as&nbsp;an&nbsp;ordinary&lt;br&gt;user&nbsp;initiated&nbsp;file&nbsp;transfer.&nbsp;Instead&nbsp;we&nbsp;could&nbsp;switch&nbsp;the&lt;br&gt;<br>
&lt;br&gt;&amp;lt;si&nbsp;xmlns=&amp;#39;&lt;a&nbsp;href=&quot;http://jabber.org/protocol/si&quot;&gt;http://jabber.org/protocol/si&lt;/a&gt;&amp;#39;&nbsp;...&lt;br&gt;&lt;br&gt;into&lt;br&gt;&lt;br&gt;&amp;lt;sipub&nbsp;xmlns=&amp;#39;&lt;a&nbsp;href=&quot;http://jabber.org/protocol/si-pub&quot;&gt;http://jabber.org/protocol/si-pub<br>
&lt;/a&gt;&amp;#39;&nbsp;...&lt;br&gt;&lt;br&gt;in&nbsp;all&nbsp;places.&nbsp;I&nbsp;have&nbsp;some&nbsp;doubts&nbsp;about&nbsp;this,&nbsp;though.&nbsp;It&nbsp;complicates&nbsp;the&lt;br&gt;life&nbsp;of&nbsp;a&nbsp;client&nbsp;developer.&lt;br&gt;&lt;br&gt;/Mats&lt;br&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;&lt;br&nbsp;clear=&quot;all&quot;&gt;&lt;br&gt;--&nbsp;&lt;br&gt;-&nbsp;Norman&nbsp;Rasmussen&lt;br&gt;&nbsp;-&nbsp;Email:&nbsp;<br>
&lt;a&nbsp;href=&quot;mailto:norman@rasmussen.co.za&quot;&gt;norman@rasmussen.co.za&lt;/a&gt;&lt;br&gt;&nbsp;-&nbsp;Home&nbsp;page:&nbsp;&lt;a&nbsp;href=&quot;http://norman.rasmussen.co.za/&quot;&gt;http://norman.rasmussen.co.za/&lt;/a&gt;<br>

</tt>
