<tt>
&lt;HTML&gt;&lt;BODY&nbsp;style=&quot;word-wrap:&nbsp;break-word;&nbsp;-khtml-nbsp-mode:&nbsp;space;&nbsp;-khtml-line-break:&nbsp;after-white-space;&nbsp;&quot;&gt;No,&nbsp;the&nbsp;problem&nbsp;is&nbsp;as&nbsp;follows.&nbsp;I&nbsp;want&nbsp;to&nbsp;get&nbsp;all&nbsp;my&nbsp;available&nbsp;contacts.&nbsp;To&nbsp;do&nbsp;so&nbsp;I&nbsp;send&nbsp;&amp;lt;presence&nbsp;/&amp;gt;&nbsp;stanza.&nbsp;The&nbsp;problem&nbsp;is&nbsp;that&nbsp;the&nbsp;script&nbsp;will&nbsp;hang&nbsp;here&nbsp;because&nbsp;there&nbsp;will&nbsp;be&nbsp;no&nbsp;reply&nbsp;from&nbsp;server&nbsp;if&nbsp;there&nbsp;are&nbsp;no&nbsp;users&nbsp;sharing&nbsp;there&nbsp;presence&nbsp;with&nbsp;me.&nbsp;In&nbsp;a&nbsp;few&nbsp;words&nbsp;I&nbsp;send&nbsp;a&nbsp;presence&nbsp;stanza&nbsp;and&nbsp;waiting&nbsp;for&nbsp;a&nbsp;reply&nbsp;which&nbsp;will&nbsp;never&nbsp;arrive&nbsp;because&nbsp;there&nbsp;are&nbsp;no&nbsp;contacts.&nbsp;As&nbsp;far&nbsp;as&nbsp;I&nbsp;understand&nbsp;PHP&nbsp;doesn't&nbsp;not&nbsp;support&nbsp;non-blocking&nbsp;SSL&nbsp;streams. &lt;DIV&gt;Is&nbsp;there&nbsp;a&nbsp;way&nbsp;that&nbsp;my&nbsp;presence&nbsp;will&nbsp;always&nbsp;return&nbsp;something&nbsp;or&nbsp;do&nbsp;I&nbsp;have&nbsp;to&nbsp;write&nbsp;everything&nbsp;in&nbsp;events&nbsp;and&nbsp;there&nbsp;is&nbsp;no&nbsp;other&nbsp;way?&lt;/DIV&gt;&lt;DIV&gt;&lt;BR&nbsp;class=&quot;khtml-block-placeholder&quot;&gt;&lt;/DIV&gt;&lt;DIV&gt;thanks,&lt;/DIV&gt;&lt;DIV&gt;Sergej&lt;BR&gt;&lt;DIV&gt;&lt;BR&gt;&lt;DIV&gt;Begin&nbsp;forwarded&nbsp;message:&lt;/DIV&gt;&lt;BR&nbsp;class=&quot;Apple-interchange-newline&quot;&gt;&lt;BLOCKQUOTE&nbsp;type=&quot;cite&quot;&gt;&lt;DIV&nbsp;style=&quot;margin-top:&nbsp;0px;&nbsp;margin-right:&nbsp;0px;&nbsp;margin-bottom:&nbsp;0px;&nbsp;margin-left:&nbsp;0px;&nbsp;&quot;&gt;&lt;FONT&nbsp;face=&quot;Helvetica&quot;&nbsp;size=&quot;3&quot;&nbsp;color=&quot;#000000&quot;&nbsp;style=&quot;font:&nbsp;12.0px&nbsp;Helvetica;&nbsp;color:&nbsp;#000000&quot;&gt;&lt;B&gt;From:&nbsp;&lt;/B&gt;&lt;/FONT&gt;&lt;FONT&nbsp;face=&quot;Helvetica&quot;&nbsp;size=&quot;3&quot;&nbsp;style=&quot;font:&nbsp;12.0px&nbsp;Helvetica&quot;&gt;&quot;Norman&nbsp;Rasmussen&quot;&nbsp;&amp;lt;&lt;A&nbsp;href=&quot;mailto:norman@rasmussen.co.za&quot;&gt;norman@rasmussen.co.za&lt;/A&gt;&amp;gt;&lt;/FONT&gt;&lt;/DIV&gt;&lt;DIV&nbsp;style=&quot;margin-top:&nbsp;0px;&nbsp;margin-right:&nbsp;0px;&nbsp;margin-bottom:&nbsp;0px;&nbsp;margin-left:&nbsp;0px;&nbsp;&quot;&gt;&lt;FONT&nbsp;face=&quot;Helvetica&quot;&nbsp;size=&quot;3&quot;&nbsp;color=&quot;#000000&quot;&nbsp;style=&quot;font:&nbsp;12.0px&nbsp;Helvetica;&nbsp;color:&nbsp;#000000&quot;&gt;&lt;B&gt;Date:&nbsp;&lt;/B&gt;&lt;/FONT&gt;&lt;FONT&nbsp;face=&quot;Helvetica&quot;&nbsp;size=&quot;3&quot;&nbsp;style=&quot;font:&nbsp;12.0px&nbsp;Helvetica&quot;&gt;April&nbsp;20,&nbsp;2007&nbsp;11:15:13&nbsp;AM&nbsp;GMT+03:00&lt;/FONT&gt;&lt;/DIV&gt;&lt;DIV&nbsp;style=&quot;margin-top:&nbsp;0px;&nbsp;margin-right:&nbsp;0px;&nbsp;margin-bottom:&nbsp;0px;&nbsp;margin-left:&nbsp;0px;&nbsp;&quot;&gt;&lt;FONT&nbsp;face=&quot;Helvetica&quot;&nbsp;size=&quot;3&quot;&nbsp;color=&quot;#000000&quot;&nbsp;style=&quot;font:&nbsp;12.0px&nbsp;Helvetica;&nbsp;color:&nbsp;#000000&quot;&gt;&lt;B&gt;To:&nbsp;&lt;/B&gt;&lt;/FONT&gt;&lt;FONT&nbsp;face=&quot;Helvetica&quot;&nbsp;size=&quot;3&quot;&nbsp;style=&quot;font:&nbsp;12.0px&nbsp;Helvetica&quot;&gt;&quot;Jabber&nbsp;software&nbsp;development&nbsp;list&quot;&nbsp;&amp;lt;&lt;A&nbsp;href=&quot;mailto:jdev@jabber.org&quot;&gt;jdev@jabber.org&lt;/A&gt;&amp;gt;&lt;/FONT&gt;&lt;/DIV&gt;&lt;DIV&nbsp;style=&quot;margin-top:&nbsp;0px;&nbsp;margin-right:&nbsp;0px;&nbsp;margin-bottom:&nbsp;0px;&nbsp;margin-left:&nbsp;0px;&nbsp;&quot;&gt;&lt;FONT&nbsp;face=&quot;Helvetica&quot;&nbsp;size=&quot;3&quot;&nbsp;color=&quot;#000000&quot;&nbsp;style=&quot;font:&nbsp;12.0px&nbsp;Helvetica;&nbsp;color:&nbsp;#000000&quot;&gt;&lt;B&gt;Subject:&nbsp;&lt;/B&gt;&lt;/FONT&gt;&lt;FONT&nbsp;face=&quot;Helvetica&quot;&nbsp;size=&quot;3&quot;&nbsp;style=&quot;font:&nbsp;12.0px&nbsp;Helvetica&quot;&gt;&lt;B&gt;Re:&nbsp;[jdev]&nbsp;Is&nbsp;there&nbsp;any&nbsp;way&nbsp;to&nbsp;make&nbsp;sure&nbsp;that&nbsp;there&nbsp;will&nbsp;be&nbsp;a&nbsp;response&nbsp;to&nbsp;presence&nbsp;stanza&lt;/B&gt;&lt;/FONT&gt;&lt;/DIV&gt;&lt;DIV&nbsp;style=&quot;margin-top:&nbsp;0px;&nbsp;margin-right:&nbsp;0px;&nbsp;margin-bottom:&nbsp;0px;&nbsp;margin-left:&nbsp;0px;&nbsp;&quot;&gt;&lt;FONT&nbsp;face=&quot;Helvetica&quot;&nbsp;size=&quot;3&quot;&nbsp;color=&quot;#000000&quot;&nbsp;style=&quot;font:&nbsp;12.0px&nbsp;Helvetica;&nbsp;color:&nbsp;#000000&quot;&gt;&lt;B&gt;Reply-To:&nbsp;&lt;/B&gt;&lt;/FONT&gt;&lt;FONT&nbsp;face=&quot;Helvetica&quot;&nbsp;size=&quot;3&quot;&nbsp;style=&quot;font:&nbsp;12.0px&nbsp;Helvetica&quot;&gt;Jabber&nbsp;software&nbsp;development&nbsp;list&nbsp;&amp;lt;&lt;A&nbsp;href=&quot;mailto:jdev@jabber.org&quot;&gt;jdev@jabber.org&lt;/A&gt;&amp;gt;&lt;/FONT&gt;&lt;/DIV&gt;&lt;DIV&nbsp;style=&quot;margin-top:&nbsp;0px;&nbsp;margin-right:&nbsp;0px;&nbsp;margin-bottom:&nbsp;0px;&nbsp;margin-left:&nbsp;0px;&nbsp;min-height:&nbsp;14px;&nbsp;&quot;&gt;&lt;BR&gt;&lt;/DIV&gt;&nbsp;&lt;DIV&nbsp;style=&quot;margin-top:&nbsp;0px;&nbsp;margin-right:&nbsp;0px;&nbsp;margin-bottom:&nbsp;0px;&nbsp;margin-left:&nbsp;0px;&nbsp;&quot;&gt;On&nbsp;4/20/07,&nbsp;Sergej&nbsp;Andrejev&nbsp;&amp;lt;&lt;A&nbsp;href=&quot;mailto:sandrejev@gmail.com&quot;&gt;sandrejev@gmail.com&lt;/A&gt;&amp;gt;&nbsp;wrote:&lt;/DIV&gt;&nbsp;&lt;BLOCKQUOTE&nbsp;type=&quot;cite&quot;&gt;&lt;DIV&nbsp;style=&quot;margin-top:&nbsp;0px;&nbsp;margin-right:&nbsp;0px;&nbsp;margin-bottom:&nbsp;0px;&nbsp;margin-left:&nbsp;0px;&nbsp;&quot;&gt;I'm&nbsp;writing&nbsp;a&nbsp;PHP&nbsp;jabber/xmpp&nbsp;library.&nbsp;So&nbsp;far&nbsp;I&nbsp;can&nbsp;connect&nbsp;and&nbsp;do&lt;/DIV&gt;&lt;DIV&nbsp;style=&quot;margin-top:&nbsp;0px;&nbsp;margin-right:&nbsp;0px;&nbsp;margin-bottom:&nbsp;0px;&nbsp;margin-left:&nbsp;0px;&nbsp;&quot;&gt;basic&nbsp;actions,&nbsp;but&nbsp;there&nbsp;is&nbsp;one&nbsp;problem.&nbsp;PHP&nbsp;cannot&nbsp;use&nbsp;unblocking&lt;/DIV&gt;&lt;DIV&nbsp;style=&quot;margin-top:&nbsp;0px;&nbsp;margin-right:&nbsp;0px;&nbsp;margin-bottom:&nbsp;0px;&nbsp;margin-left:&nbsp;0px;&nbsp;&quot;&gt;stream&nbsp;when&nbsp;working&nbsp;with&nbsp;SSL.&nbsp;That&nbsp;means&nbsp;when&nbsp;I&nbsp;am&nbsp;sending&nbsp;stanza&nbsp;I&lt;/DIV&gt;&lt;DIV&nbsp;style=&quot;margin-top:&nbsp;0px;&nbsp;margin-right:&nbsp;0px;&nbsp;margin-bottom:&nbsp;0px;&nbsp;margin-left:&nbsp;0px;&nbsp;&quot;&gt;must&nbsp;decide&nbsp;whether&nbsp;to&nbsp;wait&nbsp;for&nbsp;a&nbsp;response&nbsp;or&nbsp;not.&nbsp;For&nbsp;example&nbsp;when&lt;/DIV&gt;&lt;DIV&nbsp;style=&quot;margin-top:&nbsp;0px;&nbsp;margin-right:&nbsp;0px;&nbsp;margin-bottom:&nbsp;0px;&nbsp;margin-left:&nbsp;0px;&nbsp;&quot;&gt;sending&nbsp;a&nbsp;&amp;lt;message&nbsp;/&amp;gt;&nbsp;I&nbsp;am&nbsp;not&nbsp;waiting&nbsp;for&nbsp;response,&nbsp;but&nbsp;when&nbsp;sending&lt;/DIV&gt;&lt;DIV&nbsp;style=&quot;margin-top:&nbsp;0px;&nbsp;margin-right:&nbsp;0px;&nbsp;margin-bottom:&nbsp;0px;&nbsp;margin-left:&nbsp;0px;&nbsp;&quot;&gt;&amp;lt;iq&nbsp;/&amp;gt;&nbsp;I&nbsp;do.&nbsp;Now&nbsp;when&nbsp;sending&nbsp;&amp;lt;presence&nbsp;/&amp;gt;&nbsp;I&nbsp;am&nbsp;not&nbsp;really&nbsp;sure&nbsp;about&lt;/DIV&gt;&lt;DIV&nbsp;style=&quot;margin-top:&nbsp;0px;&nbsp;margin-right:&nbsp;0px;&nbsp;margin-bottom:&nbsp;0px;&nbsp;margin-left:&nbsp;0px;&nbsp;&quot;&gt;the&nbsp;response&nbsp;and&nbsp;whether&nbsp;it&nbsp;will&nbsp;arrive&nbsp;or&nbsp;not.&nbsp;So&nbsp;if&nbsp;it&nbsp;arrives&lt;/DIV&gt;&lt;DIV&nbsp;style=&quot;margin-top:&nbsp;0px;&nbsp;margin-right:&nbsp;0px;&nbsp;margin-bottom:&nbsp;0px;&nbsp;margin-left:&nbsp;0px;&nbsp;&quot;&gt;everything&nbsp;is&nbsp;fine,&nbsp;but&nbsp;when&nbsp;not&nbsp;my&nbsp;script&nbsp;just&nbsp;hangs&nbsp;there&nbsp;waiting&lt;/DIV&gt;&lt;DIV&nbsp;style=&quot;margin-top:&nbsp;0px;&nbsp;margin-right:&nbsp;0px;&nbsp;margin-bottom:&nbsp;0px;&nbsp;margin-left:&nbsp;0px;&nbsp;&quot;&gt;for&nbsp;response.&nbsp;So&nbsp;what&nbsp;I&nbsp;am&nbsp;asking&nbsp;is&nbsp;that&nbsp;is&nbsp;there&nbsp;any&nbsp;type&nbsp;of&lt;/DIV&gt;&lt;DIV&nbsp;style=&quot;margin-top:&nbsp;0px;&nbsp;margin-right:&nbsp;0px;&nbsp;margin-bottom:&nbsp;0px;&nbsp;margin-left:&nbsp;0px;&nbsp;&quot;&gt;&amp;lt;presence&nbsp;/&amp;gt;&nbsp;which&nbsp;will&nbsp;100%&nbsp;return&nbsp;some&nbsp;data&nbsp;(and&nbsp;contacts,&nbsp;if&nbsp;there&lt;/DIV&gt;&lt;DIV&nbsp;style=&quot;margin-top:&nbsp;0px;&nbsp;margin-right:&nbsp;0px;&nbsp;margin-bottom:&nbsp;0px;&nbsp;margin-left:&nbsp;0px;&nbsp;&quot;&gt;are&nbsp;some)&lt;/DIV&gt;&nbsp;&lt;/BLOCKQUOTE&gt;&lt;DIV&nbsp;style=&quot;margin-top:&nbsp;0px;&nbsp;margin-right:&nbsp;0px;&nbsp;margin-bottom:&nbsp;0px;&nbsp;margin-left:&nbsp;0px;&nbsp;min-height:&nbsp;14px;&nbsp;&quot;&gt;&lt;BR&gt;&lt;/DIV&gt;&lt;DIV&nbsp;style=&quot;margin-top:&nbsp;0px;&nbsp;margin-right:&nbsp;0px;&nbsp;margin-bottom:&nbsp;0px;&nbsp;margin-left:&nbsp;0px;&nbsp;&quot;&gt;The&nbsp;'standard'&nbsp;way&nbsp;of&nbsp;writing&nbsp;xmpp&nbsp;apps,&nbsp;is&nbsp;there's&nbsp;normally&nbsp;a&nbsp;central&lt;/DIV&gt;&lt;DIV&nbsp;style=&quot;margin-top:&nbsp;0px;&nbsp;margin-right:&nbsp;0px;&nbsp;margin-bottom:&nbsp;0px;&nbsp;margin-left:&nbsp;0px;&nbsp;&quot;&gt;loop&nbsp;somewhere&nbsp;that&nbsp;does&nbsp;the&nbsp;blocking&nbsp;receive&nbsp;and&nbsp;then&nbsp;the&nbsp;stanza&nbsp;is&lt;/DIV&gt;&lt;DIV&nbsp;style=&quot;margin-top:&nbsp;0px;&nbsp;margin-right:&nbsp;0px;&nbsp;margin-bottom:&nbsp;0px;&nbsp;margin-left:&nbsp;0px;&nbsp;&quot;&gt;dispatched&nbsp;to&nbsp;a&nbsp;set&nbsp;of&nbsp;event&nbsp;handlers.&lt;SPAN&nbsp;class=&quot;Apple-converted-space&quot;&gt; &nbsp;&lt;/SPAN&gt;Most&nbsp;frameworks&nbsp;offer&nbsp;the&lt;/DIV&gt;&lt;DIV&nbsp;style=&quot;margin-top:&nbsp;0px;&nbsp;margin-right:&nbsp;0px;&nbsp;margin-bottom:&nbsp;0px;&nbsp;margin-left:&nbsp;0px;&nbsp;&quot;&gt;ability&nbsp;to&nbsp;send&nbsp;a&nbsp;stanza&nbsp;and&nbsp;ask&nbsp;for&nbsp;your&nbsp;callback&nbsp;function&nbsp;to&nbsp;be&lt;/DIV&gt;&lt;DIV&nbsp;style=&quot;margin-top:&nbsp;0px;&nbsp;margin-right:&nbsp;0px;&nbsp;margin-bottom:&nbsp;0px;&nbsp;margin-left:&nbsp;0px;&nbsp;&quot;&gt;executed&nbsp;when&nbsp;you&nbsp;receive&nbsp;a&nbsp;reply&nbsp;with&nbsp;the&nbsp;same&nbsp;id.&lt;SPAN&nbsp;class=&quot;Apple-converted-space&quot;&gt; &nbsp;&lt;/SPAN&gt;(The&nbsp;'pending'&lt;/DIV&gt;&lt;DIV&nbsp;style=&quot;margin-top:&nbsp;0px;&nbsp;margin-right:&nbsp;0px;&nbsp;margin-bottom:&nbsp;0px;&nbsp;margin-left:&nbsp;0px;&nbsp;&quot;&gt;call&nbsp;goes&nbsp;into&nbsp;a&nbsp;list&nbsp;which&nbsp;is&nbsp;check&nbsp;when&nbsp;incoming&nbsp;stanzas&nbsp;are&lt;/DIV&gt;&lt;DIV&nbsp;style=&quot;margin-top:&nbsp;0px;&nbsp;margin-right:&nbsp;0px;&nbsp;margin-bottom:&nbsp;0px;&nbsp;margin-left:&nbsp;0px;&nbsp;&quot;&gt;received,&nbsp;if&nbsp;the&nbsp;id's&nbsp;match&nbsp;then&nbsp;the&nbsp;callback&nbsp;method&nbsp;is&nbsp;executed)&lt;/DIV&gt;&lt;DIV&nbsp;style=&quot;margin-top:&nbsp;0px;&nbsp;margin-right:&nbsp;0px;&nbsp;margin-bottom:&nbsp;0px;&nbsp;margin-left:&nbsp;0px;&nbsp;min-height:&nbsp;14px;&nbsp;&quot;&gt;&lt;BR&gt;&lt;/DIV&gt;&lt;DIV&nbsp;style=&quot;margin-top:&nbsp;0px;&nbsp;margin-right:&nbsp;0px;&nbsp;margin-bottom:&nbsp;0px;&nbsp;margin-left:&nbsp;0px;&nbsp;&quot;&gt;--&lt;SPAN&nbsp;class=&quot;Apple-converted-space&quot;&gt; &lt;/SPAN&gt;&lt;/DIV&gt;&lt;DIV&nbsp;style=&quot;margin-top:&nbsp;0px;&nbsp;margin-right:&nbsp;0px;&nbsp;margin-bottom:&nbsp;0px;&nbsp;margin-left:&nbsp;0px;&nbsp;&quot;&gt;-&nbsp;Norman&nbsp;Rasmussen&lt;/DIV&gt;&lt;DIV&nbsp;style=&quot;margin-top:&nbsp;0px;&nbsp;margin-right:&nbsp;0px;&nbsp;margin-bottom:&nbsp;0px;&nbsp;margin-left:&nbsp;0px;&nbsp;&quot;&gt;-&nbsp;Email:&nbsp;&lt;A&nbsp;href=&quot;mailto:norman@rasmussen.co.za&quot;&gt;norman@rasmussen.co.za&lt;/A&gt;&lt;/DIV&gt;&lt;DIV&nbsp;style=&quot;margin-top:&nbsp;0px;&nbsp;margin-right:&nbsp;0px;&nbsp;margin-bottom:&nbsp;0px;&nbsp;margin-left:&nbsp;0px;&nbsp;&quot;&gt;-&nbsp;Home&nbsp;page:&nbsp;&lt;A&nbsp;href=&quot;http://norman.rasmussen.co.za&quot;&gt;http://norman.rasmussen.co.za&lt;/A&gt;/&lt;/DIV&gt;&nbsp;&lt;/BLOCKQUOTE&gt;&lt;/DIV&gt;&lt;BR&gt;&lt;/DIV&gt;&lt;/BODY&gt;&lt;/HTML&gt;
</tt>
