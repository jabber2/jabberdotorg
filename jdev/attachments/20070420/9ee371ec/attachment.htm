<tt>
I&nbsp;don&amp;#39;t&nbsp;see&nbsp;this&nbsp;as&nbsp;being&nbsp;the&nbsp;client&amp;#39;s&nbsp;job.&amp;nbsp;&nbsp;Perhaps&nbsp;the&nbsp;protocol&nbsp;could&nbsp;be&nbsp;changed&nbsp;to&nbsp;either&nbsp;make&nbsp;more&nbsp;assumptions&nbsp;such&nbsp;as&nbsp;&amp;quot;if&nbsp;the&nbsp;s2s&nbsp;connection&nbsp;is&nbsp;closed&nbsp;unexpectedly,&nbsp;then&nbsp;the&nbsp;server&nbsp;SHOULD&nbsp;consider&nbsp;all&nbsp;jids&nbsp;connected&nbsp;to&nbsp;it&nbsp;as&nbsp;offline&amp;quot;&nbsp;and&nbsp;perhaps&nbsp;even&nbsp;the&nbsp;suggestion&nbsp;of&nbsp;&amp;quot;If&nbsp;an&nbsp;available&nbsp;jid&nbsp;has&nbsp;not&nbsp;sent&nbsp;any&nbsp;presence&nbsp;updates&nbsp;in&nbsp;an&nbsp;hour,&nbsp;the&nbsp;server&nbsp;SHOULD&nbsp;probe&nbsp;for&nbsp;an&nbsp;update.&amp;quot;&nbsp;The&nbsp;protocol&nbsp;provides&nbsp;methods&nbsp;to&nbsp;solve&nbsp;this&nbsp;problem&nbsp;on&nbsp;the&nbsp;server&nbsp;end.&amp;nbsp;&nbsp;I&nbsp;don&amp;#39;t&nbsp;believe&nbsp;that&nbsp;the&nbsp;client&nbsp;should&nbsp;take&nbsp;it&nbsp;upon&nbsp;itself&nbsp;to&nbsp;nag&nbsp;about&nbsp;presence,&nbsp;as&nbsp;presence&nbsp;is&nbsp;high&nbsp;traffic&nbsp;enough&nbsp;as&nbsp;it&nbsp;is.<br>
&lt;br&gt;&lt;br&gt;The&nbsp;problem&nbsp;boils&nbsp;down&nbsp;to&nbsp;s2s&nbsp;not&nbsp;having&nbsp;specific&nbsp;recommendations&nbsp;on&nbsp;what&nbsp;to&nbsp;assume&nbsp;about&nbsp;presence,&nbsp;nor&nbsp;what&nbsp;to&nbsp;do&nbsp;when&nbsp;there&nbsp;are&nbsp;connectivity&nbsp;issues.&lt;br&gt;&lt;br&gt;&lt;div&gt;&lt;span&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;4/20/07,&nbsp;&lt;b&nbsp;class=&quot;gmail_sendername&quot;&gt;<br>
Robin&nbsp;Redeker&lt;/b&gt;&nbsp;&amp;lt;&lt;a&nbsp;href=&quot;mailto:elmex@x-paste.de&quot;&gt;elmex@x-paste.de&lt;/a&gt;&amp;gt;&nbsp;wrote:&lt;/span&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;border-left:&nbsp;1px&nbsp;solid&nbsp;rgb(204,&nbsp;204,&nbsp;204);&nbsp;margin:&nbsp;0pt&nbsp;0pt&nbsp;0pt&nbsp;0.8ex;&nbsp;padding-left:&nbsp;1ex;&quot;&gt;<br>
On&nbsp;Sat,&nbsp;Apr&nbsp;21,&nbsp;2007&nbsp;at&nbsp;04:38:02AM&nbsp;+1000,&nbsp;Bruce&nbsp;Campbell&nbsp;wrote:&lt;br&gt;&amp;gt;&lt;br&gt;&amp;gt;&nbsp;This&nbsp;more&nbsp;of&nbsp;a&nbsp;&amp;#39;what&nbsp;are&nbsp;people&nbsp;doing&nbsp;now&amp;#39;&nbsp;question,&nbsp;not&nbsp;a&nbsp;&amp;#39;what&nbsp;should&lt;br&gt;&amp;gt;&nbsp;the&nbsp;implementations&nbsp;be&nbsp;doing&amp;#39;.&lt;br&gt;&amp;gt;&lt;br&gt;&amp;gt;&nbsp;Lets&nbsp;say&nbsp;that&nbsp;my&nbsp;Jabber&nbsp;client&nbsp;has&nbsp;an&nbsp;avid&nbsp;desire&nbsp;to&nbsp;know&nbsp;the&nbsp;accurate<br>
&lt;br&gt;&amp;gt;&nbsp;online&nbsp;status&nbsp;of&nbsp;remote&nbsp;JIDs,&nbsp;and&nbsp;the&nbsp;roster&nbsp;subscriptions&nbsp;are&nbsp;&amp;#39;both&amp;#39;.&lt;br&gt;&lt;br&gt;I&nbsp;don&amp;#39;t&nbsp;think&nbsp;there&nbsp;is&nbsp;anything&nbsp;wrong&nbsp;or&nbsp;weird&nbsp;with&nbsp;that&nbsp;desire&nbsp;:-)&lt;br&gt;It&nbsp;seems&nbsp;to&nbsp;me&nbsp;that&nbsp;this&nbsp;is&nbsp;what&nbsp;XMPP&nbsp;(Extensible&nbsp;Messaging&nbsp;and&nbsp;&amp;gt;Presence&amp;lt;&nbsp;Protocol)<br>
&lt;br&gt;was&nbsp;invented&nbsp;for...&lt;br&gt;&lt;br&gt;If&nbsp;it&nbsp;is&nbsp;not&nbsp;possible&nbsp;to&nbsp;know&nbsp;a&nbsp;mostly&nbsp;accurate&nbsp;status&nbsp;if&nbsp;anything&nbsp;unexpected&lt;br&gt;happens&nbsp;(even&nbsp;if&nbsp;the&nbsp;TCP&nbsp;connection&nbsp;breaks&nbsp;I&nbsp;at&nbsp;least&nbsp;know&nbsp;that&lt;br&gt;I&nbsp;don&amp;#39;t&nbsp;know&nbsp;the&nbsp;presence&nbsp;state),&nbsp;then&nbsp;there&nbsp;is&nbsp;something&nbsp;deeply&nbsp;broken&nbsp;:-)<br>
&lt;br&gt;&lt;br&gt;&amp;gt;&nbsp;To&nbsp;that&nbsp;end,&nbsp;my&nbsp;client&nbsp;makes&nbsp;the&nbsp;assumption&nbsp;that&nbsp;if&nbsp;no&nbsp;update&nbsp;to&nbsp;the&nbsp;status&lt;br&gt;&amp;gt;&nbsp;has&nbsp;been&nbsp;received&nbsp;in&nbsp;an&nbsp;hour,&nbsp;then&nbsp;something&nbsp;has&nbsp;possibly&nbsp;happened&nbsp;to&nbsp;the&lt;br&gt;&amp;gt;&nbsp;remote&nbsp;JID&nbsp;that&nbsp;hasn&amp;#39;t&nbsp;been&nbsp;properly&nbsp;pushed&nbsp;to&nbsp;my&nbsp;client&nbsp;(remote&nbsp;server<br>
&lt;br&gt;&amp;gt;&nbsp;restart&nbsp;normally&nbsp;).&lt;br&gt;&amp;gt;&lt;br&gt;&amp;gt;&nbsp;How&nbsp;should&nbsp;my&nbsp;Jabber&nbsp;_client_&nbsp;get&nbsp;the&nbsp;latest&nbsp;news&nbsp;about&nbsp;the&nbsp;remote&nbsp;JID?&lt;br&gt;&lt;br&gt;That&nbsp;is&nbsp;an&nbsp;interesting&nbsp;problem.&nbsp;I&amp;#39;m&nbsp;currently&nbsp;also&nbsp;writing&nbsp;a&nbsp;client&lt;br&gt;but&nbsp;I&nbsp;haven&amp;#39;t&nbsp;thought&nbsp;of&nbsp;that&nbsp;problem&nbsp;yet.&nbsp;If&nbsp;the&nbsp;remote&nbsp;server&nbsp;reboots<br>
&lt;br&gt;noone&nbsp;will&nbsp;be&nbsp;noticed&nbsp;of&nbsp;any&nbsp;presence&nbsp;changes&nbsp;(eg.&nbsp;client&nbsp;became&lt;br&gt;unavailable).&lt;br&gt;&lt;br&gt;That&nbsp;indeed&nbsp;means&nbsp;clients&nbsp;have&nbsp;to&nbsp;probe&nbsp;on&nbsp;their&nbsp;own.&nbsp;But&nbsp;the&lt;br&gt;RFC&nbsp;unfortunately&nbsp;says:&nbsp;&amp;#39;probe&nbsp;--&nbsp;A&nbsp;request&nbsp;for&nbsp;an&nbsp;entity&amp;#39;s&nbsp;current<br>
&lt;br&gt;presence;&nbsp;SHOULD&nbsp;be&nbsp;generated&nbsp;only&nbsp;by&nbsp;a&nbsp;server&nbsp;on&nbsp;behalf&nbsp;of&nbsp;a&nbsp;user.&amp;#39;&lt;br&gt;(RFC&nbsp;3921&nbsp;2.2.1&nbsp;Types&nbsp;of&nbsp;Presence)&lt;br&gt;&lt;br&gt;&lt;br&gt;&amp;gt;&nbsp;The&nbsp;solutions&nbsp;that&nbsp;I&amp;#39;ve&nbsp;tried&nbsp;to&nbsp;get&nbsp;this&nbsp;information&nbsp;are:&lt;br&gt;&amp;gt;&lt;br&gt;&amp;gt;&amp;nbsp;&amp;nbsp;&nbsp;A)&nbsp;Presence&nbsp;probes.&amp;nbsp;&amp;nbsp;Swallowed&nbsp;by&nbsp;some&nbsp;servers.<br>
&lt;br&gt;&amp;gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;lt;presence&nbsp;to=&amp;#39;&lt;a&nbsp;href=&quot;mailto:remoteJID@some.where&quot;&gt;remoteJID@some.where&lt;/a&gt;&amp;#39;&nbsp;type=&amp;#39;probe&amp;#39;/&amp;gt;&lt;br&gt;&amp;gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;or&lt;br&gt;&amp;gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;lt;presence&nbsp;to=&amp;#39;&lt;a&nbsp;href=&quot;mailto:remoteJID@some.where&quot;&gt;remoteJID@some.where<br>
&lt;/a&gt;&amp;#39;&nbsp;from=&amp;#39;&lt;a&nbsp;href=&quot;mailto:me@my.domain&quot;&gt;me@my.domain&lt;/a&gt;&amp;#39;&lt;br&gt;&amp;gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;type=&amp;#39;probe&amp;#39;/&amp;gt;&lt;br&gt;&amp;gt;&lt;br&gt;&amp;gt;&amp;nbsp;&amp;nbsp;&nbsp;B)&nbsp;Directed&nbsp;presence&nbsp;saying&nbsp;unavailable&nbsp;then&nbsp;available&nbsp;again.&lt;br&gt;&amp;gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;lt;presence&nbsp;to=&amp;#39;<br>
&lt;a&nbsp;href=&quot;mailto:remoteJID@some.where&quot;&gt;remoteJID@some.where&lt;/a&gt;&amp;#39;&nbsp;type=&amp;#39;unavailable&amp;#39;/&amp;gt;&lt;br&gt;&amp;gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;lt;presence&nbsp;to=&amp;#39;&lt;a&nbsp;href=&quot;mailto:remoteJID@some.where&quot;&gt;remoteJID@some.where&lt;/a&gt;&amp;#39;/&amp;gt;&lt;br&gt;&amp;gt;&lt;br&gt;&amp;gt;&amp;nbsp;&amp;nbsp;&nbsp;C)&nbsp;Subscribe&nbsp;to&nbsp;their&nbsp;presence&nbsp;again.<br>
&lt;br&gt;&amp;gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;lt;presence&nbsp;to=&amp;#39;&lt;a&nbsp;href=&quot;mailto:remoteJID@some.where&quot;&gt;remoteJID@some.where&lt;/a&gt;&amp;#39;&nbsp;type=&amp;#39;subscribe&amp;#39;/&amp;gt;&lt;br&gt;&lt;br&gt;Uh,&nbsp;thats&nbsp;ugly&nbsp;but&nbsp;I&nbsp;like&nbsp;that&nbsp;more&nbsp;than&nbsp;B)&nbsp;or&nbsp;D)&nbsp;:-)&lt;br&gt;&lt;br&gt;&amp;gt;&amp;nbsp;&amp;nbsp;&nbsp;D)&nbsp;Unavailable&nbsp;then&nbsp;available&nbsp;again&nbsp;to&nbsp;the&nbsp;entire&nbsp;roster.<br>
&lt;br&gt;&amp;gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;lt;presence&nbsp;type=&amp;#39;unavailable/&amp;gt;&amp;lt;presence/&amp;gt;&lt;br&gt;&amp;gt;&lt;br&gt;&amp;gt;&nbsp;Of&nbsp;these,&nbsp;the&nbsp;&amp;#39;subscribe&amp;#39;&nbsp;trick&nbsp;seems&nbsp;to&nbsp;be&nbsp;the&nbsp;most&nbsp;consistent&nbsp;at&lt;br&gt;&amp;gt;&nbsp;returning&nbsp;the&nbsp;desired&nbsp;information.&amp;nbsp;&amp;nbsp;&amp;#39;probe&amp;#39;s&nbsp;seem&nbsp;to&nbsp;get&nbsp;swallowed&nbsp;by&nbsp;a<br>
&lt;br&gt;&amp;gt;&nbsp;number&nbsp;of&nbsp;servers,&nbsp;and&nbsp;appearing&nbsp;to&nbsp;go&nbsp;offline&nbsp;and&nbsp;online&nbsp;again&nbsp;just&lt;br&gt;&amp;gt;&nbsp;irritates&nbsp;the&nbsp;remote&nbsp;users.&lt;br&gt;&lt;br&gt;Heh,&nbsp;I&nbsp;agree&nbsp;completly&nbsp;that&nbsp;this&nbsp;is&nbsp;indeed&nbsp;not&nbsp;very&nbsp;nice.&lt;br&gt;&lt;br&gt;&amp;gt;&nbsp;Any&nbsp;other&nbsp;tricks&nbsp;that&nbsp;people&nbsp;use?<br>
&lt;br&gt;&lt;br&gt;I&nbsp;would&nbsp;rather&nbsp;see&nbsp;this&nbsp;issue&nbsp;resolved&nbsp;than&nbsp;seeing&nbsp;&amp;#39;tricks&amp;#39;&nbsp;that&lt;br&gt;&amp;#39;somehow&amp;#39;&nbsp;work&nbsp;or&nbsp;introduce&nbsp;weird&nbsp;behaviour&nbsp;(like&nbsp;D)&nbsp;or&nbsp;B)).&lt;br&gt;&lt;br&gt;&lt;br&gt;Greetings,&lt;br&gt;&amp;nbsp;&amp;nbsp;&nbsp;Robin&lt;br&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;<br>

</tt>
