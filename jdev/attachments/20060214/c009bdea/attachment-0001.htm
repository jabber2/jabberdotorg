<tt>
After&nbsp;about&nbsp;a&nbsp;week&nbsp;or&nbsp;so&nbsp;of&nbsp;trying&nbsp;to&nbsp;get&nbsp;this&nbsp;sorted,&nbsp;I&nbsp;finally&nbsp;have.&lt;br&gt;<br>
&lt;br&gt;<br>
It&nbsp;seems&nbsp;my&nbsp;main&nbsp;problem&nbsp;was&nbsp;that&nbsp;there's&nbsp;no&nbsp;SSLSocket#recv,&nbsp;and&nbsp;I&nbsp;was&nbsp;treating&nbsp;SSLSocket#read&nbsp;as&nbsp;if&nbsp;it&nbsp;were&nbsp;recv,&nbsp;which&lt;br&gt;<br>
is&nbsp;not&nbsp;the&nbsp;case.&nbsp;SSLSocket#readpartial&nbsp;is&nbsp;what&nbsp;I&nbsp;was&nbsp;looking&nbsp;for,&nbsp;it<br>
just&nbsp;took&nbsp;a&nbsp;really&nbsp;long&nbsp;time&nbsp;to&nbsp;find&nbsp;due&nbsp;to&nbsp;lack&nbsp;of&nbsp;documentation.&lt;br&gt;<br>
&lt;br&gt;<br>
After&nbsp;figuring&nbsp;out&nbsp;readpartial,&nbsp;the&nbsp;rest&nbsp;wasn't&nbsp;hard&nbsp;to&nbsp;implement.&nbsp;I<br>
wrote&nbsp;a&nbsp;simple&nbsp;TLS-enabled&nbsp;echo&nbsp;server&nbsp;here:<br>
&lt;a&nbsp;href=&quot;http://www.ericw.org/ruby/echo/&quot;&gt;http://www.ericw.org/ruby/echo/&lt;/a&gt;.&nbsp;There's&nbsp;no&nbsp;comments&nbsp;or&nbsp;anything,&nbsp;I<br>
just&nbsp;used&nbsp;to&nbsp;to&nbsp;figure&nbsp;out&nbsp;what&nbsp;I&nbsp;was&nbsp;doing&nbsp;wrong.&nbsp;It&nbsp;acts&nbsp;as&nbsp;a&nbsp;normal<br>
echo&nbsp;server&nbsp;until&nbsp;you&nbsp;send&nbsp;&amp;quot;+STARTTLS,&amp;quot;&nbsp;in&nbsp;which&nbsp;case&nbsp;it&nbsp;replies<br>
&amp;quot;+STARTTLS&amp;quot;&nbsp;and&nbsp;expects&nbsp;a&nbsp;TLS&nbsp;handshake&nbsp;to&nbsp;begin.&lt;br&gt;&lt;br&gt;&lt;div&gt;&lt;span&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;2/9/06,&nbsp;&lt;b&nbsp;class=&quot;gmail_sendername&quot;&gt;Eric&nbsp;Will&lt;/b&gt;&nbsp;&amp;lt;&lt;a&nbsp;href=&quot;mailto:rakaur@malkier.net&quot;&gt;rakaur@malkier.net&lt;/a&gt;&amp;gt;&nbsp;wrote:<br>
&lt;/span&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;border-left:&nbsp;1px&nbsp;solid&nbsp;rgb(204,&nbsp;204,&nbsp;204);&nbsp;margin:&nbsp;0pt&nbsp;0pt&nbsp;0pt&nbsp;0.8ex;&nbsp;padding-left:&nbsp;1ex;&quot;&gt;I've&nbsp;figured&nbsp;out&nbsp;easily&nbsp;enough&nbsp;how&nbsp;to&nbsp;do&nbsp;client-to-server&nbsp;TLS.&nbsp;Unfortunately,&nbsp;I'm&nbsp;writing&nbsp;a&nbsp;server.<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
I&nbsp;can't&nbsp;find&nbsp;any&nbsp;examples&nbsp;of&nbsp;using&nbsp;Ruby's&nbsp;OpenSSL&nbsp;library&nbsp;from&nbsp;a&nbsp;server&nbsp;point&nbsp;of&nbsp;view.&lt;br&gt;<br>
I&nbsp;know&nbsp;how&nbsp;to&nbsp;create&nbsp;the&nbsp;socket,&nbsp;I&nbsp;know&nbsp;how&nbsp;to&nbsp;make&nbsp;an&nbsp;OpenSSL::X509::Certificate,&lt;br&gt;<br>
but&nbsp;I&nbsp;don't&nbsp;know&nbsp;how&nbsp;to&nbsp;use&nbsp;them&nbsp;together&nbsp;to&nbsp;enable&nbsp;clients&nbsp;to&nbsp;connect.&lt;br&gt;<br>
&lt;br&gt;<br>
I&nbsp;just&nbsp;don't&nbsp;have&nbsp;any&nbsp;experience&nbsp;with&nbsp;OpenSSL,&nbsp;and&nbsp;I&nbsp;can't&nbsp;find&nbsp;any&nbsp;examples.&lt;br&gt;<br>
Any&nbsp;help&nbsp;would&nbsp;be&nbsp;appreciated.&lt;br&nbsp;clear=&quot;all&quot;&gt;&lt;span&nbsp;class=&quot;sg&quot;&gt;&lt;br&gt;--&nbsp;&lt;br&gt;Eric&nbsp;Will&nbsp;--&nbsp;&lt;a&nbsp;href=&quot;http://www.ericw.org/&quot;&nbsp;target=&quot;_blank&quot;&nbsp;onclick=&quot;return&nbsp;top.js.OpenExtLink(window,event,this)&quot;&gt;http://www.ericw.org/&lt;/a&gt;&lt;br&gt;&lt;a&nbsp;href=&quot;mailto:xmpp:rakaur@malkier.net&quot;&nbsp;target=&quot;_blank&quot;&nbsp;onclick=&quot;return&nbsp;top.js.OpenExtLink(window,event,this)&quot;&gt;<br>
xmpp:rakaur@malkier.net&lt;/a&gt;&lt;br&gt;mailto:&lt;a&nbsp;href=&quot;mailto:rakaur@malkier.net&quot;&nbsp;target=&quot;_blank&quot;&nbsp;onclick=&quot;return&nbsp;top.js.OpenExtLink(window,event,this)&quot;&gt;<br>
rakaur@malkier.net&lt;/a&gt;<br>
<br>
&lt;/span&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;&lt;br&nbsp;clear=&quot;all&quot;&gt;&lt;br&gt;--&nbsp;&lt;br&gt;Eric&nbsp;Will&nbsp;--&nbsp;&lt;a&nbsp;href=&quot;http://www.ericw.org/&quot;&gt;http://www.ericw.org/&lt;/a&gt;&lt;br&gt;&lt;a&nbsp;href=&quot;mailto:xmpp:rakaur@malkier.net&quot;&gt;xmpp:rakaur@malkier.net&lt;/a&gt;&lt;br&gt;mailto:&lt;a&nbsp;href=&quot;mailto:rakaur@malkier.net&quot;&gt;<br>
rakaur@malkier.net&lt;/a&gt;<br>

</tt>
