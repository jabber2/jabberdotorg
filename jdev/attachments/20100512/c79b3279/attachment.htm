<tt>
&lt;!DOCTYPE&nbsp;HTML&nbsp;PUBLIC&nbsp;&quot;-//W3C//DTD&nbsp;HTML&nbsp;3.2//EN&quot;&gt;<br>
&lt;HTML&gt;<br>
&lt;HEAD&gt;<br>
&lt;META&nbsp;HTTP-EQUIV=&quot;Content-Type&quot;&nbsp;CONTENT=&quot;text/html;&nbsp;charset=us-ascii&quot;&gt;<br>
&lt;META&nbsp;NAME=&quot;Generator&quot;&nbsp;CONTENT=&quot;MS&nbsp;Exchange&nbsp;Server&nbsp;version&nbsp;6.5.7655.10&quot;&gt;<br>
&lt;TITLE&gt;presence&nbsp;subsription&nbsp;rejection&nbsp;notifications&nbsp;while&nbsp;offline.&lt;/TITLE&gt;<br>
&lt;/HEAD&gt;<br>
&lt;BODY&gt;<br>
&lt;!--&nbsp;Converted&nbsp;from&nbsp;text/rtf&nbsp;format&nbsp;--&gt;<br>
<br>
&lt;P&nbsp;DIR=LTR&gt;&lt;SPAN&nbsp;LANG=&quot;en-us&quot;&gt;&lt;/SPAN&gt;&lt;/P&gt;<br>
<br>
&lt;P&nbsp;DIR=LTR&gt;&lt;SPAN&nbsp;LANG=&quot;en-us&quot;&gt;&lt;FONT&nbsp;FACE=&quot;Calibri&quot;&gt;Hi&nbsp;Folks,&lt;/FONT&gt;&lt;/SPAN&gt;&lt;/P&gt;<br>
<br>
&lt;P&nbsp;DIR=LTR&gt;&lt;SPAN&nbsp;LANG=&quot;en-us&quot;&gt;&lt;FONT&nbsp;FACE=&quot;Calibri&quot;&gt;I&lt;/FONT&gt;&lt;/SPAN&gt;&lt;SPAN&nbsp;LANG=&quot;en-us&quot;&gt;&lt;FONT&nbsp;FACE=&quot;Calibri&quot;&gt;&amp;#8217;&lt;/FONT&gt;&lt;/SPAN&gt;&lt;SPAN&nbsp;LANG=&quot;en-us&quot;&gt;&lt;FONT&nbsp;FACE=&quot;Calibri&quot;&gt;ve&nbsp;built&nbsp;a&nbsp;minimal&nbsp;xmpp&nbsp;client&nbsp;to&nbsp;keep&nbsp;track&nbsp;of&nbsp;contacts&nbsp;presence&nbsp;status.&amp;nbsp;&nbsp;In&nbsp;previous&nbsp;versions,&nbsp;if&nbsp;a&nbsp;user&nbsp;asked&nbsp;a&nbsp;contact&nbsp;for&nbsp;a&nbsp;subscription&nbsp;to&nbsp;&lt;/FONT&gt;&lt;/SPAN&gt;&lt;/P&gt;<br>
<br>
&lt;P&nbsp;DIR=LTR&gt;&lt;SPAN&nbsp;LANG=&quot;en-us&quot;&gt;&lt;FONT&nbsp;FACE=&quot;Calibri&quot;&gt;p&lt;/FONT&gt;&lt;/SPAN&gt;&lt;SPAN&nbsp;LANG=&quot;en-us&quot;&gt;&lt;FONT&nbsp;FACE=&quot;Calibri&quot;&gt;resence,&nbsp;my&nbsp;client&nbsp;automatically&nbsp;granted&nbsp;it.&amp;nbsp;&nbsp;Now&nbsp;I&nbsp;want&nbsp;to&nbsp;notify&nbsp;a&nbsp;contact&nbsp;of&nbsp;such&nbsp;a&nbsp;request&nbsp;and&nbsp;let&nbsp;them&lt;/FONT&gt;&lt;/SPAN&gt;&lt;SPAN&nbsp;LANG=&quot;en-us&quot;&gt;&nbsp;&lt;FONT&nbsp;FACE=&quot;Calibri&quot;&gt;grant&nbsp;or&nbsp;reject&nbsp;it.&nbsp;I&nbsp;have&nbsp;it&nbsp;working&nbsp;according&nbsp;to&nbsp;rfc&nbsp;3921&lt;/FONT&gt;&lt;/SPAN&gt;&lt;SPAN&nbsp;LANG=&quot;en-us&quot;&gt;&lt;FONT&nbsp;FACE=&quot;Calibri&quot;&gt;&nbsp;section&nbsp;8.&lt;/FONT&gt;&lt;/SPAN&gt;&lt;/P&gt;<br>
<br>
&lt;P&nbsp;DIR=LTR&gt;&lt;SPAN&nbsp;LANG=&quot;en-us&quot;&gt;&lt;FONT&nbsp;FACE=&quot;Calibri&quot;&gt;I&nbsp;do&nbsp;have&nbsp;one&nbsp;question/issue&nbsp;though.&amp;nbsp;&nbsp;If&nbsp;a&nbsp;users&nbsp;presence&nbsp;request&nbsp;is&nbsp;denied&nbsp;by&nbsp;the&nbsp;contact&nbsp;while&nbsp;the&nbsp;user&nbsp;is&nbsp;online,&nbsp;he&nbsp;gets&nbsp;notified&nbsp;of&nbsp;the&lt;/FONT&gt;&lt;/SPAN&gt;&lt;SPAN&nbsp;LANG=&quot;en-us&quot;&gt;&nbsp;&lt;FONT&nbsp;FACE=&quot;Calibri&quot;&gt;rejection&lt;/FONT&gt;&lt;/SPAN&gt;&lt;SPAN&nbsp;LANG=&quot;en-us&quot;&gt;&lt;FONT&nbsp;FACE=&quot;Calibri&quot;&gt;&nbsp;as&nbsp;defined&nbsp;in&nbsp;section&nbsp;8.2.1&nbsp;(using&nbsp;the&nbsp;ejabberd&nbsp;server).&amp;nbsp;&lt;/FONT&gt;&lt;/SPAN&gt;&lt;SPAN&nbsp;LANG=&quot;en-us&quot;&gt;&nbsp;&lt;FONT&nbsp;FACE=&quot;Calibri&quot;&gt;I&nbsp;can&nbsp;then&nbsp;pop&nbsp;up&nbsp;a&nbsp;notification&nbsp;stating&lt;/FONT&gt;&lt;/SPAN&gt;&lt;SPAN&nbsp;LANG=&quot;en-us&quot;&gt;&nbsp;&lt;FONT&nbsp;FACE=&quot;Calibri&quot;&gt;&amp;#8220;&lt;/FONT&gt;&lt;/SPAN&gt;&lt;SPAN&nbsp;LANG=&quot;en-us&quot;&gt;&lt;FONT&nbsp;FACE=&quot;Calibri&quot;&gt;so&nbsp;and&nbsp;so&nbsp;rejected&nbsp;your&nbsp;request&lt;/FONT&gt;&lt;/SPAN&gt;&lt;SPAN&nbsp;LANG=&quot;en-us&quot;&gt;&lt;FONT&nbsp;FACE=&quot;Calibri&quot;&gt;&amp;#8221;&lt;/FONT&gt;&lt;/SPAN&gt;&lt;SPAN&nbsp;LANG=&quot;en-us&quot;&gt;&lt;FONT&nbsp;FACE=&quot;Calibri&quot;&gt;.&lt;/FONT&gt;&lt;/SPAN&gt;&lt;SPAN&nbsp;LANG=&quot;en-us&quot;&gt;&nbsp;&lt;FONT&nbsp;FACE=&quot;Calibri&quot;&gt;But&lt;/FONT&gt;&lt;/SPAN&gt;&lt;SPAN&nbsp;LANG=&quot;en-us&quot;&gt;&nbsp;&lt;FONT&nbsp;FACE=&quot;Calibri&quot;&gt;if&nbsp;the&nbsp;user&nbsp;is&nbsp;offline&nbsp;when&nbsp;the&nbsp;rejection&nbsp;happens,&nbsp;and&nbsp;then&nbsp;logs&nbsp;in,&nbsp;he&nbsp;gets&nbsp;no&nbsp;such&nbsp;notification.&amp;nbsp;&amp;nbsp;&nbsp;He&nbsp;just&nbsp;gets&nbsp;his&nbsp;roster&nbsp;with&nbsp;that&nbsp;contact&nbsp;in&nbsp;the&lt;/FONT&gt;&lt;/SPAN&gt;&lt;SPAN&nbsp;LANG=&quot;en-us&quot;&gt;&nbsp;&lt;FONT&nbsp;FACE=&quot;Calibri&quot;&gt;&amp;#8220;&lt;/FONT&gt;&lt;/SPAN&gt;&lt;SPAN&nbsp;LANG=&quot;en-us&quot;&gt;&lt;FONT&nbsp;FACE=&quot;Calibri&quot;&gt;none&lt;/FONT&gt;&lt;/SPAN&gt;&lt;SPAN&nbsp;LANG=&quot;en-us&quot;&gt;&lt;FONT&nbsp;FACE=&quot;Calibri&quot;&gt;&amp;#8221;&lt;/FONT&gt;&lt;/SPAN&gt;&lt;SPAN&nbsp;LANG=&quot;en-us&quot;&gt;&lt;FONT&nbsp;FACE=&quot;Calibri&quot;&gt;&nbsp;state&nbsp;with&nbsp;the&lt;/FONT&gt;&lt;/SPAN&gt;&lt;SPAN&nbsp;LANG=&quot;en-us&quot;&gt;&nbsp;&lt;FONT&nbsp;FACE=&quot;Calibri&quot;&gt;&amp;#8220;&lt;/FONT&gt;&lt;/SPAN&gt;&lt;SPAN&nbsp;LANG=&quot;en-us&quot;&gt;&lt;FONT&nbsp;FACE=&quot;Calibri&quot;&gt;ask&lt;/FONT&gt;&lt;/SPAN&gt;&lt;SPAN&nbsp;LANG=&quot;en-us&quot;&gt;&lt;FONT&nbsp;FACE=&quot;Calibri&quot;&gt;&amp;#8221;&lt;/FONT&gt;&lt;/SPAN&gt;&lt;SPAN&nbsp;LANG=&quot;en-us&quot;&gt;&lt;FONT&nbsp;FACE=&quot;Calibri&quot;&gt;&nbsp;flag&nbsp;stripped&nbsp;and&nbsp;no&nbsp;indication&nbsp;of&nbsp;how&nbsp;that&nbsp;contact&nbsp;got&nbsp;that&nbsp;way.&nbsp;Since&amp;nbsp;&nbsp;a&nbsp;contact&nbsp;can&nbsp;end&nbsp;up&nbsp;in&nbsp;the&nbsp;none&nbsp;state&nbsp;in&nbsp;various&nbsp;ways,&nbsp;I&nbsp;can&lt;/FONT&gt;&lt;/SPAN&gt;&lt;SPAN&nbsp;LANG=&quot;en-us&quot;&gt;&lt;FONT&nbsp;FACE=&quot;Calibri&quot;&gt;&amp;#8217;&lt;/FONT&gt;&lt;/SPAN&gt;&lt;SPAN&nbsp;LANG=&quot;en-us&quot;&gt;&lt;FONT&nbsp;FACE=&quot;Calibri&quot;&gt;t&nbsp;use&nbsp;that&nbsp;fact&nbsp;to&nbsp;pop&nbsp;up&nbsp;a&nbsp;notification.&nbsp;So&nbsp;my&nbsp;question&nbsp;is,&nbsp;how&nbsp;can&nbsp;I&nbsp;give&nbsp;a&nbsp;user&nbsp;notification&nbsp;that&nbsp;his&nbsp;subscription&nbsp;requests&nbsp;were&nbsp;rejected&nbsp;while&nbsp;he&nbsp;was&nbsp;offline?&amp;nbsp;&nbsp;I&nbsp;see&nbsp;that&nbsp;psi&nbsp;has&nbsp;the&nbsp;same&nbsp;issue&nbsp;and&nbsp;so&nbsp;does&nbsp;Exodus.&nbsp;They&nbsp;give&nbsp;rejection&nbsp;notifications&nbsp;while&nbsp;the&nbsp;user&nbsp;is&nbsp;online&lt;/FONT&gt;&lt;/SPAN&gt;&lt;SPAN&nbsp;LANG=&quot;en-us&quot;&gt;&lt;FONT&nbsp;FACE=&quot;Calibri&quot;&gt;,&nbsp;but&nbsp;not&nbsp;when&nbsp;he&nbsp;got&nbsp;the&nbsp;rejection&nbsp;while&nbsp;logged&nbsp;off&nbsp;and&nbsp;then&nbsp;logs&nbsp;on.&nbsp;Any&nbsp;way&nbsp;to&nbsp;implement&nbsp;such&nbsp;a&nbsp;feature?&lt;/FONT&gt;&lt;/SPAN&gt;&lt;SPAN&nbsp;LANG=&quot;en-us&quot;&gt;&lt;/SPAN&gt;&lt;/P&gt;<br>
<br>
&lt;/BODY&gt;<br>
&lt;/HTML&gt;
</tt>
