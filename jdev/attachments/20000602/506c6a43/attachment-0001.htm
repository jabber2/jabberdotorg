<tt>
&lt;!DOCTYPE&nbsp;HTML&nbsp;PUBLIC&nbsp;&quot;-//W3C//DTD&nbsp;HTML&nbsp;4.0&nbsp;Transitional//EN&quot;&gt;<br>
&lt;HTML&gt;&lt;HEAD&gt;<br>
&lt;META&nbsp;content=&quot;text/html;&nbsp;charset=iso-8859-1&quot;&nbsp;http-equiv=Content-Type&gt;<br>
&lt;META&nbsp;content=&quot;MSHTML&nbsp;5.00.2614.3500&quot;&nbsp;name=GENERATOR&gt;<br>
&lt;STYLE&gt;&lt;/STYLE&gt;<br>
&lt;/HEAD&gt;<br>
&lt;BODY&nbsp;bgColor=#ffffff&gt;<br>
&lt;DIV&gt;&lt;FONT&nbsp;face=Arial&nbsp;size=2&gt;Dear,&lt;/FONT&gt;&lt;/DIV&gt;<br>
&lt;DIV&gt;&lt;FONT&nbsp;face=Arial&nbsp;size=2&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;We&nbsp;are&amp;nbsp;developing&nbsp;a&nbsp;<br>
PHP&nbsp;client&amp;nbsp;for&nbsp;Jabber&nbsp;Server(Jabber.org).&nbsp;We&nbsp;would&nbsp;like&nbsp;your&nbsp;help&nbsp;in&nbsp;the&nbsp;<br>
following&nbsp;areas:&lt;/FONT&gt;&lt;/DIV&gt;<br>
&lt;DIV&gt;&lt;FONT&nbsp;face=Arial&nbsp;size=2&gt;1)&nbsp;We&nbsp;are&nbsp;not&nbsp;able&nbsp;to&nbsp;read&nbsp;the&nbsp;XML&nbsp;streams&nbsp;returned&nbsp;<br>
from&nbsp;the&nbsp;Jabber&nbsp;Server.&lt;/FONT&gt;&lt;/DIV&gt;<br>
&lt;DIV&gt;&lt;FONT&nbsp;face=Arial&nbsp;size=2&gt;2)&nbsp;We&nbsp;are&nbsp;unable&nbsp;to&nbsp;determine&nbsp;whether&nbsp;the&nbsp;<br>
connection&nbsp;has&nbsp;been&nbsp;established&nbsp;(With&nbsp;the&nbsp;stream&nbsp;specified&nbsp;in&nbsp;your&nbsp;manual&nbsp;is&nbsp;it&nbsp;<br>
neccessary&nbsp;to&nbsp;open&nbsp;a&nbsp;persistant&nbsp;connection&nbsp;with&nbsp;the&nbsp;jabber&nbsp;server)&lt;/FONT&gt;&lt;/DIV&gt;<br>
&lt;DIV&gt;&lt;FONT&nbsp;face=Arial&nbsp;size=2&gt;3)&nbsp;Send&nbsp;us&nbsp;details&nbsp;about&nbsp;recieving&nbsp;XML&nbsp;Streams&nbsp;sent&nbsp;<br>
by&nbsp;the&nbsp;server&nbsp;to&nbsp;the&nbsp;client&lt;/FONT&gt;&lt;/DIV&gt;<br>
&lt;DIV&gt;&amp;nbsp;&lt;/DIV&gt;<br>
&lt;DIV&gt;&lt;FONT&nbsp;face=Arial&nbsp;size=2&gt;We&nbsp;are&nbsp;attaching&nbsp;the&nbsp;code&nbsp;also:-&lt;/FONT&gt;&lt;/DIV&gt;<br>
&lt;DIV&gt;&lt;FONT&nbsp;face=Arial&nbsp;size=2&gt;(File&nbsp;Jab11.php3)&lt;/FONT&gt;&lt;/DIV&gt;<br>
&lt;DIV&gt;&lt;FONT&nbsp;face=Arial&nbsp;size=2&gt;&amp;lt;?php&lt;/FONT&gt;&lt;/DIV&gt;<br>
&lt;DIV&gt;&amp;nbsp;&lt;/DIV&gt;<br>
&lt;DIV&gt;&lt;FONT&nbsp;face=Arial&nbsp;size=2&gt;$file&nbsp;=&nbsp;&quot;c.xml&quot;;&lt;BR&gt;&amp;nbsp;$fp&nbsp;=&nbsp;<br>
pfsockopen(&quot;etherx.jabber.org&quot;,5222);&nbsp;&lt;/FONT&gt;&lt;/DIV&gt;<br>
&lt;DIV&gt;&amp;nbsp;&lt;/DIV&gt;<br>
&lt;DIV&gt;&lt;FONT&nbsp;face=Arial&nbsp;size=2&gt;function&nbsp;<br>
trustedFile($file)&lt;BR&gt;{&lt;BR&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;//&nbsp;only&nbsp;trust&nbsp;local&nbsp;files&nbsp;owned&nbsp;by&nbsp;<br>
ourselves&lt;BR&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;if&nbsp;(!eregi(&quot;^([a-z]+)://&quot;,&nbsp;$file)&nbsp;&amp;amp;&amp;amp;&nbsp;<br>
fileowner($file)&nbsp;==&nbsp;getmyuid())&nbsp;{&lt;BR&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;<br>
return&nbsp;true;&lt;BR&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;}&lt;BR&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;return&nbsp;<br>
false;&lt;BR&gt;}&lt;/FONT&gt;&lt;/DIV&gt;<br>
&lt;DIV&gt;&amp;nbsp;&lt;/DIV&gt;<br>
&lt;DIV&gt;&lt;FONT&nbsp;face=Arial&nbsp;size=2&gt;function&nbsp;startElement($parser,&nbsp;$name,&nbsp;<br>
$attribs)&lt;BR&gt;{&lt;BR&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;print&nbsp;&quot;&amp;amp;lt;&amp;lt;font&nbsp;<br>
color=\&quot;#0000cc\&quot;&amp;gt;$name&amp;lt;/font&amp;gt;&quot;;&lt;BR&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;if&nbsp;<br>
(sizeof($attribs))&nbsp;{&lt;BR&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;while&nbsp;<br>
(list($k,&nbsp;$v)&nbsp;=&nbsp;each($attribs))&nbsp;<br>
{&lt;BR&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;print&nbsp;&quot;&nbsp;<br>
&amp;lt;font&nbsp;color=\&quot;#009900\&quot;&amp;gt;$k&amp;lt;/font&amp;gt;=\&quot;&amp;lt;font&nbsp;<br>
color=\&quot;#990000\&quot;&amp;gt;$v&amp;lt;/font&amp;gt;\&quot;&quot;;&lt;BR&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;<br>
}&lt;BR&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;}&lt;BR&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;print&nbsp;<br>
&quot;&amp;amp;gt;&quot;;&lt;BR&gt;}&lt;/FONT&gt;&lt;/DIV&gt;<br>
&lt;DIV&gt;&amp;nbsp;&lt;/DIV&gt;<br>
&lt;DIV&gt;&lt;FONT&nbsp;face=Arial&nbsp;size=2&gt;function&nbsp;endElement($parser,&nbsp;<br>
$name)&lt;BR&gt;{&lt;BR&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;print&nbsp;&quot;&amp;amp;lt;/&amp;lt;font&nbsp;<br>
color=\&quot;#0000cc\&quot;&amp;gt;$name&amp;lt;/font&amp;gt;&amp;amp;gt;&quot;;&lt;BR&gt;}&lt;/FONT&gt;&lt;/DIV&gt;<br>
&lt;DIV&gt;&amp;nbsp;&lt;/DIV&gt;<br>
&lt;DIV&gt;&lt;FONT&nbsp;face=Arial&nbsp;size=2&gt;function&nbsp;characterData($parser,&nbsp;<br>
$data)&lt;BR&gt;{&lt;BR&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;print&nbsp;<br>
&quot;&amp;lt;b&amp;gt;$data&amp;lt;/b&amp;gt;&quot;;&lt;BR&gt;}&lt;/FONT&gt;&lt;/DIV&gt;<br>
&lt;DIV&gt;&amp;nbsp;&lt;/DIV&gt;<br>
&lt;DIV&gt;&lt;FONT&nbsp;face=Arial&nbsp;size=2&gt;function&nbsp;PIHandler($parser,&nbsp;$target,&nbsp;<br>
$data)&lt;BR&gt;{&lt;BR&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;switch&nbsp;(strtolower($target))&nbsp;<br>
{&lt;BR&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;case&nbsp;<br>
&quot;php&quot;:&lt;BR&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;<br>
global&nbsp;<br>
$parser_file;&lt;BR&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;<br>
//&nbsp;If&nbsp;the&nbsp;parsed&nbsp;document&nbsp;is&nbsp;&quot;trusted&quot;,&nbsp;we&nbsp;say&nbsp;it&nbsp;is&nbsp;<br>
safe&lt;BR&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;//&nbsp;to&nbsp;<br>
execute&nbsp;PHP&nbsp;code&nbsp;inside&nbsp;it.&amp;nbsp;&nbsp;If&nbsp;not,&nbsp;display&nbsp;the&nbsp;<br>
code&lt;BR&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;//&nbsp;<br>
instead.&lt;BR&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;<br>
if&nbsp;(trustedFile($parser_file[$parser]))&nbsp;<br>
{&lt;BR&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;<br>
eval($data);&lt;BR&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;<br>
}&nbsp;else&nbsp;<br>
{&lt;BR&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;<br>
printf(&quot;Untrusted&nbsp;PHP&nbsp;code:&nbsp;&amp;lt;i&amp;gt;%s&amp;lt;/i&amp;gt;&quot;,&nbsp;<br>
htmlspecialchars($data));&lt;BR&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;<br>
}&lt;BR&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;<br>
break;&lt;BR&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;}&lt;BR&gt;}&lt;/FONT&gt;&lt;/DIV&gt;<br>
&lt;DIV&gt;&amp;nbsp;&lt;/DIV&gt;<br>
&lt;DIV&gt;&lt;FONT&nbsp;face=Arial&nbsp;size=2&gt;function&nbsp;defaultHandler($parser,&nbsp;<br>
$data)&lt;BR&gt;{&lt;BR&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;if&nbsp;(substr($data,&nbsp;0,&nbsp;1)&nbsp;==&nbsp;&quot;&amp;amp;&quot;&nbsp;&amp;amp;&amp;amp;&nbsp;<br>
substr($data,&nbsp;-1,&nbsp;1)&nbsp;==&nbsp;&quot;;&quot;)&nbsp;{&lt;BR&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;<br>
printf('&amp;lt;font&nbsp;color=&quot;#aa00aa&quot;&amp;gt;%s&amp;lt;/font&amp;gt;',&nbsp;<br>
htmlspecialchars($data));&lt;BR&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;}&nbsp;else&nbsp;<br>
{&lt;BR&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;printf('&amp;lt;font&nbsp;<br>
size=&quot;-1&quot;&amp;gt;%s&amp;lt;/font&amp;gt;',&nbsp;htmlspecialchars($data));&lt;BR&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;<br>
}&lt;BR&gt;}&lt;/FONT&gt;&lt;/DIV&gt;<br>
&lt;DIV&gt;&amp;nbsp;&lt;/DIV&gt;<br>
&lt;DIV&gt;&lt;FONT&nbsp;face=Arial&nbsp;size=2&gt;function&nbsp;externalEntityRefHandler($parser,&nbsp;<br>
$openEntityNames,&nbsp;$base,&nbsp;<br>
$systemId,&lt;BR&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;<br>
$publicId)&lt;BR&gt;{&lt;BR&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;if&nbsp;($systemId)&nbsp;<br>
{&lt;BR&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;if&nbsp;(!list($parser,&nbsp;$fp)&nbsp;=&nbsp;<br>
new_xml_parser($systemId))&nbsp;<br>
{&lt;BR&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;<br>
printf(&quot;Could&nbsp;not&nbsp;open&nbsp;entity&nbsp;%s&nbsp;at&nbsp;%s\n&quot;,&nbsp;<br>
$openEntityNames,&lt;BR&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;<br>
$systemId);&lt;BR&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;<br>
return&nbsp;false;&lt;BR&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;<br>
}&lt;BR&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;while&nbsp;($data&nbsp;=&nbsp;fread($fp,&nbsp;4096))&nbsp;<br>
{&lt;BR&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;if&nbsp;<br>
(!xml_parse($parser,&nbsp;$data,&nbsp;feof($fp)))&nbsp;<br>
{&lt;BR&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;<br>
printf(&quot;XML&nbsp;error:&nbsp;%s&nbsp;at&nbsp;line&nbsp;%d&nbsp;while&nbsp;parsing&nbsp;entity&nbsp;<br>
%s\n&quot;,&lt;BR&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;<br>
xml_error_string(xml_get_error_code($parser)),&lt;BR&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;<br>
xml_get_current_line_number($parser),&nbsp;<br>
$openEntityNames);&lt;BR&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;<br>
xml_parser_free($parser);&lt;BR&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;<br>
return&nbsp;<br>
false;&lt;BR&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;<br>
}&lt;BR&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;<br>
}&lt;BR&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;<br>
xml_parser_free($parser);&lt;BR&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;return&nbsp;<br>
true;&lt;BR&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;}&lt;BR&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;return&nbsp;<br>
false;&lt;BR&gt;}&lt;/FONT&gt;&lt;/DIV&gt;<br>
&lt;DIV&gt;&amp;nbsp;&lt;/DIV&gt;<br>
&lt;DIV&gt;&lt;FONT&nbsp;face=Arial&nbsp;size=2&gt;&lt;BR&gt;function&nbsp;new_xml_parser($file)&nbsp;<br>
{&lt;BR&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;global&nbsp;$parser_file;&lt;/FONT&gt;&lt;/DIV&gt;<br>
&lt;DIV&gt;&amp;nbsp;&lt;/DIV&gt;<br>
&lt;DIV&gt;&lt;FONT&nbsp;face=Arial&nbsp;size=2&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;$xml_parser&nbsp;=&nbsp;<br>
xml_parser_create();&lt;BR&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;xml_parser_set_option($xml_parser,&nbsp;<br>
XML_OPTION_CASE_FOLDING,&nbsp;1);&lt;BR&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;<br>
xml_set_element_handler($xml_parser,&nbsp;&quot;startElement&quot;,&nbsp;<br>
&quot;endElement&quot;);&lt;BR&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;xml_set_character_data_handler($xml_parser,&nbsp;<br>
&quot;characterData&quot;);&lt;BR&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;<br>
xml_set_processing_instruction_handler($xml_parser,&nbsp;<br>
&quot;PIHandler&quot;);&lt;BR&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;xml_set_default_handler($xml_parser,&nbsp;<br>
&quot;defaultHandler&quot;);&lt;BR&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;<br>
xml_set_external_entity_ref_handler($xml_parser,&nbsp;<br>
&quot;externalEntityRefHandler&quot;);&lt;BR&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&lt;BR&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;if&nbsp;<br>
(!($fp&nbsp;=&nbsp;@fopen($file,&nbsp;&quot;r&quot;)))&nbsp;{&lt;BR&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;<br>
return&nbsp;false;&lt;BR&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;}&lt;BR&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;if&nbsp;<br>
(!is_array($parser_file))&nbsp;{&lt;BR&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;<br>
settype($parser_file,&nbsp;&quot;array&quot;);&lt;BR&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;}&lt;BR&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;<br>
$parser_file[$xml_parser]&nbsp;=&nbsp;$file;&lt;BR&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;return&nbsp;<br>
array($xml_parser,&nbsp;$fp);&lt;BR&gt;}&lt;/FONT&gt;&lt;/DIV&gt;<br>
&lt;DIV&gt;&amp;nbsp;&lt;/DIV&gt;<br>
&lt;DIV&gt;&lt;FONT&nbsp;face=Arial&nbsp;size=2&gt;if&nbsp;(!(list($xml_parser,&nbsp;$fp)&nbsp;=&nbsp;<br>
new_xml_parser($file)))&nbsp;{&lt;BR&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;die(&quot;could&nbsp;not&nbsp;open&nbsp;XML&nbsp;<br>
input&quot;);&lt;BR&gt;}&lt;/FONT&gt;&lt;/DIV&gt;<br>
&lt;DIV&gt;&amp;nbsp;&lt;/DIV&gt;<br>
&lt;DIV&gt;&lt;FONT&nbsp;face=Arial&nbsp;size=2&gt;print&nbsp;&quot;&amp;lt;pre&amp;gt;&quot;;&lt;BR&gt;while&nbsp;($data&nbsp;=&nbsp;fread($fp,&nbsp;<br>
4096))&nbsp;{&lt;BR&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;if&nbsp;(!xml_parse($xml_parser,&nbsp;$data,&nbsp;feof($fp)))&nbsp;<br>
{&lt;BR&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;die(sprintf(&quot;XML&nbsp;error:&nbsp;%s&nbsp;at&nbsp;<br>
line&nbsp;<br>
%d\n&quot;,&lt;BR&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;<br>
xml_error_string(xml_get_error_code($xml_parser)),&lt;BR&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;<br>
xml_get_current_line_number($xml_parser)));&lt;BR&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;<br>
}&lt;BR&gt;}&lt;BR&gt;print&nbsp;&quot;&amp;lt;/pre&amp;gt;&quot;;&lt;BR&gt;print&nbsp;&quot;parse&nbsp;<br>
complete\n&quot;;&lt;BR&gt;xml_parser_free($xml_parser);&lt;/FONT&gt;&lt;/DIV&gt;<br>
&lt;DIV&gt;&lt;FONT&nbsp;face=Arial&nbsp;size=2&gt;echo&nbsp;connection_status();&lt;BR&gt;echo&nbsp;<br>
fread($fp,128);&lt;BR&gt;?&amp;gt;&lt;BR&gt;&lt;/FONT&gt;&lt;/DIV&gt;<br>
&lt;DIV&gt;&lt;FONT&nbsp;face=Arial&nbsp;size=2&gt;&lt;/FONT&gt;&amp;nbsp;&lt;/DIV&gt;<br>
&lt;DIV&gt;&lt;FONT&nbsp;face=Arial&nbsp;size=2&gt;&lt;/FONT&gt;&amp;nbsp;&lt;/DIV&gt;<br>
&lt;DIV&gt;&lt;FONT&nbsp;face=Arial&nbsp;size=2&gt;&lt;/FONT&gt;&amp;nbsp;&lt;/DIV&gt;<br>
&lt;DIV&gt;&lt;FONT&nbsp;face=Arial&nbsp;size=2&gt;&lt;/FONT&gt;&amp;nbsp;&lt;/DIV&gt;<br>
&lt;DIV&gt;&lt;FONT&nbsp;face=Arial&nbsp;size=2&gt;&lt;/FONT&gt;&amp;nbsp;&lt;/DIV&gt;<br>
&lt;DIV&gt;&lt;FONT&nbsp;face=Arial&nbsp;size=2&gt;(File&nbsp;c.xml)&lt;/FONT&gt;&lt;/DIV&gt;<br>
&lt;DIV&gt;&lt;FONT&nbsp;face=Arial&nbsp;size=2&gt;&amp;lt;?xml&nbsp;<br>
version='1.0'?&amp;gt;&lt;BR&gt;&amp;lt;streams&amp;gt;&lt;/FONT&gt;&lt;/DIV&gt;<br>
&lt;DIV&gt;&amp;nbsp;&lt;/DIV&gt;<br>
&lt;DIV&gt;&lt;FONT&nbsp;face=Arial&nbsp;size=2&gt;&amp;lt;stream:stream&nbsp;to&nbsp;=&nbsp;&quot;jabber.org&quot;&nbsp;xmlns&nbsp;=&nbsp;<br>
&quot;jabber:client&quot;&lt;/FONT&gt;&lt;/DIV&gt;<br>
&lt;DIV&gt;&lt;FONT&nbsp;face=Arial&nbsp;size=2&gt;xmlns:stream&nbsp;=&nbsp;&lt;A&nbsp;<br>
href=&quot;http://etherx.jabber.org/streams/&quot;&gt;&quot;http://etherx.jabber.org/streams/&lt;/A&gt;&lt;/FONT&gt;&quot;&amp;gt;&lt;/DIV&gt;<br>
&lt;DIV&gt;&amp;nbsp;&lt;/DIV&gt;<br>
&lt;DIV&gt;&lt;FONT&nbsp;face=Arial&nbsp;size=2&gt;&amp;lt;iq&nbsp;type=&quot;get&quot;&nbsp;id=&quot;100111&quot;&lt;BR&gt;&amp;nbsp;&nbsp;<br>
to=&quot;users.jabber.org&quot;&amp;gt;&lt;BR&gt;&amp;nbsp;&nbsp;&lt;A&nbsp;<br>
href='mailto:from=&quot;apawaskar@jabber.org/winjab&quot;'&gt;from=&quot;apawaskar@jabber.org/winjab&quot;&lt;/A&gt;&amp;gt;&lt;BR&gt;&amp;nbsp;&nbsp;<br>
&amp;lt;query&nbsp;xmlns=&quot;jabber:iq:search&quot;/&amp;gt;&lt;BR&gt;&amp;lt;/iq&amp;gt;&lt;/FONT&gt;&lt;/DIV&gt;<br>
&lt;DIV&gt;&lt;FONT&nbsp;face=Arial&nbsp;size=2&gt;&lt;BR&gt;&lt;/FONT&gt;&lt;FONT&nbsp;face=Arial&nbsp;size=2&gt;&amp;lt;message&nbsp;to&nbsp;=&nbsp;<br>
&quot;&lt;A&nbsp;href=&quot;mailto:rishi@jabber.org&quot;&gt;rishi@jabber.org&lt;/A&gt;&quot;&nbsp;<br>
type=&quot;chat&quot;&amp;gt;&lt;BR&gt;&amp;lt;body&amp;gt;This&nbsp;is&nbsp;a&nbsp;test&nbsp;<br>
message&amp;lt;/body&amp;gt;&lt;BR&gt;&amp;lt;/message&amp;gt;&lt;/FONT&gt;&lt;/DIV&gt;<br>
&lt;DIV&gt;&amp;nbsp;&lt;/DIV&gt;<br>
&lt;DIV&gt;&lt;FONT&nbsp;face=Arial&nbsp;size=2&gt;&amp;lt;presence&nbsp;&lt;A&nbsp;<br>
href='mailto:to=&quot;rishi@jabber.org'&gt;to=&quot;rishi@jabber.org&lt;/A&gt;&quot;&nbsp;&lt;BR&gt;&amp;nbsp;&lt;A&nbsp;<br>
href='mailto:from=&quot;apawaskar@jabber.org'&gt;from=&quot;apawaskar@jabber.org&lt;/A&gt;&quot;&lt;BR&gt;&amp;nbsp;type=&quot;subscribe&quot;/&amp;gt;&nbsp;<br>
&lt;/FONT&gt;&lt;/DIV&gt;<br>
&lt;DIV&gt;&lt;FONT&nbsp;face=Arial&nbsp;size=2&gt;&lt;/FONT&gt;&amp;nbsp;&lt;/DIV&gt;<br>
&lt;DIV&gt;&lt;FONT&nbsp;face=Arial&nbsp;size=2&gt;&amp;lt;/streams&amp;gt;&lt;/DIV&gt;&lt;/FONT&gt;&lt;/BODY&gt;&lt;/HTML&gt;<br>

</tt>
