<tt>
﻿&lt;!DOCTYPE&nbsp;HTML&nbsp;PUBLIC&nbsp;&quot;-//W3C//DTD&nbsp;HTML&nbsp;4.0&nbsp;Transitional//EN&quot;&gt;<br>
&lt;HTML&gt;&lt;HEAD&gt;<br>
&lt;META&nbsp;http-equiv=Content-Type&nbsp;content=&quot;text/html;&nbsp;charset=utf-8&quot;&gt;<br>
&lt;META&nbsp;content=&quot;MSHTML&nbsp;6.00.2900.3086&quot;&nbsp;name=GENERATOR&gt;<br>
&lt;STYLE&gt;<br>
&lt;!--<br>
&nbsp;/*&nbsp;Font&nbsp;Definitions&nbsp;*/<br>
&nbsp;@font-face<br>
&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp{font-family:宋体;<br>
&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsppanose-1:2&nbsp;1&nbsp;6&nbsp;0&nbsp;3&nbsp;1&nbsp;1&nbsp;1&nbsp;1&nbsp;1;}<br>
@font-face<br>
&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp{font-family:Verdana;<br>
&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsppanose-1:2&nbsp;11&nbsp;6&nbsp;4&nbsp;3&nbsp;5&nbsp;4&nbsp;4&nbsp;2&nbsp;4;}<br>
@font-face<br>
&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp{font-family:&quot;\@宋体&quot;;<br>
&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsppanose-1:2&nbsp;1&nbsp;6&nbsp;0&nbsp;3&nbsp;1&nbsp;1&nbsp;1&nbsp;1&nbsp;1;}<br>
&nbsp;/*&nbsp;Style&nbsp;Definitions&nbsp;*/<br>
&nbsp;p.MsoNormal,&nbsp;li.MsoNormal,&nbsp;div.MsoNormal<br>
&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp{margin:0cm;<br>
&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspmargin-bottom:.0001pt;<br>
&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptext-align:justify;<br>
&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptext-justify:inter-ideograph;<br>
&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspfont-size:10.5pt;<br>
&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspfont-family:&quot;Times&nbsp;New&nbsp;Roman&quot;;}<br>
a:link,&nbsp;span.MsoHyperlink<br>
&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp{color:blue;<br>
&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptext-decoration:underline;}<br>
a:visited,&nbsp;span.MsoHyperlinkFollowed<br>
&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp{color:purple;<br>
&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptext-decoration:underline;}<br>
span.EmailStyle17<br>
&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp{mso-style-type:personal-compose;<br>
&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspfont-family:Verdana;<br>
&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspcolor:windowtext;<br>
&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspfont-weight:normal;<br>
&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspfont-style:normal;<br>
&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptext-decoration:none&nbsp;none;}<br>
&nbsp;/*&nbsp;Page&nbsp;Definitions&nbsp;*/<br>
&nbsp;@page&nbsp;Section1<br>
&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp{size:595.3pt&nbsp;841.9pt;<br>
&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspmargin:72.0pt&nbsp;90.0pt&nbsp;72.0pt&nbsp;90.0pt;<br>
&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsplayout-grid:15.6pt;}<br>
div.Section1<br>
&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp{page:Section1;}<br>
--&gt;<br>
&lt;/STYLE&gt;<br>
&lt;/HEAD&gt;<br>
&lt;BODY&gt;<br>
&lt;DIV&gt;&lt;FONT&nbsp;face=Verdana&nbsp;color=#0000ff&nbsp;size=2&gt;thanks&nbsp;Tomasz&nbsp;,I&nbsp;will&nbsp;try&nbsp;<br>
hardcoded&amp;nbsp;to&amp;nbsp;&quot;storage.mysql.*&quot;&nbsp;to&nbsp;test&nbsp;it&nbsp;.&lt;/FONT&gt;&lt;/DIV&gt;<br>
&lt;DIV&gt;&lt;FONT&nbsp;face=Verdana&nbsp;size=2&gt;&lt;/FONT&gt;&amp;nbsp;&lt;/DIV&gt;<br>
&lt;DIV&nbsp;align=left&gt;<br>
&lt;DIV&nbsp;align=left&gt;&lt;FONT&nbsp;face=Verdana&nbsp;size=2&gt;<br>
&lt;HR&nbsp;style=&quot;WIDTH:&nbsp;122px;&nbsp;HEIGHT:&nbsp;2px&quot;&nbsp;SIZE=2&gt;<br>
&lt;/FONT&gt;&lt;/DIV&gt;<br>
&lt;DIV&gt;&lt;FONT&nbsp;color=#c0c0c0&gt;&lt;FONT&nbsp;face=Verdana&nbsp;size=2&gt;Zhangmingjie&lt;/FONT&gt;&lt;/DIV&gt;<br>
&lt;DIV&gt;&lt;FONT&nbsp;face=Verdana&nbsp;size=2&gt;2007-06-28&lt;/FONT&gt;&lt;/FONT&gt;&lt;/DIV&gt;&lt;/DIV&gt;<br>
&lt;DIV&gt;&lt;FONT&nbsp;face=Verdana&nbsp;size=2&gt;<br>
&lt;HR&gt;<br>
&lt;/FONT&gt;&lt;/DIV&gt;<br>
&lt;DIV&gt;&lt;FONT&nbsp;face=Verdana&gt;&lt;FONT&nbsp;size=2&gt;&lt;STRONG&gt;发件人：&lt;/STRONG&gt;&nbsp;Tomasz&nbsp;<br>
Sterna&lt;/FONT&gt;&lt;/FONT&gt;&lt;/DIV&gt;<br>
&lt;DIV&gt;&lt;FONT&nbsp;face=Verdana&gt;&lt;FONT&nbsp;size=2&gt;&lt;STRONG&gt;发送时间：&lt;/STRONG&gt;&nbsp;<br>
2007-06-26&amp;nbsp;20:32:28&lt;/FONT&gt;&lt;/FONT&gt;&lt;/DIV&gt;<br>
&lt;DIV&gt;&lt;FONT&nbsp;face=Verdana&gt;&lt;FONT&nbsp;size=2&gt;&lt;STRONG&gt;收件人：&lt;/STRONG&gt;&nbsp;Jabber&nbsp;software&nbsp;<br>
development&nbsp;list&lt;/FONT&gt;&lt;/FONT&gt;&lt;/DIV&gt;<br>
&lt;DIV&gt;&lt;FONT&nbsp;face=Verdana&gt;&lt;FONT&nbsp;size=2&gt;&lt;STRONG&gt;抄送：&lt;/STRONG&gt;&nbsp;&lt;/FONT&gt;&lt;/FONT&gt;&lt;/DIV&gt;<br>
&lt;DIV&gt;&lt;FONT&nbsp;face=Verdana&gt;&lt;FONT&nbsp;size=2&gt;&lt;STRONG&gt;主题：&lt;/STRONG&gt;&nbsp;Re:&nbsp;[jdev]&nbsp;sm.xml&nbsp;<br>
configure&lt;/FONT&gt;&lt;/FONT&gt;&lt;/DIV&gt;<br>
&lt;DIV&gt;&lt;FONT&nbsp;face=Verdana&nbsp;size=2&gt;&lt;/FONT&gt;&amp;nbsp;&lt;/DIV&gt;<br>
&lt;DIV&gt;&lt;FONT&nbsp;face=Verdana&nbsp;size=2&gt;<br>
&lt;DIV&gt;Dnia&amp;nbsp;26-06-2007,&amp;nbsp;wto&amp;nbsp;o&amp;nbsp;godzinie&amp;nbsp;13:12&amp;nbsp;+0200,&amp;nbsp;Norman&amp;nbsp;Rasmussen&lt;/DIV&gt;<br>
&lt;DIV&gt;napisał(a):&lt;/DIV&gt;<br>
&lt;DIV&gt;&amp;gt;&amp;nbsp;&amp;nbsp;-&amp;nbsp;in&amp;nbsp;storage.c&amp;nbsp;:&amp;nbsp;copy&amp;nbsp;mysql&amp;nbsp;as&amp;nbsp;mysql1&amp;nbsp;in:&amp;nbsp;init&amp;nbsp;extern's,&lt;/DIV&gt;<br>
&lt;DIV&gt;&amp;gt;&amp;nbsp;driver_array,&amp;nbsp;driver_inits&lt;/DIV&gt;<br>
&lt;DIV&gt;&amp;gt;&amp;nbsp;&amp;nbsp;-&amp;nbsp;in&amp;nbsp;storage_mysql.c&amp;nbsp;:&amp;nbsp;copy&amp;nbsp;mysql_init&amp;nbsp;as&amp;nbsp;mysql1_init,&amp;nbsp;and&amp;nbsp;change&lt;/DIV&gt;<br>
&lt;DIV&gt;&amp;gt;&amp;nbsp;storage.mysql&amp;nbsp;to&amp;nbsp;storage.mysql1.&amp;nbsp;&lt;/DIV&gt;<br>
&lt;DIV&gt;&amp;nbsp;&lt;/DIV&gt;<br>
&lt;DIV&gt;Since&amp;nbsp;2.1.5&amp;nbsp;storage&amp;nbsp;modules&amp;nbsp;are&amp;nbsp;loaded&amp;nbsp;dynamically,&amp;nbsp;so&amp;nbsp;there&amp;nbsp;is&amp;nbsp;no&lt;/DIV&gt;<br>
&lt;DIV&gt;static&amp;nbsp;module&amp;nbsp;mapping&amp;nbsp;table&amp;nbsp;anymore.&lt;/DIV&gt;<br>
&lt;DIV&gt;All&amp;nbsp;modules&amp;nbsp;have&amp;nbsp;st_init()&amp;nbsp;function&amp;nbsp;not&amp;nbsp;specific&amp;nbsp;to&amp;nbsp;a&amp;nbsp;module&amp;nbsp;kind.&lt;/DIV&gt;<br>
&lt;DIV&gt;So&amp;nbsp;copying&amp;nbsp;storage_mysql.so&amp;nbsp;as&amp;nbsp;storage_mysql2.so&amp;nbsp;and&amp;nbsp;configuring&lt;/DIV&gt;<br>
&lt;DIV&gt;&amp;lt;mysql2/&nbsp;<br>
&amp;gt;&amp;nbsp;would&amp;nbsp;be&amp;nbsp;enough,&amp;nbsp;but&amp;nbsp;the&amp;nbsp;problem&amp;nbsp;is&amp;nbsp;in&amp;nbsp;the&amp;nbsp;storage_mysql.c&lt;/DIV&gt;<br>
&lt;DIV&gt;&amp;nbsp;&lt;/DIV&gt;<br>
&lt;DIV&gt;$&amp;nbsp;grep&amp;nbsp;storage.mysql&amp;nbsp;storage/storage_mysql.c&lt;/DIV&gt;<br>
&lt;DIV&gt;host&amp;nbsp;=&amp;nbsp;config_get_one(drv-&nbsp;&amp;gt;st-&nbsp;&amp;gt;sm-&nbsp;<br>
&amp;gt;config,&amp;nbsp;&quot;storage.mysql.host&quot;,&amp;nbsp;0);&lt;/DIV&gt;<br>
&lt;DIV&gt;port&amp;nbsp;=&amp;nbsp;config_get_one(drv-&nbsp;&amp;gt;st-&nbsp;&amp;gt;sm-&nbsp;<br>
&amp;gt;config,&amp;nbsp;&quot;storage.mysql.port&quot;,&amp;nbsp;0);&lt;/DIV&gt;<br>
&lt;DIV&gt;dbname&amp;nbsp;=&amp;nbsp;config_get_one(drv-&nbsp;&amp;gt;st-&nbsp;&amp;gt;sm-&nbsp;<br>
&amp;gt;config,&amp;nbsp;&quot;storage.mysql.dbname&quot;,&amp;nbsp;0);&lt;/DIV&gt;<br>
&lt;DIV&gt;user&amp;nbsp;=&amp;nbsp;config_get_one(drv-&nbsp;&amp;gt;st-&nbsp;&amp;gt;sm-&nbsp;<br>
&amp;gt;config,&amp;nbsp;&quot;storage.mysql.user&quot;,&amp;nbsp;0);&lt;/DIV&gt;<br>
&lt;DIV&gt;[...]&lt;/DIV&gt;<br>
&lt;DIV&gt;&amp;nbsp;&lt;/DIV&gt;<br>
&lt;DIV&gt;These&amp;nbsp;are&amp;nbsp;hardcoded&amp;nbsp;to&amp;nbsp;&quot;storage.mysql.*&quot;&amp;nbsp;and&amp;nbsp;would&amp;nbsp;require&amp;nbsp;code&amp;nbsp;changes.&lt;/DIV&gt;<br>
&lt;DIV&gt;&amp;nbsp;&lt;/DIV&gt;<br>
&lt;DIV&gt;&amp;nbsp;&lt;/DIV&gt;<br>
&lt;DIV&gt;--&amp;nbsp;&lt;/DIV&gt;<br>
&lt;DIV&gt;Tomasz&amp;nbsp;Sterna&lt;/DIV&gt;<br>
&lt;DIV&gt;Xiaoka&amp;nbsp;Grp.&amp;nbsp;&amp;nbsp;&lt;A&nbsp;<br>
href=&quot;http://www.xiaoka.com/&quot;&gt;http://www.xiaoka.com/&lt;/A&gt;&lt;/DIV&gt;&lt;/FONT&gt;&lt;/DIV&gt;&lt;/BODY&gt;&lt;/HTML&gt;<br>

</tt>
