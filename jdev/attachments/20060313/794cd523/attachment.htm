<tt>
We&nbsp;have&nbsp;previously&nbsp;developed&nbsp;such&nbsp;a&nbsp;component&nbsp;for&nbsp;an&nbsp;internal&nbsp;project&nbsp;using&nbsp;the&nbsp;component&nbsp;approach&nbsp;and&nbsp;a&nbsp;database&nbsp;-&nbsp;we&nbsp;used&nbsp;presence&nbsp;bcc&nbsp;to&nbsp;get&nbsp;all&nbsp;presence&nbsp;updates.&lt;br&gt;&lt;br&gt;Somethings&nbsp;to&nbsp;keep&nbsp;in&nbsp;mind&nbsp;around&nbsp;freshness&nbsp;of&nbsp;presence&nbsp;information.&lt;br&gt;When&nbsp;the&nbsp;jabber&nbsp;server&nbsp;restarts&nbsp;-&nbsp;all&nbsp;your&nbsp;existing&nbsp;information&nbsp;in&nbsp;the&nbsp;DB&nbsp;is&nbsp;stale.&nbsp;You&nbsp;may&nbsp;want&nbsp;to&nbsp;detect&nbsp;this&nbsp;and&nbsp;purge&nbsp;the&nbsp;presence&nbsp;store.&nbsp;Similar&nbsp;cases&nbsp;arise&nbsp;when&nbsp;there&nbsp;is&nbsp;loss&nbsp;of&nbsp;connectivity&nbsp;between&nbsp;the&nbsp;component&nbsp;cases.&nbsp;User&nbsp;accounts&nbsp;may&nbsp;get&nbsp;deleted&nbsp;on&nbsp;the&nbsp;IM&nbsp;server&nbsp;and&nbsp;you&nbsp;may&nbsp;need&nbsp;to&nbsp;synchronize&nbsp;that&nbsp;on&nbsp;your&nbsp;database&nbsp;also.&lt;br&gt;&lt;br&gt;Over&nbsp;time,&nbsp;I&nbsp;have&nbsp;found&nbsp;that&amp;nbsp;&nbsp;such&nbsp;a&nbsp;presence&nbsp;server&nbsp;capability&nbsp;is&nbsp;best&nbsp;built&nbsp;&quot;directly&quot;&nbsp;into&nbsp;the&nbsp;IM&nbsp;server&nbsp;with&nbsp;tight&nbsp;integration&nbsp;with&nbsp;the&nbsp;presence&nbsp;processing&nbsp;and&nbsp;subscriber&nbsp;management&nbsp;modules.&nbsp;This&nbsp;way&nbsp;you&nbsp;benefit&nbsp;from&nbsp;privacy&nbsp;policies&nbsp;that&nbsp;are&nbsp;available&nbsp;in&nbsp;the&nbsp;same&nbsp;place.&lt;br&gt;&lt;br&gt;YMMV.&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;b&gt;&lt;i&gt;Peter&nbsp;Saint-Andre&nbsp;&amp;lt;stpeter@jabber.org&amp;gt;&lt;/i&gt;&lt;/b&gt;&nbsp;wrote:&lt;blockquote&nbsp;class=&quot;replbq&quot;<br>
&nbsp;style=&quot;border-left:&nbsp;2px&nbsp;solid&nbsp;rgb(16,&nbsp;16,&nbsp;255);&nbsp;margin-left:&nbsp;5px;&nbsp;padding-left:&nbsp;5px;&quot;&gt;&nbsp;-----BEGIN&nbsp;PGP&nbsp;SIGNED&nbsp;MESSAGE-----&lt;br&gt;Hash:&nbsp;SHA1&lt;br&gt;&lt;br&gt;+1,&nbsp;that&nbsp;seems&nbsp;like&nbsp;a&nbsp;sensible&nbsp;approach.&lt;br&gt;&lt;br&gt;/psa&lt;br&gt;&lt;br&gt;Peter&nbsp;Millard&nbsp;wrote:&lt;br&gt;&amp;gt;&nbsp;This&nbsp;is&nbsp;exactly&nbsp;how&nbsp;I&nbsp;would&nbsp;implement&nbsp;this&nbsp;as&nbsp;well.&lt;br&gt;&amp;gt;&nbsp;&lt;br&gt;&amp;gt;&nbsp;1)&nbsp;Have&nbsp;an&nbsp;external&nbsp;component&nbsp;that&nbsp;uses&nbsp;iq:register&nbsp;protocol&nbsp;with&lt;br&gt;&amp;gt;&nbsp;x-data&nbsp;for&nbsp;picking&nbsp;themes,&nbsp;etc.&nbsp;This&nbsp;component&nbsp;subscribes&nbsp;to&nbsp;the&lt;br&gt;&amp;gt;&nbsp;user's&nbsp;presence&nbsp;during&nbsp;registration&nbsp;(just&nbsp;like&nbsp;a&nbsp;transport&nbsp;does).&nbsp;Now&lt;br&gt;&amp;gt;&nbsp;the&nbsp;component&nbsp;has&nbsp;the&nbsp;users&nbsp;presence.&lt;br&gt;&amp;gt;&nbsp;&lt;br&gt;&amp;gt;&nbsp;2)&nbsp;External&nbsp;component&nbsp;pushes&nbsp;presence&nbsp;info&nbsp;into&nbsp;a&nbsp;database&nbsp;(mysql,&nbsp;psql,&nbsp;etc).&lt;br&gt;&amp;gt;&nbsp;&lt;br&gt;&amp;gt;&nbsp;3)&nbsp;Write&nbsp;a&nbsp;quick&nbsp;PHP&nbsp;applet&nbsp;or&nbsp;something&nbsp;which&nbsp;returns&nbsp;an&nbsp;image&nbsp;based&lt;br&gt;&amp;gt;&nbsp;on&nbsp;the&nbsp;JID.&lt;br&gt;&amp;gt;&nbsp;&lt;br&gt;&amp;gt;&nbsp;We&nbsp;could&nbsp;easily&nbsp;deploy&nbsp;something&nbsp;like&nbsp;this&nbsp;on&nbsp;jabber.org&nbsp;provided&nbsp;the&lt;br&gt;&amp;gt;&nbsp;DB&nbsp;is&nbsp;psql,&nbsp;and&nbsp;the&nbsp;component&nbsp;is&nbsp;not&nbsp;in&nbsp;Java&nbsp;or&nbsp;Perl&nbsp;(for&nbsp;scalability&lt;br&gt;&amp;gt;&nbsp;issues).&nbsp;Seems&nbsp;like&nbsp;this&nbsp;would&nbsp;be&nbsp;super&nbsp;easy&nbsp;to&nbsp;write<br>
&nbsp;using&nbsp;the&lt;br&gt;&amp;gt;&nbsp;Twisted&nbsp;Python&nbsp;jabber&nbsp;component&nbsp;stuff.&lt;br&gt;&amp;gt;&nbsp;&lt;br&gt;&amp;gt;&nbsp;This&nbsp;approach&nbsp;would&nbsp;also&nbsp;work&nbsp;with&nbsp;any&nbsp;server&nbsp;implementation&nbsp;since&nbsp;the&lt;br&gt;&amp;gt;&nbsp;component&nbsp;is&nbsp;subscribing&nbsp;to&nbsp;the&nbsp;user's&nbsp;presence.&lt;br&gt;&amp;gt;&nbsp;&lt;br&gt;&amp;gt;&nbsp;pgm.&lt;br&gt;&amp;gt;&nbsp;&lt;br&gt;&amp;gt;&nbsp;On&nbsp;3/9/06,&nbsp;Richard&nbsp;Dobson&nbsp;&lt;richard@dobson-i.net&gt;&nbsp;wrote:&lt;br&gt;&amp;gt;&amp;gt;&amp;gt;&nbsp;It&nbsp;would&nbsp;be&nbsp;good&nbsp;if&nbsp;we&nbsp;had&nbsp;standardized&nbsp;methods&nbsp;for&nbsp;embedding&nbsp;presence&lt;br&gt;&amp;gt;&amp;gt;&amp;gt;&nbsp;information&nbsp;in&nbsp;web&nbsp;pages.&nbsp;For&nbsp;example,&nbsp;I'd&nbsp;like&nbsp;to&nbsp;be&nbsp;able&nbsp;to&nbsp;point&nbsp;to&lt;br&gt;&amp;gt;&amp;gt;&amp;gt;&nbsp;the&nbsp;following&nbsp;image&nbsp;file&nbsp;and&nbsp;have&nbsp;it&nbsp;show&nbsp;my&nbsp;presence:&lt;br&gt;&amp;gt;&amp;gt;&amp;gt;&lt;br&gt;&amp;gt;&amp;gt;&amp;gt;&nbsp;&lt;img&nbsp;src=&quot;http://www.jabber.org/users/stpeter.png&quot;&gt;&lt;br&gt;&amp;gt;&amp;gt;&amp;gt;&lt;br&gt;&amp;gt;&amp;gt;&amp;gt;&nbsp;Granted&nbsp;there&nbsp;are&nbsp;challenges&nbsp;here:&lt;br&gt;&amp;gt;&amp;gt;&amp;gt;&lt;br&gt;&amp;gt;&amp;gt;&amp;gt;&nbsp;1.&nbsp;Needs&nbsp;to&nbsp;be&nbsp;opt-in&nbsp;(no&nbsp;presence&nbsp;leaking)&lt;br&gt;&amp;gt;&amp;gt;&amp;gt;&lt;br&gt;&amp;gt;&amp;gt;&nbsp;Have&nbsp;it&nbsp;as&nbsp;a&nbsp;contact&nbsp;on&nbsp;the&nbsp;users&nbsp;roster&nbsp;which&nbsp;represents&nbsp;the&nbsp;presence&lt;br&gt;&amp;gt;&amp;gt;&nbsp;service,&nbsp;if&nbsp;that&nbsp;contact&nbsp;can&nbsp;see&nbsp;the&nbsp;users&nbsp;presence&nbsp;the&nbsp;user&nbsp;is&nbsp;opting&nbsp;in.&lt;br&gt;&amp;gt;&amp;gt;&amp;gt;&nbsp;2.&nbsp;User&nbsp;needs&nbsp;a&nbsp;way&nbsp;to<br>
&nbsp;choose&nbsp;icon&nbsp;set&nbsp;(if&nbsp;there's&nbsp;a&nbsp;choice)&lt;br&gt;&amp;gt;&amp;gt;&amp;gt;&lt;br&gt;&amp;gt;&amp;gt;&nbsp;x:data&nbsp;forms&nbsp;seems&nbsp;like&nbsp;a&nbsp;perfect&nbsp;fit&nbsp;here&lt;br&gt;&amp;gt;&amp;gt;&amp;gt;&nbsp;3.&nbsp;Jabber&nbsp;server&nbsp;and&nbsp;web&nbsp;server&nbsp;need&nbsp;to&nbsp;share&nbsp;information&lt;br&gt;&amp;gt;&amp;gt;&amp;gt;&lt;br&gt;&amp;gt;&amp;gt;&nbsp;Easiest&nbsp;way&nbsp;for&nbsp;this&nbsp;would&nbsp;be&nbsp;for&nbsp;them&nbsp;both&nbsp;to&nbsp;share&nbsp;a&nbsp;database&nbsp;of&lt;br&gt;&amp;gt;&amp;gt;&nbsp;presence&nbsp;information&nbsp;with&nbsp;a&nbsp;jabber&nbsp;component&nbsp;keeping&nbsp;it&nbsp;up&nbsp;to&nbsp;date.&lt;br&gt;&amp;gt;&amp;gt;&amp;gt;&nbsp;4.&nbsp;Would&nbsp;not&nbsp;be&nbsp;dynamic&nbsp;(that&nbsp;would&nbsp;require&nbsp;an&nbsp;xmpp:&nbsp;URI)&lt;br&gt;&amp;gt;&amp;gt;&amp;gt;&lt;br&gt;&amp;gt;&amp;gt;&amp;gt;&nbsp;At&nbsp;the&nbsp;jabber.org&nbsp;domain,&nbsp;#3&nbsp;is&nbsp;a&nbsp;bit&nbsp;of&nbsp;a&nbsp;pain&nbsp;(the&nbsp;web&nbsp;server&nbsp;and&lt;br&gt;&amp;gt;&amp;gt;&amp;gt;&nbsp;jabber&nbsp;server&nbsp;are&nbsp;on&nbsp;different&nbsp;machines),&nbsp;but&nbsp;the&nbsp;challenge&nbsp;seems&nbsp;to&nbsp;be&lt;br&gt;&amp;gt;&amp;gt;&amp;gt;&nbsp;surmountable.&lt;br&gt;&amp;gt;&amp;gt;&amp;gt;&lt;br&gt;&amp;gt;&amp;gt;&amp;gt;&nbsp;Other&nbsp;IM&nbsp;systems&nbsp;have&nbsp;this&nbsp;and&nbsp;it's&nbsp;one&nbsp;of&nbsp;those&nbsp;cool&nbsp;features&nbsp;that&nbsp;end&lt;br&gt;&amp;gt;&amp;gt;&amp;gt;&nbsp;users&nbsp;really&nbsp;like.&nbsp;So&nbsp;what's&nbsp;holding&nbsp;us&nbsp;back?&nbsp;What's&nbsp;needed&nbsp;to&nbsp;make&nbsp;this&lt;br&gt;&amp;gt;&amp;gt;&amp;gt;&nbsp;happen?&lt;br&gt;&amp;gt;&amp;gt;&amp;gt;&lt;br&gt;&amp;gt;&amp;gt;&nbsp;Nothings&nbsp;holding&nbsp;us&nbsp;back&nbsp;this&nbsp;has&nbsp;been&nbsp;available&nbsp;for&nbsp;quite&nbsp;some&nbsp;time&nbsp;in&lt;br&gt;&amp;gt;&amp;gt;&nbsp;various&nbsp;forms&nbsp;on<br>
&nbsp;jabber.&lt;br&gt;&amp;gt;&amp;gt;&lt;br&gt;&amp;gt;&amp;gt;&nbsp;Richard&lt;br&gt;-----BEGIN&nbsp;PGP&nbsp;SIGNATURE-----&lt;br&gt;Version:&nbsp;GnuPG&nbsp;v1.4.1&nbsp;(Darwin)&lt;br&gt;Comment:&nbsp;Using&nbsp;GnuPG&nbsp;with&nbsp;Mozilla&nbsp;-&nbsp;http://enigmail.mozdev.org&lt;br&gt;&lt;br&gt;iD8DBQFEFbO0NF1RSzyt3NURAlbwAJ9rhSwaD893Ilo0PBqhg3oxgMWhjwCfR1de&lt;br&gt;J3rxkGox7XZ69OjJw4DANcc=&lt;br&gt;=4/tt&lt;br&gt;-----END&nbsp;PGP&nbsp;SIGNATURE-----&lt;br&gt;&lt;/richard@dobson-i.net&gt;&lt;/blockquote&gt;&lt;br&gt;
</tt>
