<tt>
&lt;!DOCTYPE&nbsp;HTML&nbsp;PUBLIC&nbsp;&quot;-//W3C//DTD&nbsp;HTML&nbsp;3.2//EN&quot;&gt;<br>
&lt;HTML&gt;<br>
&lt;HEAD&gt;<br>
&lt;META&nbsp;HTTP-EQUIV=&quot;Content-Type&quot;&nbsp;CONTENT=&quot;text/html;&nbsp;charset=us-ascii&quot;&gt;<br>
&lt;META&nbsp;NAME=&quot;Generator&quot;&nbsp;CONTENT=&quot;MS&nbsp;Exchange&nbsp;Server&nbsp;version&nbsp;6.5.7233.28&quot;&gt;<br>
&lt;TITLE&gt;differentiated&nbsp;karma&nbsp;in&nbsp;jabber1.x&lt;/TITLE&gt;<br>
&lt;/HEAD&gt;<br>
&lt;BODY&gt;<br>
&lt;!--&nbsp;Converted&nbsp;from&nbsp;text/rtf&nbsp;format&nbsp;--&gt;<br>
&lt;BR&gt;<br>
<br>
&lt;P&gt;&lt;FONT&nbsp;SIZE=2&nbsp;FACE=&quot;Arial&quot;&gt;What&nbsp;do&nbsp;people&nbsp;think&nbsp;about&nbsp;extending&nbsp;jabber&nbsp;configuration&nbsp;to&nbsp;allow&nbsp;you&nbsp;to&nbsp;specify&nbsp;karma&nbsp;settings,&nbsp;but&nbsp;also&nbsp;define&nbsp;a&nbsp;set&nbsp;of&nbsp;netmask&nbsp;IPs&nbsp;that&nbsp;would&nbsp;have&nbsp;unlimited&nbsp;access?&nbsp;Basically,&nbsp;you&nbsp;would&nbsp;allow&nbsp;additional&nbsp;tags&nbsp;that&nbsp;look&nbsp;like&nbsp;something&nbsp;this&lt;/FONT&gt;&lt;/P&gt;<br>
<br>
&lt;P&gt;&lt;FONT&nbsp;SIZE=2&nbsp;FACE=&quot;Arial&quot;&gt;&amp;lt;karmaExemptions&amp;gt;&lt;/FONT&gt;<br>
<br>
&lt;BR&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&lt;FONT&nbsp;SIZE=2&nbsp;FACE=&quot;Arial&quot;&gt;&amp;lt;exempt&nbsp;netmask=&amp;quot;192.168.255.255&amp;quot;/&amp;gt;&lt;/FONT&gt;<br>
<br>
&lt;BR&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&lt;FONT&nbsp;SIZE=2&nbsp;FACE=&quot;Arial&quot;&gt;&amp;lt;exempt&nbsp;netmask=&amp;quot;10.255.255.255&amp;quot;/&amp;gt;&lt;/FONT&gt;<br>
<br>
&lt;BR&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&lt;FONT&nbsp;SIZE=2&nbsp;FACE=&quot;Arial&quot;&gt;&amp;lt;exempt&nbsp;netmask=&amp;quot;166.77.255.255&amp;quot;/&amp;gt;&lt;/FONT&gt;<br>
<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&nbsp;FACE=&quot;Arial&quot;&gt;&amp;lt;/karmaExemptions&amp;gt;&lt;/FONT&gt;<br>
&lt;/P&gt;<br>
<br>
&lt;P&gt;&lt;FONT&nbsp;SIZE=2&nbsp;FACE=&quot;Arial&quot;&gt;I'm&nbsp;looking&nbsp;at&nbsp;jabberd/mio.c&nbsp;and&nbsp;it&nbsp;seems&nbsp;like&nbsp;this&nbsp;could&nbsp;be&nbsp;added&nbsp;with&nbsp;just&nbsp;a&nbsp;few&nbsp;lines&nbsp;of&nbsp;code,&nbsp;maybe&nbsp;along&nbsp;the&nbsp;lines&nbsp;of&nbsp;the&nbsp;following:&lt;/FONT&gt;&lt;/P&gt;<br>
<br>
&lt;P&gt;&lt;FONT&nbsp;SIZE=2&nbsp;FACE=&quot;Arial&quot;&gt;1.&nbsp;In&nbsp;mio_init()&nbsp;read&nbsp;any&nbsp;exemptions&nbsp;into&nbsp;an&nbsp;array&lt;/FONT&gt;<br>
<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&nbsp;FACE=&quot;Arial&quot;&gt;2.&nbsp;In&nbsp;mio_listen&nbsp;(and&nbsp;mio_accept)&nbsp;after&nbsp;creating&nbsp;a&nbsp;new&nbsp;mio&nbsp;with&nbsp;mio_new(),&nbsp;compare&nbsp;the&nbsp;mio's&nbsp;ip&nbsp;with&nbsp;any&nbsp;exempt&nbsp;netmasks.&nbsp;If&nbsp;the&nbsp;new&nbsp;mio's&nbsp;ip&nbsp;is&nbsp;exempt,&nbsp;set&nbsp;mio-&amp;gt;k.dec&nbsp;=&nbsp;0.&lt;/FONT&gt;&lt;/P&gt;<br>
<br>
&lt;P&gt;&lt;FONT&nbsp;SIZE=2&nbsp;FACE=&quot;Arial&quot;&gt;Then&nbsp;again,&nbsp;I'm&nbsp;just&nbsp;scanning&nbsp;through&nbsp;the&nbsp;code&nbsp;and&nbsp;there&nbsp;could&nbsp;be&nbsp;dependencies&nbsp;that&nbsp;I&nbsp;don't&nbsp;understand.&nbsp;If&nbsp;I'm&nbsp;missing&nbsp;something,&nbsp;please&nbsp;let&nbsp;me&nbsp;know.&lt;/FONT&gt;&lt;/P&gt;<br>
<br>
&lt;P&gt;&lt;FONT&nbsp;SIZE=2&nbsp;FACE=&quot;Arial&quot;&gt;CONTEXT&nbsp;FOR&nbsp;THIS:&lt;/FONT&gt;<br>
&lt;/P&gt;<br>
<br>
&lt;P&gt;&lt;FONT&nbsp;SIZE=2&nbsp;FACE=&quot;Arial&quot;&gt;I'm&nbsp;using&nbsp;jabber&nbsp;as&nbsp;the&nbsp;socket&nbsp;layer&nbsp;in&nbsp;a&nbsp;game&nbsp;engine.&nbsp;Flash&nbsp;game&nbsp;clients&nbsp;(I'm&nbsp;fairly&nbsp;invested&nbsp;in&nbsp;jabber1.x&nbsp;for&nbsp;it's&nbsp;Flash&nbsp;support),&nbsp;connect&nbsp;to&nbsp;jabber&nbsp;and&nbsp;join&nbsp;a&nbsp;game&nbsp;(MUC)&nbsp;room&nbsp;to&nbsp;recieve&nbsp;game&nbsp;events.&nbsp;Game&nbsp;state&nbsp;is&nbsp;primarily&nbsp;managed&nbsp;on&nbsp;an&nbsp;application&nbsp;server,&nbsp;which&nbsp;broadcasts&nbsp;game&nbsp;events&nbsp;to&nbsp;the&nbsp;same&nbsp;MUC&nbsp;rooms&nbsp;that&nbsp;the&nbsp;game&nbsp;clients&nbsp;are&nbsp;listening&nbsp;on.&nbsp;&lt;/FONT&gt;&lt;/P&gt;<br>
<br>
&lt;P&gt;&lt;FONT&nbsp;SIZE=2&nbsp;FACE=&quot;Arial&quot;&gt;The&nbsp;reason&nbsp;karma&nbsp;is&nbsp;a&nbsp;problem&nbsp;in&nbsp;this&nbsp;architecture&nbsp;is&nbsp;that&nbsp;the&nbsp;game&nbsp;application&nbsp;server&nbsp;is&nbsp;sending&nbsp;lots&nbsp;and&nbsp;lots&nbsp;of&nbsp;messages&nbsp;to&nbsp;jabber,&nbsp;spread&nbsp;out&nbsp;across&nbsp;the&nbsp;various&nbsp;game/MUC&nbsp;rooms.&nbsp;For&nbsp;this&nbsp;reason,&nbsp;I&nbsp;need&nbsp;karma&nbsp;*NOT*&nbsp;to&nbsp;be&nbsp;applied&nbsp;to&nbsp;the&nbsp;application&nbsp;server.&nbsp;On&nbsp;the&nbsp;other&nbsp;hand,&nbsp;I&nbsp;do&nbsp;want&nbsp;karma&nbsp;applied&nbsp;to&nbsp;game&nbsp;clients&nbsp;connecting&nbsp;over&nbsp;the&nbsp;Internet&nbsp;to&nbsp;help&nbsp;prevent&nbsp;malicious&nbsp;or&nbsp;misbehaving&nbsp;clients&nbsp;from&nbsp;taking&nbsp;jabber&nbsp;down.&nbsp;It&nbsp;seems&nbsp;like&nbsp;a&nbsp;good&nbsp;way&nbsp;to&nbsp;achieve&nbsp;this&nbsp;would&nbsp;be&nbsp;to&nbsp;distinquish&nbsp;the&nbsp;game&nbsp;servers&nbsp;by&nbsp;their&nbsp;private,&nbsp;in-network&nbsp;IPs&nbsp;and&nbsp;specifically&nbsp;exempt&nbsp;them&nbsp;from&nbsp;the&nbsp;karma&nbsp;system.&lt;/FONT&gt;&lt;/P&gt;<br>
<br>
&lt;P&gt;&lt;FONT&nbsp;SIZE=2&nbsp;FACE=&quot;Arial&quot;&gt;If&nbsp;there's&nbsp;a&nbsp;better&nbsp;way&nbsp;to&nbsp;handle&nbsp;this&nbsp;problem&nbsp;than&nbsp;what&nbsp;I&nbsp;described&nbsp;above,&nbsp;please&nbsp;chime&nbsp;in&nbsp;and&nbsp;let&nbsp;me&nbsp;know.&nbsp;If&nbsp;there&nbsp;isn't,&nbsp;I'll&nbsp;probably&nbsp;need&nbsp;to&nbsp;implement&nbsp;the&nbsp;extension&nbsp;described&nbsp;above&nbsp;(or&nbsp;convince&nbsp;real&nbsp;jabber&nbsp;developers&nbsp;to&nbsp;do&nbsp;it).&nbsp;If&nbsp;it&nbsp;does&nbsp;come&nbsp;to&nbsp;that,&nbsp;is&nbsp;this&nbsp;a&nbsp;change&nbsp;that&nbsp;the&nbsp;jabber&nbsp;community&nbsp;would&nbsp;be&nbsp;interested&nbsp;in&nbsp;having&nbsp;in&nbsp;the&nbsp;public&nbsp;release?&lt;/FONT&gt;&lt;/P&gt;<br>
<br>
&lt;P&gt;&lt;FONT&nbsp;SIZE=2&nbsp;FACE=&quot;Arial&quot;&gt;Thanks&nbsp;for&nbsp;your&nbsp;advice&nbsp;and&nbsp;help,&lt;/FONT&gt;<br>
<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&nbsp;FACE=&quot;Arial&quot;&gt;--Larry&nbsp;Kirschner&lt;/FONT&gt;<br>
&lt;/P&gt;<br>
<br>
&lt;/BODY&gt;<br>
&lt;/HTML&gt;
</tt>
