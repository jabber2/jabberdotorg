<tt>
&lt;!DOCTYPE&nbsp;HTML&nbsp;PUBLIC&nbsp;&quot;-//W3C//DTD&nbsp;HTML&nbsp;3.2//EN&quot;&gt;<br>
&lt;HTML&gt;<br>
&lt;HEAD&gt;<br>
&lt;META&nbsp;HTTP-EQUIV=&quot;Content-Type&quot;&nbsp;CONTENT=&quot;text/html;&nbsp;charset=US-ASCII&quot;&gt;<br>
&lt;META&nbsp;NAME=&quot;Generator&quot;&nbsp;CONTENT=&quot;MS&nbsp;Exchange&nbsp;Server&nbsp;version&nbsp;5.5.2654.45&quot;&gt;<br>
&lt;TITLE&gt;RE:&nbsp;[JDEV]&nbsp;Two&nbsp;jabber:iq:roster&nbsp;questions&lt;/TITLE&gt;<br>
&lt;/HEAD&gt;<br>
&lt;BODY&gt;<br>
<br>
&lt;P&gt;&lt;FONT&nbsp;SIZE=2&gt;You&nbsp;do&nbsp;have&nbsp;to&nbsp;send&nbsp;both&nbsp;the&nbsp;presence&nbsp;and&nbsp;the&nbsp;jabber:iq:roster&nbsp;&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;packets.&nbsp;You&nbsp;can&nbsp;send&nbsp;them&nbsp;in&nbsp;either&nbsp;order.&amp;nbsp;&amp;nbsp;&nbsp;&lt;/FONT&gt;<br>
&lt;/P&gt;<br>
<br>
&lt;P&gt;&lt;FONT&nbsp;SIZE=2&gt;I&nbsp;don't&nbsp;think&nbsp;you&nbsp;are&nbsp;ever&nbsp;supposed&nbsp;to&nbsp;send&nbsp;a&nbsp;jabber:iq:roster&nbsp;&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;with&nbsp;a&nbsp;subscription&nbsp;attribute.&amp;nbsp;&nbsp;From&nbsp;what&nbsp;I&nbsp;remember&nbsp;from&nbsp;my&nbsp;&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;conversations&nbsp;with&nbsp;temas,&nbsp;the&nbsp;server&nbsp;just&nbsp;ignores&nbsp;that&nbsp;attribute&nbsp;&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;if&nbsp;you&nbsp;send&nbsp;it.&lt;/FONT&gt;<br>
&lt;/P&gt;<br>
<br>
&lt;P&gt;&lt;FONT&nbsp;SIZE=2&gt;About&nbsp;the&nbsp;groups,&nbsp;unfortunately&nbsp;you&nbsp;always&nbsp;have&nbsp;to&nbsp;send&nbsp;the&nbsp;groups&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;even&nbsp;if&nbsp;you&nbsp;are&nbsp;just&nbsp;changing&nbsp;the&nbsp;name&nbsp;attribute.&amp;nbsp;&nbsp;If&nbsp;you&nbsp;forget&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;to&nbsp;send&nbsp;the&nbsp;groups,&nbsp;you&nbsp;will&nbsp;lose&nbsp;them&nbsp;the&nbsp;next&nbsp;time&nbsp;you&nbsp;login.&lt;/FONT&gt;<br>
&lt;/P&gt;<br>
<br>
&lt;P&gt;&lt;FONT&nbsp;SIZE=2&gt;If&nbsp;I&nbsp;also&nbsp;remember&nbsp;groups&nbsp;correctly,&nbsp;whatever&nbsp;you&nbsp;put&nbsp;in&nbsp;the&nbsp;area&nbsp;for&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;groups&nbsp;(inside&nbsp;of&nbsp;the&nbsp;item&nbsp;element)&nbsp;is&nbsp;just&nbsp;stored&nbsp;by&nbsp;the&nbsp;server&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;as&nbsp;is.&amp;nbsp;&nbsp;You&nbsp;can&nbsp;put&nbsp;whatever&nbsp;XML&nbsp;you&nbsp;want&nbsp;in&nbsp;there.&amp;nbsp;&nbsp;So&nbsp;if&nbsp;you&nbsp;sent:&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&amp;lt;item&nbsp;jid='...'&amp;gt;&amp;lt;foo&amp;gt;abc&amp;lt;/foo&amp;gt;&amp;lt;bar&amp;gt;123&amp;lt;/bar&amp;gt;&amp;lt;/item&amp;gt;,&nbsp;you&nbsp;would&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;get&nbsp;that&nbsp;back&nbsp;the&nbsp;next&nbsp;time&nbsp;you&nbsp;signin&nbsp;and&nbsp;get&nbsp;your&nbsp;roster.&amp;nbsp;&nbsp;Of&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;course&nbsp;if&nbsp;you&nbsp;put&nbsp;something&nbsp;other&nbsp;then&nbsp;groups&nbsp;in&nbsp;there,&nbsp;it&nbsp;would&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;might&nbsp;break&nbsp;other&nbsp;clients.&lt;/FONT&gt;<br>
&lt;/P&gt;<br>
<br>
&lt;P&gt;&lt;FONT&nbsp;SIZE=2&gt;-Robert&lt;/FONT&gt;<br>
&lt;/P&gt;<br>
<br>
&lt;P&gt;&lt;FONT&nbsp;SIZE=2&gt;&amp;gt;&nbsp;-----Original&nbsp;Message-----&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&amp;gt;&nbsp;From:&nbsp;Jens&nbsp;Alfke&nbsp;[&lt;A&nbsp;HREF=&quot;mailto:jens@mac.com&quot;&gt;mailto:jens@mac.com&lt;/A&gt;]&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&amp;gt;&nbsp;Sent:&nbsp;Wednesday,&nbsp;August&nbsp;15,&nbsp;2001&nbsp;4:21&nbsp;PM&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&amp;gt;&nbsp;To:&nbsp;jdev@jabber.org&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&amp;gt;&nbsp;Subject:&nbsp;[JDEV]&nbsp;Two&nbsp;jabber:iq:roster&nbsp;questions&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&amp;gt;&nbsp;&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&amp;gt;&nbsp;&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&amp;gt;&nbsp;I'm&nbsp;trying&nbsp;to&nbsp;improve&nbsp;my&nbsp;roster&nbsp;support&nbsp;by&nbsp;storing&nbsp;the&nbsp;actual&nbsp;&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&amp;gt;&nbsp;names&nbsp;in&nbsp;&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&amp;gt;&nbsp;addition&nbsp;to&nbsp;the&nbsp;jids.&nbsp;I&nbsp;have&nbsp;two&nbsp;questions:&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&amp;gt;&nbsp;&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&amp;gt;&nbsp;(1)&nbsp;When&nbsp;adding&nbsp;a&nbsp;buddy,&nbsp;do&nbsp;I&nbsp;have&nbsp;to&nbsp;first&nbsp;send&nbsp;a&nbsp;&amp;lt;presence&amp;gt;&nbsp;&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&amp;gt;&nbsp;element&nbsp;to&nbsp;&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&amp;gt;&nbsp;subscribe,&nbsp;then&nbsp;a&nbsp;jabber:iq:roster&nbsp;&amp;quot;set&amp;quot;&nbsp;to&nbsp;add&nbsp;a&nbsp;name?&nbsp;I&nbsp;&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&amp;gt;&nbsp;can't&nbsp;specify&nbsp;&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&amp;gt;&nbsp;the&nbsp;real&nbsp;name&nbsp;in&nbsp;the&nbsp;&amp;lt;presence&amp;gt;&nbsp;element,&nbsp;and&nbsp;conversely,&nbsp;I&nbsp;&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&amp;gt;&nbsp;don't&nbsp;think&nbsp;&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&amp;gt;&nbsp;simply&nbsp;changing&nbsp;the&nbsp;'subscription'&nbsp;mode&nbsp;in&nbsp;a&nbsp;roster&nbsp;element&nbsp;will&nbsp;&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&amp;gt;&nbsp;actually&nbsp;cause&nbsp;a&nbsp;subscription&nbsp;attempt&nbsp;to&nbsp;occur,&nbsp;right?&nbsp;This&nbsp;&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&amp;gt;&nbsp;seems&nbsp;sort&nbsp;&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&amp;gt;&nbsp;of&nbsp;kludgy.&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&amp;gt;&nbsp;&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&amp;gt;&nbsp;(2)&nbsp;When&nbsp;sending&nbsp;a&nbsp;roster&nbsp;&amp;quot;set&amp;quot;,&nbsp;can&nbsp;I&nbsp;just&nbsp;skip&nbsp;the&nbsp;fields&nbsp;I&nbsp;&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&amp;gt;&nbsp;don't&nbsp;want&nbsp;&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&amp;gt;&nbsp;to&nbsp;change?&nbsp;Ideally&nbsp;I'd&nbsp;just&nbsp;like&nbsp;to&nbsp;send:&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&amp;gt;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;lt;iq&nbsp;type=&amp;quot;set&amp;quot;&amp;gt;&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&amp;gt;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;lt;query&nbsp;xmlns=&amp;quot;jabber:iq&amp;quot;roster&amp;quot;&amp;gt;&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&amp;gt;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;lt;item&nbsp;jid=&amp;quot;snej@jabber.org&amp;quot;&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&amp;gt;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;name=&amp;quot;Jens&nbsp;Alfke&amp;quot;/&amp;gt;&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&amp;gt;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;lt;/query&amp;gt;&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&amp;gt;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;lt;/iq&amp;gt;&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&amp;gt;&nbsp;but&nbsp;I'm&nbsp;afraid&nbsp;that&nbsp;omitting&nbsp;the&nbsp;'group'&nbsp;and&nbsp;'subscription'&nbsp;elements&nbsp;&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&amp;gt;&nbsp;might&nbsp;clear&nbsp;their&nbsp;values.&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&amp;gt;&nbsp;&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&amp;gt;&nbsp;--Jens&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&amp;gt;&nbsp;&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&amp;gt;&nbsp;_______________________________________________&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&amp;gt;&nbsp;jdev&nbsp;mailing&nbsp;list&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&amp;gt;&nbsp;jdev@jabber.org&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&amp;gt;&nbsp;&lt;A&nbsp;HREF=&quot;http://mailman.jabber.org/listinfo/jdev&quot;&nbsp;TARGET=&quot;_blank&quot;&gt;http://mailman.jabber.org/listinfo/jdev&lt;/A&gt;&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&amp;gt;&nbsp;&lt;/FONT&gt;<br>
&lt;/P&gt;<br>
<br>
&lt;/BODY&gt;<br>
&lt;/HTML&gt;
</tt>
