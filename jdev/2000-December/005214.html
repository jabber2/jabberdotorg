<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [JDEV] NAT Issues
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:jdev%40jabber.org?Subject=%5BJDEV%5D%20NAT%20Issues&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="005209.html">
   <LINK REL="Next"  HREF="005215.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[JDEV] NAT Issues</H1>
    <B>Charles Forsythe</B> 
    <A HREF="mailto:jdev%40jabber.org?Subject=%5BJDEV%5D%20NAT%20Issues&In-Reply-To="
       TITLE="[JDEV] NAT Issues">forsythe at netvoice.net
       </A><BR>
    <I>Sun Dec 17 12:05:37 CST 2000</I>
    <P><UL>
        <LI>Previous message: <A HREF="005209.html">[JDEV] NAT Issues
</A></li>
        <LI>Next message: <A HREF="005215.html">[JDEV] NAT Issues
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5214">[ date ]</a>
              <a href="thread.html#5214">[ thread ]</a>
              <a href="subject.html#5214">[ subject ]</a>
              <a href="author.html#5214">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Michael Brown wrote:
&gt;<i> Has this be covered already?  If so, is there a solution?
</I>
I've been looking into this issue and I've found three basic approaches:

  - Put software on your NAT/Firewall to handle the protocol.  BUT:
	Inexperienced users may not know how to do this.
	NAT/Firewall vendors may not support your protocol.
	The NAT/Firewall may not be under your control (ISP or corporate)

  - NATs compliant with RFC 2663 can use a UDP hack (see link below).
BUT:
	UDP-based transports are a headache
	UDP traffic has higher priority and can clog your network
	UDP introduces security issues
	If multiple peers are behind given NAT, they each need a unique
	  UDP port number (someone has to keep track of this)

  - Offer peer-to-peer proxy service to paying customers only.

I'm going with this last option.  People can use the P2P functions of my
client for free if they can, but if they want a Quality Of Service
guarantee (we promise you can do P2P even if you're both behind
firewalls), they can help pay for the server capacity to support them.

Anyway, here's a nice little whitepaper on the subject:
	<A HREF="http://www.alumni.caltech.edu/~dank/peer-nat.html">http://www.alumni.caltech.edu/~dank/peer-nat.html</A>

This may a stupid question (I've got a whole two weeks of experience
with Jabber), but how would you use or extend the Jabber protocol to
provide P2P negotiation?  Basically, one Jabber presence (&quot;client&quot;)
would request a P2P connection to another Jabber presence (&quot;server&quot;). 
The Jabber &quot;cloud&quot; would first determine whether the &quot;server&quot; presence
is willing or able to support the connection.  If it will, and then the
Jabber servers will orchestrate the connection mechanism between the
&quot;client&quot; and &quot;server&quot; peers.  The options are:

	- client to server TCP socket (client may use Socks protocol)
	- server to client TCP socket (reverse connection)
	- client to server HTTP on port 80 (hack around firewalls)
	- client to server TLS on port 443 (better hack around firewalls)
	- UDP transport
	- client and server connect through proxy server via TCP sockets
	  (client and/or server may need to use HTTP tunneling to connect
	   to proxy server)

The decision on what method to use depends on:

	- what options the peers support
	- what options the Jabber servers are allowed to negotiate
	  (the proxy server option may not be provided)

Any thoughts?

-- Charles


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="005209.html">[JDEV] NAT Issues
</A></li>
	<LI>Next message: <A HREF="005215.html">[JDEV] NAT Issues
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5214">[ date ]</a>
              <a href="thread.html#5214">[ thread ]</a>
              <a href="subject.html#5214">[ subject ]</a>
              <a href="author.html#5214">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://mail.jabber.org/mailman/listinfo/jdev">More information about the JDev
mailing list</a><br>
</body></html>
