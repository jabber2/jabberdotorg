<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [JDEV] Transports new approach
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:jdev%40jabber.org?Subject=Re%3A%20%5BJDEV%5D%20Transports%20new%20approach&In-Reply-To=%3C3A3676D9.18D283DB%40gina.net%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="063713.html">
   <LINK REL="Next"  HREF="063704.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[JDEV] Transports new approach</H1>
    <B>Aaron Johnson</B> 
    <A HREF="mailto:jdev%40jabber.org?Subject=Re%3A%20%5BJDEV%5D%20Transports%20new%20approach&In-Reply-To=%3C3A3676D9.18D283DB%40gina.net%3E"
       TITLE="[JDEV] Transports new approach">solution at gina.net
       </A><BR>
    <I>Tue Dec 12 13:04:57 CST 2000</I>
    <P><UL>
        <LI>Previous message: <A HREF="063713.html">[JDEV] Transports new approach
</A></li>
        <LI>Next message: <A HREF="063704.html">[JDEV] Transports new approach
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#63714">[ date ]</a>
              <a href="thread.html#63714">[ thread ]</a>
              <a href="subject.html#63714">[ subject ]</a>
              <a href="author.html#63714">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I am came in late in this thread, but was interested by the instance information.

Does Jabber support multiple &quot;instances&quot; on one server, that is keeps
configurations seperate for each.
So you could have two people with the some name on the server, but they would be
under different instances?

Aaron Johnson

Dennis Noordsij wrote:

&gt;<i> Schuyler you rock :-)
</I>&gt;<i>
</I>&gt;<i> Yes, this works really well, now I don't have to restart the main jabber
</I>&gt;<i> server either when I am developing the module! This is very good.
</I>&gt;<i>
</I>&gt;<i> The tricky bit in this config is to set the &lt;host&gt; to &quot;myinstance&quot; in
</I>&gt;<i> jabber.xml, tricky tricky.
</I>&gt;<i>
</I>&gt;<i> Once again thanks so much for your time,
</I>&gt;<i> Dennis
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> &gt; Hello,
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Yes this is possible but a little tricky to configure.
</I>&gt;<i> &gt; In your main config file put something like this:
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;  &lt;service id=&quot;mylinker&quot;&gt;
</I>&gt;<i> &gt;     &lt;host&gt;myinstance&lt;/host&gt;
</I>&gt;<i> &gt;     &lt;accept&gt;
</I>&gt;<i> &gt;       &lt;ip&gt;127.0.0.1&lt;/ip&gt;
</I>&gt;<i> &gt;       &lt;port&gt;7001&lt;/port&gt;
</I>&gt;<i> &gt;       &lt;secret&gt;test&lt;/secret&gt;
</I>&gt;<i> &gt;     &lt;/accept&gt;
</I>&gt;<i> &gt;   &lt;/service&gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Then in another file:
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; &lt;jabber&gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;   &lt;service id=&quot;mylinker&quot;&gt;
</I>&gt;<i> &gt;     &lt;host/&gt;
</I>&gt;<i> &gt;     &lt;connect&gt;
</I>&gt;<i> &gt;       &lt;ip&gt;127.0.0.1&lt;/ip&gt;
</I>&gt;<i> &gt;       &lt;port&gt;7001&lt;/port&gt;
</I>&gt;<i> &gt;       &lt;secret&gt;test&lt;/secret&gt;
</I>&gt;<i> &gt;     &lt;/connect&gt;
</I>&gt;<i> &gt;   &lt;/service&gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;   &lt;service id=&quot;myinstance&quot;&gt;
</I>&gt;<i> &gt;     &lt;load&gt;&lt;runcomponent&gt;./src/component.so&lt;/runcomponent&gt;&lt;/load&gt;
</I>&gt;<i> &gt;   &lt;/service&gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; &lt;/jabber&gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Schuyler
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; On Tue, Dec 12, 2000 at 06:35:24PM +0200, Dennis Noordsij wrote:
</I>&gt;<i> &gt; &gt; Hi,
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; This is partly in reply to Keith's description of the new (MIO) way of
</I>&gt;<i> &gt; &gt; doing instances and transports.
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; What I want to do:
</I>&gt;<i> &gt; &gt; I have a normal plain old jabber 1.2 server, working just fine. I have
</I>&gt;<i> &gt; &gt; added a &lt;service&gt; section to handle certain types of messages sent to it
</I>&gt;<i> &gt; &gt; and used a Perl script as that service, worked fine. (the messages got
</I>&gt;<i> &gt; &gt; sent via tcp/to perl, perl replied with xml, all was good).
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; Now I want to convert the Perl version to a C version. I would like to
</I>&gt;<i> &gt; &gt; make use of course of the jabber code for xml building and session
</I>&gt;<i> &gt; &gt; handling etc.
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt;From the information in the example-transport code it appears to be
</I>&gt;<i> &gt; &gt; &gt; quite
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; easy to write the service I have in mind.
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; However, I do not want this service to be run on the same machine as my
</I>&gt;<i> &gt; &gt; &quot;main&quot; jabber, because that one is busy enough as it is. Instead I would
</I>&gt;<i> &gt; &gt; like it to connect to it via TCP/IP from another machine.
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; My uneducated guess was that the 2 jabberd programs, the main one and the
</I>&gt;<i> &gt; &gt; one using my loadable module would connect and all would be good. It's a
</I>&gt;<i> &gt; &gt; little trickier though :-)
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; I have the exact same &lt;service&gt; announcement in the main jabber.xml file.
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; Now I need to create the anotherjabber.xml file, which has a &lt;connect&gt;
</I>&gt;<i> &gt; &gt; part to connect to the main jabber and to register itself there (say for
</I>&gt;<i> &gt; &gt; example its name should be &quot;myinstance&quot; and any messages sent to
</I>&gt;<i> &gt; &gt; &quot;[anyone@]myinstance&quot; should be routed to it.
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; If I use a very simple anotherjabber.xml file, a la:
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; &lt;service id=&quot;myinstance&quot;&gt;
</I>&gt;<i> &gt; &gt;  &lt;host/&gt;
</I>&gt;<i> &gt; &gt;  &lt;connect&gt;
</I>&gt;<i> &gt; &gt;     ....
</I>&gt;<i> &gt; &gt;  &lt;/connect&gt;
</I>&gt;<i> &gt; &gt;  &lt;load&gt;&lt;runcomponent&gt;./src/component.so&lt;/runcomponent&gt;&lt;/load&gt;
</I>&gt;<i> &gt; &gt; &lt;/service&gt;
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; then it appears to connect to the main jabber nicely, but as soon as I
</I>&gt;<i> &gt; &gt; send a message to &quot;myinstance&quot; the 2 jabbers start sending the message to
</I>&gt;<i> &gt; &gt; each other as fast as they can. Note it doesn't bounce, but the second
</I>&gt;<i> &gt; &gt; jabber simply sends it back to the first one, and the first one routes it
</I>&gt;<i> &gt; &gt; back to the second one.
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; I have played with different configuration options, adding some modules
</I>&gt;<i> &gt; &gt; to the second jabber, etc, but what I am trying to do should be quite
</I>&gt;<i> &gt; &gt; simple.
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; An example .xml file for the &quot;myinstance&quot; jabber to accomplish what I am
</I>&gt;<i> &gt; &gt; trying to do would be very very much appreciated!
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; Kind regards,
</I>&gt;<i> &gt; &gt; Dennis
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; _______________________________________________
</I>&gt;<i> &gt; &gt; jdev mailing list
</I>&gt;<i> &gt; &gt; <A HREF="http://mail.jabber.org/mailman/listinfo/jdev">jdev at jabber.org</A>
</I>&gt;<i> &gt; &gt; <A HREF="http://mailman.jabber.org/listinfo/jdev">http://mailman.jabber.org/listinfo/jdev</A>
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; _______________________________________________
</I>&gt;<i> &gt; jdev mailing list
</I>&gt;<i> &gt; <A HREF="http://mail.jabber.org/mailman/listinfo/jdev">jdev at jabber.org</A>
</I>&gt;<i> &gt; <A HREF="http://mailman.jabber.org/listinfo/jdev">http://mailman.jabber.org/listinfo/jdev</A>
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> jdev mailing list
</I>&gt;<i> <A HREF="http://mail.jabber.org/mailman/listinfo/jdev">jdev at jabber.org</A>
</I>&gt;<i> <A HREF="http://mailman.jabber.org/listinfo/jdev">http://mailman.jabber.org/listinfo/jdev</A>
</I>


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="063713.html">[JDEV] Transports new approach
</A></li>
	<LI>Next message: <A HREF="063704.html">[JDEV] Transports new approach
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#63714">[ date ]</a>
              <a href="thread.html#63714">[ thread ]</a>
              <a href="subject.html#63714">[ subject ]</a>
              <a href="author.html#63714">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://mail.jabber.org/mailman/listinfo/jdev">More information about the JDev
mailing list</a><br>
</body></html>
