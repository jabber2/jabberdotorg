<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [JDEV] jpolld intigration with jabberd
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:jdev%40jabber.org?Subject=Re%3A%20%5BJDEV%5D%20jpolld%20intigration%20with%20jabberd&In-Reply-To=%3C00d901c05e01%2460252840%243101a8c0%40dsf%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="063552.html">
   <LINK REL="Next"  HREF="063558.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[JDEV] jpolld intigration with jabberd</H1>
    <B>Vijay Kumar</B> 
    <A HREF="mailto:jdev%40jabber.org?Subject=Re%3A%20%5BJDEV%5D%20jpolld%20intigration%20with%20jabberd&In-Reply-To=%3C00d901c05e01%2460252840%243101a8c0%40dsf%3E"
       TITLE="[JDEV] jpolld intigration with jabberd">vijay at dsfinternet.com
       </A><BR>
    <I>Mon Dec  4 08:49:16 CST 2000</I>
    <P><UL>
        <LI>Previous message: <A HREF="063552.html">[JDEV] Aim and icq
</A></li>
        <LI>Next message: <A HREF="063558.html">[JDEV] jpolld intigration with jabberd
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#63550">[ date ]</a>
              <a href="thread.html#63550">[ thread ]</a>
              <a href="subject.html#63550">[ subject ]</a>
              <a href="author.html#63550">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>hi!! all
   I am trying to use jpolld with jabberd ,
   I have installed jabberd on one machine (192.168.1.200) &amp; jpolld on other
(192.168.1.29)
  I have just added following lines in jabber.xml

      &lt;service id='jpolld'&gt;
        &lt;host&gt;jpolld.192.168.1.29&lt;/host&gt;
        &lt;accept&gt;
          &lt;ip/&gt;
          &lt;port&gt;5225&lt;/port&gt;
          &lt;secret&gt;test&lt;/secret&gt;
        &lt;/accept&gt;
      &lt;/service&gt;

for jpolld .

If I run jpolld on one machine it do connect to jabberd on port 5225:5222
it shows
&quot;
[<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">root at ws29</A> src]# ./jpolld  -l 5225 -h 192.168.1.200 -n jpolld -s test &amp;
[<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">root at ws29</A> src]# Listening on 5225:5222

&quot;
&amp; following are the extract from the log file of jabberd
&quot;
Mon Dec  4 18:46:31 2000  base_accept.c:453 new connection on port 5225 from
ip
192.168.1.29 as fd 12
Mon Dec  4 18:46:31 2000  log.c:105 &lt;log type='notice'
from='-internal'&gt;base_acc
ept: new connection on port 5225 from ip 192.168.1.29&lt;/log&gt;
Mon Dec  4 18:46:31 2000  deliver.c:472 DELIVER 3:-internal &lt;log
type='notice' f
rom='-internal'&gt;base_accept: new connection on port 5225 from ip
192.168.1.29&lt;/l
og&gt;
Mon Dec  4 18:46:31 2000  deliver.c:344 delivering to instance 'logger'
20001204T13:16:31: [notice] (-internal): base_accept: new connection on port
522
5 from ip 192.168.1.29
Mon Dec  4 18:46:31 2000  base_accept.c:308 io thread starting for 12
Mon Dec  4 18:46:31 2000  base_accept.c:328 io read event for 12
Mon Dec  4 18:46:31 2000  base_accept.c:205 socket connected, sending
xstream he
ader: &lt;?xml version='1.0'?&gt;&lt;stream:stream
xmlns:stream='<A HREF="http://etherx.jabber.org">http://etherx.jabber.org</A>
/streams' id='3A2B992F' xmlns='jabber:component:accept'&gt;
Mon Dec  4 18:46:31 2000  base_accept.c:328 io read event for 12
Mon Dec  4 18:46:31 2000  base_accept.c:213 base_accept:
&lt;handshake&gt;5f9aa0a02cd4
650057508d417b05854bb6467b65&lt;/handshake&gt;
Mon Dec  4 18:46:31 2000  base_accept.c:234 Checking:
5f9aa0a02cd4650057508d417b05854bb6467b65
5f9aa0a02cd4650057508d417b05854bb6467b65
&quot;
############################# problem #################################

1)all these shows that connection is established between jabberd  &amp; polld .
but when I connect to polld using jabber client server giving the IP address
of jpolld ,Its give me a
connection error .
2)how can I utilize this setup of jpolld or I am doing some silly mistake to
utilize jpolld for mine server.
3)what else I have to do so that mine client approch the jabberd through
jpolld as mine aim is to use jabber
 at high end .
4)Or am I wrong about the architechtural guess the way jabberd will work
with jpolld ,What I am having in mind is
   that client will connect to jpolld &amp; its TCP connection with then
multiplexed there &amp; directed to jabberd .

###########################################################################


the jabber.xml file is as following .

&lt;jabber&gt;


  &lt;!--
  This is the Jabber Server configuration file.
  The file is broken into different sections based on the services being
managed by jabberd, the server daemon.
  Most of the important sections are commented on and easy to modify, full
instructions are contained at <A HREF="http://docs.jabber.org/.">http://docs.jabber.org/.</A>
  When you see a tag like &quot;jabberd:cmdline&quot;, it's automatically replaced on
startup with the command line flag to jabberd.
  --&gt;


  &lt;!-- This section is for the session manager, the most important component
within the server. --&gt;
  &lt;service id=&quot;sessions&quot;&gt;

    &lt;!--
    Change hostname below to something other than &quot;localhost&quot;, or use the
&quot;jabberd -h hostname&quot; command line flag.
    Multiple &lt;host&gt;...&lt;/host&gt; entries are allowed, each one is a seperate
virtual server.
    --&gt;
    &lt;host&gt;tomcat.dsf&lt;/host&gt;
    &lt;host&gt;localhost&lt;/host&gt;
    &lt;host&gt;&lt;jabberd:cmdline flag=&quot;h&quot;/&gt;&lt;/host&gt;

    &lt;!-- This is the custom configuration section for the session
manager. --&gt;
    &lt;jsm xmlns=&quot;jabber:config:jsm&quot;&gt;

      &lt;info&gt;
        &lt;name&gt;Jabber Server&lt;/name&gt;
        &lt;description&gt;A Jabber Server!&lt;/description&gt;
        &lt;url&gt;<A HREF="http://foo.bar/&lt;/url">http://foo.bar/&lt;/url</A>&gt;
      &lt;/info&gt;

      &lt;register&gt;
        &lt;instructions&gt;Choose a username and password to register with this
server.&lt;/instructions&gt;
&lt;!--
     &lt;username&gt;vijay&lt;/username&gt;
     &lt;password&gt;vijay&lt;/password&gt;
--&gt;
        &lt;name/&gt;&lt;email/&gt;
      &lt;/register&gt;


      &lt;agents&gt;

        &lt;!-- This is the default agent for the master jabber user directory,
this section can be duplicated for additional user custom/company
directories. --&gt;

&lt;!--        &lt;agent jid=&quot;users.jabber.org&quot;&gt; --&gt;

&lt;agent jid=&quot;tomcat.dsf&quot;&gt;
          &lt;name&gt;Jabber User Directory&lt;/name&gt;
          &lt;description&gt;You may register and create a public searchable
profile, and search for other registered Jabber users.&lt;/description&gt;
          &lt;service&gt;jud&lt;/service&gt;
          &lt;register/&gt;
          &lt;search/&gt;
        &lt;/agent&gt;



        &lt;!-- These are just examples, you will receive instructions on what
to place here when you install a real agent.
        &lt;agent jid=&quot;aim.jabber.org&quot;&gt;
          &lt;name&gt;AIM Transport&lt;/name&gt;
          &lt;description&gt;This is the AIM Transport&lt;/description&gt;
          &lt;transport&gt;AIM/AOL ScreenName&lt;/transport&gt;
          &lt;service&gt;aim&lt;/service&gt;
          &lt;register/&gt;
        &lt;/agent&gt;
        &lt;agent jid=&quot;icq.jabber.org&quot;&gt;
          &lt;name&gt;ICQ Transport&lt;/name&gt;
          &lt;description&gt;This is the ICQ Transport&lt;/description&gt;
          &lt;transport&gt;ICQ#&lt;/transport&gt;
          &lt;service&gt;icq&lt;/service&gt;
          &lt;register/&gt;
        &lt;/agent&gt;
        &lt;agent jid=&quot;conference.jabber.org&quot;&gt;
          &lt;name&gt;Group Conferencing&lt;/name&gt;
          &lt;description&gt;You can create and participate in private
chatrooms.&lt;/description&gt;
          &lt;service&gt;privatechat&lt;/service&gt;
          &lt;groupchat/&gt;
          &lt;register/&gt;
        &lt;/agent&gt;
        --&gt;

      &lt;/agents&gt;

      &lt;!-- Session log file --&gt;
      &lt;log&gt;
        &lt;file&gt;session.log&lt;/file&gt;
        &lt;type&gt;session&lt;/type&gt;
      &lt;/log&gt;

      &lt;!-- List of IDs with administrative access, all will receive
administrator messages
      &lt;admin&gt;
        &lt;read&gt;<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">support at localhost</A>&lt;/read&gt;
        &lt;write&gt;<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">admin at localhost</A>&lt;/write&gt;
      &lt;/admin&gt;
      --&gt;

      &lt;!-- Server version update notification, set to the server name so
that all administrators (above) will be notified, or set to any ID --&gt;
      &lt;update&gt;&lt;jabberd:cmdline flag=&quot;h&quot;/&gt;&lt;/update&gt;

    &lt;/jsm&gt;

    &lt;!-- This section dynamically loads the session manager, remove or
comment out modules to disable them. --&gt;
    &lt;load main=&quot;jsm&quot;&gt;
      &lt;jsm&gt;./jsm/jsm.so&lt;/jsm&gt;
      &lt;mod_echo&gt;./jsm/jsm.so&lt;/mod_echo&gt;
      &lt;mod_roster&gt;./jsm/jsm.so&lt;/mod_roster&gt;
      &lt;mod_time&gt;./jsm/jsm.so&lt;/mod_time&gt;
      &lt;mod_vcard&gt;./jsm/jsm.so&lt;/mod_vcard&gt;
      &lt;mod_version&gt;./jsm/jsm.so&lt;/mod_version&gt;
      &lt;mod_announce&gt;./jsm/jsm.so&lt;/mod_announce&gt;
      &lt;mod_agents&gt;./jsm/jsm.so&lt;/mod_agents&gt;
      &lt;mod_admin&gt;./jsm/jsm.so&lt;/mod_admin&gt;
      &lt;mod_private&gt;./jsm/jsm.so&lt;/mod_private&gt;
      &lt;mod_filter&gt;./jsm/jsm.so&lt;/mod_filter&gt;
      &lt;mod_presence&gt;./jsm/jsm.so&lt;/mod_presence&gt;
      &lt;mod_auth_plain&gt;./jsm/jsm.so&lt;/mod_auth_plain&gt;
      &lt;mod_auth_digest&gt;./jsm/jsm.so&lt;/mod_auth_digest&gt;
      &lt;mod_auth_0k&gt;./jsm/jsm.so&lt;/mod_auth_0k&gt;
      &lt;mod_register&gt;./jsm/jsm.so&lt;/mod_register&gt;
      &lt;mod_log&gt;./jsm/jsm.so&lt;/mod_log&gt;
    &lt;/load&gt;

  &lt;/service&gt;


  &lt;!-- This component handles all data storage, using the filesystem. --&gt;
  &lt;xdb id=&quot;xdb&quot;&gt;
    &lt;host/&gt;
    &lt;load&gt;&lt;xdb_file&gt;./xdb_file/xdb_file.so&lt;/xdb_file&gt;&lt;/load&gt;
    &lt;xdb_file
xmlns=&quot;jabber:config:xdb_file&quot;&gt;&lt;spool&gt;./spool&lt;/spool&gt;&lt;/xdb_file&gt;
  &lt;/xdb&gt;

&lt;!-- Service to manage incoming client socket connections. --&gt;
  &lt;service id=&quot;c2s&quot;&gt;

&lt;load&gt;&lt;pthsock_client&gt;./pthsock/pthsock_client.so&lt;/pthsock_client&gt;&lt;/load&gt;
    &lt;pthcsock xmlns='jabber:config:pth-csock'&gt;
      &lt;authtime/&gt; &lt;!-- unlimited time to auth, could be
&lt;authtime&gt;10&lt;/authtime&gt; for 10 seconds, etc --&gt;
      &lt;rate time=&quot;5&quot; points=&quot;25&quot;/&gt; &lt;!-- 25 connects in 5 seconds limit (per
IP) --&gt;
      &lt;!-- Karma based I/O rate limits, per connection, see
<A HREF="http://docs.jabber.org/">http://docs.jabber.org/</A> for more info. --&gt;
      &lt;karma&gt;
        &lt;max&gt;10&lt;/max&gt;
        &lt;inc&gt;1&lt;/inc&gt;
        &lt;dec&gt;1&lt;/dec&gt;
        &lt;restore&gt;5&lt;/restore&gt;
        &lt;penalty&gt;-5&lt;/penalty&gt;
      &lt;/karma&gt;
      &lt;!-- Use these to listen on particular addresses and/or ports.
      &lt;ip port=&quot;5223&quot;/&gt;
      &lt;ip port=&quot;5222&quot;&gt;127.0.0.1&lt;/ip&gt;
      --&gt;
    &lt;/pthcsock&gt;
  &lt;/service&gt;



  &lt;!-- Default server logging component, copies to a file and STDERR. --&gt;
  &lt;log id='logger'&gt;
    &lt;host/&gt;
    &lt;format&gt;%d: [%t] (%h): %s&lt;/format&gt;
    &lt;file&gt;error.log&lt;/file&gt;
    &lt;stderr/&gt;
  &lt;/log&gt;


  &lt;!-- The following two services are for handling server to server
traffic. --&gt;


  &lt;!-- External asychronous DNS resolver --&gt;
  &lt;service id=&quot;dnsrv&quot;&gt;
    &lt;host/&gt;
    &lt;load&gt;&lt;dnsrv&gt;./dnsrv/dnsrv.so&lt;/dnsrv&gt;&lt;/load&gt;
    &lt;dnsrv xmlns=&quot;jabber:config:dnsrv&quot;&gt;
     &lt;resend service=&quot;_jabber._tcp&quot;&gt;s2s&lt;/resend&gt; &lt;!-- for supporting SRV
records --&gt;
     &lt;resend&gt;s2s&lt;/resend&gt;
    &lt;/dnsrv&gt;
  &lt;/service&gt;

   &lt;service id='jpolld'&gt;
        &lt;host&gt;jpolld.192.168.1.29&lt;/host&gt;
        &lt;accept&gt;
          &lt;ip/&gt;
          &lt;port&gt;5225&lt;/port&gt;
          &lt;secret&gt;test&lt;/secret&gt;
        &lt;/accept&gt;
      &lt;/service&gt;

&lt;!-- Handles server connections and dialback hostname verification --&gt;
  &lt;service id=&quot;s2s&quot;&gt;

&lt;load&gt;&lt;pthsock_server&gt;./pthsock/pthsock_server.so&lt;/pthsock_server&gt;&lt;/load&gt;
    &lt;pthssock xmlns='jabber:config:pth-ssock'&gt;
      &lt;legacy/&gt; &lt;!-- allow communication with old 1.0-style servers --&gt;
      &lt;rate time=&quot;5&quot; points=&quot;25&quot;/&gt; &lt;!-- 25 connects in 5 seconds limit (per
IP) --&gt;
      &lt;!-- Karma based I/O rate limits, per connection, set a little higher
for server connections --&gt;
      &lt;karma&gt;
        &lt;max&gt;30&lt;/max&gt;
        &lt;inc&gt;2&lt;/inc&gt;
        &lt;dec&gt;1&lt;/dec&gt;
        &lt;restore&gt;15&lt;/restore&gt;
        &lt;penalty&gt;-1&lt;/penalty&gt;
      &lt;/karma&gt;
      &lt;!-- Use these to listen on particular addresses and/or ports.
      &lt;ip port=&quot;7000&quot;/&gt;
      &lt;ip port=&quot;5269&quot;&gt;127.0.0.1&lt;/ip&gt;
      --&gt;
    &lt;/pthssock&gt;
  &lt;/service&gt;

&lt;/jabber&gt;






</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="063552.html">[JDEV] Aim and icq
</A></li>
	<LI>Next message: <A HREF="063558.html">[JDEV] jpolld intigration with jabberd
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#63550">[ date ]</a>
              <a href="thread.html#63550">[ thread ]</a>
              <a href="subject.html#63550">[ subject ]</a>
              <a href="author.html#63550">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://mail.jabber.org/mailman/listinfo/jdev">More information about the JDev
mailing list</a><br>
</body></html>
