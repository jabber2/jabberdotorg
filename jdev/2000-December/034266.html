<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [JDEV] phew
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:jdev%40jabber.org?Subject=Re%3A%20%5BJDEV%5D%20phew&In-Reply-To=%3C3A2BB6CA.7BFDC5CA%40idealx.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="034251.html">
   <LINK REL="Next"  HREF="034270.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[JDEV] phew</H1>
    <B>Rodolphe Duge de Bernonville</B> 
    <A HREF="mailto:jdev%40jabber.org?Subject=Re%3A%20%5BJDEV%5D%20phew&In-Reply-To=%3C3A2BB6CA.7BFDC5CA%40idealx.com%3E"
       TITLE="[JDEV] phew">rod at idealx.com
       </A><BR>
    <I>Mon Dec  4 09:22:50 CST 2000</I>
    <P><UL>
        <LI>Previous message: <A HREF="034251.html">[JDEV] phew
</A></li>
        <LI>Next message: <A HREF="034270.html">[JDEV] phew
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#34266">[ date ]</a>
              <a href="thread.html#34266">[ thread ]</a>
              <a href="subject.html#34266">[ subject ]</a>
              <a href="author.html#34266">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Dennis Noordsij a &#233;crit :
 
&gt;<i> I have another question with regard to this modular stuff, what if you run 2
</I>&gt;<i> jabber service managers on 2 different systems, both controlling the same
</I>&gt;<i> domain, and you set up one instance to &lt;accept&gt;, and the other one to
</I>&gt;<i> &lt;connect&gt;, ie create a connection between the 2.  (similar to how the
</I>&gt;<i> conferencing module recommends one jabber spawning another jabber for
</I>&gt;<i> stability reasons - i want to do this using tcp/ip so I can have the
</I>&gt;<i> instances on different machines, but not for stability reasons but
</I>&gt;<i> scalability).
</I>
Maybe you can also try that with mod_farm. It was available in
jserver-1.0.
It takes the username and a hash function to locate where is the user
session.


&gt;<i> 
</I>&gt;<i> Client networking is done on yet another machine (or more) running for
</I>&gt;<i> example jpolld's.
</I>&gt;<i> 
</I>&gt;<i> My point is to use a fast 100 mbit link between 2 jabber instances to divide
</I>&gt;<i> the service manager load (the routing) over those machines. If one machine
</I>&gt;<i> receives a message and it doesn't know the destination session it sends it to
</I>&gt;<i> the other jabber instance who should know it. If it does know the user it
</I>&gt;<i> handles it itself. (with the point being that each JSM only has to do a part
</I>&gt;<i> (ideally half) of the routing it would otherwise have to, thus scaling :)
</I>&gt;<i> 
</I>&gt;<i> By doing that, and running several jpolld machines you should be able to
</I>&gt;<i> scale as far up as the bandwidth between the components allows.
</I>
As I told you in my mail, I dont think it is very scalable ...
With 3 servers, in this configuration : 

1 &lt;--&gt; 2 &lt;--&gt; 3

You will have a problem when you want to route message from server 2 ...
Where must go your packet ?  server 1 or server 3 ?
You need to know where must go the packet, and so where is the session 
(which server ...). 
Therefore, you have 2 approaches :

- centralize information : sql database (with xdb_sql ...), or files, 
(xdb_file, with nfs server) and use mod_route and the patch to
dialback.c.

- dont centralize information : mod_farm, but it becomes difficult
to do things like load balancing ...


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="034251.html">[JDEV] phew
</A></li>
	<LI>Next message: <A HREF="034270.html">[JDEV] phew
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#34266">[ date ]</a>
              <a href="thread.html#34266">[ thread ]</a>
              <a href="subject.html#34266">[ subject ]</a>
              <a href="author.html#34266">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://mail.jabber.org/mailman/listinfo/jdev">More information about the JDev
mailing list</a><br>
</body></html>
