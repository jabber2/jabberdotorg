<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [JDEV] Transports new approach
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:jdev%40jabber.org?Subject=Re%3A%20%5BJDEV%5D%20Transports%20new%20approach&In-Reply-To=%3C00121218352400.00334%40dennis%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="034411.html">
   <LINK REL="Next"  HREF="034426.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[JDEV] Transports new approach</H1>
    <B>Dennis Noordsij</B> 
    <A HREF="mailto:jdev%40jabber.org?Subject=Re%3A%20%5BJDEV%5D%20Transports%20new%20approach&In-Reply-To=%3C00121218352400.00334%40dennis%3E"
       TITLE="[JDEV] Transports new approach">dennis.noordsij at wiral.com
       </A><BR>
    <I>Tue Dec 12 10:35:24 CST 2000</I>
    <P><UL>
        <LI>Previous message: <A HREF="034411.html">[JDEV] FW: Error code 503: Service Unavailable
</A></li>
        <LI>Next message: <A HREF="034426.html">[JDEV] Transports new approach
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#34414">[ date ]</a>
              <a href="thread.html#34414">[ thread ]</a>
              <a href="subject.html#34414">[ subject ]</a>
              <a href="author.html#34414">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

This is partly in reply to Keith's description of the new (MIO) way of doing 
instances and transports.

What I want to do:
I have a normal plain old jabber 1.2 server, working just fine. I have added 
a &lt;service&gt; section to handle certain types of messages sent to it and used a 
Perl script as that service, worked fine. (the messages got sent via tcp/to 
perl, perl replied with xml, all was good).

Now I want to convert the Perl version to a C version. I would like to make 
use of course of the jabber code for xml building and session handling etc. 
&gt;<i>From the information in the example-transport code it appears to be quite 
</I>easy to write the service I have in mind.

However, I do not want this service to be run on the same machine as my 
&quot;main&quot; jabber, because that one is busy enough as it is. Instead I would like 
it to connect to it via TCP/IP from another machine.

My uneducated guess was that the 2 jabberd programs, the main one and the one 
using my loadable module would connect and all would be good. It's a little 
trickier though :-)

I have the exact same &lt;service&gt; announcement in the main jabber.xml file.

Now I need to create the anotherjabber.xml file, which has a &lt;connect&gt; part 
to connect to the main jabber and to register itself there (say for example 
its name should be &quot;myinstance&quot; and any messages sent to 
&quot;[anyone@]myinstance&quot; should be routed to it. 

If I use a very simple anotherjabber.xml file, a la:

&lt;service id=&quot;myinstance&quot;&gt;
 &lt;host/&gt;
 &lt;connect&gt;
    ....
 &lt;/connect&gt;
 &lt;load&gt;&lt;runcomponent&gt;./src/component.so&lt;/runcomponent&gt;&lt;/load&gt;
&lt;/service&gt;

then it appears to connect to the main jabber nicely, but as soon as I send a 
message to &quot;myinstance&quot; the 2 jabbers start sending the message to each other 
as fast as they can. Note it doesn't bounce, but the second jabber simply 
sends it back to the first one, and the first one routes it back to the 
second one.

I have played with different configuration options, adding some modules to 
the second jabber, etc, but what I am trying to do should be quite simple.

An example .xml file for the &quot;myinstance&quot; jabber to accomplish what I am 
trying to do would be very very much appreciated!

Kind regards,
Dennis


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="034411.html">[JDEV] FW: Error code 503: Service Unavailable
</A></li>
	<LI>Next message: <A HREF="034426.html">[JDEV] Transports new approach
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#34414">[ date ]</a>
              <a href="thread.html#34414">[ thread ]</a>
              <a href="subject.html#34414">[ subject ]</a>
              <a href="author.html#34414">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://mail.jabber.org/mailman/listinfo/jdev">More information about the JDev
mailing list</a><br>
</body></html>
