<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [jdev] MUC Across Unreliable S2S
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:jdev%40jabber.org?Subject=Re%3A%20%5Bjdev%5D%20MUC%20Across%20Unreliable%20S2S&In-Reply-To=%3C453FB217.4060104%40jabber.org%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="083991.html">
   <LINK REL="Next"  HREF="083993.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[jdev] MUC Across Unreliable S2S</H1>
    <B>Peter Saint-Andre</B> 
    <A HREF="mailto:jdev%40jabber.org?Subject=Re%3A%20%5Bjdev%5D%20MUC%20Across%20Unreliable%20S2S&In-Reply-To=%3C453FB217.4060104%40jabber.org%3E"
       TITLE="[jdev] MUC Across Unreliable S2S">stpeter at jabber.org
       </A><BR>
    <I>Wed Oct 25 13:51:03 CDT 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="083991.html">[jdev] MUC Across Unreliable S2S
</A></li>
        <LI>Next message: <A HREF="083993.html">[jdev] MUC Across Unreliable S2S
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#83992">[ date ]</a>
              <a href="thread.html#83992">[ thread ]</a>
              <a href="subject.html#83992">[ subject ]</a>
              <a href="author.html#83992">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I've been planning to write up an approach to this soon (probably next
week), based on discussions I've had with people in the same situation.
But more discussion is better! :-)

Peter

Don McGregor wrote:
&gt;<i> I've got an unusual deployment environment that may
</I>&gt;<i> require some custom server code, and I'm kicking around
</I>&gt;<i> ideas for how to handle it.
</I>&gt;<i> 
</I>&gt;<i> The use case: I've got multiple remote XMPP servers
</I>&gt;<i> talking to a relatively well connected and stable XMPP
</I>&gt;<i> server hosting MUC. The IP connections between
</I>&gt;<i> the remote servers and the muc server are highly
</I>&gt;<i> unreliable; I'd expect TCP connections to ungracefully
</I>&gt;<i> go down several times per hour, and the downtime
</I>&gt;<i> may be from minutes to hours.
</I>&gt;<i> 
</I>&gt;<i> Users authenticate to their local server and
</I>&gt;<i> join the MUC on the central server. There
</I>&gt;<i> may be many users on the local server; when
</I>&gt;<i> the S2S connection goes down I'd like to
</I>&gt;<i> have the users on that server to be able to
</I>&gt;<i> continue to chat with each other. When the
</I>&gt;<i> S2S connection comes back up the local messages
</I>&gt;<i> should be sent to the MUC server, and the
</I>&gt;<i> MUC server's history since the dropped connection
</I>&gt;<i> should be sent to the users at the remote site.
</I>&gt;<i> 
</I>&gt;<i> What I'm thinking is that I can modify the
</I>&gt;<i> Wildfire server and place an &quot;interceptor&quot;
</I>&gt;<i> piece of code/pattern on the XML router. This
</I>&gt;<i> develops a list of local users, and when it
</I>&gt;<i> detects a dropped S2S connection it begins to
</I>&gt;<i> spool up local messages. It also delivers the
</I>&gt;<i> messages to local users. When it detects
</I>&gt;<i> that the S2S connection has come back up,
</I>&gt;<i> it sends the spooled messages to the MUC,
</I>&gt;<i> and requests the history of the MUC since
</I>&gt;<i> the connection dropped.
</I>&gt;<i> 
</I>&gt;<i> Good idea? Bad idea? Is there a better way
</I>&gt;<i> to handle this situation?
</I>&gt;<i> 
</I>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: smime.p7s
Type: application/x-pkcs7-signature
Size: 7358 bytes
Desc: S/MIME Cryptographic Signature
URL: &lt;<A HREF="https://www.jabber.org/jdev/attachments/20061025/4640bbd9/attachment-0002.bin">https://www.jabber.org/jdev/attachments/20061025/4640bbd9/attachment-0002.bin</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="083991.html">[jdev] MUC Across Unreliable S2S
</A></li>
	<LI>Next message: <A HREF="083993.html">[jdev] MUC Across Unreliable S2S
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#83992">[ date ]</a>
              <a href="thread.html#83992">[ thread ]</a>
              <a href="subject.html#83992">[ subject ]</a>
              <a href="author.html#83992">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://mail.jabber.org/mailman/listinfo/jdev">More information about the JDev
mailing list</a><br>
</body></html>
