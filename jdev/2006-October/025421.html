<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [jdev] MUC Across Unreliable S2S
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:jdev%40jabber.org?Subject=%5Bjdev%5D%20MUC%20Across%20Unreliable%20S2S&In-Reply-To=453FB217.4060104%40jabber.org">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="025420.html">
   <LINK REL="Next"  HREF="025428.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[jdev] MUC Across Unreliable S2S</H1>
    <B>Norman Rasmussen</B> 
    <A HREF="mailto:jdev%40jabber.org?Subject=%5Bjdev%5D%20MUC%20Across%20Unreliable%20S2S&In-Reply-To=453FB217.4060104%40jabber.org"
       TITLE="[jdev] MUC Across Unreliable S2S">norman at rasmussen.co.za
       </A><BR>
    <I>Thu Oct 26 04:41:46 CDT 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="025420.html">[jdev] MUC Across Unreliable S2S
</A></li>
        <LI>Next message: <A HREF="025428.html">[jdev] XEP-0070 in PHP
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#25421">[ date ]</a>
              <a href="thread.html#25421">[ thread ]</a>
              <a href="subject.html#25421">[ subject ]</a>
              <a href="author.html#25421">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>A good place to hash out ideas is also
<A HREF="http://wiki.jabber.org/index.php/Talk:NGMUC">http://wiki.jabber.org/index.php/Talk:NGMUC</A>

My comment on mirroring mucs:

&quot;&quot;&quot; I've been thinking about this one recently. You could create a
'muclinker' component that sends presence to all rooms you want to
'mirror'. That will make all the rooms send you the presence and
messages. You receive these messages and 'bounce' them to the other
rooms. By making this a component you can track enough state in the
entities jid that you don't actually need to store much state on the
component. All of this requires no code changes to any muc
implementations. XEP-0033 support could be added to reduce the
bandwidth consuption.

If you're going to make code changes and enhance the muc XEP, then I
think it would be best to add something to allow an authorised
external source to control the network linkages, and fail-over. This
way the muc's can concentrate on doing what they're good at, and
people can implement their own auto fail-over designs, and swap them
out at will. &quot;&quot;&quot;

On 10/25/06, Peter Saint-Andre &lt;<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">stpeter at jabber.org</A>&gt; wrote:
&gt;<i> I've been planning to write up an approach to this soon (probably next
</I>&gt;<i> week), based on discussions I've had with people in the same situation.
</I>&gt;<i> But more discussion is better! :-)
</I>&gt;<i>
</I>&gt;<i> Peter
</I>&gt;<i>
</I>&gt;<i> Don McGregor wrote:
</I>&gt;<i> &gt; I've got an unusual deployment environment that may
</I>&gt;<i> &gt; require some custom server code, and I'm kicking around
</I>&gt;<i> &gt; ideas for how to handle it.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; The use case: I've got multiple remote XMPP servers
</I>&gt;<i> &gt; talking to a relatively well connected and stable XMPP
</I>&gt;<i> &gt; server hosting MUC. The IP connections between
</I>&gt;<i> &gt; the remote servers and the muc server are highly
</I>&gt;<i> &gt; unreliable; I'd expect TCP connections to ungracefully
</I>&gt;<i> &gt; go down several times per hour, and the downtime
</I>&gt;<i> &gt; may be from minutes to hours.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Users authenticate to their local server and
</I>&gt;<i> &gt; join the MUC on the central server. There
</I>&gt;<i> &gt; may be many users on the local server; when
</I>&gt;<i> &gt; the S2S connection goes down I'd like to
</I>&gt;<i> &gt; have the users on that server to be able to
</I>&gt;<i> &gt; continue to chat with each other. When the
</I>&gt;<i> &gt; S2S connection comes back up the local messages
</I>&gt;<i> &gt; should be sent to the MUC server, and the
</I>&gt;<i> &gt; MUC server's history since the dropped connection
</I>&gt;<i> &gt; should be sent to the users at the remote site.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; What I'm thinking is that I can modify the
</I>&gt;<i> &gt; Wildfire server and place an &quot;interceptor&quot;
</I>&gt;<i> &gt; piece of code/pattern on the XML router. This
</I>&gt;<i> &gt; develops a list of local users, and when it
</I>&gt;<i> &gt; detects a dropped S2S connection it begins to
</I>&gt;<i> &gt; spool up local messages. It also delivers the
</I>&gt;<i> &gt; messages to local users. When it detects
</I>&gt;<i> &gt; that the S2S connection has come back up,
</I>&gt;<i> &gt; it sends the spooled messages to the MUC,
</I>&gt;<i> &gt; and requests the history of the MUC since
</I>&gt;<i> &gt; the connection dropped.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Good idea? Bad idea? Is there a better way
</I>&gt;<i> &gt; to handle this situation?
</I>&gt;<i> &gt;
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>

-- 
- Norman Rasmussen
 - Email: <A HREF="http://mail.jabber.org/mailman/listinfo/jdev">norman at rasmussen.co.za</A>
 - Home page: <A HREF="http://norman.rasmussen.co.za/">http://norman.rasmussen.co.za/</A>

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="025420.html">[jdev] MUC Across Unreliable S2S
</A></li>
	<LI>Next message: <A HREF="025428.html">[jdev] XEP-0070 in PHP
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#25421">[ date ]</a>
              <a href="thread.html#25421">[ thread ]</a>
              <a href="subject.html#25421">[ subject ]</a>
              <a href="author.html#25421">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://mail.jabber.org/mailman/listinfo/jdev">More information about the JDev
mailing list</a><br>
</body></html>
