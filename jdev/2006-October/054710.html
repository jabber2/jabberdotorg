<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [jdev] MUC Across Unreliable S2S
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:jdev%40jabber.org?Subject=Re%3A%20%5Bjdev%5D%20MUC%20Across%20Unreliable%20S2S&In-Reply-To=%3C97B71C0C860DEC40A993AB9F7F0D43357026AD%40fattire.winfessor.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="054709.html">
   <LINK REL="Next"  HREF="054711.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[jdev] MUC Across Unreliable S2S</H1>
    <B>JD Conley</B> 
    <A HREF="mailto:jdev%40jabber.org?Subject=Re%3A%20%5Bjdev%5D%20MUC%20Across%20Unreliable%20S2S&In-Reply-To=%3C97B71C0C860DEC40A993AB9F7F0D43357026AD%40fattire.winfessor.com%3E"
       TITLE="[jdev] MUC Across Unreliable S2S">jd.conley at coversant.net
       </A><BR>
    <I>Wed Oct 25 19:54:21 CDT 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="054709.html">[jdev] MUC Across Unreliable S2S
</A></li>
        <LI>Next message: <A HREF="054711.html">[jdev] MUC Across Unreliable S2S
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#54710">[ date ]</a>
              <a href="thread.html#54710">[ thread ]</a>
              <a href="subject.html#54710">[ subject ]</a>
              <a href="author.html#54710">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Possibly. In any case we should move this conversation to Standards-JIG.

-JD

&gt;<i> -----Original Message-----
</I>&gt;<i> From: <A HREF="http://mail.jabber.org/mailman/listinfo/jdev">jdev-bounces at jabber.org</A> [mailto:<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">jdev-bounces at jabber.org</A>] On
</I>&gt;<i> Behalf Of Don McGregor
</I>&gt;<i> Sent: Wednesday, October 25, 2006 5:17 PM
</I>&gt;<i> To: Jabber software development list
</I>&gt;<i> Subject: Re: [jdev] MUC Across Unreliable S2S
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> IRC, as I understand it, generates a spanning tree of
</I>&gt;<i> the servers involved, and from what I read in the RFCs
</I>&gt;<i> people are complaining about that.
</I>&gt;<i> 
</I>&gt;<i> Something NNTP-ish might work, with each site
</I>&gt;<i> giving a unique ID to each message and advertising
</I>&gt;<i> what messages they have.
</I>&gt;<i> 
</I>&gt;<i> There are also some room management issues if
</I>&gt;<i> you go distributed--who has authority to do what?
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> On Oct 25, 2006, at 4:09 PM, JD Conley wrote:
</I>&gt;<i> 
</I>&gt;<i> &gt; It seems like this calls for an IRC style &quot;network&quot; approach where
</I>&gt;<i> MUC
</I>&gt;<i> &gt; domains can join a specific network and share room names.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; -JD
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; I've been planning to write up an approach to this soon (probably
</I>&gt;<i> &gt;&gt; next
</I>&gt;<i> &gt;&gt; week), based on discussions I've had with people in the same
</I>&gt;<i> &gt; situation.
</I>&gt;<i> &gt;&gt; But more discussion is better! :-)
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; Peter
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; Don McGregor wrote:
</I>&gt;<i> &gt;&gt;&gt; I've got an unusual deployment environment that may
</I>&gt;<i> &gt;&gt;&gt; require some custom server code, and I'm kicking around
</I>&gt;<i> &gt;&gt;&gt; ideas for how to handle it.
</I>&gt;<i> &gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt; The use case: I've got multiple remote XMPP servers
</I>&gt;<i> &gt;&gt;&gt; talking to a relatively well connected and stable XMPP
</I>&gt;<i> &gt;&gt;&gt; server hosting MUC. The IP connections between
</I>&gt;<i> &gt;&gt;&gt; the remote servers and the muc server are highly
</I>&gt;<i> &gt;&gt;&gt; unreliable; I'd expect TCP connections to ungracefully
</I>&gt;<i> &gt;&gt;&gt; go down several times per hour, and the downtime
</I>&gt;<i> &gt;&gt;&gt; may be from minutes to hours.
</I>&gt;<i> &gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt; Users authenticate to their local server and
</I>&gt;<i> &gt;&gt;&gt; join the MUC on the central server. There
</I>&gt;<i> &gt;&gt;&gt; may be many users on the local server; when
</I>&gt;<i> &gt;&gt;&gt; the S2S connection goes down I'd like to
</I>&gt;<i> &gt;&gt;&gt; have the users on that server to be able to
</I>&gt;<i> &gt;&gt;&gt; continue to chat with each other. When the
</I>&gt;<i> &gt;&gt;&gt; S2S connection comes back up the local messages
</I>&gt;<i> &gt;&gt;&gt; should be sent to the MUC server, and the
</I>&gt;<i> &gt;&gt;&gt; MUC server's history since the dropped connection
</I>&gt;<i> &gt;&gt;&gt; should be sent to the users at the remote site.
</I>&gt;<i> &gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt; What I'm thinking is that I can modify the
</I>&gt;<i> &gt;&gt;&gt; Wildfire server and place an &quot;interceptor&quot;
</I>&gt;<i> &gt;&gt;&gt; piece of code/pattern on the XML router. This
</I>&gt;<i> &gt;&gt;&gt; develops a list of local users, and when it
</I>&gt;<i> &gt;&gt;&gt; detects a dropped S2S connection it begins to
</I>&gt;<i> &gt;&gt;&gt; spool up local messages. It also delivers the
</I>&gt;<i> &gt;&gt;&gt; messages to local users. When it detects
</I>&gt;<i> &gt;&gt;&gt; that the S2S connection has come back up,
</I>&gt;<i> &gt;&gt;&gt; it sends the spooled messages to the MUC,
</I>&gt;<i> &gt;&gt;&gt; and requests the history of the MUC since
</I>&gt;<i> &gt;&gt;&gt; the connection dropped.
</I>&gt;<i> &gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt; Good idea? Bad idea? Is there a better way
</I>&gt;<i> &gt;&gt;&gt; to handle this situation?
</I>&gt;<i> &gt;&gt;&gt;
</I>&gt;<i> &gt;
</I>

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="054709.html">[jdev] MUC Across Unreliable S2S
</A></li>
	<LI>Next message: <A HREF="054711.html">[jdev] MUC Across Unreliable S2S
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#54710">[ date ]</a>
              <a href="thread.html#54710">[ thread ]</a>
              <a href="subject.html#54710">[ subject ]</a>
              <a href="author.html#54710">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://mail.jabber.org/mailman/listinfo/jdev">More information about the JDev
mailing list</a><br>
</body></html>
