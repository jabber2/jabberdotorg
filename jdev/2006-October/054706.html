<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [jdev] MUC Across Unreliable S2S
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:jdev%40jabber.org?Subject=Re%3A%20%5Bjdev%5D%20MUC%20Across%20Unreliable%20S2S&In-Reply-To=%3C304605E9-5CAB-49B2-8672-3BAE0C487A26%40nps.edu%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="054715.html">
   <LINK REL="Next"  HREF="054707.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[jdev] MUC Across Unreliable S2S</H1>
    <B>Don McGregor</B> 
    <A HREF="mailto:jdev%40jabber.org?Subject=Re%3A%20%5Bjdev%5D%20MUC%20Across%20Unreliable%20S2S&In-Reply-To=%3C304605E9-5CAB-49B2-8672-3BAE0C487A26%40nps.edu%3E"
       TITLE="[jdev] MUC Across Unreliable S2S">mcgredo at nps.edu
       </A><BR>
    <I>Wed Oct 25 13:27:21 CDT 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="054715.html">[jdev] Re: MUC through IRC
</A></li>
        <LI>Next message: <A HREF="054707.html">[jdev] MUC Across Unreliable S2S
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#54706">[ date ]</a>
              <a href="thread.html#54706">[ thread ]</a>
              <a href="subject.html#54706">[ subject ]</a>
              <a href="author.html#54706">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I've got an unusual deployment environment that may
require some custom server code, and I'm kicking around
ideas for how to handle it.

The use case: I've got multiple remote XMPP servers
talking to a relatively well connected and stable XMPP
server hosting MUC. The IP connections between
the remote servers and the muc server are highly
unreliable; I'd expect TCP connections to ungracefully
go down several times per hour, and the downtime
may be from minutes to hours.

Users authenticate to their local server and
join the MUC on the central server. There
may be many users on the local server; when
the S2S connection goes down I'd like to
have the users on that server to be able to
continue to chat with each other. When the
S2S connection comes back up the local messages
should be sent to the MUC server, and the
MUC server's history since the dropped connection
should be sent to the users at the remote site.

What I'm thinking is that I can modify the
Wildfire server and place an &quot;interceptor&quot;
piece of code/pattern on the XML router. This
develops a list of local users, and when it
detects a dropped S2S connection it begins to
spool up local messages. It also delivers the
messages to local users. When it detects
that the S2S connection has come back up,
it sends the spooled messages to the MUC,
and requests the history of the MUC since
the connection dropped.

Good idea? Bad idea? Is there a better way
to handle this situation?


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="054715.html">[jdev] Re: MUC through IRC
</A></li>
	<LI>Next message: <A HREF="054707.html">[jdev] MUC Across Unreliable S2S
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#54706">[ date ]</a>
              <a href="thread.html#54706">[ thread ]</a>
              <a href="subject.html#54706">[ subject ]</a>
              <a href="author.html#54706">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://mail.jabber.org/mailman/listinfo/jdev">More information about the JDev
mailing list</a><br>
</body></html>
