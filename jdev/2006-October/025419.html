<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [jdev] MUC Across Unreliable S2S
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:jdev%40jabber.org?Subject=%5Bjdev%5D%20MUC%20Across%20Unreliable%20S2S&In-Reply-To=97B71C0C860DEC40A993AB9F7F0D433570268F%40fattire.winfessor.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="025418.html">
   <LINK REL="Next"  HREF="025420.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[jdev] MUC Across Unreliable S2S</H1>
    <B>Don McGregor</B> 
    <A HREF="mailto:jdev%40jabber.org?Subject=%5Bjdev%5D%20MUC%20Across%20Unreliable%20S2S&In-Reply-To=97B71C0C860DEC40A993AB9F7F0D433570268F%40fattire.winfessor.com"
       TITLE="[jdev] MUC Across Unreliable S2S">mcgredo at nps.edu
       </A><BR>
    <I>Wed Oct 25 19:16:50 CDT 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="025418.html">[jdev] MUC Across Unreliable S2S
</A></li>
        <LI>Next message: <A HREF="025420.html">[jdev] MUC Across Unreliable S2S
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#25419">[ date ]</a>
              <a href="thread.html#25419">[ thread ]</a>
              <a href="subject.html#25419">[ subject ]</a>
              <a href="author.html#25419">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
IRC, as I understand it, generates a spanning tree of
the servers involved, and from what I read in the RFCs
people are complaining about that.

Something NNTP-ish might work, with each site
giving a unique ID to each message and advertising
what messages they have.

There are also some room management issues if
you go distributed--who has authority to do what?


On Oct 25, 2006, at 4:09 PM, JD Conley wrote:

&gt;<i> It seems like this calls for an IRC style &quot;network&quot; approach where MUC
</I>&gt;<i> domains can join a specific network and share room names.
</I>&gt;<i>
</I>&gt;<i> -JD
</I>&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I've been planning to write up an approach to this soon (probably  
</I>&gt;&gt;<i> next
</I>&gt;&gt;<i> week), based on discussions I've had with people in the same
</I>&gt;<i> situation.
</I>&gt;&gt;<i> But more discussion is better! :-)
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Peter
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Don McGregor wrote:
</I>&gt;&gt;&gt;<i> I've got an unusual deployment environment that may
</I>&gt;&gt;&gt;<i> require some custom server code, and I'm kicking around
</I>&gt;&gt;&gt;<i> ideas for how to handle it.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> The use case: I've got multiple remote XMPP servers
</I>&gt;&gt;&gt;<i> talking to a relatively well connected and stable XMPP
</I>&gt;&gt;&gt;<i> server hosting MUC. The IP connections between
</I>&gt;&gt;&gt;<i> the remote servers and the muc server are highly
</I>&gt;&gt;&gt;<i> unreliable; I'd expect TCP connections to ungracefully
</I>&gt;&gt;&gt;<i> go down several times per hour, and the downtime
</I>&gt;&gt;&gt;<i> may be from minutes to hours.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Users authenticate to their local server and
</I>&gt;&gt;&gt;<i> join the MUC on the central server. There
</I>&gt;&gt;&gt;<i> may be many users on the local server; when
</I>&gt;&gt;&gt;<i> the S2S connection goes down I'd like to
</I>&gt;&gt;&gt;<i> have the users on that server to be able to
</I>&gt;&gt;&gt;<i> continue to chat with each other. When the
</I>&gt;&gt;&gt;<i> S2S connection comes back up the local messages
</I>&gt;&gt;&gt;<i> should be sent to the MUC server, and the
</I>&gt;&gt;&gt;<i> MUC server's history since the dropped connection
</I>&gt;&gt;&gt;<i> should be sent to the users at the remote site.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> What I'm thinking is that I can modify the
</I>&gt;&gt;&gt;<i> Wildfire server and place an &quot;interceptor&quot;
</I>&gt;&gt;&gt;<i> piece of code/pattern on the XML router. This
</I>&gt;&gt;&gt;<i> develops a list of local users, and when it
</I>&gt;&gt;&gt;<i> detects a dropped S2S connection it begins to
</I>&gt;&gt;&gt;<i> spool up local messages. It also delivers the
</I>&gt;&gt;&gt;<i> messages to local users. When it detects
</I>&gt;&gt;&gt;<i> that the S2S connection has come back up,
</I>&gt;&gt;&gt;<i> it sends the spooled messages to the MUC,
</I>&gt;&gt;&gt;<i> and requests the history of the MUC since
</I>&gt;&gt;&gt;<i> the connection dropped.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Good idea? Bad idea? Is there a better way
</I>&gt;&gt;&gt;<i> to handle this situation?
</I>&gt;&gt;&gt;<i>
</I>&gt;<i>
</I>

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="025418.html">[jdev] MUC Across Unreliable S2S
</A></li>
	<LI>Next message: <A HREF="025420.html">[jdev] MUC Across Unreliable S2S
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#25419">[ date ]</a>
              <a href="thread.html#25419">[ thread ]</a>
              <a href="subject.html#25419">[ subject ]</a>
              <a href="author.html#25419">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://mail.jabber.org/mailman/listinfo/jdev">More information about the JDev
mailing list</a><br>
</body></html>
