<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [jdev] MUC Across Unreliable S2S
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:jdev%40jabber.org?Subject=Re%3A%20%5Bjdev%5D%20MUC%20Across%20Unreliable%20S2S&In-Reply-To=%3C97B71C0C860DEC40A993AB9F7F0D433570268F%40fattire.winfessor.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="083992.html">
   <LINK REL="Next"  HREF="083994.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[jdev] MUC Across Unreliable S2S</H1>
    <B>JD Conley</B> 
    <A HREF="mailto:jdev%40jabber.org?Subject=Re%3A%20%5Bjdev%5D%20MUC%20Across%20Unreliable%20S2S&In-Reply-To=%3C97B71C0C860DEC40A993AB9F7F0D433570268F%40fattire.winfessor.com%3E"
       TITLE="[jdev] MUC Across Unreliable S2S">jd.conley at coversant.net
       </A><BR>
    <I>Wed Oct 25 18:09:01 CDT 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="083992.html">[jdev] MUC Across Unreliable S2S
</A></li>
        <LI>Next message: <A HREF="083994.html">[jdev] MUC Across Unreliable S2S
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#83993">[ date ]</a>
              <a href="thread.html#83993">[ thread ]</a>
              <a href="subject.html#83993">[ subject ]</a>
              <a href="author.html#83993">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>It seems like this calls for an IRC style &quot;network&quot; approach where MUC
domains can join a specific network and share room names.

-JD

&gt;<i> 
</I>&gt;<i> I've been planning to write up an approach to this soon (probably next
</I>&gt;<i> week), based on discussions I've had with people in the same
</I>situation.
&gt;<i> But more discussion is better! :-)
</I>&gt;<i> 
</I>&gt;<i> Peter
</I>&gt;<i> 
</I>&gt;<i> Don McGregor wrote:
</I>&gt;<i> &gt; I've got an unusual deployment environment that may
</I>&gt;<i> &gt; require some custom server code, and I'm kicking around
</I>&gt;<i> &gt; ideas for how to handle it.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; The use case: I've got multiple remote XMPP servers
</I>&gt;<i> &gt; talking to a relatively well connected and stable XMPP
</I>&gt;<i> &gt; server hosting MUC. The IP connections between
</I>&gt;<i> &gt; the remote servers and the muc server are highly
</I>&gt;<i> &gt; unreliable; I'd expect TCP connections to ungracefully
</I>&gt;<i> &gt; go down several times per hour, and the downtime
</I>&gt;<i> &gt; may be from minutes to hours.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Users authenticate to their local server and
</I>&gt;<i> &gt; join the MUC on the central server. There
</I>&gt;<i> &gt; may be many users on the local server; when
</I>&gt;<i> &gt; the S2S connection goes down I'd like to
</I>&gt;<i> &gt; have the users on that server to be able to
</I>&gt;<i> &gt; continue to chat with each other. When the
</I>&gt;<i> &gt; S2S connection comes back up the local messages
</I>&gt;<i> &gt; should be sent to the MUC server, and the
</I>&gt;<i> &gt; MUC server's history since the dropped connection
</I>&gt;<i> &gt; should be sent to the users at the remote site.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; What I'm thinking is that I can modify the
</I>&gt;<i> &gt; Wildfire server and place an &quot;interceptor&quot;
</I>&gt;<i> &gt; piece of code/pattern on the XML router. This
</I>&gt;<i> &gt; develops a list of local users, and when it
</I>&gt;<i> &gt; detects a dropped S2S connection it begins to
</I>&gt;<i> &gt; spool up local messages. It also delivers the
</I>&gt;<i> &gt; messages to local users. When it detects
</I>&gt;<i> &gt; that the S2S connection has come back up,
</I>&gt;<i> &gt; it sends the spooled messages to the MUC,
</I>&gt;<i> &gt; and requests the history of the MUC since
</I>&gt;<i> &gt; the connection dropped.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Good idea? Bad idea? Is there a better way
</I>&gt;<i> &gt; to handle this situation?
</I>&gt;<i> &gt;
</I>

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="083992.html">[jdev] MUC Across Unreliable S2S
</A></li>
	<LI>Next message: <A HREF="083994.html">[jdev] MUC Across Unreliable S2S
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#83993">[ date ]</a>
              <a href="thread.html#83993">[ thread ]</a>
              <a href="subject.html#83993">[ subject ]</a>
              <a href="author.html#83993">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://mail.jabber.org/mailman/listinfo/jdev">More information about the JDev
mailing list</a><br>
</body></html>
