<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [JDEV] Re:Creating a presence server component?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:jdev%40jabber.org?Subject=Re%3A%20%5BJDEV%5D%20Re%3ACreating%20a%20presence%20server%20component%3F&In-Reply-To=%3C3D5E150F.D5C8E60F%40terravirtual.net%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="072517.html">
   <LINK REL="Next"  HREF="072476.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[JDEV] Re:Creating a presence server component?</H1>
    <B>Sylvain Roberdeau</B> 
    <A HREF="mailto:jdev%40jabber.org?Subject=Re%3A%20%5BJDEV%5D%20Re%3ACreating%20a%20presence%20server%20component%3F&In-Reply-To=%3C3D5E150F.D5C8E60F%40terravirtual.net%3E"
       TITLE="[JDEV] Re:Creating a presence server component?">sylvain.roberdeau at terravirtual.net
       </A><BR>
    <I>Sat Aug 17 04:19:11 CDT 2002</I>
    <P><UL>
        <LI>Previous message: <A HREF="072517.html">[JDEV] Re:Creating a presence server component?
</A></li>
        <LI>Next message: <A HREF="072476.html">[JDEV] &quot;Lotus sametime&quot; = really another IM system in this world?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#72525">[ date ]</a>
              <a href="thread.html#72525">[ thread ]</a>
              <a href="subject.html#72525">[ subject ]</a>
              <a href="author.html#72525">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Philippe,

    I'm interested in your raw code.
    If it's too large send it me directly, but it will be more usefull to post
it it this newsgrourp.
    Actually, I'm testing a JSM module to send specific message to a dedicated
Perl service. The objective is to detect correctly user's presence and status
and to avoid to send unusefull messages (ex. presence send to roster, iq for
JUD,...).
    But an example in Java can direct to a good start.

Sylvain

Philippe Raxhon a &#233;crit :

&gt;<i> Me again,
</I>&gt;<i>
</I>&gt;<i> I should have been more patient. It indeed works, the change to do in
</I>&gt;<i> the mod_log module is quite simple, but I'm now wondering what could be
</I>&gt;<i> the effect on the overall performances of the server.
</I>&gt;<i>
</I>&gt;<i> BTW, I have finally found a modified version of jabberbeans that makes
</I>&gt;<i> the coding of an accept component possible. It's dirty and raw but at
</I>&gt;<i> least one can have a working accept component based on jabberbeans.
</I>&gt;<i> Should I post the code here?
</I>&gt;<i>
</I>&gt;<i> Philippe
</I>&gt;<i>
</I>&gt;<i> Philippe Raxhon wrote:
</I>&gt;<i>
</I>&gt;<i> &gt; I now remember another solution. In the jsm section of jabber.xml, one
</I>&gt;<i> &gt; can add:
</I>&gt;<i> &gt; &lt;archive&gt;
</I>&gt;<i> &gt;  &lt;service&gt;myservice.myhost&lt;/service&gt;
</I>&gt;<i> &gt; &lt;archive&gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; given you have defined such a service in the service section of
</I>&gt;<i> &gt; jabber.xml, for instance:
</I>&gt;<i> &gt; &lt;service id =&quot;myservice&quot;&gt;
</I>&gt;<i> &gt;  &lt;host&gt;myservice.myhost&gt;
</I>&gt;<i> &gt;  &lt;accept&gt;
</I>&gt;<i> &gt;     &lt;ip&gt;localhost&lt;/ip&gt;
</I>&gt;<i> &gt;     &lt;port&gt;5999&lt;/port&gt;
</I>&gt;<i> &gt;     &lt;secret&gt;secret&lt;/secret&gt;
</I>&gt;<i> &gt;  &lt;/accept&gt;
</I>&gt;<i> &gt; &lt;/service&gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; The accept component (it can be writen in any language and doesn't
</I>&gt;<i> &gt; have to run on the same host) will receive a copy of every message
</I>&gt;<i> &gt; sent by the users. The interesting part is that I think it's easy to
</I>&gt;<i> &gt; hack the mod_log module to &quot;archive&quot; not only the messages, but also
</I>&gt;<i> &gt; the presence or iq.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Please, correct me if I'm wrong.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Jean-Louis Seguineau /EXC/TEC wrote:
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;&gt; Hey,
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; That's easy ! And it has nothing to do with whatever language you
</I>&gt;<i> &gt;&gt; use. It
</I>&gt;<i> &gt;&gt; does it requires to write a JSM module as long as your component is only
</I>&gt;<i> &gt;&gt; meant to process the received packets and not interfere with the JSM
</I>&gt;<i> &gt;&gt; processing. This can be applied to build a kind of packet &quot;sniffer&quot; and
</I>&gt;<i> &gt;&gt; allow you to count, record, monitor, etc...
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; You just need to declare a service in your jabber.xml so to receive a
</I>&gt;<i> &gt;&gt; copy
</I>&gt;<i> &gt;&gt; of all packets going through the server.
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; &lt;service id=&quot;sniffer.myserver&quot;&gt;
</I>&gt;<i> &gt;&gt;    &lt;host&gt;myserver&lt;/host&gt;
</I>&gt;<i> &gt;&gt;    &lt;host&gt;myjpolld.myserver&lt;/host&gt;
</I>&gt;<i> &gt;&gt;    &lt;host&gt;sniffer.myserver&lt;/host&gt;
</I>&gt;<i> &gt;&gt; ....
</I>&gt;<i> &gt;&gt;  plus any aother internal JID that you want to monitor
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;    &lt;accept&gt;
</I>&gt;<i> &gt;&gt;        &lt;ip/&gt;
</I>&gt;<i> &gt;&gt;        &lt;port&gt;myport&lt;/port&gt;
</I>&gt;<i> &gt;&gt;        &lt;secret&gt;secret&lt;/secret&gt;
</I>&gt;<i> &gt;&gt;    &lt;/accept&gt;
</I>&gt;<i> &gt;&gt; &lt;/service&gt;
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; Then the sniffer component will receive a copy of all traffic for the
</I>&gt;<i> &gt;&gt; &lt;host&gt;s. The component can sit on another server as any component can.
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; There is no way that I jnow of to separate the packets types before
</I>&gt;<i> &gt;&gt; they are
</I>&gt;<i> &gt;&gt; sent to the component. But you can either make one component per
</I>&gt;<i> &gt;&gt; packet type
</I>&gt;<i> &gt;&gt; and filter the input, or make a filter component that in turn direct the
</I>&gt;<i> &gt;&gt; right packet type to a specific processor component.
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; Hope it helps
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; Jean-Louis
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; ----- Original Message -----
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;&gt; Message: 3
</I>&gt;<i> &gt;&gt;&gt; Date: Sun, 11 Aug 2002 12:48:49 +0200
</I>&gt;<i> &gt;&gt;&gt; From: &quot;Sylvain Roberdeau&quot; &lt;<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">sylvain.roberdeau at terravirtual.net</A>&gt;
</I>&gt;<i> &gt;&gt;&gt; Organization: Terra Virtual
</I>&gt;<i> &gt;&gt;&gt; To: <A HREF="http://mail.jabber.org/mailman/listinfo/jdev">jdev at jabber.org</A>
</I>&gt;<i> &gt;&gt;&gt; Subject: Re: [JDEV] Creating a presence server component?
</I>&gt;<i> &gt;&gt;&gt; Reply-To: <A HREF="http://mail.jabber.org/mailman/listinfo/jdev">jdev at jabber.org</A>
</I>&gt;<i> &gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt; Hi,
</I>&gt;<i> &gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;     sorry if I was not clear :)
</I>&gt;<i> &gt;&gt;&gt;    I hope to create an &quot;element&quot; for Jabber server which can intercept
</I>&gt;<i> &gt;&gt;&gt; &lt;presence&gt;, &lt;message&gt; and &lt;iq&gt; and apply some specific process. For
</I>&gt;<i> &gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; example, log
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;&gt; all data with a specific structure, file repartition, SNMP messages,
</I>&gt;<i> &gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; MRTG...
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;    I haven't a good grip on C to build all with this language and I
</I>&gt;<i> &gt;&gt;&gt; want
</I>&gt;<i> &gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; to
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;&gt; split process in a separate Jabberd (to avoid overload)
</I>&gt;<i> &gt;&gt;&gt;    The only way if find it's to build a JSM Module which send specific
</I>&gt;<i> &gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; message
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;&gt; to a service (write in Java, Perl, Python,...)
</I>&gt;<i> &gt;&gt;&gt;    Jabberd -&gt;JSM module -&gt; Service
</I>&gt;<i> &gt;&gt;&gt;    The constraint is to create a specific message structure between JSM
</I>&gt;<i> &gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; Module
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;&gt; and Service (maybe with &lt;x&gt; namespace).
</I>&gt;<i> &gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;    I was looking for an other way :  build a specific service which can
</I>&gt;<i> &gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; receive
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;&gt; all blocks in a separate server. I don't kown if it's possible and I
</I>&gt;<i> &gt;&gt;&gt; guess
</I>&gt;<i> &gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; there
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;&gt; are some limitations (presence = avalaible or unavalaible, none
</I>&gt;<i> &gt;&gt;&gt; other by
</I>&gt;<i> &gt;&gt;&gt; example).
</I>&gt;<i> &gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;    If somebody knows an other solution than the first...
</I>&gt;<i> &gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt; Sylvain
</I>&gt;<i> &gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; _______________________________________________
</I>&gt;<i> &gt;&gt; jdev mailing list
</I>&gt;<i> &gt;&gt; <A HREF="http://mail.jabber.org/mailman/listinfo/jdev">jdev at jabber.org</A>
</I>&gt;<i> &gt;&gt; <A HREF="http://mailman.jabber.org/listinfo/jdev">http://mailman.jabber.org/listinfo/jdev</A>
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; _______________________________________________
</I>&gt;<i> &gt; jdev mailing list
</I>&gt;<i> &gt; <A HREF="http://mail.jabber.org/mailman/listinfo/jdev">jdev at jabber.org</A>
</I>&gt;<i> &gt; <A HREF="http://mailman.jabber.org/listinfo/jdev">http://mailman.jabber.org/listinfo/jdev</A>
</I>&gt;<i> &gt;
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> jdev mailing list
</I>&gt;<i> <A HREF="http://mail.jabber.org/mailman/listinfo/jdev">jdev at jabber.org</A>
</I>&gt;<i> <A HREF="http://mailman.jabber.org/listinfo/jdev">http://mailman.jabber.org/listinfo/jdev</A>
</I>-------------- next part --------------
A non-text attachment was scrubbed...
Name: sylvain.roberdeau.vcf
Type: text/x-vcard
Size: 466 bytes
Desc: Carte pour Roberdeau Sylvain
URL: &lt;<A HREF="https://www.jabber.org/jdev/attachments/20020817/59b9507e/attachment-0002.vcf">https://www.jabber.org/jdev/attachments/20020817/59b9507e/attachment-0002.vcf</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="072517.html">[JDEV] Re:Creating a presence server component?
</A></li>
	<LI>Next message: <A HREF="072476.html">[JDEV] &quot;Lotus sametime&quot; = really another IM system in this world?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#72525">[ date ]</a>
              <a href="thread.html#72525">[ thread ]</a>
              <a href="subject.html#72525">[ subject ]</a>
              <a href="author.html#72525">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://mail.jabber.org/mailman/listinfo/jdev">More information about the JDev
mailing list</a><br>
</body></html>
