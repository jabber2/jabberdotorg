<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [JDEV] switching from conference room messages to direct chat messages
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:jdev%40jabber.org?Subject=Re%3A%20%5BJDEV%5D%20switching%20from%20conference%20room%20messages%20to%20direct%20chat%20messages&In-Reply-To=%3C005801c279d2%244a687d10%240601a8c0%40mars%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="043857.html">
   <LINK REL="Next"  HREF="043858.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[JDEV] switching from conference room messages to direct chat messages</H1>
    <B>Rob Davis</B> 
    <A HREF="mailto:jdev%40jabber.org?Subject=Re%3A%20%5BJDEV%5D%20switching%20from%20conference%20room%20messages%20to%20direct%20chat%20messages&In-Reply-To=%3C005801c279d2%244a687d10%240601a8c0%40mars%3E"
       TITLE="[JDEV] switching from conference room messages to direct chat messages">lists at solarismedia.co.uk
       </A><BR>
    <I>Tue Oct 22 08:47:43 CDT 2002</I>
    <P><UL>
        <LI>Previous message: <A HREF="043857.html">[JDEV] Client C/C++ Library for Linux.
</A></li>
        <LI>Next message: <A HREF="043858.html">[JDEV] Jabber.org Client Chart
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#43856">[ date ]</a>
              <a href="thread.html#43856">[ thread ]</a>
              <a href="subject.html#43856">[ subject ]</a>
              <a href="author.html#43856">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi there,

I am developing a client application and I have a problem when users
leave chat rooms.

When they are within the chat room, they communicate like this:

&lt;message to=&quot;<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">lobby at conference.localhost</A>&quot;
from=&quot;<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">lobby at conference.localhost</A>/rob&quot;&gt;&lt;body&gt;test&lt;/body&gt;&lt;/message&gt;

And the message is received as expected:

&lt;message to=&quot;<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">qqq at www.gameking.tv</A>/home&quot;
from=&quot;<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">lobby at conference.localhost</A>/rob&quot; type=&quot;groupchat&quot;
cnu=&quot;&quot;&gt;&lt;body&gt;test&lt;/body&gt;&lt;/message&gt;

My users are then leaving the conference room like this:

&lt;presence type=&quot;unavailable&quot; to=&quot;<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">lobby at conference.localhost</A>/rob&quot; /&gt;

Which as expected notifies all the other room members:

&lt;presence type=&quot;unavailable&quot; to=&quot;<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">qqq at www.gameking.tv</A>/home&quot;
from=&quot;<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">lobby at conference.localhost</A>/rob&quot; /&gt;

We then then switch to direct person-to-person messaging like this:

&lt;message to=&quot;<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">qqq at www.gameking.tv</A>&quot;
from=&quot;<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">rob at www.gameking.tv</A>&quot;&gt;&lt;body&gt;lalal&lt;/body&gt;&lt;/message&gt;

However the problem is that the message is never received by the
recipient.

If the users stay in the chat room, Jabber does pass on their private
messages within the chat room using this format:

&lt;message to=&quot;<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">lobby at conference.localhost</A>/qqq&quot;
from=&quot;<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">lobby at conference.localhost</A>/rob&quot;&gt;&lt;body&gt;test&lt;/body&gt;&lt;/message&gt;

But I need the other users in the system to no longer see the users who
have left the room so this is no good!

(Note with my client the nickname in the chat room is the same as the
Jabber username so mismatch of username is not the cause).

Does anyone know whats going wrong here?

Thanks,

Rob



</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="043857.html">[JDEV] Client C/C++ Library for Linux.
</A></li>
	<LI>Next message: <A HREF="043858.html">[JDEV] Jabber.org Client Chart
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#43856">[ date ]</a>
              <a href="thread.html#43856">[ thread ]</a>
              <a href="subject.html#43856">[ subject ]</a>
              <a href="author.html#43856">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://mail.jabber.org/mailman/listinfo/jdev">More information about the JDev
mailing list</a><br>
</body></html>
