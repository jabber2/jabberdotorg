<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [jdev] Jabberd2.0s3 errors when running make
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:jdev%40jabber.org?Subject=%5Bjdev%5D%20Jabberd2.0s3%20errors%20when%20running%20make&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="019838.html">
   <LINK REL="Next"  HREF="019842.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[jdev] Jabberd2.0s3 errors when running make</H1>
    <B>Patricia Swarbrick</B> 
    <A HREF="mailto:jdev%40jabber.org?Subject=%5Bjdev%5D%20Jabberd2.0s3%20errors%20when%20running%20make&In-Reply-To="
       TITLE="[jdev] Jabberd2.0s3 errors when running make">patricia.swarbrick at ideaca.com
       </A><BR>
    <I>Thu Jul 29 17:58:18 CDT 2004</I>
    <P><UL>
        <LI>Previous message: <A HREF="019838.html">[jdev] ICQ Transport(s)
</A></li>
        <LI>Next message: <A HREF="019842.html">[jdev] Jabberd2.0s3 errors when running make
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19839">[ date ]</a>
              <a href="thread.html#19839">[ thread ]</a>
              <a href="subject.html#19839">[ subject ]</a>
              <a href="author.html#19839">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I'm attempting to build jabberd2.0s3 on Solaris but I continually run in to the following error when I attempt to run make after a successful configure: 

[<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">webdev at atlas</A> jabberd-2.0s3]$ make
make  all-recursive
make[1]: Entering directory `/export/home/sysadmn4/jupgrade/jabberd-2.0s3'
Making all in etc
make[2]: Entering directory `/export/home/sysadmn4/jupgrade/jabberd-2.0s3/etc'
Making all in templates
make[3]: Entering directory `/export/home/sysadmn4/jupgrade/jabberd-2.0s3/etc/templates'
make[3]: Nothing to be done for `all'.
make[3]: Leaving directory `/export/home/sysadmn4/jupgrade/jabberd-2.0s3/etc/templates'
make[3]: Entering directory `/export/home/sysadmn4/jupgrade/jabberd-2.0s3/etc'
make[3]: Nothing to be done for `all-am'.
make[3]: Leaving directory `/export/home/sysadmn4/jupgrade/jabberd-2.0s3/etc'
make[2]: Leaving directory `/export/home/sysadmn4/jupgrade/jabberd-2.0s3/etc'
Making all in tools
make[2]: Entering directory `/export/home/sysadmn4/jupgrade/jabberd-2.0s3/tools'
make[2]: Nothing to be done for `all'.
make[2]: Leaving directory `/export/home/sysadmn4/jupgrade/jabberd-2.0s3/tools'
Making all in man
make[2]: Entering directory `/export/home/sysadmn4/jupgrade/jabberd-2.0s3/man'
make[2]: Nothing to be done for `all'.
make[2]: Leaving directory `/export/home/sysadmn4/jupgrade/jabberd-2.0s3/man'
Making all in expat
make[2]: Entering directory `/export/home/sysadmn4/jupgrade/jabberd-2.0s3/expat'
make[2]: Nothing to be done for `all'.
make[2]: Leaving directory `/export/home/sysadmn4/jupgrade/jabberd-2.0s3/expat'
Making all in mio
make[2]: Entering directory `/export/home/sysadmn4/jupgrade/jabberd-2.0s3/mio'
source='mio.c' object='mio.lo' libtool=yes \
depfile='.deps/mio.Plo' tmpdepfile='.deps/mio.TPlo' \
depmode=gcc3 /bin/bash ../depcomp \
/bin/bash ../libtool --mode=compile gcc -DHAVE_CONFIG_H -I. -I. -I..   -I/usr/local/BerkeleyDB/include -I/usr/local/libidn/include -I/usr/local/BerkeleyDB/include -I/usr/local/BerkeleyDB/include/   -g -O2 -c -o mio.lo `test -f 'mio.c' || echo './'`mio.c
 gcc -DHAVE_CONFIG_H -I. -I. -I.. -I/usr/local/BerkeleyDB/include -I/usr/local/libidn/include -I/usr/local/BerkeleyDB/include -I/usr/local/BerkeleyDB/include/ -g -O2 -c mio.c -MT mio.lo -MD -MP -MF .deps/mio.TPlo  -fPIC -DPIC -o .libs/mio.o
 gcc -DHAVE_CONFIG_H -I. -I. -I.. -I/usr/local/BerkeleyDB/include -I/usr/local/libidn/include -I/usr/local/BerkeleyDB/include -I/usr/local/BerkeleyDB/include/ -g -O2 -c mio.c -MT mio.lo -MD -MP -MF .deps/mio.TPlo -o mio.o &gt;/dev/null 2&gt;&amp;1
/bin/bash ../libtool --mode=link gcc  -g -O2  -L/usr/local/libidn/lib -L/usr/local/libidn/lib -L/usr/local/BerkeleyDB/lib -o libmio.la   mio.lo -L/usr/local/libidn/lib -L/usr/local/libidn/lib -L/usr/local/BerkeleyDB/lib -lresolv -lnsl -ldb-4.2 -lidn
rm -fr  .libs/libmio.a .libs/libmio.la
ar cru .libs/libmio.a .libs/mio.o
ranlib .libs/libmio.a
creating libmio.la
(cd .libs &amp;&amp; rm -f libmio.la &amp;&amp; ln -s ../libmio.la libmio.la)
make[2]: Leaving directory `/export/home/sysadmn4/jupgrade/jabberd-2.0s3/mio'
Making all in scod
make[2]: Entering directory `/export/home/sysadmn4/jupgrade/jabberd-2.0s3/scod'
source='mech_anonymous.c' object='mech_anonymous.lo' libtool=yes \
depfile='.deps/mech_anonymous.Plo' tmpdepfile='.deps/mech_anonymous.TPlo' \
depmode=gcc3 /bin/bash ../depcomp \
/bin/bash ../libtool --mode=compile gcc -DHAVE_CONFIG_H -I. -I. -I..   -I/usr/local/BerkeleyDB/include -I/usr/local/libidn/include -I/usr/local/BerkeleyDB/include -I/usr/local/BerkeleyDB/include/   -g -O2 -c -o mech_anonymous.lo `test -f 'mech_anonymous.c' || echo './'`mech_anonymous.c
 gcc -DHAVE_CONFIG_H -I. -I. -I.. -I/usr/local/BerkeleyDB/include -I/usr/local/libidn/include -I/usr/local/BerkeleyDB/include -I/usr/local/BerkeleyDB/include/ -g -O2 -c mech_anonymous.c -MT mech_anonymous.lo -MD -MP -MF .deps/mech_anonymous.TPlo  -fPIC -DPIC -o .libs/mech_anonymous.o
In file included from scod.h:23,
                 from mech_anonymous.c:22:
../util/util.h:546: field `ip' has incomplete type
../util/util.h:548: confused by earlier errors, bailing out
make[2]: *** [mech_anonymous.lo] Error 1
make[2]: Leaving directory `/export/home/sysadmn4/jupgrade/jabberd-2.0s3/scod'
make[1]: *** [all-recursive] Error 1
make[1]: Leaving directory `/export/home/sysadmn4/jupgrade/jabberd-2.0s3'
make: *** [all] Error 2


Here's the options I set for the configure:
[<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">webdev at atlas</A> jabberd-2.0s3]$export LDFLAGS=&quot;-L/usr/local/libidn/lib -L/usr/local/BerkeleyDB/lib $LDFLAGS&quot;
[<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">webdev at atlas</A> jabberd-2.0s3]$ export CPPFLAGS=&quot;-I/usr/local/libidn/include -I/usr/local/BerkeleyDB/include $CPPFLAGS&quot;
[<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">webdev at atlas</A> jabberd-2.0s3]$./configure --prefix=/usr/local/jabber/ --enable-db --disable-mysql --with-extra-include-path=/usr/local/BerkeleyDB/include --with-extra-library-path=/usr/local/libidn/lib --enable-static  --enable-debug --disable-ssl

Now, I've gone in to config.h and commented out the line for sockaddr_storage, but that didn't work either, so I don't know what to do there. I also looked back at the config and noticed this:

checking for fcntl.h... yes
checking netinet/in.h usability... yes
checking netinet/in.h presence... yes
checking for netinet/in.h... yes
checking resolv.h usability... no
checking resolv.h presence... yes
configure: WARNING: resolv.h: present but cannot be compiled
configure: WARNING: resolv.h:     check for missing prerequisite headers?
configure: WARNING: resolv.h: see the Autoconf documentation
configure: WARNING: resolv.h:     section &quot;Present But Cannot Be Compiled&quot;
configure: WARNING: resolv.h: proceeding with the preprocessor's result
configure: WARNING: resolv.h: in the future, the compiler will take precedence
configure: WARNING:     ## ---------------------------------- ##
configure: WARNING:     ## Report this to the jabberd lists.  ##
configure: WARNING:     ## ---------------------------------- ##
checking for resolv.h... yes
checking signal.h usability... yes
checking signal.h presence... yes
checking for signal.h... yes
checking sys/filio.h usability... yes

Would all of this be part of the problem?

Patricia


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="019838.html">[jdev] ICQ Transport(s)
</A></li>
	<LI>Next message: <A HREF="019842.html">[jdev] Jabberd2.0s3 errors when running make
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19839">[ date ]</a>
              <a href="thread.html#19839">[ thread ]</a>
              <a href="subject.html#19839">[ subject ]</a>
              <a href="author.html#19839">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://mail.jabber.org/mailman/listinfo/jdev">More information about the JDev
mailing list</a><br>
</body></html>
