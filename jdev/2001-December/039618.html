<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [JDEV] Jabber Server- 1.4 Crashes
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:jdev%40jabber.org?Subject=Re%3A%20%5BJDEV%5D%20Jabber%20Server-%201.4%20Crashes&In-Reply-To=%3CPine.LNX.4.10.10112051258040.19580-100000%40lor.jeremie.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="039617.html">
   <LINK REL="Next"  HREF="039619.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[JDEV] Jabber Server- 1.4 Crashes</H1>
    <B>Peter Saint-Andre</B> 
    <A HREF="mailto:jdev%40jabber.org?Subject=Re%3A%20%5BJDEV%5D%20Jabber%20Server-%201.4%20Crashes&In-Reply-To=%3CPine.LNX.4.10.10112051258040.19580-100000%40lor.jeremie.com%3E"
       TITLE="[JDEV] Jabber Server- 1.4 Crashes">stpeter at jabber.org
       </A><BR>
    <I>Wed Dec  5 12:58:23 CST 2001</I>
    <P><UL>
        <LI>Previous message: <A HREF="039617.html">[JDEV] Jabber Server- 1.4 Crashes
</A></li>
        <LI>Next message: <A HREF="039619.html">[JDEV] Feature Request
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#39618">[ date ]</a>
              <a href="thread.html#39618">[ thread ]</a>
              <a href="subject.html#39618">[ subject ]</a>
              <a href="author.html#39618">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>And don't forget to run each transport in a separate process. :)

Peter

--
Peter Saint-Andre
email+jabber: <A HREF="http://mail.jabber.org/mailman/listinfo/jdev">stpeter at jabber.org</A>

On Wed, 5 Dec 2001, Thomas Muldowney wrote:

&gt;<i> Your yahoo transport is taking you down.  Do you have the latest
</I>&gt;<i> version?  Have you tried the cvs version?
</I>&gt;<i> 
</I>&gt;<i> --temas
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> On Wed, Dec 05, 2001 at 06:26:10PM +0000, Amarnath Yara wrote:
</I>&gt;<i> &gt; Hi, the following is the debug info from core that I got from jabber 
</I>&gt;<i> &gt; server-1.4.1 The server crashed when I tried to login. The numbers of 
</I>&gt;<i> &gt; already logged in users was zero at that time. Normally when there are some 
</I>&gt;<i> &gt; users logged in and chatting and if another guy tries to login then the 
</I>&gt;<i> &gt; server crashes with a segmentation fault. Same is the case with jabber 
</I>&gt;<i> &gt; server 1.4.  I have pasted backtrace, the last two packets of debug and the 
</I>&gt;<i> &gt; jabber.xml configuration. I hope this information is helpful. Thanks.
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; gdb -c core jabberd/jabberd
</I>&gt;<i> &gt; GNU gdb 5.0
</I>&gt;<i> &gt; Copyright 2000 Free Software Foundation, Inc.
</I>&gt;<i> &gt; GDB is free software, covered by the GNU General Public License, and you are
</I>&gt;<i> &gt; welcome to change it and/or distribute copies of it under certain 
</I>&gt;<i> &gt; conditions.
</I>&gt;<i> &gt; Type &quot;show copying&quot; to see the conditions.
</I>&gt;<i> &gt; There is absolutely no warranty for GDB.  Type &quot;show warranty&quot; for details.
</I>&gt;<i> &gt; This GDB was configured as &quot;i386-redhat-linux&quot;...
</I>&gt;<i> &gt; Core was generated by `./jabberd/jabberd -D -h phoenix'.
</I>&gt;<i> &gt; Program terminated with signal 11, Segmentation fault.
</I>&gt;<i> &gt; Reading symbols from /usr/lib/libpth.so.14...done.
</I>&gt;<i> &gt; Loaded symbols for /usr/lib/libpth.so.14
</I>&gt;<i> &gt; Reading symbols from /lib/libdl.so.2...done.
</I>&gt;<i> &gt; Loaded symbols for /lib/libdl.so.2
</I>&gt;<i> &gt; Reading symbols from /lib/libresolv.so.2...done.
</I>&gt;<i> &gt; Loaded symbols for /lib/libresolv.so.2
</I>&gt;<i> &gt; Reading symbols from /lib/libc.so.6...done.
</I>&gt;<i> &gt; Loaded symbols for /lib/libc.so.6
</I>&gt;<i> &gt; Reading symbols from /lib/ld-linux.so.2...done.
</I>&gt;<i> &gt; Loaded symbols for /lib/ld-linux.so.2
</I>&gt;<i> &gt; Reading symbols from /usr/local/UIM/jabber-1.4.1/./jsm/jsm.so...done.
</I>&gt;<i> &gt; Loaded symbols for /usr/local/UIM/jabber-1.4.1/./jsm/jsm.so
</I>&gt;<i> &gt; Reading symbols from 
</I>&gt;<i> &gt; /usr/local/UIM/jabber-1.4.1/./xdb_file/xdb_file.so...done.
</I>&gt;<i> &gt; Loaded symbols for /usr/local/UIM/jabber-1.4.1/./xdb_file/xdb_file.so
</I>&gt;<i> &gt; Reading symbols from 
</I>&gt;<i> &gt; /usr/local/UIM/jabber-1.4.1/./pthsock/pthsock_client.so...done.
</I>&gt;<i> &gt; Loaded symbols for /usr/local/UIM/jabber-1.4.1/./pthsock/pthsock_client.so
</I>&gt;<i> &gt; Reading symbols from 
</I>&gt;<i> &gt; /usr/local/UIM/jabber-1.4.1/./yahoo-transport-0.8-1.4/src/yahootrans.so...done.
</I>&gt;<i> &gt; Loaded symbols for 
</I>&gt;<i> &gt; /usr/local/UIM/jabber-1.4.1/./yahoo-transport-0.8-1.4/src/yahootrans.so
</I>&gt;<i> &gt; Reading symbols from 
</I>&gt;<i> &gt; /usr/local/UIM/jabber-1.4.1/./msn-transport-1.1/msntrans.so...done.
</I>&gt;<i> &gt; Loaded symbols for 
</I>&gt;<i> &gt; /usr/local/UIM/jabber-1.4.1/./msn-transport-1.1/msntrans.so
</I>&gt;<i> &gt; Reading symbols from /usr/local/UIM/jabber-1.4.1/./dnsrv/dnsrv.so...done.
</I>&gt;<i> &gt; Loaded symbols for /usr/local/UIM/jabber-1.4.1/./dnsrv/dnsrv.so
</I>&gt;<i> &gt; Reading symbols from 
</I>&gt;<i> &gt; /usr/local/UIM/jabber-1.4.1/./dialback/dialback.so...done.
</I>&gt;<i> &gt; Loaded symbols for /usr/local/UIM/jabber-1.4.1/./dialback/dialback.so
</I>&gt;<i> &gt; Reading symbols from /lib/libnss_files.so.2...done.
</I>&gt;<i> &gt; Loaded symbols for /lib/libnss_files.so.2
</I>&gt;<i> &gt; Reading symbols from /lib/libnss_nisplus.so.2...done.
</I>&gt;<i> &gt; Loaded symbols for /lib/libnss_nisplus.so.2
</I>&gt;<i> &gt; Reading symbols from /lib/libnsl.so.1...done.
</I>&gt;<i> &gt; Loaded symbols for /lib/libnsl.so.1
</I>&gt;<i> &gt; Reading symbols from /lib/libnss_nis.so.2...done.
</I>&gt;<i> &gt; Loaded symbols for /lib/libnss_nis.so.2
</I>&gt;<i> &gt; Reading symbols from /lib/libnss_dns.so.2...done.
</I>&gt;<i> &gt; Loaded symbols for /lib/libnss_dns.so.2
</I>&gt;<i> &gt; #0  0x805771c in jid_cmp (a=0x5f39396e, b=0x820fbc0) at jid.c:248
</I>&gt;<i> &gt; 248         if(_jid_nullstrcmp(a-&gt;resource, b-&gt;resource) != 0) return -1;
</I>&gt;<i> &gt; (gdb) bt
</I>&gt;<i> &gt; #0  0x805771c in jid_cmp (a=0x5f39396e, b=0x820fbc0) at jid.c:248
</I>&gt;<i> &gt; #1  0x80578e2 in jid_append (a=0x5f39396e, b=0x820fbc0) at jid.c:287
</I>&gt;<i> &gt; #2  0x40199f54 in yahoo_parse_presence (yjp=0x820fc10) at presence.c:268
</I>&gt;<i> &gt; #3  0x40198dbb in yahoo_parse_jpacket (arg=0x820fc10) at parser.c:279
</I>&gt;<i> &gt; #4  0x805576b in mtq_main (arg=0x80e3d50) at mtq.c:147
</I>&gt;<i> &gt; #5  0x4002625c in pth_spawn_trampoline () from /usr/lib/libpth.so.14
</I>&gt;<i> &gt; #6  0x40024351 in pth_mctx_set_bootstrap () from /usr/lib/libpth.so.14
</I>&gt;<i> &gt; #7  &lt;signal handler called&gt;
</I>&gt;<i> &gt; #8  0x40072585 in __sigsuspend (set=0x65636e65) at 
</I>&gt;<i> &gt; ../sysdeps/unix/sysv/linux/sigsuspend.c:45
</I>&gt;<i> &gt; #9  0x73657270 in ?? ()
</I>&gt;<i> &gt; Cannot access memory at address 0x2f3c3e73
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; Amarnath Yara
</I>&gt;<i> &gt; 211, Main Street
</I>&gt;<i> &gt; Apartment # 429,
</I>&gt;<i> &gt; Columbia 29201.SC.
</I>&gt;<i> &gt; e-mail : <A HREF="http://mail.jabber.org/mailman/listinfo/jdev">amarny at hotmail.com</A>
</I>&gt;<i> &gt;         <A HREF="http://mail.jabber.org/mailman/listinfo/jdev">yara at engr.sc.edu</A>
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; ****************** some Debug (last two packets before 
</I>&gt;<i> &gt; crash)**********************
</I>&gt;<i> &gt; Wed Dec  5 13:51:25 2001  sessions.c:303 THREAD:SESSION:TO received data 
</I>&gt;<i> &gt; from <A HREF="http://mail.jabber.org/mailman/listinfo/jdev">girivasan99_kst at phoenix</A>/home!
</I>&gt;<i> &gt; Wed Dec  5 13:51:25 2001  modules.c:130 mapi_call 0
</I>&gt;<i> &gt; Wed Dec  5 13:51:25 2001  modules.c:153 MAPI 822D980
</I>&gt;<i> &gt; Wed Dec  5 13:51:25 2001  mod_presence incoming filter for 
</I>&gt;<i> &gt; <A HREF="http://mail.jabber.org/mailman/listinfo/jdev">girivasan99_kst at phoenix</A>/home
</I>&gt;<i> &gt; Wed Dec  5 13:51:25 2001  mtq 813FC58 one call 8221AE0
</I>&gt;<i> &gt; Wed Dec  5 13:51:25 2001  offline.c:45 THREAD:OFFLINE received 
</I>&gt;<i> &gt; <A HREF="http://mail.jabber.org/mailman/listinfo/jdev">girivasan99_kst at phoenix</A>'s packet: &lt;presence type='probe' 
</I>&gt;<i> &gt; from='<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">girivasan99_kst at phoenix</A>' to='<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">girivasan99_kst at phoenix</A>'/&gt;
</I>&gt;<i> &gt; Wed Dec  5 13:51:25 2001  modules.c:130 mapi_call 1
</I>&gt;<i> &gt; Wed Dec  5 13:51:25 2001  modules.c:169 mapi_call returning unhandled
</I>&gt;<i> &gt; Wed Dec  5 13:51:25 2001  util.c:64 dropping 503 packet &lt;presence 
</I>&gt;<i> &gt; type='probe' from='<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">girivasan99_kst at phoenix</A>' to='<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">girivasan99_kst at phoenix</A>'/&gt;
</I>&gt;<i> &gt; Wed Dec  5 13:51:25 2001  mtq 813FC58 one call 82C24F0
</I>&gt;<i> &gt; Wed Dec  5 13:51:25 2001  offline.c:45 THREAD:OFFLINE received 
</I>&gt;<i> &gt; <A HREF="http://mail.jabber.org/mailman/listinfo/jdev">superkell at phoenix</A>'s packet: &lt;presence id='1' 
</I>&gt;<i> &gt; from='<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">girivasan99_kst at phoenix</A>/home' 
</I>&gt;<i> &gt; to='<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">superkell at phoenix</A>'&gt;&lt;status&gt;online&lt;/status&gt;&lt;/presence&gt;
</I>&gt;<i> &gt; Wed Dec  5 13:51:25 2001  modules.c:130 mapi_call 1
</I>&gt;<i> &gt; Wed Dec  5 13:51:25 2001  modules.c:169 mapi_call returning unhandled
</I>&gt;<i> &gt; Wed Dec  5 13:51:25 2001  util.c:64 dropping 503 packet &lt;presence id='1' 
</I>&gt;<i> &gt; from='<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">girivasan99_kst at phoenix</A>/home' 
</I>&gt;<i> &gt; to='<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">superkell at phoenix</A>'&gt;&lt;status&gt;online&lt;/status&gt;&lt;/presence&gt;
</I>&gt;<i> &gt; Wed Dec  5 13:51:25 2001  mtq 813FC58 one call 820DB78
</I>&gt;<i> &gt; Wed Dec  5 13:51:25 2001  mtq 813FC58 one call 823A278
</I>&gt;<i> &gt; Wed Dec  5 13:51:25 2001  yahoo auth belongs to session 8237E30 (so not 
</I>&gt;<i> &gt; starting a new one)
</I>&gt;<i> &gt; Wed Dec  5 13:51:25 2001  mtq 813FC58 one call 82D8670
</I>&gt;<i> &gt; Wed Dec  5 13:51:25 2001  mtq 813FC58 one call 820FC10
</I>&gt;<i> &gt; Wed Dec  5 13:51:26 2001  dnsrv.c:143 dnsrv: Read error on coprocess(1): 1 
</I>&gt;<i> &gt; Operation not permitted
</I>&gt;<i> &gt; Wed Dec  5 13:51:26 2001  dnsrv.c:157 DNSRV CHILD: out of loop.. exiting 
</I>&gt;<i> &gt; normal
</I>&gt;<i> &gt; Segmentation fault (core dumped)
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; /*********************jabber.xml file ****************************/
</I>&gt;<i> &gt; &lt;jabber&gt;
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt;  &lt;!--
</I>&gt;<i> &gt;  This is the Jabber server configuration file. The file is
</I>&gt;<i> &gt;  broken into different sections based on the services being
</I>&gt;<i> &gt;  managed by jabberd, the server daemon. Most of the important
</I>&gt;<i> &gt;  sections have comments and are easy to modify. You can find
</I>&gt;<i> &gt;  full instructions in the server howto, which is available at
</I>&gt;<i> &gt;  <A HREF="http://docs.jabber.org/.">http://docs.jabber.org/.</A> Note that when you see a tag like
</I>&gt;<i> &gt;  &quot;jabberd:cmdline&quot;, it's automatically replaced on startup
</I>&gt;<i> &gt;  with the command line flag passed in to jabberd. This enables
</I>&gt;<i> &gt;  you to override parameters set in this configuration file if
</I>&gt;<i> &gt;  necessary or desired. Also note as you comment things in and
</I>&gt;<i> &gt;  out that jabberd does not like comments within comments, so
</I>&gt;<i> &gt;  be careful with your XML. :)
</I>&gt;<i> &gt;  --&gt;
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt;  &lt;!--
</I>&gt;<i> &gt;  The following &lt;service/&gt; section is for the session manager,
</I>&gt;<i> &gt;  the most important component within the server. This section
</I>&gt;<i> &gt;  contains the following types of information:
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt;    * the server's hostname
</I>&gt;<i> &gt;    * other basic server information
</I>&gt;<i> &gt;    * the location of the session log file
</I>&gt;<i> &gt;    * email addresses for server administrators
</I>&gt;<i> &gt;    * the location of the server that provides update information
</I>&gt;<i> &gt;    * registration instructions for new users
</I>&gt;<i> &gt;    * a welcome message for new users
</I>&gt;<i> &gt;    * a list of agents with which users can register
</I>&gt;<i> &gt;    * load rules for the modules within the session manager
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt;  --&gt;
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt;  &lt;service id=&quot;sessions&quot;&gt;
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt;    &lt;!--
</I>&gt;<i> &gt;    Change hostname below to something other than &quot;tucson&quot;,
</I>&gt;<i> &gt;    i.e., to the hostname or IP address of your Jabber server.
</I>&gt;<i> &gt;    Multiple &lt;host/&gt; entries are allowed - each one is for a
</I>&gt;<i> &gt;    separate virtual server. Note that each host entry must
</I>&gt;<i> &gt;    be on one line, the server doesn't like it otherwise! :)
</I>&gt;<i> &gt;    --&gt;
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt;    &lt;host&gt;&lt;jabberd:cmdline flag=&quot;h&quot;&gt;phoenix&lt;/jabberd:cmdline&gt;&lt;/host&gt;
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt;    &lt;!--
</I>&gt;<i> &gt;    This is the custom configuration section for the
</I>&gt;<i> &gt;    Jabber session manager, a.k.a. &quot;JSM&quot;.
</I>&gt;<i> &gt;    --&gt;
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt;    &lt;jsm xmlns=&quot;jabber:config:jsm&quot;&gt;
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt;      &lt;!--
</I>&gt;<i> &gt;      The &lt;filter/&gt; section below determines settings
</I>&gt;<i> &gt;      for mod_filter, a server-side module built into
</I>&gt;<i> &gt;      JSM that enables users to set delivery rules for
</I>&gt;<i> &gt;      messages they receive (not yet supported by all
</I>&gt;<i> &gt;      clients. The &lt;allow/&gt; subsection specifies which
</I>&gt;<i> &gt;      conditions and actions to enable. High-level
</I>&gt;<i> &gt;      descriptions of each setting can be found below
</I>&gt;<i> &gt;      (see docs.jabber.org for full details):
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt;      * &lt;default/&gt; - a user cannot delete this one, it's
</I>&gt;<i> &gt;        the default rule for delivering messages
</I>&gt;<i> &gt;      * &lt;max_size/&gt; - the maximum number of rules in a
</I>&gt;<i> &gt;        user's rule set (we don't want to overdo it!)
</I>&gt;<i> &gt;      * conditions...
</I>&gt;<i> &gt;        * &lt;ns/&gt; - matches the query xmlns attrib on an iq packet
</I>&gt;<i> &gt;        * &lt;unavailable/&gt; - matches when user is unavailable
</I>&gt;<i> &gt;        * &lt;from/&gt; - matches the sender of the message
</I>&gt;<i> &gt;        * &lt;resource/&gt; - matches the receiver's resource
</I>&gt;<i> &gt;        * &lt;subject/&gt; - matches the subject of the message
</I>&gt;<i> &gt;        * &lt;body/&gt; - matches the body of the message
</I>&gt;<i> &gt;        * &lt;show/&gt; - matches the show tag on the receiver's presence
</I>&gt;<i> &gt;        * &lt;type/&gt; - matches the type of the message
</I>&gt;<i> &gt;        * &lt;roster/&gt; - matches if the sender is in your roster
</I>&gt;<i> &gt;        * &lt;group/&gt; - matches if the sender is in the specified group
</I>&gt;<i> &gt;      * actions...
</I>&gt;<i> &gt;        * &lt;error/&gt; - replies with an error
</I>&gt;<i> &gt;        * &lt;offline/&gt; - stores the messages offline
</I>&gt;<i> &gt;        * &lt;forward/&gt; - forwards the message to another jid
</I>&gt;<i> &gt;        * &lt;reply/&gt; - sends a reply to the sender of the message
</I>&gt;<i> &gt;        * &lt;continue/&gt; - continues processing of the rules
</I>&gt;<i> &gt;        * &lt;settype/&gt; - changes the type of the message
</I>&gt;<i> &gt;      --&gt;
</I>&gt;<i> &gt;      &lt;filter&gt;
</I>&gt;<i> &gt;          &lt;default/&gt;
</I>&gt;<i> &gt;          &lt;max_size&gt;100&lt;/max_size&gt;
</I>&gt;<i> &gt;          &lt;allow&gt;
</I>&gt;<i> &gt;              &lt;conditions&gt;
</I>&gt;<i> &gt;                  &lt;ns/&gt;
</I>&gt;<i> &gt;                  &lt;unavailable/&gt;
</I>&gt;<i> &gt;                  &lt;from/&gt;
</I>&gt;<i> &gt;                  &lt;resource/&gt;
</I>&gt;<i> &gt;                  &lt;subject/&gt;
</I>&gt;<i> &gt;                  &lt;body/&gt;
</I>&gt;<i> &gt;                  &lt;show/&gt;
</I>&gt;<i> &gt;                  &lt;type/&gt;
</I>&gt;<i> &gt;                  &lt;roster/&gt;
</I>&gt;<i> &gt;                  &lt;group/&gt;
</I>&gt;<i> &gt;              &lt;/conditions&gt;
</I>&gt;<i> &gt;              &lt;actions&gt;
</I>&gt;<i> &gt;                  &lt;error/&gt;
</I>&gt;<i> &gt;                  &lt;offline/&gt;
</I>&gt;<i> &gt;                  &lt;forward/&gt;
</I>&gt;<i> &gt;                  &lt;reply/&gt;
</I>&gt;<i> &gt;                  &lt;continue/&gt;
</I>&gt;<i> &gt;                  &lt;settype/&gt;
</I>&gt;<i> &gt;              &lt;/actions&gt;
</I>&gt;<i> &gt;          &lt;/allow&gt;
</I>&gt;<i> &gt;      &lt;/filter&gt;
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt;      &lt;!-- The server vCard --&gt;
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt;      &lt;vCard&gt;
</I>&gt;<i> &gt;        &lt;FN&gt;Jabber Server&lt;/FN&gt;
</I>&gt;<i> &gt;        &lt;DESC&gt;A Jabber Server!&lt;/DESC&gt;
</I>&gt;<i> &gt;        &lt;URL&gt;<A HREF="http://foo.bar/&lt;/URL">http://foo.bar/&lt;/URL</A>&gt;
</I>&gt;<i> &gt;      &lt;/vCard&gt;
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt;      &lt;!--
</I>&gt;<i> &gt;      Registration instructions and required fields. The
</I>&gt;<i> &gt;      notify attribute will send the server administrator(s)
</I>&gt;<i> &gt;      a message after each valid registration if it is set
</I>&gt;<i> &gt;      to &quot;yes&quot;.
</I>&gt;<i> &gt;      --&gt;
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt;      &lt;register notify=&quot;yes&quot;&gt;
</I>&gt;<i> &gt;        &lt;instructions&gt;Choose a username and password to register with this 
</I>&gt;<i> &gt; server.&lt;/instructions&gt;
</I>&gt;<i> &gt;        &lt;name/&gt;
</I>&gt;<i> &gt;        &lt;email/&gt;
</I>&gt;<i> &gt;      &lt;/register&gt;
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt;      &lt;!--
</I>&gt;<i> &gt;      A welcome note that is sent to every new user who registers
</I>&gt;<i> &gt;      with your server. Comment it out to disable this function.
</I>&gt;<i> &gt;      --&gt;
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt;      &lt;welcome&gt;
</I>&gt;<i> &gt;        &lt;subject&gt;Welcome!&lt;/subject&gt;
</I>&gt;<i> &gt;        &lt;body&gt;Welcome to U.S. Computing's Jabber server phoenix on jalisco-- 
</I>&gt;<i> &gt; we hope you enjoy this service! For information about how
</I>&gt;<i> &gt; to use Jabber, visit the Jabber User's Guide at 
</I>&gt;<i> &gt; <A HREF="http://docs.jabber.org/&lt;/body">http://docs.jabber.org/&lt;/body</A>&gt;
</I>&gt;<i> &gt;      &lt;/welcome&gt;
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt;      &lt;!--
</I>&gt;<i> &gt;      IDs with admin access - these people will receive admin
</I>&gt;<i> &gt;      messages (any message to=&quot;yourhostname&quot; is an admin
</I>&gt;<i> &gt;      message).  These addresses must be local ids, they cannot
</I>&gt;<i> &gt;      be remote addresses.
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt;      Note that they can also send announcements to all
</I>&gt;<i> &gt;      users of the server, or to all online users. To use
</I>&gt;<i> &gt;      the announcement feature, you need to send raw xml and be
</I>&gt;<i> &gt;      logged in as one of the admin users. Here is the syntax
</I>&gt;<i> &gt;      for sending an announcement to online users:
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt;        &lt;message to=&quot;yourhostname/announce/online&quot;&gt;
</I>&gt;<i> &gt;          &lt;body&gt;announcement here&lt;/body&gt;
</I>&gt;<i> &gt;        &lt;/message&gt;
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt;        &lt;message to=&quot;yourhostname/announce/motd&quot;&gt;
</I>&gt;<i> &gt;          &lt;body&gt;message (of the day) that is sent only once to all users 
</I>&gt;<i> &gt; that are logged in and additionally to new ones as they log in&lt;/body&gt;
</I>&gt;<i> &gt;        &lt;/message&gt;
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt;      Sending to /announce/motd/delete will remove any existing
</I>&gt;<i> &gt;      motd, and to /announce/motd/update will only update the motd
</I>&gt;<i> &gt;      without re-announcing to all logged in users.
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt;      The &lt;reply&gt; will be the message that is automatically
</I>&gt;<i> &gt;      sent in response to any admin messages.
</I>&gt;<i> &gt;      --&gt;
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt;      &lt;!--
</I>&gt;<i> &gt;      &lt;admin&gt;
</I>&gt;<i> &gt;        &lt;read&gt;<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">support at tucson</A>&lt;/read&gt;
</I>&gt;<i> &gt;        &lt;write&gt;<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">admin at tucson</A>&lt;/write&gt;
</I>&gt;<i> &gt;        &lt;reply&gt;
</I>&gt;<i> &gt;          &lt;subject&gt;Auto Reply&lt;/subject&gt;
</I>&gt;<i> &gt;          &lt;body&gt;This is a special administrative address.  Your message was 
</I>&gt;<i> &gt; received and forwarded to server administrators.&lt;/body&gt;
</I>&gt;<i> &gt;        &lt;/reply&gt;
</I>&gt;<i> &gt;      &lt;/admin&gt;
</I>&gt;<i> &gt;      --&gt;
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt;      &lt;!--
</I>&gt;<i> &gt;      This is the resource that checks for updated versions
</I>&gt;<i> &gt;      of the Jabber server software. Note that you don't lose
</I>&gt;<i> &gt;      any functionality if you comment this out. Removing the
</I>&gt;<i> &gt;      &lt;update/&gt; config is especially a good strategy if your
</I>&gt;<i> &gt;      server is behind a firewall. If you want to use this
</I>&gt;<i> &gt;      feature, change 'tucson' to the hostname or IP address
</I>&gt;<i> &gt;      of your server, making sure that it is the same as your
</I>&gt;<i> &gt;      entry for &lt;host/&gt; above.
</I>&gt;<i> &gt;      --&gt;
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt;      &lt;!-- COMMENTED OUT BY WAYNE DURING INITIAL CONFIGURATION
</I>&gt;<i> &gt;      &lt;update&gt;&lt;jabberd:cmdline flag=&quot;h&quot;&gt;phoenix&lt;/jabberd:cmdline&gt;&lt;/update&gt;
</I>&gt;<i> &gt;      --&gt;
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt;      &lt;!--
</I>&gt;<i> &gt;      This enables the server to automatically update the
</I>&gt;<i> &gt;      user directory when a vcard is edited.  The update is
</I>&gt;<i> &gt;      only sent to the first listed jud service below.  It is
</I>&gt;<i> &gt;      safe to remove this flag if you do not want any users
</I>&gt;<i> &gt;      automatically added to the directory.
</I>&gt;<i> &gt;      --&gt;
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt;      &lt;vcard2jud/&gt;
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt;      &lt;!--
</I>&gt;<i> &gt;      The &lt;browse/&gt; section identifies the transports and other
</I>&gt;<i> &gt;      services that are available from this server. Note that each
</I>&gt;<i> &gt;      entity identified here must exist elsewhere or be further
</I>&gt;<i> &gt;      defined in its own &lt;service/&gt; section below. These services
</I>&gt;<i> &gt;      will appear in the user interface of Jabber clients that
</I>&gt;<i> &gt;      connect to your server.
</I>&gt;<i> &gt;      --&gt;
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt;      &lt;browse&gt;
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt;        &lt;!--
</I>&gt;<i> &gt;        This is the default agent for the master Jabber User
</I>&gt;<i> &gt;        Directory, a.k.a. &quot;JUD&quot;, which is located at jabber.org.
</I>&gt;<i> &gt;        You can add separate &lt;service/&gt; sections for additional
</I>&gt;<i> &gt;        directories, e.g., one for a company intranet.
</I>&gt;<i> &gt;        --&gt;
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt;        &lt;service type=&quot;jud&quot; jid=&quot;users.jabber.org&quot; name=&quot;Jabber User 
</I>&gt;<i> &gt; Directory&quot;&gt;
</I>&gt;<i> &gt;          &lt;ns&gt;jabber:iq:search&lt;/ns&gt;
</I>&gt;<i> &gt;          &lt;ns&gt;jabber:iq:register&lt;/ns&gt;
</I>&gt;<i> &gt;        &lt;/service&gt;
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt;        &lt;!--
</I>&gt;<i> &gt;        The following services are examples only, you will need to
</I>&gt;<i> &gt;        create/modify them to get them working on your Jabber
</I>&gt;<i> &gt;        server. See the README files for each service and/or the
</I>&gt;<i> &gt;        server howto for further information/instructions.
</I>&gt;<i> &gt;        --&gt;
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt;        &lt;!-- we're commenting these out, of course :)
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt;        &lt;conference type=&quot;private&quot; jid=&quot;conference.phoenix&quot; name=&quot;Private 
</I>&gt;<i> &gt; Conferencing&quot;/&gt;
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt;        &lt;service type=&quot;aim&quot; jid=&quot;aim.phoenix&quot; name=&quot;AIM Transport&quot;&gt;
</I>&gt;<i> &gt;          &lt;ns&gt;jabber:iq:gateway&lt;/ns&gt;
</I>&gt;<i> &gt;          &lt;ns&gt;jabber:iq:register&lt;/ns&gt;
</I>&gt;<i> &gt;        &lt;/service&gt;
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt;           end of &lt;service/&gt; examples --&gt;
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt;        &lt;service type=&quot;yahoo&quot; jid=&quot;yahoo.phoenix&quot; name=&quot;Yahoo! Transport&quot;&gt;
</I>&gt;<i> &gt;          &lt;ns&gt;jabber:iq:gateway&lt;/ns&gt;
</I>&gt;<i> &gt;          &lt;ns&gt;jabber:iq:register&lt;/ns&gt;
</I>&gt;<i> &gt;        &lt;/service&gt;
</I>&gt;<i> &gt;       &lt;!-- Commented by Amar
</I>&gt;<i> &gt;        &lt;service type =&quot;icq&quot; jid=&quot;icq.phoenix&quot; name=&quot;ICQ Transport&quot;&gt;
</I>&gt;<i> &gt;           &lt;ns&gt;jabber:iq:gateway&lt;/ns&gt;
</I>&gt;<i> &gt;           &lt;ns&gt;jabber:iq:register&lt;/ns&gt;
</I>&gt;<i> &gt;           &lt;ns&gt;jabber:iq:search&lt;/ns&gt;
</I>&gt;<i> &gt;        &lt;/service&gt;
</I>&gt;<i> &gt;      --&gt;
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; 	&lt;service type=&quot;msn&quot; jid=&quot;msn.phoenix&quot; name=&quot;MSN Transport&quot;&gt;
</I>&gt;<i> &gt;          &lt;ns&gt;jabber:iq:gateway&lt;/ns&gt;
</I>&gt;<i> &gt;          &lt;ns&gt;jabber:iq:register&lt;/ns&gt;
</I>&gt;<i> &gt;        &lt;/service&gt;
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt;      &lt;/browse&gt;
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt;    &lt;/jsm&gt;
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt;    &lt;!--
</I>&gt;<i> &gt;    The following section dynamically loads the individual
</I>&gt;<i> &gt;    modules that make up the session manager. Remove or
</I>&gt;<i> &gt;    comment out modules to disable them. Note that the order
</I>&gt;<i> &gt;    of modules is important, since packets are delivered
</I>&gt;<i> &gt;    based on the following order!!
</I>&gt;<i> &gt;    --&gt;
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt;    &lt;load main=&quot;jsm&quot;&gt;
</I>&gt;<i> &gt;      &lt;jsm&gt;./jsm/jsm.so&lt;/jsm&gt;
</I>&gt;<i> &gt;      &lt;mod_echo&gt;./jsm/jsm.so&lt;/mod_echo&gt;
</I>&gt;<i> &gt;      &lt;mod_roster&gt;./jsm/jsm.so&lt;/mod_roster&gt;
</I>&gt;<i> &gt;      &lt;mod_time&gt;./jsm/jsm.so&lt;/mod_time&gt;
</I>&gt;<i> &gt;      &lt;mod_vcard&gt;./jsm/jsm.so&lt;/mod_vcard&gt;
</I>&gt;<i> &gt;      &lt;mod_last&gt;./jsm/jsm.so&lt;/mod_last&gt;
</I>&gt;<i> &gt;      &lt;mod_version&gt;./jsm/jsm.so&lt;/mod_version&gt;
</I>&gt;<i> &gt;      &lt;mod_announce&gt;./jsm/jsm.so&lt;/mod_announce&gt;
</I>&gt;<i> &gt;      &lt;mod_agents&gt;./jsm/jsm.so&lt;/mod_agents&gt;
</I>&gt;<i> &gt;      &lt;mod_browse&gt;./jsm/jsm.so&lt;/mod_browse&gt;
</I>&gt;<i> &gt;      &lt;mod_admin&gt;./jsm/jsm.so&lt;/mod_admin&gt;
</I>&gt;<i> &gt;      &lt;mod_filter&gt;./jsm/jsm.so&lt;/mod_filter&gt;
</I>&gt;<i> &gt;      &lt;mod_offline&gt;./jsm/jsm.so&lt;/mod_offline&gt;
</I>&gt;<i> &gt;      &lt;mod_presence&gt;./jsm/jsm.so&lt;/mod_presence&gt;
</I>&gt;<i> &gt;      &lt;mod_auth_plain&gt;./jsm/jsm.so&lt;/mod_auth_plain&gt;
</I>&gt;<i> &gt;      &lt;mod_auth_digest&gt;./jsm/jsm.so&lt;/mod_auth_digest&gt;
</I>&gt;<i> &gt;      &lt;mod_auth_0k&gt;./jsm/jsm.so&lt;/mod_auth_0k&gt;
</I>&gt;<i> &gt;      &lt;mod_log&gt;./jsm/jsm.so&lt;/mod_log&gt;
</I>&gt;<i> &gt;      &lt;mod_register&gt;./jsm/jsm.so&lt;/mod_register&gt;
</I>&gt;<i> &gt;      &lt;mod_xml&gt;./jsm/jsm.so&lt;/mod_xml&gt;
</I>&gt;<i> &gt;    &lt;/load&gt;
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt;  &lt;/service&gt;
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt;  &lt;!-- OK, we've finished defining the Jabber Session Manager. --&gt;
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt;  &lt;!-- The &lt;xdb/&gt; component handles all data storage, using the filesystem. 
</I>&gt;<i> &gt; --&gt;
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt;  &lt;xdb id=&quot;xdb&quot;&gt;
</I>&gt;<i> &gt;    &lt;host/&gt;
</I>&gt;<i> &gt;    &lt;load&gt;
</I>&gt;<i> &gt;      &lt;xdb_file&gt;./xdb_file/xdb_file.so&lt;/xdb_file&gt;
</I>&gt;<i> &gt;    &lt;/load&gt;
</I>&gt;<i> &gt;    &lt;xdb_file xmlns=&quot;jabber:config:xdb_file&quot;&gt;
</I>&gt;<i> &gt;      &lt;spool&gt;&lt;jabberd:cmdline flag='s'&gt;./spool&lt;/jabberd:cmdline&gt;&lt;/spool&gt;
</I>&gt;<i> &gt;    &lt;/xdb_file&gt;
</I>&gt;<i> &gt;  &lt;/xdb&gt;
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt;  &lt;!--
</I>&gt;<i> &gt;  The following service manages incoming client socket connections.
</I>&gt;<i> &gt;  There are several items you can set here to optimize performance:
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt;    * authtime - default is unlimited, but you can set this to
</I>&gt;<i> &gt;      limit the amount of time allowed for authentication to be
</I>&gt;<i> &gt;      completed, e.g., &lt;authtime&gt;10&lt;/authtime&gt; for 10 seconds
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt;    * karma - this is an input/output rate limiting system that
</I>&gt;<i> &gt;      the Jabber team came up with to prevent bandwidth hogging.
</I>&gt;<i> &gt;      For details about karma, read the io section at the bottom
</I>&gt;<i> &gt;      and/or see docs.jabber.org. These are the low settings and
</I>&gt;<i> &gt;      apply per connection/socket and can be changed as desired.
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt;  --&gt;
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt;  &lt;service id=&quot;c2s&quot;&gt;
</I>&gt;<i> &gt;    &lt;load&gt;
</I>&gt;<i> &gt;      &lt;pthsock_client&gt;./pthsock/pthsock_client.so&lt;/pthsock_client&gt;
</I>&gt;<i> &gt;    &lt;/load&gt;
</I>&gt;<i> &gt;    &lt;pthcsock xmlns='jabber:config:pth-csock'&gt;
</I>&gt;<i> &gt;      &lt;authtime/&gt;
</I>&gt;<i> &gt;      &lt;karma&gt;
</I>&gt;<i> &gt;        &lt;init&gt;10&lt;/init&gt;
</I>&gt;<i> &gt;        &lt;max&gt;10&lt;/max&gt;
</I>&gt;<i> &gt;        &lt;inc&gt;1&lt;/inc&gt;
</I>&gt;<i> &gt;        &lt;dec&gt;1&lt;/dec&gt;
</I>&gt;<i> &gt;        &lt;penalty&gt;-6&lt;/penalty&gt;
</I>&gt;<i> &gt;        &lt;restore&gt;10&lt;/restore&gt;
</I>&gt;<i> &gt;      &lt;/karma&gt;
</I>&gt;<i> &gt;      &lt;!--
</I>&gt;<i> &gt;      Use these to listen on particular addresses and/or ports.
</I>&gt;<i> &gt;      &lt;ip port=&quot;5222&quot;&gt;127.0.0.1&lt;/ip&gt;
</I>&gt;<i> &gt;      --&gt;
</I>&gt;<i> &gt;      &lt;ip port=&quot;5222&quot;/&gt;
</I>&gt;<i> &gt;      &lt;!--
</I>&gt;<i> &gt;      The &lt;ssl/&gt; tag acts just like the &lt;ip/&gt; tag.  Except SSL is used
</I>&gt;<i> &gt;      on the ports and ips specified.  You must specify an IP here, or the
</I>&gt;<i> &gt;      connections will fail.
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt;      &lt;ssl port='5223'&gt;127.0.0.1&lt;/ip&gt;
</I>&gt;<i> &gt;      &lt;ssl port='5224'&gt;64.28.196.147&lt;/ip&gt;
</I>&gt;<i> &gt;      --&gt;
</I>&gt;<i> &gt;    &lt;/pthcsock&gt;
</I>&gt;<i> &gt;  &lt;/service&gt;
</I>&gt;<i> &gt;  &lt;!-- Commented by Amar
</I>&gt;<i> &gt;  &lt;service id=&quot;icq.phoenix&quot;&gt;
</I>&gt;<i> &gt;         &lt;icqtrans xmlns=&quot;jabber:config:icqtrans&quot;&gt;
</I>&gt;<i> &gt;         &lt;instructions&gt;Please enter your ICQ number (in the &quot;username&quot; 
</I>&gt;<i> &gt; field),
</I>&gt;<i> &gt;         nickname, and password. Leave the &quot;username&quot; field blank
</I>&gt;<i> &gt;         to create a new ICQ number.&lt;/instructions&gt;
</I>&gt;<i> &gt;         &lt;search&gt;Search for ICQ users&lt;/search&gt;
</I>&gt;<i> &gt;         &lt;vCard&gt;
</I>&gt;<i> &gt;         &lt;FN&gt;ICQ Transport&lt;/FN&gt;
</I>&gt;<i> &gt;         &lt;DESC&gt;This is the ICQ Transport&lt;/DESC&gt;
</I>&gt;<i> &gt;         &lt;URL&gt;<A HREF="http://tucson/&lt;/URL">http://tucson/&lt;/URL</A>&gt;
</I>&gt;<i> &gt;         &lt;/vCard&gt;
</I>&gt;<i> &gt;         &lt;prime&gt;37&lt;/prime&gt;
</I>&gt;<i> &gt;         &lt;ports&gt;
</I>&gt;<i> &gt;         &lt;min&gt;2000&lt;/min&gt;
</I>&gt;<i> &gt;         &lt;max&gt;3000&lt;/max&gt;
</I>&gt;<i> &gt;         &lt;/ports&gt;
</I>&gt;<i> &gt;         &lt;/icqtrans&gt;
</I>&gt;<i> &gt;         &lt;load&gt;
</I>&gt;<i> &gt;         &lt;icqtrans&gt;./icq-transport-0.9/icqtrans.so&lt;/icqtrans&gt;
</I>&gt;<i> &gt;         &lt;/load&gt;
</I>&gt;<i> &gt;   &lt;/service&gt;
</I>&gt;<i> &gt; 	--&gt;
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt;   &lt;service id=&quot;yahoo.phoenix&quot;&gt;
</I>&gt;<i> &gt;         &lt;load&gt;
</I>&gt;<i> &gt;         
</I>&gt;<i> &gt; &lt;yahoo_transport&gt;./yahoo-transport-0.8-1.4/src/yahootrans.so&lt;/yahoo_transport&gt;
</I>&gt;<i> &gt;         &lt;/load&gt;
</I>&gt;<i> &gt;   &lt;/service&gt;
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; 	&lt;service id=&quot;msn.phoenix&quot;&gt;
</I>&gt;<i> &gt;         &lt;msntrans xmlns=&quot;jabber:config:msntrans&quot;&gt;
</I>&gt;<i> &gt;  &lt;instructions&gt;Enter your MSN Messenger account and password. Example: 
</I>&gt;<i> &gt; <A HREF="http://mail.jabber.org/mailman/listinfo/jdev">user1 at hotmail.com.</A> Nickname is
</I>&gt;<i> &gt;         optional.&lt;/instructions&gt;
</I>&gt;<i> &gt;         &lt;vCard&gt;
</I>&gt;<i> &gt;         &lt;FN&gt;MSN Transport&lt;/FN&gt;
</I>&gt;<i> &gt;         &lt;DESC&gt;This is the MSN Transport&lt;/DESC&gt;
</I>&gt;<i> &gt;         &lt;URL&gt;<A HREF="http://phoenix&lt;/URL">http://phoenix&lt;/URL</A>&gt;
</I>&gt;<i> &gt;         &lt;/vCard&gt;
</I>&gt;<i> &gt;         &lt;/msntrans&gt;
</I>&gt;<i> &gt;         &lt;load&gt;
</I>&gt;<i> &gt;         &lt;msntrans&gt;./msn-transport-1.1/msntrans.so&lt;/msntrans&gt;
</I>&gt;<i> &gt;         &lt;/load&gt;
</I>&gt;<i> &gt;         &lt;/service&gt;
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt;  &lt;!--
</I>&gt;<i> &gt;  This is the default server error logging component,
</I>&gt;<i> &gt;  which copies to a file and to STDERR.
</I>&gt;<i> &gt;  --&gt;
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt;  &lt;log id='elogger'&gt;
</I>&gt;<i> &gt;    &lt;host/&gt;
</I>&gt;<i> &gt;    &lt;logtype/&gt;
</I>&gt;<i> &gt;    &lt;format&gt;%d: [%t] (%h): %s&lt;/format&gt;
</I>&gt;<i> &gt;    &lt;file&gt;error.log&lt;/file&gt;
</I>&gt;<i> &gt;    &lt;stderr/&gt;
</I>&gt;<i> &gt;  &lt;/log&gt;
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt;  &lt;!--
</I>&gt;<i> &gt;  This is the default server record logging component,
</I>&gt;<i> &gt;  which logs general statistical/tracking data.
</I>&gt;<i> &gt;  --&gt;
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt;  &lt;log id='rlogger'&gt;
</I>&gt;<i> &gt;    &lt;host/&gt;
</I>&gt;<i> &gt;    &lt;logtype&gt;record&lt;/logtype&gt;
</I>&gt;<i> &gt;    &lt;format&gt;%d %h %s&lt;/format&gt;
</I>&gt;<i> &gt;    &lt;file&gt;record.log&lt;/file&gt;
</I>&gt;<i> &gt;  &lt;/log&gt;
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt;  &lt;!-- The following two services are for handling server-to-server traffic. 
</I>&gt;<i> &gt; --&gt;
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt;  &lt;!-- External asychronous DNS resolver --&gt;
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt;  &lt;service id=&quot;dnsrv&quot;&gt;
</I>&gt;<i> &gt;    &lt;host/&gt;
</I>&gt;<i> &gt;    &lt;load&gt;
</I>&gt;<i> &gt;      &lt;dnsrv&gt;./dnsrv/dnsrv.so&lt;/dnsrv&gt;
</I>&gt;<i> &gt;    &lt;/load&gt;
</I>&gt;<i> &gt;    &lt;dnsrv xmlns=&quot;jabber:config:dnsrv&quot;&gt;
</I>&gt;<i> &gt;    	&lt;resend service=&quot;_jabber._tcp&quot;&gt;s2s&lt;/resend&gt; &lt;!-- for supporting SRV 
</I>&gt;<i> &gt; records --&gt;
</I>&gt;<i> &gt;    	&lt;resend&gt;s2s&lt;/resend&gt;
</I>&gt;<i> &gt;    &lt;/dnsrv&gt;
</I>&gt;<i> &gt;  &lt;/service&gt;
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt;  &lt;!--
</I>&gt;<i> &gt;  The following 's2s' config handles server connections and
</I>&gt;<i> &gt;  dialback hostname verification.  The &lt;legacy/&gt; element is
</I>&gt;<i> &gt;  here to enable communication with old 1.0 servers. The
</I>&gt;<i> &gt;  karma settings are a little higher here to handle the
</I>&gt;<i> &gt;  higher traffic of server-to-server connections (read
</I>&gt;<i> &gt;  the io section below for more details, medium settings).
</I>&gt;<i> &gt;  --&gt;
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt;  &lt;service id=&quot;s2s&quot;&gt;
</I>&gt;<i> &gt;    &lt;load&gt;
</I>&gt;<i> &gt;      &lt;dialback&gt;./dialback/dialback.so&lt;/dialback&gt;
</I>&gt;<i> &gt;    &lt;/load&gt;
</I>&gt;<i> &gt;    &lt;dialback xmlns='jabber:config:dialback'&gt;
</I>&gt;<i> &gt;      &lt;legacy/&gt;
</I>&gt;<i> &gt;      &lt;!-- Use these to listen on particular addresses and/or ports.
</I>&gt;<i> &gt;      &lt;ip port=&quot;7000&quot;/&gt;
</I>&gt;<i> &gt;      &lt;ip port=&quot;5269&quot;&gt;127.0.0.1&lt;/ip&gt;
</I>&gt;<i> &gt;      --&gt;
</I>&gt;<i> &gt;      &lt;ip port=&quot;5269&quot;/&gt;
</I>&gt;<i> &gt;      &lt;karma&gt;
</I>&gt;<i> &gt;        &lt;init&gt;50&lt;/init&gt;
</I>&gt;<i> &gt;        &lt;max&gt;50&lt;/max&gt;
</I>&gt;<i> &gt;        &lt;inc&gt;4&lt;/inc&gt;
</I>&gt;<i> &gt;        &lt;dec&gt;1&lt;/dec&gt;
</I>&gt;<i> &gt;        &lt;penalty&gt;-5&lt;/penalty&gt;
</I>&gt;<i> &gt;        &lt;restore&gt;50&lt;/restore&gt;
</I>&gt;<i> &gt;      &lt;/karma&gt;
</I>&gt;<i> &gt;    &lt;/dialback&gt;
</I>&gt;<i> &gt;  &lt;/service&gt;
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt;  &lt;!--
</I>&gt;<i> &gt;  If you identified additional agents in the main &lt;service/&gt;
</I>&gt;<i> &gt;  section (see examples above), you'll need to define each
</I>&gt;<i> &gt;  of them here using a separate &lt;service/&gt; section for each
</I>&gt;<i> &gt;  &lt;agent/&gt; you identified. Note that the &lt;agent/&gt; sections
</I>&gt;<i> &gt;  determine what gets shown to clients that connect to your
</I>&gt;<i> &gt;  server, whereas the following &lt;service/&gt; sections define
</I>&gt;<i> &gt;  these services within the server itself. The following are
</I>&gt;<i> &gt;  examples only, you will need to create/modify them to get
</I>&gt;<i> &gt;  them working on your Jabber server. See the README files
</I>&gt;<i> &gt;  for each agent and/or the server howto for further
</I>&gt;<i> &gt;  information/instructions.
</I>&gt;<i> &gt;  --&gt;
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt;  &lt;!-- we're commenting these out, of course :)
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt;  &lt;service id=&quot;conference&quot;&gt;
</I>&gt;<i> &gt;    &lt;load&gt;
</I>&gt;<i> &gt;      &lt;groupchat&gt;/path/to/groupchat.so&lt;/groupchat&gt;
</I>&gt;<i> &gt;    &lt;/load&gt;
</I>&gt;<i> &gt;    &lt;host&gt;conference.phoenix&lt;/host&gt;
</I>&gt;<i> &gt;  &lt;/service&gt;
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt;  &lt;service id=&quot;irc&quot;&gt;
</I>&gt;<i> &gt;    &lt;host&gt;irc.phoenix&lt;/host&gt;
</I>&gt;<i> &gt;  &lt;/service&gt;
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt;  &lt;service id=&quot;aim.phoenix&quot;&gt;
</I>&gt;<i> &gt;    &lt;accept&gt;
</I>&gt;<i> &gt;      &lt;ip/&gt;
</I>&gt;<i> &gt;      &lt;port&gt;7009&lt;/port&gt;
</I>&gt;<i> &gt;      &lt;secret&gt;jabber-rocks&lt;/secret&gt;
</I>&gt;<i> &gt;    &lt;/accept&gt;
</I>&gt;<i> &gt;  &lt;/service&gt;
</I>&gt;<i> &gt;  --&gt;
</I>&gt;<i> &gt;  &lt;service id=&quot;yahoo.phoenix&quot;&gt;
</I>&gt;<i> &gt;    &lt;accept&gt;
</I>&gt;<i> &gt;      &lt;ip/&gt;
</I>&gt;<i> &gt;      &lt;port&gt;9001&lt;/port&gt;
</I>&gt;<i> &gt;      &lt;secret&gt;jabber-rocks&lt;/secret&gt;
</I>&gt;<i> &gt;    &lt;/accept&gt;
</I>&gt;<i> &gt;  &lt;/service&gt;
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt;  end of &lt;service/&gt; examples
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt;  &lt;!--
</I>&gt;<i> &gt;  The following &lt;io/&gt; config initializes the top-level
</I>&gt;<i> &gt;  I/O, otherwise known as MIO (Managed Input/Output).
</I>&gt;<i> &gt;  --&gt;
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt;  &lt;io&gt;
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt;    &lt;!-- Set the default karma for *all* sockets --&gt;
</I>&gt;<i> &gt;    &lt;!-- definition of terms:
</I>&gt;<i> &gt;        Avg. Throughput:    The ammount of bytes you can send every second 
</I>&gt;<i> &gt; without incuring any penalty
</I>&gt;<i> &gt;        Burst allowed to:   The maximum you can send in 2 seconds without 
</I>&gt;<i> &gt; incuring any penalty
</I>&gt;<i> &gt;        max sustained rate: if you send data as fast as you can, you will 
</I>&gt;<i> &gt; hit penalty, and will not be able to send for 10 seconds,
</I>&gt;<i> &gt;                            this is the average rate you can dump data when 
</I>&gt;<i> &gt; you are dumping as much as you can, as fast as you can.
</I>&gt;<i> &gt;        seconds to recover from burst: The ammount of time it will take to 
</I>&gt;<i> &gt; reach Avg. Throughput capability, after sending max burst
</I>&gt;<i> &gt;                                       of data
</I>&gt;<i> &gt;        penalty length:     Penalty will last abs(penalty) * Heartbeat 
</I>&gt;<i> &gt; seconds  so a penalty of -5 and heartbeat of 2 will last 10 sec.
</I>&gt;<i> &gt;                            NOTE: penalty CANNOT be less than -100.. 
</I>&gt;<i> &gt; otherwise strange things might happen.
</I>&gt;<i> &gt;    --&gt;
</I>&gt;<i> &gt;    &lt;!-- Example of Low Karma Limits
</I>&gt;<i> &gt;        Avg. throughput:  1k-2k/s
</I>&gt;<i> &gt;        burst allowed to: 5.5k/s
</I>&gt;<i> &gt;        max sustained rate: 485b/s
</I>&gt;<i> &gt;        seconds to recover from burst: 20
</I>&gt;<i> &gt;        penalty length:   12 seconds
</I>&gt;<i> &gt;    &lt;karma&gt;
</I>&gt;<i> &gt;      &lt;heartbeat&gt;2&lt;/heartbeat&gt;
</I>&gt;<i> &gt;      &lt;init&gt;10&lt;/init&gt;
</I>&gt;<i> &gt;      &lt;max&gt;10&lt;/max&gt;
</I>&gt;<i> &gt;      &lt;inc&gt;1&lt;/inc&gt;
</I>&gt;<i> &gt;      &lt;dec&gt;1&lt;/dec&gt;
</I>&gt;<i> &gt;      &lt;penalty&gt;-6&lt;/penalty&gt;
</I>&gt;<i> &gt;      &lt;restore&gt;10&lt;/restore&gt;
</I>&gt;<i> &gt;    &lt;/karma&gt;
</I>&gt;<i> &gt;    --&gt;
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt;    &lt;!-- Example of Medium Karma Limits
</I>&gt;<i> &gt;        Avg. throughput:  5k-10k/s
</I>&gt;<i> &gt;        burst allowed to: 125.5k/s
</I>&gt;<i> &gt;        max sustained rate: 12.6k/s
</I>&gt;<i> &gt;        seconds to recover from burst: 25
</I>&gt;<i> &gt;        penalty length:   10 seconds
</I>&gt;<i> &gt;    &lt;karma&gt;
</I>&gt;<i> &gt;      &lt;heartbeat&gt;2&lt;/heartbeat&gt;
</I>&gt;<i> &gt;      &lt;init&gt;50&lt;/init&gt;
</I>&gt;<i> &gt;      &lt;max&gt;50&lt;/max&gt;
</I>&gt;<i> &gt;      &lt;inc&gt;4&lt;/inc&gt;
</I>&gt;<i> &gt;      &lt;dec&gt;1&lt;/dec&gt;
</I>&gt;<i> &gt;      &lt;penalty&gt;-5&lt;/penalty&gt;
</I>&gt;<i> &gt;      &lt;restore&gt;50&lt;/restore&gt;
</I>&gt;<i> &gt;    &lt;/karma&gt;
</I>&gt;<i> &gt;    --&gt;
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt;    &lt;!-- Example of High Karma Limits
</I>&gt;<i> &gt;        Avg. throughput:  5k-10k/s
</I>&gt;<i> &gt;        burst allowed to: 206k/s
</I>&gt;<i> &gt;        max Sustained rate: 34.3k/s
</I>&gt;<i> &gt;        seconds to recover from burst: 21
</I>&gt;<i> &gt;        penalty length:   6 seconds
</I>&gt;<i> &gt;    &lt;karma&gt;
</I>&gt;<i> &gt;      &lt;heartbeat&gt;2&lt;/heartbeat&gt;
</I>&gt;<i> &gt;      &lt;init&gt;64&lt;/init&gt;
</I>&gt;<i> &gt;      &lt;max&gt;64&lt;/max&gt;
</I>&gt;<i> &gt;      &lt;inc&gt;6&lt;/inc&gt;
</I>&gt;<i> &gt;      &lt;dec&gt;1&lt;/dec&gt;
</I>&gt;<i> &gt;      &lt;penalty&gt;-3&lt;/penalty&gt;
</I>&gt;<i> &gt;      &lt;restore&gt;64&lt;/restore&gt;
</I>&gt;<i> &gt;    &lt;/karma&gt;
</I>&gt;<i> &gt;    --&gt;
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt;    &lt;!--
</I>&gt;<i> &gt;    Set rate limits to monitor the number of connection
</I>&gt;<i> &gt;    attempts from a single IP, any more than [points]
</I>&gt;<i> &gt;    within [time] will engage the limit.  This setting
</I>&gt;<i> &gt;    applies to all incoming connections to any service,
</I>&gt;<i> &gt;    unless otherwise overridden by that service.
</I>&gt;<i> &gt;    --&gt;
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt;    &lt;rate points=&quot;5&quot; time=&quot;25&quot;/&gt;
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt;    &lt;!--
</I>&gt;<i> &gt;    The following section initializes SSL for top-level I/O.
</I>&gt;<i> &gt;    This works only when the server is compiled with openssl!
</I>&gt;<i> &gt;    --&gt;
</I>&gt;<i> &gt;    &lt;!-- BE SURE TO CHANGE THE FOLLOWING (2) IP's IF USING SSL
</I>&gt;<i> &gt;    &lt;ssl&gt;
</I>&gt;<i> &gt;      &lt;key ip='192.168.1.1'&gt;/path/to/cert_and_key.pem&lt;/key&gt;
</I>&gt;<i> &gt;      &lt;key ip='192.168.1.100'&gt;/path/to/other/cert_and_key.pem&lt;/key&gt;
</I>&gt;<i> &gt;    &lt;/ssl&gt;
</I>&gt;<i> &gt;    --&gt;
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt;    &lt;!--
</I>&gt;<i> &gt;    The following section is used to allow or deny
</I>&gt;<i> &gt;    communications from specified IP networks or
</I>&gt;<i> &gt;    addressses. If there is no &lt;allow/&gt; section,
</I>&gt;<i> &gt;    then *all* IPs will be allowed to connect. If
</I>&gt;<i> &gt;    you allow one block, then only that block may
</I>&gt;<i> &gt;    connect. Note that &lt;allow/&gt; is checked before
</I>&gt;<i> &gt;    &lt;deny/&gt;, so if a specific address is allowed
</I>&gt;<i> &gt;    but the network for that address is denied,
</I>&gt;<i> &gt;    then that address will still be denied.
</I>&gt;<i> &gt;    --&gt;
</I>&gt;<i> &gt;    &lt;!--
</I>&gt;<i> &gt;    &lt;allow&gt;&lt;ip&gt;127.0.0.0&lt;/ip&gt;&lt;mask&gt;255.255.255.0&lt;/mask&gt;&lt;/allow&gt;
</I>&gt;<i> &gt;    &lt;allow&gt;&lt;ip&gt;12.34.56.78&lt;/ip&gt;&lt;/allow&gt;
</I>&gt;<i> &gt;    &lt;deny&gt;&lt;ip&gt;22.11.44.0&lt;/ip&gt;&lt;mask&gt;255.255.255.0&lt;/mask&gt;&lt;/deny&gt;
</I>&gt;<i> &gt;    --&gt;
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt;  &lt;/io&gt;
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt;  &lt;!--
</I>&gt;<i> &gt;  This specifies the file to store the pid of the process in.
</I>&gt;<i> &gt;  --&gt;
</I>&gt;<i> &gt;  &lt;pidfile&gt;./jabber.pid&lt;/pidfile&gt;
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; &lt;/jabber&gt;
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; &gt;From: Peter Saint-Andre &lt;<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">stpeter at jabber.org</A>&gt;
</I>&gt;<i> &gt; &gt;To: <A HREF="http://mail.jabber.org/mailman/listinfo/jdev">jdev at jabber.org</A>
</I>&gt;<i> &gt; &gt;CC: <A HREF="http://mail.jabber.org/mailman/listinfo/jdev">amarny at hotmail.com</A>
</I>&gt;<i> &gt; &gt;Subject: Re: [JDEV] Jabber Server- 1.4  Crashes
</I>&gt;<i> &gt; &gt;Date: Wed, 5 Dec 2001 10:33:16 -0600 (CST)
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt;&gt; Hi all, I have been running jabber server-1.4 on a Linux 7.0 for quite 
</I>&gt;<i> &gt; &gt;some
</I>&gt;<i> &gt; &gt;&gt; time now with a max of 10 users. The server even though works great 
</I>&gt;<i> &gt; &gt;crashes
</I>&gt;<i> &gt; &gt;&gt; very often. I am using a daemon tool to run the server continuouly but 
</I>&gt;<i> &gt; &gt;still
</I>&gt;<i> &gt; &gt;&gt; the users are not happy whenever the server dies and disconnects 
</I>&gt;<i> &gt; &gt;everybody.
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt;If you could provide some debug info that would be great. It is
</I>&gt;<i> &gt; &gt;definitely not normal for the server to crash very often and you may have
</I>&gt;<i> &gt; &gt;a configuration problem.
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt;&gt; Also interested in looking into server side code. I am not
</I>&gt;<i> &gt; &gt;&gt; an expert in c and have lot of code related questions. Is this the right
</I>&gt;<i> &gt; &gt;&gt; place for such questions ?
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt;Yes.
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt;Peter
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; _________________________________________________________________
</I>&gt;<i> &gt; Get your FREE download of MSN Explorer at <A HREF="http://explorer.msn.com/intl.asp">http://explorer.msn.com/intl.asp</A>
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; _______________________________________________
</I>&gt;<i> &gt; jdev mailing list
</I>&gt;<i> &gt; <A HREF="http://mail.jabber.org/mailman/listinfo/jdev">jdev at jabber.org</A>
</I>&gt;<i> &gt; <A HREF="http://mailman.jabber.org/listinfo/jdev">http://mailman.jabber.org/listinfo/jdev</A>
</I>&gt;<i> 
</I>&gt;<i> -- 
</I>&gt;<i> Thomas Muldowney
</I>&gt;<i> email/jabber: <A HREF="http://mail.jabber.org/mailman/listinfo/jdev">temas at jabber.org</A>
</I>&gt;<i> 
</I>

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="039617.html">[JDEV] Jabber Server- 1.4 Crashes
</A></li>
	<LI>Next message: <A HREF="039619.html">[JDEV] Feature Request
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#39618">[ date ]</a>
              <a href="thread.html#39618">[ thread ]</a>
              <a href="subject.html#39618">[ subject ]</a>
              <a href="author.html#39618">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://mail.jabber.org/mailman/listinfo/jdev">More information about the JDev
mailing list</a><br>
</body></html>
