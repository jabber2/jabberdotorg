<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [JDEV] Jabber Server- 1.4 Crashes
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:jdev%40jabber.org?Subject=%5BJDEV%5D%20Jabber%20Server-%201.4%20Crashes&In-Reply-To=F115Dd3OJXsNQptgFrY0000377e%40hotmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="010326.html">
   <LINK REL="Next"  HREF="010328.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[JDEV] Jabber Server- 1.4 Crashes</H1>
    <B>Thomas Muldowney</B> 
    <A HREF="mailto:jdev%40jabber.org?Subject=%5BJDEV%5D%20Jabber%20Server-%201.4%20Crashes&In-Reply-To=F115Dd3OJXsNQptgFrY0000377e%40hotmail.com"
       TITLE="[JDEV] Jabber Server- 1.4 Crashes">temas at box5.net
       </A><BR>
    <I>Wed Dec  5 12:40:03 CST 2001</I>
    <P><UL>
        <LI>Previous message: <A HREF="010326.html">[JDEV] Jabber Server- 1.4 Crashes
</A></li>
        <LI>Next message: <A HREF="010328.html">[JDEV] Jabber Server- 1.4 Crashes
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10327">[ date ]</a>
              <a href="thread.html#10327">[ thread ]</a>
              <a href="subject.html#10327">[ subject ]</a>
              <a href="author.html#10327">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Your yahoo transport is taking you down.  Do you have the latest
version?  Have you tried the cvs version?

--temas


On Wed, Dec 05, 2001 at 06:26:10PM +0000, Amarnath Yara wrote:
&gt;<i> Hi, the following is the debug info from core that I got from jabber 
</I>&gt;<i> server-1.4.1 The server crashed when I tried to login. The numbers of 
</I>&gt;<i> already logged in users was zero at that time. Normally when there are some 
</I>&gt;<i> users logged in and chatting and if another guy tries to login then the 
</I>&gt;<i> server crashes with a segmentation fault. Same is the case with jabber 
</I>&gt;<i> server 1.4.  I have pasted backtrace, the last two packets of debug and the 
</I>&gt;<i> jabber.xml configuration. I hope this information is helpful. Thanks.
</I>&gt;<i> 
</I>&gt;<i> gdb -c core jabberd/jabberd
</I>&gt;<i> GNU gdb 5.0
</I>&gt;<i> Copyright 2000 Free Software Foundation, Inc.
</I>&gt;<i> GDB is free software, covered by the GNU General Public License, and you are
</I>&gt;<i> welcome to change it and/or distribute copies of it under certain 
</I>&gt;<i> conditions.
</I>&gt;<i> Type &quot;show copying&quot; to see the conditions.
</I>&gt;<i> There is absolutely no warranty for GDB.  Type &quot;show warranty&quot; for details.
</I>&gt;<i> This GDB was configured as &quot;i386-redhat-linux&quot;...
</I>&gt;<i> Core was generated by `./jabberd/jabberd -D -h phoenix'.
</I>&gt;<i> Program terminated with signal 11, Segmentation fault.
</I>&gt;<i> Reading symbols from /usr/lib/libpth.so.14...done.
</I>&gt;<i> Loaded symbols for /usr/lib/libpth.so.14
</I>&gt;<i> Reading symbols from /lib/libdl.so.2...done.
</I>&gt;<i> Loaded symbols for /lib/libdl.so.2
</I>&gt;<i> Reading symbols from /lib/libresolv.so.2...done.
</I>&gt;<i> Loaded symbols for /lib/libresolv.so.2
</I>&gt;<i> Reading symbols from /lib/libc.so.6...done.
</I>&gt;<i> Loaded symbols for /lib/libc.so.6
</I>&gt;<i> Reading symbols from /lib/ld-linux.so.2...done.
</I>&gt;<i> Loaded symbols for /lib/ld-linux.so.2
</I>&gt;<i> Reading symbols from /usr/local/UIM/jabber-1.4.1/./jsm/jsm.so...done.
</I>&gt;<i> Loaded symbols for /usr/local/UIM/jabber-1.4.1/./jsm/jsm.so
</I>&gt;<i> Reading symbols from 
</I>&gt;<i> /usr/local/UIM/jabber-1.4.1/./xdb_file/xdb_file.so...done.
</I>&gt;<i> Loaded symbols for /usr/local/UIM/jabber-1.4.1/./xdb_file/xdb_file.so
</I>&gt;<i> Reading symbols from 
</I>&gt;<i> /usr/local/UIM/jabber-1.4.1/./pthsock/pthsock_client.so...done.
</I>&gt;<i> Loaded symbols for /usr/local/UIM/jabber-1.4.1/./pthsock/pthsock_client.so
</I>&gt;<i> Reading symbols from 
</I>&gt;<i> /usr/local/UIM/jabber-1.4.1/./yahoo-transport-0.8-1.4/src/yahootrans.so...done.
</I>&gt;<i> Loaded symbols for 
</I>&gt;<i> /usr/local/UIM/jabber-1.4.1/./yahoo-transport-0.8-1.4/src/yahootrans.so
</I>&gt;<i> Reading symbols from 
</I>&gt;<i> /usr/local/UIM/jabber-1.4.1/./msn-transport-1.1/msntrans.so...done.
</I>&gt;<i> Loaded symbols for 
</I>&gt;<i> /usr/local/UIM/jabber-1.4.1/./msn-transport-1.1/msntrans.so
</I>&gt;<i> Reading symbols from /usr/local/UIM/jabber-1.4.1/./dnsrv/dnsrv.so...done.
</I>&gt;<i> Loaded symbols for /usr/local/UIM/jabber-1.4.1/./dnsrv/dnsrv.so
</I>&gt;<i> Reading symbols from 
</I>&gt;<i> /usr/local/UIM/jabber-1.4.1/./dialback/dialback.so...done.
</I>&gt;<i> Loaded symbols for /usr/local/UIM/jabber-1.4.1/./dialback/dialback.so
</I>&gt;<i> Reading symbols from /lib/libnss_files.so.2...done.
</I>&gt;<i> Loaded symbols for /lib/libnss_files.so.2
</I>&gt;<i> Reading symbols from /lib/libnss_nisplus.so.2...done.
</I>&gt;<i> Loaded symbols for /lib/libnss_nisplus.so.2
</I>&gt;<i> Reading symbols from /lib/libnsl.so.1...done.
</I>&gt;<i> Loaded symbols for /lib/libnsl.so.1
</I>&gt;<i> Reading symbols from /lib/libnss_nis.so.2...done.
</I>&gt;<i> Loaded symbols for /lib/libnss_nis.so.2
</I>&gt;<i> Reading symbols from /lib/libnss_dns.so.2...done.
</I>&gt;<i> Loaded symbols for /lib/libnss_dns.so.2
</I>&gt;<i> #0  0x805771c in jid_cmp (a=0x5f39396e, b=0x820fbc0) at jid.c:248
</I>&gt;<i> 248         if(_jid_nullstrcmp(a-&gt;resource, b-&gt;resource) != 0) return -1;
</I>&gt;<i> (gdb) bt
</I>&gt;<i> #0  0x805771c in jid_cmp (a=0x5f39396e, b=0x820fbc0) at jid.c:248
</I>&gt;<i> #1  0x80578e2 in jid_append (a=0x5f39396e, b=0x820fbc0) at jid.c:287
</I>&gt;<i> #2  0x40199f54 in yahoo_parse_presence (yjp=0x820fc10) at presence.c:268
</I>&gt;<i> #3  0x40198dbb in yahoo_parse_jpacket (arg=0x820fc10) at parser.c:279
</I>&gt;<i> #4  0x805576b in mtq_main (arg=0x80e3d50) at mtq.c:147
</I>&gt;<i> #5  0x4002625c in pth_spawn_trampoline () from /usr/lib/libpth.so.14
</I>&gt;<i> #6  0x40024351 in pth_mctx_set_bootstrap () from /usr/lib/libpth.so.14
</I>&gt;<i> #7  &lt;signal handler called&gt;
</I>&gt;<i> #8  0x40072585 in __sigsuspend (set=0x65636e65) at 
</I>&gt;<i> ../sysdeps/unix/sysv/linux/sigsuspend.c:45
</I>&gt;<i> #9  0x73657270 in ?? ()
</I>&gt;<i> Cannot access memory at address 0x2f3c3e73
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> Amarnath Yara
</I>&gt;<i> 211, Main Street
</I>&gt;<i> Apartment # 429,
</I>&gt;<i> Columbia 29201.SC.
</I>&gt;<i> e-mail : <A HREF="http://mail.jabber.org/mailman/listinfo/jdev">amarny at hotmail.com</A>
</I>&gt;<i>         <A HREF="http://mail.jabber.org/mailman/listinfo/jdev">yara at engr.sc.edu</A>
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> ****************** some Debug (last two packets before 
</I>&gt;<i> crash)**********************
</I>&gt;<i> Wed Dec  5 13:51:25 2001  sessions.c:303 THREAD:SESSION:TO received data 
</I>&gt;<i> from <A HREF="http://mail.jabber.org/mailman/listinfo/jdev">girivasan99_kst at phoenix</A>/home!
</I>&gt;<i> Wed Dec  5 13:51:25 2001  modules.c:130 mapi_call 0
</I>&gt;<i> Wed Dec  5 13:51:25 2001  modules.c:153 MAPI 822D980
</I>&gt;<i> Wed Dec  5 13:51:25 2001  mod_presence incoming filter for 
</I>&gt;<i> <A HREF="http://mail.jabber.org/mailman/listinfo/jdev">girivasan99_kst at phoenix</A>/home
</I>&gt;<i> Wed Dec  5 13:51:25 2001  mtq 813FC58 one call 8221AE0
</I>&gt;<i> Wed Dec  5 13:51:25 2001  offline.c:45 THREAD:OFFLINE received 
</I>&gt;<i> <A HREF="http://mail.jabber.org/mailman/listinfo/jdev">girivasan99_kst at phoenix</A>'s packet: &lt;presence type='probe' 
</I>&gt;<i> from='<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">girivasan99_kst at phoenix</A>' to='<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">girivasan99_kst at phoenix</A>'/&gt;
</I>&gt;<i> Wed Dec  5 13:51:25 2001  modules.c:130 mapi_call 1
</I>&gt;<i> Wed Dec  5 13:51:25 2001  modules.c:169 mapi_call returning unhandled
</I>&gt;<i> Wed Dec  5 13:51:25 2001  util.c:64 dropping 503 packet &lt;presence 
</I>&gt;<i> type='probe' from='<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">girivasan99_kst at phoenix</A>' to='<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">girivasan99_kst at phoenix</A>'/&gt;
</I>&gt;<i> Wed Dec  5 13:51:25 2001  mtq 813FC58 one call 82C24F0
</I>&gt;<i> Wed Dec  5 13:51:25 2001  offline.c:45 THREAD:OFFLINE received 
</I>&gt;<i> <A HREF="http://mail.jabber.org/mailman/listinfo/jdev">superkell at phoenix</A>'s packet: &lt;presence id='1' 
</I>&gt;<i> from='<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">girivasan99_kst at phoenix</A>/home' 
</I>&gt;<i> to='<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">superkell at phoenix</A>'&gt;&lt;status&gt;online&lt;/status&gt;&lt;/presence&gt;
</I>&gt;<i> Wed Dec  5 13:51:25 2001  modules.c:130 mapi_call 1
</I>&gt;<i> Wed Dec  5 13:51:25 2001  modules.c:169 mapi_call returning unhandled
</I>&gt;<i> Wed Dec  5 13:51:25 2001  util.c:64 dropping 503 packet &lt;presence id='1' 
</I>&gt;<i> from='<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">girivasan99_kst at phoenix</A>/home' 
</I>&gt;<i> to='<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">superkell at phoenix</A>'&gt;&lt;status&gt;online&lt;/status&gt;&lt;/presence&gt;
</I>&gt;<i> Wed Dec  5 13:51:25 2001  mtq 813FC58 one call 820DB78
</I>&gt;<i> Wed Dec  5 13:51:25 2001  mtq 813FC58 one call 823A278
</I>&gt;<i> Wed Dec  5 13:51:25 2001  yahoo auth belongs to session 8237E30 (so not 
</I>&gt;<i> starting a new one)
</I>&gt;<i> Wed Dec  5 13:51:25 2001  mtq 813FC58 one call 82D8670
</I>&gt;<i> Wed Dec  5 13:51:25 2001  mtq 813FC58 one call 820FC10
</I>&gt;<i> Wed Dec  5 13:51:26 2001  dnsrv.c:143 dnsrv: Read error on coprocess(1): 1 
</I>&gt;<i> Operation not permitted
</I>&gt;<i> Wed Dec  5 13:51:26 2001  dnsrv.c:157 DNSRV CHILD: out of loop.. exiting 
</I>&gt;<i> normal
</I>&gt;<i> Segmentation fault (core dumped)
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> /*********************jabber.xml file ****************************/
</I>&gt;<i> &lt;jabber&gt;
</I>&gt;<i> 
</I>&gt;<i>  &lt;!--
</I>&gt;<i>  This is the Jabber server configuration file. The file is
</I>&gt;<i>  broken into different sections based on the services being
</I>&gt;<i>  managed by jabberd, the server daemon. Most of the important
</I>&gt;<i>  sections have comments and are easy to modify. You can find
</I>&gt;<i>  full instructions in the server howto, which is available at
</I>&gt;<i>  <A HREF="http://docs.jabber.org/.">http://docs.jabber.org/.</A> Note that when you see a tag like
</I>&gt;<i>  &quot;jabberd:cmdline&quot;, it's automatically replaced on startup
</I>&gt;<i>  with the command line flag passed in to jabberd. This enables
</I>&gt;<i>  you to override parameters set in this configuration file if
</I>&gt;<i>  necessary or desired. Also note as you comment things in and
</I>&gt;<i>  out that jabberd does not like comments within comments, so
</I>&gt;<i>  be careful with your XML. :)
</I>&gt;<i>  --&gt;
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i>  &lt;!--
</I>&gt;<i>  The following &lt;service/&gt; section is for the session manager,
</I>&gt;<i>  the most important component within the server. This section
</I>&gt;<i>  contains the following types of information:
</I>&gt;<i> 
</I>&gt;<i>    * the server's hostname
</I>&gt;<i>    * other basic server information
</I>&gt;<i>    * the location of the session log file
</I>&gt;<i>    * email addresses for server administrators
</I>&gt;<i>    * the location of the server that provides update information
</I>&gt;<i>    * registration instructions for new users
</I>&gt;<i>    * a welcome message for new users
</I>&gt;<i>    * a list of agents with which users can register
</I>&gt;<i>    * load rules for the modules within the session manager
</I>&gt;<i> 
</I>&gt;<i>  --&gt;
</I>&gt;<i> 
</I>&gt;<i>  &lt;service id=&quot;sessions&quot;&gt;
</I>&gt;<i> 
</I>&gt;<i>    &lt;!--
</I>&gt;<i>    Change hostname below to something other than &quot;tucson&quot;,
</I>&gt;<i>    i.e., to the hostname or IP address of your Jabber server.
</I>&gt;<i>    Multiple &lt;host/&gt; entries are allowed - each one is for a
</I>&gt;<i>    separate virtual server. Note that each host entry must
</I>&gt;<i>    be on one line, the server doesn't like it otherwise! :)
</I>&gt;<i>    --&gt;
</I>&gt;<i> 
</I>&gt;<i>    &lt;host&gt;&lt;jabberd:cmdline flag=&quot;h&quot;&gt;phoenix&lt;/jabberd:cmdline&gt;&lt;/host&gt;
</I>&gt;<i> 
</I>&gt;<i>    &lt;!--
</I>&gt;<i>    This is the custom configuration section for the
</I>&gt;<i>    Jabber session manager, a.k.a. &quot;JSM&quot;.
</I>&gt;<i>    --&gt;
</I>&gt;<i> 
</I>&gt;<i>    &lt;jsm xmlns=&quot;jabber:config:jsm&quot;&gt;
</I>&gt;<i> 
</I>&gt;<i>      &lt;!--
</I>&gt;<i>      The &lt;filter/&gt; section below determines settings
</I>&gt;<i>      for mod_filter, a server-side module built into
</I>&gt;<i>      JSM that enables users to set delivery rules for
</I>&gt;<i>      messages they receive (not yet supported by all
</I>&gt;<i>      clients. The &lt;allow/&gt; subsection specifies which
</I>&gt;<i>      conditions and actions to enable. High-level
</I>&gt;<i>      descriptions of each setting can be found below
</I>&gt;<i>      (see docs.jabber.org for full details):
</I>&gt;<i> 
</I>&gt;<i>      * &lt;default/&gt; - a user cannot delete this one, it's
</I>&gt;<i>        the default rule for delivering messages
</I>&gt;<i>      * &lt;max_size/&gt; - the maximum number of rules in a
</I>&gt;<i>        user's rule set (we don't want to overdo it!)
</I>&gt;<i>      * conditions...
</I>&gt;<i>        * &lt;ns/&gt; - matches the query xmlns attrib on an iq packet
</I>&gt;<i>        * &lt;unavailable/&gt; - matches when user is unavailable
</I>&gt;<i>        * &lt;from/&gt; - matches the sender of the message
</I>&gt;<i>        * &lt;resource/&gt; - matches the receiver's resource
</I>&gt;<i>        * &lt;subject/&gt; - matches the subject of the message
</I>&gt;<i>        * &lt;body/&gt; - matches the body of the message
</I>&gt;<i>        * &lt;show/&gt; - matches the show tag on the receiver's presence
</I>&gt;<i>        * &lt;type/&gt; - matches the type of the message
</I>&gt;<i>        * &lt;roster/&gt; - matches if the sender is in your roster
</I>&gt;<i>        * &lt;group/&gt; - matches if the sender is in the specified group
</I>&gt;<i>      * actions...
</I>&gt;<i>        * &lt;error/&gt; - replies with an error
</I>&gt;<i>        * &lt;offline/&gt; - stores the messages offline
</I>&gt;<i>        * &lt;forward/&gt; - forwards the message to another jid
</I>&gt;<i>        * &lt;reply/&gt; - sends a reply to the sender of the message
</I>&gt;<i>        * &lt;continue/&gt; - continues processing of the rules
</I>&gt;<i>        * &lt;settype/&gt; - changes the type of the message
</I>&gt;<i>      --&gt;
</I>&gt;<i>      &lt;filter&gt;
</I>&gt;<i>          &lt;default/&gt;
</I>&gt;<i>          &lt;max_size&gt;100&lt;/max_size&gt;
</I>&gt;<i>          &lt;allow&gt;
</I>&gt;<i>              &lt;conditions&gt;
</I>&gt;<i>                  &lt;ns/&gt;
</I>&gt;<i>                  &lt;unavailable/&gt;
</I>&gt;<i>                  &lt;from/&gt;
</I>&gt;<i>                  &lt;resource/&gt;
</I>&gt;<i>                  &lt;subject/&gt;
</I>&gt;<i>                  &lt;body/&gt;
</I>&gt;<i>                  &lt;show/&gt;
</I>&gt;<i>                  &lt;type/&gt;
</I>&gt;<i>                  &lt;roster/&gt;
</I>&gt;<i>                  &lt;group/&gt;
</I>&gt;<i>              &lt;/conditions&gt;
</I>&gt;<i>              &lt;actions&gt;
</I>&gt;<i>                  &lt;error/&gt;
</I>&gt;<i>                  &lt;offline/&gt;
</I>&gt;<i>                  &lt;forward/&gt;
</I>&gt;<i>                  &lt;reply/&gt;
</I>&gt;<i>                  &lt;continue/&gt;
</I>&gt;<i>                  &lt;settype/&gt;
</I>&gt;<i>              &lt;/actions&gt;
</I>&gt;<i>          &lt;/allow&gt;
</I>&gt;<i>      &lt;/filter&gt;
</I>&gt;<i> 
</I>&gt;<i>      &lt;!-- The server vCard --&gt;
</I>&gt;<i> 
</I>&gt;<i>      &lt;vCard&gt;
</I>&gt;<i>        &lt;FN&gt;Jabber Server&lt;/FN&gt;
</I>&gt;<i>        &lt;DESC&gt;A Jabber Server!&lt;/DESC&gt;
</I>&gt;<i>        &lt;URL&gt;<A HREF="http://foo.bar/&lt;/URL">http://foo.bar/&lt;/URL</A>&gt;
</I>&gt;<i>      &lt;/vCard&gt;
</I>&gt;<i> 
</I>&gt;<i>      &lt;!--
</I>&gt;<i>      Registration instructions and required fields. The
</I>&gt;<i>      notify attribute will send the server administrator(s)
</I>&gt;<i>      a message after each valid registration if it is set
</I>&gt;<i>      to &quot;yes&quot;.
</I>&gt;<i>      --&gt;
</I>&gt;<i> 
</I>&gt;<i>      &lt;register notify=&quot;yes&quot;&gt;
</I>&gt;<i>        &lt;instructions&gt;Choose a username and password to register with this 
</I>&gt;<i> server.&lt;/instructions&gt;
</I>&gt;<i>        &lt;name/&gt;
</I>&gt;<i>        &lt;email/&gt;
</I>&gt;<i>      &lt;/register&gt;
</I>&gt;<i> 
</I>&gt;<i>      &lt;!--
</I>&gt;<i>      A welcome note that is sent to every new user who registers
</I>&gt;<i>      with your server. Comment it out to disable this function.
</I>&gt;<i>      --&gt;
</I>&gt;<i> 
</I>&gt;<i>      &lt;welcome&gt;
</I>&gt;<i>        &lt;subject&gt;Welcome!&lt;/subject&gt;
</I>&gt;<i>        &lt;body&gt;Welcome to U.S. Computing's Jabber server phoenix on jalisco-- 
</I>&gt;<i> we hope you enjoy this service! For information about how
</I>&gt;<i> to use Jabber, visit the Jabber User's Guide at 
</I>&gt;<i> <A HREF="http://docs.jabber.org/&lt;/body">http://docs.jabber.org/&lt;/body</A>&gt;
</I>&gt;<i>      &lt;/welcome&gt;
</I>&gt;<i> 
</I>&gt;<i>      &lt;!--
</I>&gt;<i>      IDs with admin access - these people will receive admin
</I>&gt;<i>      messages (any message to=&quot;yourhostname&quot; is an admin
</I>&gt;<i>      message).  These addresses must be local ids, they cannot
</I>&gt;<i>      be remote addresses.
</I>&gt;<i> 
</I>&gt;<i>      Note that they can also send announcements to all
</I>&gt;<i>      users of the server, or to all online users. To use
</I>&gt;<i>      the announcement feature, you need to send raw xml and be
</I>&gt;<i>      logged in as one of the admin users. Here is the syntax
</I>&gt;<i>      for sending an announcement to online users:
</I>&gt;<i> 
</I>&gt;<i>        &lt;message to=&quot;yourhostname/announce/online&quot;&gt;
</I>&gt;<i>          &lt;body&gt;announcement here&lt;/body&gt;
</I>&gt;<i>        &lt;/message&gt;
</I>&gt;<i> 
</I>&gt;<i>        &lt;message to=&quot;yourhostname/announce/motd&quot;&gt;
</I>&gt;<i>          &lt;body&gt;message (of the day) that is sent only once to all users 
</I>&gt;<i> that are logged in and additionally to new ones as they log in&lt;/body&gt;
</I>&gt;<i>        &lt;/message&gt;
</I>&gt;<i> 
</I>&gt;<i>      Sending to /announce/motd/delete will remove any existing
</I>&gt;<i>      motd, and to /announce/motd/update will only update the motd
</I>&gt;<i>      without re-announcing to all logged in users.
</I>&gt;<i> 
</I>&gt;<i>      The &lt;reply&gt; will be the message that is automatically
</I>&gt;<i>      sent in response to any admin messages.
</I>&gt;<i>      --&gt;
</I>&gt;<i> 
</I>&gt;<i>      &lt;!--
</I>&gt;<i>      &lt;admin&gt;
</I>&gt;<i>        &lt;read&gt;<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">support at tucson</A>&lt;/read&gt;
</I>&gt;<i>        &lt;write&gt;<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">admin at tucson</A>&lt;/write&gt;
</I>&gt;<i>        &lt;reply&gt;
</I>&gt;<i>          &lt;subject&gt;Auto Reply&lt;/subject&gt;
</I>&gt;<i>          &lt;body&gt;This is a special administrative address.  Your message was 
</I>&gt;<i> received and forwarded to server administrators.&lt;/body&gt;
</I>&gt;<i>        &lt;/reply&gt;
</I>&gt;<i>      &lt;/admin&gt;
</I>&gt;<i>      --&gt;
</I>&gt;<i> 
</I>&gt;<i>      &lt;!--
</I>&gt;<i>      This is the resource that checks for updated versions
</I>&gt;<i>      of the Jabber server software. Note that you don't lose
</I>&gt;<i>      any functionality if you comment this out. Removing the
</I>&gt;<i>      &lt;update/&gt; config is especially a good strategy if your
</I>&gt;<i>      server is behind a firewall. If you want to use this
</I>&gt;<i>      feature, change 'tucson' to the hostname or IP address
</I>&gt;<i>      of your server, making sure that it is the same as your
</I>&gt;<i>      entry for &lt;host/&gt; above.
</I>&gt;<i>      --&gt;
</I>&gt;<i> 
</I>&gt;<i>      &lt;!-- COMMENTED OUT BY WAYNE DURING INITIAL CONFIGURATION
</I>&gt;<i>      &lt;update&gt;&lt;jabberd:cmdline flag=&quot;h&quot;&gt;phoenix&lt;/jabberd:cmdline&gt;&lt;/update&gt;
</I>&gt;<i>      --&gt;
</I>&gt;<i> 
</I>&gt;<i>      &lt;!--
</I>&gt;<i>      This enables the server to automatically update the
</I>&gt;<i>      user directory when a vcard is edited.  The update is
</I>&gt;<i>      only sent to the first listed jud service below.  It is
</I>&gt;<i>      safe to remove this flag if you do not want any users
</I>&gt;<i>      automatically added to the directory.
</I>&gt;<i>      --&gt;
</I>&gt;<i> 
</I>&gt;<i>      &lt;vcard2jud/&gt;
</I>&gt;<i> 
</I>&gt;<i>      &lt;!--
</I>&gt;<i>      The &lt;browse/&gt; section identifies the transports and other
</I>&gt;<i>      services that are available from this server. Note that each
</I>&gt;<i>      entity identified here must exist elsewhere or be further
</I>&gt;<i>      defined in its own &lt;service/&gt; section below. These services
</I>&gt;<i>      will appear in the user interface of Jabber clients that
</I>&gt;<i>      connect to your server.
</I>&gt;<i>      --&gt;
</I>&gt;<i> 
</I>&gt;<i>      &lt;browse&gt;
</I>&gt;<i> 
</I>&gt;<i>        &lt;!--
</I>&gt;<i>        This is the default agent for the master Jabber User
</I>&gt;<i>        Directory, a.k.a. &quot;JUD&quot;, which is located at jabber.org.
</I>&gt;<i>        You can add separate &lt;service/&gt; sections for additional
</I>&gt;<i>        directories, e.g., one for a company intranet.
</I>&gt;<i>        --&gt;
</I>&gt;<i> 
</I>&gt;<i>        &lt;service type=&quot;jud&quot; jid=&quot;users.jabber.org&quot; name=&quot;Jabber User 
</I>&gt;<i> Directory&quot;&gt;
</I>&gt;<i>          &lt;ns&gt;jabber:iq:search&lt;/ns&gt;
</I>&gt;<i>          &lt;ns&gt;jabber:iq:register&lt;/ns&gt;
</I>&gt;<i>        &lt;/service&gt;
</I>&gt;<i> 
</I>&gt;<i>        &lt;!--
</I>&gt;<i>        The following services are examples only, you will need to
</I>&gt;<i>        create/modify them to get them working on your Jabber
</I>&gt;<i>        server. See the README files for each service and/or the
</I>&gt;<i>        server howto for further information/instructions.
</I>&gt;<i>        --&gt;
</I>&gt;<i> 
</I>&gt;<i>        &lt;!-- we're commenting these out, of course :)
</I>&gt;<i> 
</I>&gt;<i>        &lt;conference type=&quot;private&quot; jid=&quot;conference.phoenix&quot; name=&quot;Private 
</I>&gt;<i> Conferencing&quot;/&gt;
</I>&gt;<i> 
</I>&gt;<i>        &lt;service type=&quot;aim&quot; jid=&quot;aim.phoenix&quot; name=&quot;AIM Transport&quot;&gt;
</I>&gt;<i>          &lt;ns&gt;jabber:iq:gateway&lt;/ns&gt;
</I>&gt;<i>          &lt;ns&gt;jabber:iq:register&lt;/ns&gt;
</I>&gt;<i>        &lt;/service&gt;
</I>&gt;<i> 
</I>&gt;<i>           end of &lt;service/&gt; examples --&gt;
</I>&gt;<i> 
</I>&gt;<i>        &lt;service type=&quot;yahoo&quot; jid=&quot;yahoo.phoenix&quot; name=&quot;Yahoo! Transport&quot;&gt;
</I>&gt;<i>          &lt;ns&gt;jabber:iq:gateway&lt;/ns&gt;
</I>&gt;<i>          &lt;ns&gt;jabber:iq:register&lt;/ns&gt;
</I>&gt;<i>        &lt;/service&gt;
</I>&gt;<i>       &lt;!-- Commented by Amar
</I>&gt;<i>        &lt;service type =&quot;icq&quot; jid=&quot;icq.phoenix&quot; name=&quot;ICQ Transport&quot;&gt;
</I>&gt;<i>           &lt;ns&gt;jabber:iq:gateway&lt;/ns&gt;
</I>&gt;<i>           &lt;ns&gt;jabber:iq:register&lt;/ns&gt;
</I>&gt;<i>           &lt;ns&gt;jabber:iq:search&lt;/ns&gt;
</I>&gt;<i>        &lt;/service&gt;
</I>&gt;<i>      --&gt;
</I>&gt;<i> 
</I>&gt;<i> 	&lt;service type=&quot;msn&quot; jid=&quot;msn.phoenix&quot; name=&quot;MSN Transport&quot;&gt;
</I>&gt;<i>          &lt;ns&gt;jabber:iq:gateway&lt;/ns&gt;
</I>&gt;<i>          &lt;ns&gt;jabber:iq:register&lt;/ns&gt;
</I>&gt;<i>        &lt;/service&gt;
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i>      &lt;/browse&gt;
</I>&gt;<i> 
</I>&gt;<i>    &lt;/jsm&gt;
</I>&gt;<i> 
</I>&gt;<i>    &lt;!--
</I>&gt;<i>    The following section dynamically loads the individual
</I>&gt;<i>    modules that make up the session manager. Remove or
</I>&gt;<i>    comment out modules to disable them. Note that the order
</I>&gt;<i>    of modules is important, since packets are delivered
</I>&gt;<i>    based on the following order!!
</I>&gt;<i>    --&gt;
</I>&gt;<i> 
</I>&gt;<i>    &lt;load main=&quot;jsm&quot;&gt;
</I>&gt;<i>      &lt;jsm&gt;./jsm/jsm.so&lt;/jsm&gt;
</I>&gt;<i>      &lt;mod_echo&gt;./jsm/jsm.so&lt;/mod_echo&gt;
</I>&gt;<i>      &lt;mod_roster&gt;./jsm/jsm.so&lt;/mod_roster&gt;
</I>&gt;<i>      &lt;mod_time&gt;./jsm/jsm.so&lt;/mod_time&gt;
</I>&gt;<i>      &lt;mod_vcard&gt;./jsm/jsm.so&lt;/mod_vcard&gt;
</I>&gt;<i>      &lt;mod_last&gt;./jsm/jsm.so&lt;/mod_last&gt;
</I>&gt;<i>      &lt;mod_version&gt;./jsm/jsm.so&lt;/mod_version&gt;
</I>&gt;<i>      &lt;mod_announce&gt;./jsm/jsm.so&lt;/mod_announce&gt;
</I>&gt;<i>      &lt;mod_agents&gt;./jsm/jsm.so&lt;/mod_agents&gt;
</I>&gt;<i>      &lt;mod_browse&gt;./jsm/jsm.so&lt;/mod_browse&gt;
</I>&gt;<i>      &lt;mod_admin&gt;./jsm/jsm.so&lt;/mod_admin&gt;
</I>&gt;<i>      &lt;mod_filter&gt;./jsm/jsm.so&lt;/mod_filter&gt;
</I>&gt;<i>      &lt;mod_offline&gt;./jsm/jsm.so&lt;/mod_offline&gt;
</I>&gt;<i>      &lt;mod_presence&gt;./jsm/jsm.so&lt;/mod_presence&gt;
</I>&gt;<i>      &lt;mod_auth_plain&gt;./jsm/jsm.so&lt;/mod_auth_plain&gt;
</I>&gt;<i>      &lt;mod_auth_digest&gt;./jsm/jsm.so&lt;/mod_auth_digest&gt;
</I>&gt;<i>      &lt;mod_auth_0k&gt;./jsm/jsm.so&lt;/mod_auth_0k&gt;
</I>&gt;<i>      &lt;mod_log&gt;./jsm/jsm.so&lt;/mod_log&gt;
</I>&gt;<i>      &lt;mod_register&gt;./jsm/jsm.so&lt;/mod_register&gt;
</I>&gt;<i>      &lt;mod_xml&gt;./jsm/jsm.so&lt;/mod_xml&gt;
</I>&gt;<i>    &lt;/load&gt;
</I>&gt;<i> 
</I>&gt;<i>  &lt;/service&gt;
</I>&gt;<i> 
</I>&gt;<i>  &lt;!-- OK, we've finished defining the Jabber Session Manager. --&gt;
</I>&gt;<i> 
</I>&gt;<i>  &lt;!-- The &lt;xdb/&gt; component handles all data storage, using the filesystem. 
</I>&gt;<i> --&gt;
</I>&gt;<i> 
</I>&gt;<i>  &lt;xdb id=&quot;xdb&quot;&gt;
</I>&gt;<i>    &lt;host/&gt;
</I>&gt;<i>    &lt;load&gt;
</I>&gt;<i>      &lt;xdb_file&gt;./xdb_file/xdb_file.so&lt;/xdb_file&gt;
</I>&gt;<i>    &lt;/load&gt;
</I>&gt;<i>    &lt;xdb_file xmlns=&quot;jabber:config:xdb_file&quot;&gt;
</I>&gt;<i>      &lt;spool&gt;&lt;jabberd:cmdline flag='s'&gt;./spool&lt;/jabberd:cmdline&gt;&lt;/spool&gt;
</I>&gt;<i>    &lt;/xdb_file&gt;
</I>&gt;<i>  &lt;/xdb&gt;
</I>&gt;<i> 
</I>&gt;<i>  &lt;!--
</I>&gt;<i>  The following service manages incoming client socket connections.
</I>&gt;<i>  There are several items you can set here to optimize performance:
</I>&gt;<i> 
</I>&gt;<i>    * authtime - default is unlimited, but you can set this to
</I>&gt;<i>      limit the amount of time allowed for authentication to be
</I>&gt;<i>      completed, e.g., &lt;authtime&gt;10&lt;/authtime&gt; for 10 seconds
</I>&gt;<i> 
</I>&gt;<i>    * karma - this is an input/output rate limiting system that
</I>&gt;<i>      the Jabber team came up with to prevent bandwidth hogging.
</I>&gt;<i>      For details about karma, read the io section at the bottom
</I>&gt;<i>      and/or see docs.jabber.org. These are the low settings and
</I>&gt;<i>      apply per connection/socket and can be changed as desired.
</I>&gt;<i> 
</I>&gt;<i>  --&gt;
</I>&gt;<i> 
</I>&gt;<i>  &lt;service id=&quot;c2s&quot;&gt;
</I>&gt;<i>    &lt;load&gt;
</I>&gt;<i>      &lt;pthsock_client&gt;./pthsock/pthsock_client.so&lt;/pthsock_client&gt;
</I>&gt;<i>    &lt;/load&gt;
</I>&gt;<i>    &lt;pthcsock xmlns='jabber:config:pth-csock'&gt;
</I>&gt;<i>      &lt;authtime/&gt;
</I>&gt;<i>      &lt;karma&gt;
</I>&gt;<i>        &lt;init&gt;10&lt;/init&gt;
</I>&gt;<i>        &lt;max&gt;10&lt;/max&gt;
</I>&gt;<i>        &lt;inc&gt;1&lt;/inc&gt;
</I>&gt;<i>        &lt;dec&gt;1&lt;/dec&gt;
</I>&gt;<i>        &lt;penalty&gt;-6&lt;/penalty&gt;
</I>&gt;<i>        &lt;restore&gt;10&lt;/restore&gt;
</I>&gt;<i>      &lt;/karma&gt;
</I>&gt;<i>      &lt;!--
</I>&gt;<i>      Use these to listen on particular addresses and/or ports.
</I>&gt;<i>      &lt;ip port=&quot;5222&quot;&gt;127.0.0.1&lt;/ip&gt;
</I>&gt;<i>      --&gt;
</I>&gt;<i>      &lt;ip port=&quot;5222&quot;/&gt;
</I>&gt;<i>      &lt;!--
</I>&gt;<i>      The &lt;ssl/&gt; tag acts just like the &lt;ip/&gt; tag.  Except SSL is used
</I>&gt;<i>      on the ports and ips specified.  You must specify an IP here, or the
</I>&gt;<i>      connections will fail.
</I>&gt;<i> 
</I>&gt;<i>      &lt;ssl port='5223'&gt;127.0.0.1&lt;/ip&gt;
</I>&gt;<i>      &lt;ssl port='5224'&gt;64.28.196.147&lt;/ip&gt;
</I>&gt;<i>      --&gt;
</I>&gt;<i>    &lt;/pthcsock&gt;
</I>&gt;<i>  &lt;/service&gt;
</I>&gt;<i>  &lt;!-- Commented by Amar
</I>&gt;<i>  &lt;service id=&quot;icq.phoenix&quot;&gt;
</I>&gt;<i>         &lt;icqtrans xmlns=&quot;jabber:config:icqtrans&quot;&gt;
</I>&gt;<i>         &lt;instructions&gt;Please enter your ICQ number (in the &quot;username&quot; 
</I>&gt;<i> field),
</I>&gt;<i>         nickname, and password. Leave the &quot;username&quot; field blank
</I>&gt;<i>         to create a new ICQ number.&lt;/instructions&gt;
</I>&gt;<i>         &lt;search&gt;Search for ICQ users&lt;/search&gt;
</I>&gt;<i>         &lt;vCard&gt;
</I>&gt;<i>         &lt;FN&gt;ICQ Transport&lt;/FN&gt;
</I>&gt;<i>         &lt;DESC&gt;This is the ICQ Transport&lt;/DESC&gt;
</I>&gt;<i>         &lt;URL&gt;<A HREF="http://tucson/&lt;/URL">http://tucson/&lt;/URL</A>&gt;
</I>&gt;<i>         &lt;/vCard&gt;
</I>&gt;<i>         &lt;prime&gt;37&lt;/prime&gt;
</I>&gt;<i>         &lt;ports&gt;
</I>&gt;<i>         &lt;min&gt;2000&lt;/min&gt;
</I>&gt;<i>         &lt;max&gt;3000&lt;/max&gt;
</I>&gt;<i>         &lt;/ports&gt;
</I>&gt;<i>         &lt;/icqtrans&gt;
</I>&gt;<i>         &lt;load&gt;
</I>&gt;<i>         &lt;icqtrans&gt;./icq-transport-0.9/icqtrans.so&lt;/icqtrans&gt;
</I>&gt;<i>         &lt;/load&gt;
</I>&gt;<i>   &lt;/service&gt;
</I>&gt;<i> 	--&gt;
</I>&gt;<i> 
</I>&gt;<i>   &lt;service id=&quot;yahoo.phoenix&quot;&gt;
</I>&gt;<i>         &lt;load&gt;
</I>&gt;<i>         
</I>&gt;<i> &lt;yahoo_transport&gt;./yahoo-transport-0.8-1.4/src/yahootrans.so&lt;/yahoo_transport&gt;
</I>&gt;<i>         &lt;/load&gt;
</I>&gt;<i>   &lt;/service&gt;
</I>&gt;<i> 
</I>&gt;<i> 	&lt;service id=&quot;msn.phoenix&quot;&gt;
</I>&gt;<i>         &lt;msntrans xmlns=&quot;jabber:config:msntrans&quot;&gt;
</I>&gt;<i>  &lt;instructions&gt;Enter your MSN Messenger account and password. Example: 
</I>&gt;<i> <A HREF="http://mail.jabber.org/mailman/listinfo/jdev">user1 at hotmail.com.</A> Nickname is
</I>&gt;<i>         optional.&lt;/instructions&gt;
</I>&gt;<i>         &lt;vCard&gt;
</I>&gt;<i>         &lt;FN&gt;MSN Transport&lt;/FN&gt;
</I>&gt;<i>         &lt;DESC&gt;This is the MSN Transport&lt;/DESC&gt;
</I>&gt;<i>         &lt;URL&gt;<A HREF="http://phoenix&lt;/URL">http://phoenix&lt;/URL</A>&gt;
</I>&gt;<i>         &lt;/vCard&gt;
</I>&gt;<i>         &lt;/msntrans&gt;
</I>&gt;<i>         &lt;load&gt;
</I>&gt;<i>         &lt;msntrans&gt;./msn-transport-1.1/msntrans.so&lt;/msntrans&gt;
</I>&gt;<i>         &lt;/load&gt;
</I>&gt;<i>         &lt;/service&gt;
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i>  &lt;!--
</I>&gt;<i>  This is the default server error logging component,
</I>&gt;<i>  which copies to a file and to STDERR.
</I>&gt;<i>  --&gt;
</I>&gt;<i> 
</I>&gt;<i>  &lt;log id='elogger'&gt;
</I>&gt;<i>    &lt;host/&gt;
</I>&gt;<i>    &lt;logtype/&gt;
</I>&gt;<i>    &lt;format&gt;%d: [%t] (%h): %s&lt;/format&gt;
</I>&gt;<i>    &lt;file&gt;error.log&lt;/file&gt;
</I>&gt;<i>    &lt;stderr/&gt;
</I>&gt;<i>  &lt;/log&gt;
</I>&gt;<i> 
</I>&gt;<i>  &lt;!--
</I>&gt;<i>  This is the default server record logging component,
</I>&gt;<i>  which logs general statistical/tracking data.
</I>&gt;<i>  --&gt;
</I>&gt;<i> 
</I>&gt;<i>  &lt;log id='rlogger'&gt;
</I>&gt;<i>    &lt;host/&gt;
</I>&gt;<i>    &lt;logtype&gt;record&lt;/logtype&gt;
</I>&gt;<i>    &lt;format&gt;%d %h %s&lt;/format&gt;
</I>&gt;<i>    &lt;file&gt;record.log&lt;/file&gt;
</I>&gt;<i>  &lt;/log&gt;
</I>&gt;<i> 
</I>&gt;<i>  &lt;!-- The following two services are for handling server-to-server traffic. 
</I>&gt;<i> --&gt;
</I>&gt;<i> 
</I>&gt;<i>  &lt;!-- External asychronous DNS resolver --&gt;
</I>&gt;<i> 
</I>&gt;<i>  &lt;service id=&quot;dnsrv&quot;&gt;
</I>&gt;<i>    &lt;host/&gt;
</I>&gt;<i>    &lt;load&gt;
</I>&gt;<i>      &lt;dnsrv&gt;./dnsrv/dnsrv.so&lt;/dnsrv&gt;
</I>&gt;<i>    &lt;/load&gt;
</I>&gt;<i>    &lt;dnsrv xmlns=&quot;jabber:config:dnsrv&quot;&gt;
</I>&gt;<i>    	&lt;resend service=&quot;_jabber._tcp&quot;&gt;s2s&lt;/resend&gt; &lt;!-- for supporting SRV 
</I>&gt;<i> records --&gt;
</I>&gt;<i>    	&lt;resend&gt;s2s&lt;/resend&gt;
</I>&gt;<i>    &lt;/dnsrv&gt;
</I>&gt;<i>  &lt;/service&gt;
</I>&gt;<i> 
</I>&gt;<i>  &lt;!--
</I>&gt;<i>  The following 's2s' config handles server connections and
</I>&gt;<i>  dialback hostname verification.  The &lt;legacy/&gt; element is
</I>&gt;<i>  here to enable communication with old 1.0 servers. The
</I>&gt;<i>  karma settings are a little higher here to handle the
</I>&gt;<i>  higher traffic of server-to-server connections (read
</I>&gt;<i>  the io section below for more details, medium settings).
</I>&gt;<i>  --&gt;
</I>&gt;<i> 
</I>&gt;<i>  &lt;service id=&quot;s2s&quot;&gt;
</I>&gt;<i>    &lt;load&gt;
</I>&gt;<i>      &lt;dialback&gt;./dialback/dialback.so&lt;/dialback&gt;
</I>&gt;<i>    &lt;/load&gt;
</I>&gt;<i>    &lt;dialback xmlns='jabber:config:dialback'&gt;
</I>&gt;<i>      &lt;legacy/&gt;
</I>&gt;<i>      &lt;!-- Use these to listen on particular addresses and/or ports.
</I>&gt;<i>      &lt;ip port=&quot;7000&quot;/&gt;
</I>&gt;<i>      &lt;ip port=&quot;5269&quot;&gt;127.0.0.1&lt;/ip&gt;
</I>&gt;<i>      --&gt;
</I>&gt;<i>      &lt;ip port=&quot;5269&quot;/&gt;
</I>&gt;<i>      &lt;karma&gt;
</I>&gt;<i>        &lt;init&gt;50&lt;/init&gt;
</I>&gt;<i>        &lt;max&gt;50&lt;/max&gt;
</I>&gt;<i>        &lt;inc&gt;4&lt;/inc&gt;
</I>&gt;<i>        &lt;dec&gt;1&lt;/dec&gt;
</I>&gt;<i>        &lt;penalty&gt;-5&lt;/penalty&gt;
</I>&gt;<i>        &lt;restore&gt;50&lt;/restore&gt;
</I>&gt;<i>      &lt;/karma&gt;
</I>&gt;<i>    &lt;/dialback&gt;
</I>&gt;<i>  &lt;/service&gt;
</I>&gt;<i> 
</I>&gt;<i>  &lt;!--
</I>&gt;<i>  If you identified additional agents in the main &lt;service/&gt;
</I>&gt;<i>  section (see examples above), you'll need to define each
</I>&gt;<i>  of them here using a separate &lt;service/&gt; section for each
</I>&gt;<i>  &lt;agent/&gt; you identified. Note that the &lt;agent/&gt; sections
</I>&gt;<i>  determine what gets shown to clients that connect to your
</I>&gt;<i>  server, whereas the following &lt;service/&gt; sections define
</I>&gt;<i>  these services within the server itself. The following are
</I>&gt;<i>  examples only, you will need to create/modify them to get
</I>&gt;<i>  them working on your Jabber server. See the README files
</I>&gt;<i>  for each agent and/or the server howto for further
</I>&gt;<i>  information/instructions.
</I>&gt;<i>  --&gt;
</I>&gt;<i> 
</I>&gt;<i>  &lt;!-- we're commenting these out, of course :)
</I>&gt;<i> 
</I>&gt;<i>  &lt;service id=&quot;conference&quot;&gt;
</I>&gt;<i>    &lt;load&gt;
</I>&gt;<i>      &lt;groupchat&gt;/path/to/groupchat.so&lt;/groupchat&gt;
</I>&gt;<i>    &lt;/load&gt;
</I>&gt;<i>    &lt;host&gt;conference.phoenix&lt;/host&gt;
</I>&gt;<i>  &lt;/service&gt;
</I>&gt;<i> 
</I>&gt;<i>  &lt;service id=&quot;irc&quot;&gt;
</I>&gt;<i>    &lt;host&gt;irc.phoenix&lt;/host&gt;
</I>&gt;<i>  &lt;/service&gt;
</I>&gt;<i> 
</I>&gt;<i>  &lt;service id=&quot;aim.phoenix&quot;&gt;
</I>&gt;<i>    &lt;accept&gt;
</I>&gt;<i>      &lt;ip/&gt;
</I>&gt;<i>      &lt;port&gt;7009&lt;/port&gt;
</I>&gt;<i>      &lt;secret&gt;jabber-rocks&lt;/secret&gt;
</I>&gt;<i>    &lt;/accept&gt;
</I>&gt;<i>  &lt;/service&gt;
</I>&gt;<i>  --&gt;
</I>&gt;<i>  &lt;service id=&quot;yahoo.phoenix&quot;&gt;
</I>&gt;<i>    &lt;accept&gt;
</I>&gt;<i>      &lt;ip/&gt;
</I>&gt;<i>      &lt;port&gt;9001&lt;/port&gt;
</I>&gt;<i>      &lt;secret&gt;jabber-rocks&lt;/secret&gt;
</I>&gt;<i>    &lt;/accept&gt;
</I>&gt;<i>  &lt;/service&gt;
</I>&gt;<i> 
</I>&gt;<i>  end of &lt;service/&gt; examples
</I>&gt;<i> 
</I>&gt;<i>  &lt;!--
</I>&gt;<i>  The following &lt;io/&gt; config initializes the top-level
</I>&gt;<i>  I/O, otherwise known as MIO (Managed Input/Output).
</I>&gt;<i>  --&gt;
</I>&gt;<i> 
</I>&gt;<i>  &lt;io&gt;
</I>&gt;<i> 
</I>&gt;<i>    &lt;!-- Set the default karma for *all* sockets --&gt;
</I>&gt;<i>    &lt;!-- definition of terms:
</I>&gt;<i>        Avg. Throughput:    The ammount of bytes you can send every second 
</I>&gt;<i> without incuring any penalty
</I>&gt;<i>        Burst allowed to:   The maximum you can send in 2 seconds without 
</I>&gt;<i> incuring any penalty
</I>&gt;<i>        max sustained rate: if you send data as fast as you can, you will 
</I>&gt;<i> hit penalty, and will not be able to send for 10 seconds,
</I>&gt;<i>                            this is the average rate you can dump data when 
</I>&gt;<i> you are dumping as much as you can, as fast as you can.
</I>&gt;<i>        seconds to recover from burst: The ammount of time it will take to 
</I>&gt;<i> reach Avg. Throughput capability, after sending max burst
</I>&gt;<i>                                       of data
</I>&gt;<i>        penalty length:     Penalty will last abs(penalty) * Heartbeat 
</I>&gt;<i> seconds  so a penalty of -5 and heartbeat of 2 will last 10 sec.
</I>&gt;<i>                            NOTE: penalty CANNOT be less than -100.. 
</I>&gt;<i> otherwise strange things might happen.
</I>&gt;<i>    --&gt;
</I>&gt;<i>    &lt;!-- Example of Low Karma Limits
</I>&gt;<i>        Avg. throughput:  1k-2k/s
</I>&gt;<i>        burst allowed to: 5.5k/s
</I>&gt;<i>        max sustained rate: 485b/s
</I>&gt;<i>        seconds to recover from burst: 20
</I>&gt;<i>        penalty length:   12 seconds
</I>&gt;<i>    &lt;karma&gt;
</I>&gt;<i>      &lt;heartbeat&gt;2&lt;/heartbeat&gt;
</I>&gt;<i>      &lt;init&gt;10&lt;/init&gt;
</I>&gt;<i>      &lt;max&gt;10&lt;/max&gt;
</I>&gt;<i>      &lt;inc&gt;1&lt;/inc&gt;
</I>&gt;<i>      &lt;dec&gt;1&lt;/dec&gt;
</I>&gt;<i>      &lt;penalty&gt;-6&lt;/penalty&gt;
</I>&gt;<i>      &lt;restore&gt;10&lt;/restore&gt;
</I>&gt;<i>    &lt;/karma&gt;
</I>&gt;<i>    --&gt;
</I>&gt;<i> 
</I>&gt;<i>    &lt;!-- Example of Medium Karma Limits
</I>&gt;<i>        Avg. throughput:  5k-10k/s
</I>&gt;<i>        burst allowed to: 125.5k/s
</I>&gt;<i>        max sustained rate: 12.6k/s
</I>&gt;<i>        seconds to recover from burst: 25
</I>&gt;<i>        penalty length:   10 seconds
</I>&gt;<i>    &lt;karma&gt;
</I>&gt;<i>      &lt;heartbeat&gt;2&lt;/heartbeat&gt;
</I>&gt;<i>      &lt;init&gt;50&lt;/init&gt;
</I>&gt;<i>      &lt;max&gt;50&lt;/max&gt;
</I>&gt;<i>      &lt;inc&gt;4&lt;/inc&gt;
</I>&gt;<i>      &lt;dec&gt;1&lt;/dec&gt;
</I>&gt;<i>      &lt;penalty&gt;-5&lt;/penalty&gt;
</I>&gt;<i>      &lt;restore&gt;50&lt;/restore&gt;
</I>&gt;<i>    &lt;/karma&gt;
</I>&gt;<i>    --&gt;
</I>&gt;<i> 
</I>&gt;<i>    &lt;!-- Example of High Karma Limits
</I>&gt;<i>        Avg. throughput:  5k-10k/s
</I>&gt;<i>        burst allowed to: 206k/s
</I>&gt;<i>        max Sustained rate: 34.3k/s
</I>&gt;<i>        seconds to recover from burst: 21
</I>&gt;<i>        penalty length:   6 seconds
</I>&gt;<i>    &lt;karma&gt;
</I>&gt;<i>      &lt;heartbeat&gt;2&lt;/heartbeat&gt;
</I>&gt;<i>      &lt;init&gt;64&lt;/init&gt;
</I>&gt;<i>      &lt;max&gt;64&lt;/max&gt;
</I>&gt;<i>      &lt;inc&gt;6&lt;/inc&gt;
</I>&gt;<i>      &lt;dec&gt;1&lt;/dec&gt;
</I>&gt;<i>      &lt;penalty&gt;-3&lt;/penalty&gt;
</I>&gt;<i>      &lt;restore&gt;64&lt;/restore&gt;
</I>&gt;<i>    &lt;/karma&gt;
</I>&gt;<i>    --&gt;
</I>&gt;<i> 
</I>&gt;<i>    &lt;!--
</I>&gt;<i>    Set rate limits to monitor the number of connection
</I>&gt;<i>    attempts from a single IP, any more than [points]
</I>&gt;<i>    within [time] will engage the limit.  This setting
</I>&gt;<i>    applies to all incoming connections to any service,
</I>&gt;<i>    unless otherwise overridden by that service.
</I>&gt;<i>    --&gt;
</I>&gt;<i> 
</I>&gt;<i>    &lt;rate points=&quot;5&quot; time=&quot;25&quot;/&gt;
</I>&gt;<i> 
</I>&gt;<i>    &lt;!--
</I>&gt;<i>    The following section initializes SSL for top-level I/O.
</I>&gt;<i>    This works only when the server is compiled with openssl!
</I>&gt;<i>    --&gt;
</I>&gt;<i>    &lt;!-- BE SURE TO CHANGE THE FOLLOWING (2) IP's IF USING SSL
</I>&gt;<i>    &lt;ssl&gt;
</I>&gt;<i>      &lt;key ip='192.168.1.1'&gt;/path/to/cert_and_key.pem&lt;/key&gt;
</I>&gt;<i>      &lt;key ip='192.168.1.100'&gt;/path/to/other/cert_and_key.pem&lt;/key&gt;
</I>&gt;<i>    &lt;/ssl&gt;
</I>&gt;<i>    --&gt;
</I>&gt;<i> 
</I>&gt;<i>    &lt;!--
</I>&gt;<i>    The following section is used to allow or deny
</I>&gt;<i>    communications from specified IP networks or
</I>&gt;<i>    addressses. If there is no &lt;allow/&gt; section,
</I>&gt;<i>    then *all* IPs will be allowed to connect. If
</I>&gt;<i>    you allow one block, then only that block may
</I>&gt;<i>    connect. Note that &lt;allow/&gt; is checked before
</I>&gt;<i>    &lt;deny/&gt;, so if a specific address is allowed
</I>&gt;<i>    but the network for that address is denied,
</I>&gt;<i>    then that address will still be denied.
</I>&gt;<i>    --&gt;
</I>&gt;<i>    &lt;!--
</I>&gt;<i>    &lt;allow&gt;&lt;ip&gt;127.0.0.0&lt;/ip&gt;&lt;mask&gt;255.255.255.0&lt;/mask&gt;&lt;/allow&gt;
</I>&gt;<i>    &lt;allow&gt;&lt;ip&gt;12.34.56.78&lt;/ip&gt;&lt;/allow&gt;
</I>&gt;<i>    &lt;deny&gt;&lt;ip&gt;22.11.44.0&lt;/ip&gt;&lt;mask&gt;255.255.255.0&lt;/mask&gt;&lt;/deny&gt;
</I>&gt;<i>    --&gt;
</I>&gt;<i> 
</I>&gt;<i>  &lt;/io&gt;
</I>&gt;<i> 
</I>&gt;<i>  &lt;!--
</I>&gt;<i>  This specifies the file to store the pid of the process in.
</I>&gt;<i>  --&gt;
</I>&gt;<i>  &lt;pidfile&gt;./jabber.pid&lt;/pidfile&gt;
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> &lt;/jabber&gt;
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> &gt;From: Peter Saint-Andre &lt;<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">stpeter at jabber.org</A>&gt;
</I>&gt;<i> &gt;To: <A HREF="http://mail.jabber.org/mailman/listinfo/jdev">jdev at jabber.org</A>
</I>&gt;<i> &gt;CC: <A HREF="http://mail.jabber.org/mailman/listinfo/jdev">amarny at hotmail.com</A>
</I>&gt;<i> &gt;Subject: Re: [JDEV] Jabber Server- 1.4  Crashes
</I>&gt;<i> &gt;Date: Wed, 5 Dec 2001 10:33:16 -0600 (CST)
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;&gt; Hi all, I have been running jabber server-1.4 on a Linux 7.0 for quite 
</I>&gt;<i> &gt;some
</I>&gt;<i> &gt;&gt; time now with a max of 10 users. The server even though works great 
</I>&gt;<i> &gt;crashes
</I>&gt;<i> &gt;&gt; very often. I am using a daemon tool to run the server continuouly but 
</I>&gt;<i> &gt;still
</I>&gt;<i> &gt;&gt; the users are not happy whenever the server dies and disconnects 
</I>&gt;<i> &gt;everybody.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;If you could provide some debug info that would be great. It is
</I>&gt;<i> &gt;definitely not normal for the server to crash very often and you may have
</I>&gt;<i> &gt;a configuration problem.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;&gt; Also interested in looking into server side code. I am not
</I>&gt;<i> &gt;&gt; an expert in c and have lot of code related questions. Is this the right
</I>&gt;<i> &gt;&gt; place for such questions ?
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;Yes.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;Peter
</I>&gt;<i> &gt;
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> _________________________________________________________________
</I>&gt;<i> Get your FREE download of MSN Explorer at <A HREF="http://explorer.msn.com/intl.asp">http://explorer.msn.com/intl.asp</A>
</I>&gt;<i> 
</I>&gt;<i> _______________________________________________
</I>&gt;<i> jdev mailing list
</I>&gt;<i> <A HREF="http://mail.jabber.org/mailman/listinfo/jdev">jdev at jabber.org</A>
</I>&gt;<i> <A HREF="http://mailman.jabber.org/listinfo/jdev">http://mailman.jabber.org/listinfo/jdev</A>
</I>
-- 
Thomas Muldowney
email/jabber: <A HREF="http://mail.jabber.org/mailman/listinfo/jdev">temas at jabber.org</A>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 232 bytes
Desc: not available
Url : <A HREF="http://mail.jabber.org/pipermail/jdev/attachments/20011205/ffcf3ce4/attachment.pgp">http://mail.jabber.org/pipermail/jdev/attachments/20011205/ffcf3ce4/attachment.pgp</A> 
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="010326.html">[JDEV] Jabber Server- 1.4 Crashes
</A></li>
	<LI>Next message: <A HREF="010328.html">[JDEV] Jabber Server- 1.4 Crashes
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10327">[ date ]</a>
              <a href="thread.html#10327">[ thread ]</a>
              <a href="subject.html#10327">[ subject ]</a>
              <a href="author.html#10327">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://mail.jabber.org/mailman/listinfo/jdev">More information about the JDev
mailing list</a><br>
</body></html>
