<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [jdev] yahoo transport issues
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:jdev%40jabber.org?Subject=%5Bjdev%5D%20yahoo%20transport%20issues&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="019259.html">
   <LINK REL="Next"  HREF="019261.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[jdev] yahoo transport issues</H1>
    <B>Nathan J. Mehl</B> 
    <A HREF="mailto:jdev%40jabber.org?Subject=%5Bjdev%5D%20yahoo%20transport%20issues&In-Reply-To="
       TITLE="[jdev] yahoo transport issues">memory-jabber at blank.org
       </A><BR>
    <I>Fri Apr 23 10:39:44 CDT 2004</I>
    <P><UL>
        <LI>Previous message: <A HREF="019259.html">[jdev] request for help
</A></li>
        <LI>Next message: <A HREF="019261.html">[jdev] yahoo transport issues
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19260">[ date ]</a>
              <a href="thread.html#19260">[ thread ]</a>
              <a href="subject.html#19260">[ subject ]</a>
              <a href="author.html#19260">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
(Re-posting this from jadmin, where it produced no useful
suggestions.)

I'm having some weird issues with the yahoo transport, version 2.3.1,
running inside jabberd 1.4.2.

I can successfully register with the gateway with my Y! id
(memoryphd), and logging into the gateway via exodus appears to be
susccessful:

----------------------------------------------------------------------------
Tue Apr 20 16:27:19 2004  mio.c:760 MIO read from socket 7: &lt;presence
	from='<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">nmehl at jabber.feedroom.com</A>/Exodus' to='yahoo.feedroom.com/registered'&gt;&lt;c
	node='<A HREF="http://exodus.jabberstudio.org/caps'">http://exodus.jabberstudio.org/caps'</A> ver='0.9.0.0'
	xmlns='<A HREF="http://jabber.org/protocol/caps'/">http://jabber.org/protocol/caps'/</A>&gt;&lt;status&gt;Away as a result of
	idle.&lt;/status&gt;&lt;show&gt;away&lt;/show&gt;&lt;priority&gt;0&lt;/priority&gt;&lt;/presence&gt;
Tue Apr 20 16:27:19 2004  base_connect.c:129 process XML: m:817A378 state:3,
	arg:80C44F8, x:816B2F0
Tue Apr 20 16:27:19 2004  deliver.c:474 DELIVER 1:yahoo.feedroom.com &lt;presence
	from='<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">nmehl at jabber.feedroom.com</A>/Exodus' to='yahoo.feedroom.com/registered'&gt;&lt;c
	node='<A HREF="http://exodus.jabberstudio.org/caps'">http://exodus.jabberstudio.org/caps'</A> ver='0.9.0.0'
	xmlns='<A HREF="http://jabber.org/protocol/caps'/">http://jabber.org/protocol/caps'/</A>&gt;&lt;status&gt;Away as a result of
	idle.&lt;/status&gt;&lt;show&gt;away&lt;/show&gt;&lt;priority&gt;0&lt;/priority&gt;&lt;/presence&gt;
Tue Apr 20 16:27:19 2004  deliver.c:678 delivering to instance
	'yahoo.feedroom.com'
Tue Apr 20 16:27:19 2004  mio.c:607 mio while loop top
Tue Apr 20 16:27:19 2004  mtq 80C46E0 entering from pth
Tue Apr 20 16:27:19 2004  mtq 80C46E0 one call 816BC68
Tue Apr 20 16:27:19 2004  yahoo-phandler.c:335 [YAHOO] Packet type=2 subtype=12
	iq=(null) iq_type=(null)
Tue Apr 20 16:27:19 2004  yahoo-phandler.c:336 [YAHOO] Packet to
	'yahoo.feedroom.com/registered'
Tue Apr 20 16:27:19 2004  yahoo-phandler.c:337 [YAHOO] Packet from
	'<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">nmehl at jabber.feedroom.com</A>/Exodus'
Tue Apr 20 16:27:19 2004  deliver.c:474 DELIVER 2:yahoo.feedroom.com &lt;xdb
	type='get' to='nmehl%<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">jabber.feedroom.com at yahoo.feedroom.com</A>'
	from='yahoo.feedroom.com' ns='yahootrans:data' id='1'/&gt;
Tue Apr 20 16:27:19 2004  deliver.c:678 delivering to instance 'yahoolinker'
Tue Apr 20 16:27:19 2004  mio.c:1054 mio_write called on x: 816C800 buffer:
	(null)
Tue Apr 20 16:27:19 2004  xdb.c:212 xdb_get() waiting for
	nmehl%<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">jabber.feedroom.com at yahoo.feedroom.com</A> yahootrans:data
Tue Apr 20 16:27:19 2004  mio.c:620 mio while loop, working
Tue Apr 20 16:27:19 2004  mio.c:279 write_dump writing data: &lt;xdb type='get'
	to='nmehl%<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">jabber.feedroom.com at yahoo.feedroom.com</A>' from='yahoo.feedroom.com'
	ns='yahootrans:data' id='1'/&gt;
Tue Apr 20 16:27:19 2004  mio.c:607 mio while loop top
Tue Apr 20 16:27:19 2004  mio.c:620 mio while loop, working
Tue Apr 20 16:27:19 2004  mio.c:760 MIO read from socket 7: &lt;xdb type='result'
	to='yahoo.feedroom.com' from='nmehl%<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">jabber.feedroom.com at yahoo.feedroom.com</A>'
	ns='yahootrans:data' id='1'&gt;&lt;query
	xmlns='yahootrans:data'&gt;&lt;username&gt;memoryphd&lt;/username&gt;
	&lt;password&gt;********&lt;/password&gt;
	&lt;key&gt;***************************************&lt;/key&gt;&lt;/query&gt;&lt;/xdb&gt;
Tue Apr 20 16:27:19 2004  base_connect.c:129 process XML: m:817A378 state:3,
	arg:80C44F8, x:816D0E8
Tue Apr 20 16:27:19 2004  deliver.c:474 DELIVER 1:yahoo.feedroom.com &lt;xdb
	type='result' to='yahoo.feedroom.com'
	from='nmehl%<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">jabber.feedroom.com at yahoo.feedroom.com</A>' ns='yahootrans:data'
	id='1'&gt;&lt;query
	xmlns='yahootrans:data'&gt;&lt;username&gt;memoryphd&lt;/username&gt;
	&lt;password&gt;********&lt;/password&gt;
	&lt;key&gt;***************************************&lt;/key&gt;&lt;/query&gt;&lt;/xdb&gt;
Tue Apr 20 16:27:19 2004  deliver.c:678 delivering to instance
	'yahoo.feedroom.com'
Tue Apr 20 16:27:19 2004  xdb.c:52 xdb_results checking xdb packet &lt;xdb
	type='result' to='yahoo.feedroom.com'
	from='nmehl%<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">jabber.feedroom.com at yahoo.feedroom.com</A>' ns='yahootrans:data'
	id='1'&gt;&lt;query
	xmlns='yahootrans:data'&gt;
	&lt;username&gt;memoryphd&lt;/username&gt;&lt;password&gt;********&lt;/password&gt;
	&lt;key&gt;***************************************&lt;/key&gt;&lt;/query&gt;&lt;/xdb&gt;
Tue Apr 20 16:27:19 2004  xdb.c:217 xdb_get() done waiting for
	nmehl%<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">jabber.feedroom.com at yahoo.feedroom.com</A> yahootrans:data
Tue Apr 20 16:27:19 2004  yahoo-session.c:67 [YAHOO]: New session for
	'<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">nmehl at jabber.feedroom.com</A>' from 'initial-check'
Tue Apr 20 16:27:19 2004  yahoo-session.c:76 [YAHOO]: New connection to
	'scs.yahoo.com:5050' for '<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">nmehl at jabber.feedroom.com</A>'
Tue Apr 20 16:27:19 2004  mio.c:527 calling the connect handler for mio object
	81702B0
Tue Apr 20 16:27:19 2004  mio.c:607 mio while loop top
Tue Apr 20 16:27:19 2004  yahoo.c:1339 [YAHOO]:
	'<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">nmehl at jabber.feedroom.com</A>/Exodus' connected to Yahoo! server. [memoryphd]
Tue Apr 20 16:27:19 2004  yahoo.c:327 [YAHOO]: Write Key: 1  	Value:
	memoryphd
Tue Apr 20 16:27:19 2004  yahoo.c:377 [YAHOO]: Writing 34 bytes to Yahoo!
	(fd=8) state=1
Tue Apr 20 16:27:19 2004  mio.c:1054 mio_write called on x: 0 buffer: YMSG
Tue Apr 20 16:27:19 2004  mio.c:620 mio while loop, working
Tue Apr 20 16:27:19 2004  mio.c:678 socket 8 has been intialized with starting
	karma 5 
Tue Apr 20 16:27:19 2004  mio.c:279 write_dump writing data: YMSG
Tue Apr 20 16:27:19 2004  mio.c:607 mio while loop top
Tue Apr 20 16:27:19 2004  mio.c:620 mio while loop, working
Tue Apr 20 16:27:19 2004  mio.c:760 MIO read from socket 8: YMSG
Tue Apr 20 16:27:19 2004  yahoo.c:1366 [YAHOO]: Read 116 [0] bytes (fd=8)  for
	'<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">nmehl at jabber.feedroom.com</A>/Exodus'
Tue Apr 20 16:27:19 2004  yahoo.c:1385 [YAHOO]: 96 bytes to read, rxlen is 116
Tue Apr 20 16:27:19 2004  yahoo.c:1396 [YAHOO]: Service: 0x57 Status: 1
Tue Apr 20 16:27:19 2004  yahoo.c:302 [YAHOO]: Read Key: 1  	Value:
	memoryphd
Tue Apr 20 16:27:19 2004  yahoo.c:302 [YAHOO]: Read Key: 94  	Value:
	r-(o^n|p)&amp;z%1&amp;b-v-j-1%x+z%l+z+v|(e&amp;8^y^l/5+t+8*l/d%(p|(j*4%l)/d&amp;g*5))
Tue Apr 20 16:27:19 2004  yahoo.c:302 [YAHOO]: Read Key: 13  	Value: 1
Tue Apr 20 16:27:19 2004  yahoo.c:1309 [YAHOO]: Process Auth
Tue Apr 20 16:27:21 2004  yahoo.c:327 [YAHOO]: Write Key: 0  	Value:
	memoryphd
Tue Apr 20 16:27:21 2004  yahoo.c:327 [YAHOO]: Write Key: 6  	Value:
	h=DE,R=0l,h=e1;E=al;E=iB;R=Ah,C=3D;h=c0;S=bE;T=Fl,
Tue Apr 20 16:27:21 2004  yahoo.c:327 [YAHOO]: Write Key: 96  	Value:
	w=mg,Q=mE;O=il,N=lB;D=nm,X=ok;E=2B;r=1l,W=9n;h=jg;
Tue Apr 20 16:27:21 2004  yahoo.c:327 [YAHOO]: Write Key: 1  	Value:
	memoryphd
Tue Apr 20 16:27:21 2004  yahoo.c:377 [YAHOO]: Writing 159 bytes to Yahoo!
	(fd=8) state=1
Tue Apr 20 16:27:21 2004  mio.c:1054 mio_write called on x: 0 buffer: YMSG
Tue Apr 20 16:27:21 2004  mio.c:607 mio while loop top
Tue Apr 20 16:27:21 2004  mio.c:620 mio while loop, working
Tue Apr 20 16:27:21 2004  mio.c:279 write_dump writing data: YMSG
Tue Apr 20 16:27:21 2004  mio.c:760 MIO read from socket 7: &lt;presence
	from='<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">nmehl at jabber.feedroom.com</A>/Exodus' to='yahoo.feedroom.com/registered'&gt;&lt;c
	node='<A HREF="http://exodus.jabberstudio.org/caps'">http://exodus.jabberstudio.org/caps'</A> ver='0.9.0.0'
	xmlns='<A HREF="http://jabber.org/protocol/caps'/">http://jabber.org/protocol/caps'/</A>&gt;
	&lt;status&gt;Available&lt;/status&gt;&lt;priority&gt;0&lt;/priority&gt;&lt;/presence&gt;
Tue Apr 20 16:27:21 2004  base_connect.c:129 process XML: m:817A378 state:3,
	arg:80C44F8, x:8171630
Tue Apr 20 16:27:21 2004  deliver.c:474 DELIVER 1:yahoo.feedroom.com &lt;presence
	from='<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">nmehl at jabber.feedroom.com</A>/Exodus' to='yahoo.feedroom.com/registered'&gt;&lt;c
	node='<A HREF="http://exodus.jabberstudio.org/caps'">http://exodus.jabberstudio.org/caps'</A> ver='0.9.0.0'
	xmlns='<A HREF="http://jabber.org/protocol/caps'/">http://jabber.org/protocol/caps'/</A>&gt;
	&lt;status&gt;Available&lt;/status&gt;&lt;priority&gt;0&lt;/priority&gt;&lt;/presence&gt;
Tue Apr 20 16:27:21 2004  deliver.c:678 delivering to instance
	'yahoo.feedroom.com'
----------------------------------------------------------------------------


...and the transport certainly appears to be talking to yahoo, because it 
tries to parse my buddylist:


----------------------------------------------------------------------------
Tue Apr 20 16:27:21 2004  yahoo-phandler.c:335 [YAHOO] Packet type=2 subtype=12
	iq=(null) iq_type=(null)
Tue Apr 20 16:27:21 2004  yahoo-phandler.c:336 [YAHOO] Packet to
	'yahoo.feedroom.com/registered'
Tue Apr 20 16:27:21 2004  yahoo-phandler.c:337 [YAHOO] Packet from
	'<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">nmehl at jabber.feedroom.com</A>/Exodus'
Tue Apr 20 16:27:21 2004  mio.c:620 mio while loop, working
Tue Apr 20 16:27:21 2004  mio.c:760 MIO read from socket 8: YMSG
Tue Apr 20 16:27:21 2004  yahoo.c:1366 [YAHOO]: Read 500 [0] bytes (fd=8)  for
	'<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">nmehl at jabber.feedroom.com</A>/Exodus'
Tue Apr 20 16:27:21 2004  yahoo.c:1385 [YAHOO]: 834 bytes to read, rxlen is 500
Tue Apr 20 16:27:21 2004  mio.c:607 mio while loop top
Tue Apr 20 16:27:21 2004  mio.c:620 mio while loop, working
Tue Apr 20 16:27:21 2004  mio.c:760 MIO read from socket 8: ;
	domain=.yahoo.com&#192;&#128;59&#192;&#128;T
	z=NlYhABNrthAB2dlLbR69S28&amp;a=QAE&amp;sk=DAA98ycFRnRKvs&amp;d=YQFRQUUBdGlwAVJ2UURTQgF6egFObFloQUJnV0E-;
	expires=Thu, 15 Apr 2010 20:00:00 GMT; path=/; domain=.yahoo.com&#192;&#128;59&#192;&#128;C
	mg=1&#192;&#128;153&#192;&#128;1&#192;&#128;90&#192;&#128;0&#192;&#128;3&#192;&#128;memoryphd&#192;&#128;100&#192;&#128;0&#192;&#128;101&#192;&#128;&#192;&#128;102&#192;&#128;&#192;&#128;93&#192;&#128;86400&#192;&#128;149&#192;&#128;8f9D7nsFJLS2eqYsD1L.Pg--&#192;&#128;150&#192;&#128;AYydxt1zj1n1jhOQ_4zwrA--&#192;&#128;151&#192;&#128;_nkfgTAS3KcU69zKcqWOhA--&#192;&#128;

Tue Apr 20 16:27:21 2004  yahoo.c:1366 [YAHOO]: Read 354 [500] bytes (fd=8)
	for '<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">nmehl at jabber.feedroom.com</A>/Exodus'
Tue Apr 20 16:27:21 2004  yahoo.c:1385 [YAHOO]: 834 bytes to read, rxlen is 854
Tue Apr 20 16:27:21 2004  yahoo.c:1396 [YAHOO]: Service: 0x55 Status: 0
Tue Apr 20 16:27:21 2004  yahoo.c:302 [YAHOO]: Read Key: 87  	Value:
	Buddies:bendigegin,cecil_b_demental,dnwamadi,ihaveaboyfriend25,iwqs2000,ltgeller,nadian_blackstorm,not_a_nicegirl
	Friends:deirdre_cusack,doktor_memory,nathan_j_mehl
	jabber_yt:angellama2001,bouncing_soul_xxx,deirdre_cusack,doktor_memory,edyavno,kamela24,mabs_,mikey_kearns,nathan_j_mehl,peleron_2000,redragona,seattlgrrl,thagireb
----------------------------------------------------------------------------


...and yet, from the perspective of anyone actually using the real Yahoo
Messenger client, 'memoryphd' does not appear to be logged in, and I cannot
see any of my yahoo contacts as being logged in.

The behavior does not change if I change the Y! login host from scs.yahoo.com
to scs.msg.yahoo.com or vice versa.

Deleting my xdb spool file and re-registering with the transport does
not change the behavior.

Any insight that anyone could offer would be well appreciated.  The full
transport log is available (slightly redacted) at 
<A HREF="http://blank.org/memory/work/yahoot.txt.">http://blank.org/memory/work/yahoot.txt.</A>

-n

------------------------------------------------------------&lt;<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">memory at blank.org</A>&gt;
SENDING JUNK EMAIL TO MY ADDRESS CONSTITUTES YOUR LEGALLY-BINDING ACCEPTANCE 
OF MY OFFER TO REMOVE BOTH OF YOUR NIPPLES WITH AN ORBITAL SANDER.
                                                              (--Andy Ihnatko)
&lt;<A HREF="http://blank.org/memory/">http://blank.org/memory/</A>&gt;----------------------------------------------------

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="019259.html">[jdev] request for help
</A></li>
	<LI>Next message: <A HREF="019261.html">[jdev] yahoo transport issues
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19260">[ date ]</a>
              <a href="thread.html#19260">[ thread ]</a>
              <a href="subject.html#19260">[ subject ]</a>
              <a href="author.html#19260">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://mail.jabber.org/mailman/listinfo/jdev">More information about the JDev
mailing list</a><br>
</body></html>
