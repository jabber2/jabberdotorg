<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [jdev] Re: patch for mu-conference. arguments for log_* functions
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:jdev%40jabber.org?Subject=Re%3A%20%5Bjdev%5D%20Re%3A%20patch%20for%20mu-conference.%20arguments%20for%20log_%2A%20functions&In-Reply-To=%3C200501110152.28527.justin-keyword-jabber.093179%40affinix.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="050224.html">
   <LINK REL="Next"  HREF="050226.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[jdev] Re: patch for mu-conference. arguments for log_* functions</H1>
    <B>Justin Karneges</B> 
    <A HREF="mailto:jdev%40jabber.org?Subject=Re%3A%20%5Bjdev%5D%20Re%3A%20patch%20for%20mu-conference.%20arguments%20for%20log_%2A%20functions&In-Reply-To=%3C200501110152.28527.justin-keyword-jabber.093179%40affinix.com%3E"
       TITLE="[jdev] Re: patch for mu-conference. arguments for log_* functions">justin-keyword-jabber.093179 at affinix.com
       </A><BR>
    <I>Tue Jan 11 00:52:28 CST 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="050224.html">[jdev] Re: patch for mu-conference. arguments for log_* functions
</A></li>
        <LI>Next message: <A HREF="050226.html">[jdev] Re: patch for mu-conference. arguments for log_* functions
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#50225">[ date ]</a>
              <a href="thread.html#50225">[ thread ]</a>
              <a href="subject.html#50225">[ subject ]</a>
              <a href="author.html#50225">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Have you tried writing to the author?  Surely there is contact information on 
jabberstudio or in the mu-conference package.

This list is for general Jabber development.  It is the place to be if you 
have a question about getting started, or want to discuss development ideas.  
Posting patches for random software here won't be very beneficial.  Seek out 
the author of that software instead.

-Justin

On Tuesday 11 January 2005 03:21 am, Ilja Booij wrote:
&gt;<i> Hi all,
</I>&gt;<i>
</I>&gt;<i> Is there anybody actually maintaining mu-conference? The project page
</I>&gt;<i> on jabberstudio has not been updated since last summer, and there's
</I>&gt;<i> not only my patch, but also the mforssen patch, which IMHO are
</I>&gt;<i> important bugfixes and should be applied.
</I>&gt;<i>
</I>&gt;<i> cheers,
</I>&gt;<i> Ilja
</I>&gt;<i>
</I>&gt;<i> On Thu, 6 Jan 2005 16:06:56 +0100, Ilja Booij &lt;<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">ibooij at gmail.com</A>&gt; wrote:
</I>&gt;<i> &gt; Hi list,
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; while trying to hunt down bugs that caused our mu-conference server to
</I>&gt;<i> &gt; fall over, I've found the following: quite some calls to the log
</I>&gt;<i> &gt; functions (log_debug, log_warn etc) have wrong arguments, or a wrong
</I>&gt;<i> &gt; number of arguments. I've found this by using gcc's __attribute__
</I>&gt;<i> &gt; macro.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; patch is below
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; cheers,
</I>&gt;<i> &gt; Ilja
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; diff -Naur mu-conference-0.6.0.orig/src/admin.c
</I>&gt;<i> &gt; mu-conference-0.6.0/src/admin.c --- mu-conference-0.6.0.orig/src/admin.c 
</I>&gt;<i> &gt;       2003-11-15 05:19:44.000000000 +0100 +++
</I>&gt;<i> &gt; mu-conference-0.6.0/src/admin.c     2005-01-06 15:21:49.000000000 +0100
</I>&gt;<i> &gt; @@ -34,7 +34,7 @@
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;      if(result == NULL)
</I>&gt;<i> &gt;      {
</I>&gt;<i> &gt; -        log_warn(NAME, &quot;[%s] Aborting: NULL result - &lt;%s&gt;&quot;, FZONE, key);
</I>&gt;<i> &gt; +        log_warn(NAME, &quot;[%s] Aborting: NULL result - &lt;%s&gt;&quot;, FZONE,
</I>&gt;<i> &gt; (char*) key);
</I>&gt;<i> &gt;          return;
</I>&gt;<i> &gt;      }
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; @@ -42,7 +42,7 @@
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;      if(room == NULL)
</I>&gt;<i> &gt;      {
</I>&gt;<i> &gt; -        log_warn(NAME, &quot;[%s] Aborting: NULL room - &lt;%s&gt;&quot;, FZONE, key);
</I>&gt;<i> &gt; +      log_warn(NAME, &quot;[%s] Aborting: NULL room - &lt;%s&gt;&quot;, FZONE, (char*)
</I>&gt;<i> &gt; key); return;
</I>&gt;<i> &gt;      }
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; @@ -78,7 +78,7 @@
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;      if(result == NULL || item == NULL)
</I>&gt;<i> &gt;      {
</I>&gt;<i> &gt; -        log_warn(NAME, &quot;[%s] Aborting: NULL attribute(s) - &lt;%s&gt;&quot;, FZONE,
</I>&gt;<i> &gt; key); +        log_warn(NAME, &quot;[%s] Aborting: NULL attribute(s) - &lt;%s&gt;&quot;,
</I>&gt;<i> &gt; FZONE, (char *) key);
</I>&gt;<i> &gt;          return;
</I>&gt;<i> &gt;      }
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; diff -Naur mu-conference-0.6.0.orig/src/conference.c
</I>&gt;<i> &gt; mu-conference-0.6.0/src/conference.c
</I>&gt;<i> &gt; --- mu-conference-0.6.0.orig/src/conference.c   2003-11-15
</I>&gt;<i> &gt; 05:19:44.000000000 +0100
</I>&gt;<i> &gt; +++ mu-conference-0.6.0/src/conference.c        2005-01-06
</I>&gt;<i> &gt; 15:49:38.000000000 +0100 @@ -31,7 +31,7 @@
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;      if(room == NULL)
</I>&gt;<i> &gt;      {
</I>&gt;<i> &gt; -        log_warn(NAME, &quot;[%s] Aborting: NULL room %s&quot;, FZONE, key);
</I>&gt;<i> &gt; +        log_warn(NAME, &quot;[%s] Aborting: NULL room %s&quot;, FZONE, (char *)
</I>&gt;<i> &gt; key); return;
</I>&gt;<i> &gt;      }
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; @@ -69,7 +69,7 @@
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;      if(room == NULL)
</I>&gt;<i> &gt;      {
</I>&gt;<i> &gt; -        log_warn(NAME, &quot;[%s] Aborting: NULL room %s&quot;, FZONE, key);
</I>&gt;<i> &gt; +        log_warn(NAME, &quot;[%s] Aborting: NULL room %s&quot;, FZONE, (char *)
</I>&gt;<i> &gt; key); return;
</I>&gt;<i> &gt;      }
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; @@ -862,7 +862,7 @@
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;      if(room == NULL)
</I>&gt;<i> &gt;      {
</I>&gt;<i> &gt; -        log_warn(NAME, &quot;[%s] SHUTDOWN: Aborting attempt to clear %s&quot;,
</I>&gt;<i> &gt; FZONE, key);
</I>&gt;<i> &gt; +        log_warn(NAME, &quot;[%s] SHUTDOWN: Aborting attempt to clear %s&quot;,
</I>&gt;<i> &gt; FZONE, (char *) key);
</I>&gt;<i> &gt;         return;
</I>&gt;<i> &gt;      }
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; @@ -914,7 +914,7 @@
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;      if(user == NULL)
</I>&gt;<i> &gt;      {
</I>&gt;<i> &gt; -        log_warn(NAME, &quot;[%s] Aborting : NULL cnu for %s&quot;, FZONE, key);
</I>&gt;<i> &gt; +        log_warn(NAME, &quot;[%s] Aborting : NULL cnu for %s&quot;, FZONE, (char
</I>&gt;<i> &gt; *) key); return;
</I>&gt;<i> &gt;      }
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; @@ -934,11 +934,11 @@
</I>&gt;<i> &gt;      xmlnode node;
</I>&gt;<i> &gt;      char *user_name;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; -    log_debug(NAME, &quot;[%s] HBTICK: Idle check for &gt;%s&lt;&quot;, FZONE, key);
</I>&gt;<i> &gt; +    log_debug(NAME, &quot;[%s] HBTICK: Idle check for &gt;%s&lt;&quot;, FZONE, (char*)
</I>&gt;<i> &gt; key);
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;      if(room == NULL)
</I>&gt;<i> &gt;      {
</I>&gt;<i> &gt; -        log_warn(NAME, &quot;[%s] Aborting : NULL cnr for %s&quot;, FZONE, key);
</I>&gt;<i> &gt; +        log_warn(NAME, &quot;[%s] Aborting : NULL cnr for %s&quot;, FZONE, (char*)
</I>&gt;<i> &gt; key); return;
</I>&gt;<i> &gt;      }
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; @@ -961,7 +961,7 @@
</I>&gt;<i> &gt;      /* Destroy timed-out dynamic room */
</I>&gt;<i> &gt;      if(room-&gt;persistent == 0 &amp;&amp; room-&gt;count == 0 &amp;&amp; (now - room-&gt;last) &gt;
</I>&gt;<i> &gt; 240) {
</I>&gt;<i> &gt; -        log_debug(NAME, &quot;[%s] HBTICK: Locking room and adding %s to
</I>&gt;<i> &gt; remove queue&quot;, FZONE, key, now);
</I>&gt;<i> &gt; +        log_debug(NAME, &quot;[%s] HBTICK: Locking room and adding %s to
</I>&gt;<i> &gt; remove queue&quot;, FZONE, (char*) key);
</I>&gt;<i> &gt;          room-&gt;locked = 1;
</I>&gt;<i> &gt;          g_queue_push_tail(room-&gt;master-&gt;queue,
</I>&gt;<i> &gt; g_strdup(jid_full(room-&gt;id))); }
</I>&gt;<i> &gt; @@ -974,7 +974,7 @@
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;      if(room == NULL)
</I>&gt;<i> &gt;      {
</I>&gt;<i> &gt; -        log_warn(NAME, &quot;[%s] Aborting : NULL cnr for %s&quot;, FZONE, key);
</I>&gt;<i> &gt; +        log_warn(NAME, &quot;[%s] Aborting : NULL cnr for %s&quot;, FZONE, (char*)
</I>&gt;<i> &gt; key); return;
</I>&gt;<i> &gt;      }
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; @@ -995,7 +995,7 @@
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;      if(room == NULL)
</I>&gt;<i> &gt;      {
</I>&gt;<i> &gt; -        log_warn(NAME, &quot;[%s] Aborting : NULL cnr for %s&quot;, FZONE, key);
</I>&gt;<i> &gt; +        log_warn(NAME, &quot;[%s] Aborting : NULL cnr for %s&quot;, FZONE, (char*)
</I>&gt;<i> &gt; key); return;
</I>&gt;<i> &gt;      }
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; diff -Naur mu-conference-0.6.0.orig/src/conference_room.c
</I>&gt;<i> &gt; mu-conference-0.6.0/src/conference_room.c
</I>&gt;<i> &gt; --- mu-conference-0.6.0.orig/src/conference_room.c      2003-11-15
</I>&gt;<i> &gt; 05:19:45.000000000 +0100
</I>&gt;<i> &gt; +++ mu-conference-0.6.0/src/conference_room.c   2005-01-06
</I>&gt;<i> &gt; 15:43:49.000000000 +0100
</I>&gt;<i> &gt; @@ -35,7 +35,7 @@
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;      if(message == NULL || room == NULL)
</I>&gt;<i> &gt;      {
</I>&gt;<i> &gt; -       log_warn(NAME, &quot;[%s] ERR: Aborting - NULL reference found -
</I>&gt;<i> &gt; [%s][%s]&quot;, FZONE, message, room);
</I>&gt;<i> &gt; +       log_warn(NAME, &quot;[%s] ERR: Aborting - NULL reference found - &quot;,
</I>&gt;<i> &gt; FZONE); return;
</I>&gt;<i> &gt;      }
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; @@ -562,7 +562,7 @@
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;      if(room == NULL)
</I>&gt;<i> &gt;      {
</I>&gt;<i> &gt; -       log_warn(NAME, &quot;[%s] Aborting - NULL attribute found -%s- -%s-&quot;,
</I>&gt;<i> &gt; FZONE, room); +       log_warn(NAME, &quot;[%s] Aborting - NULL attribute
</I>&gt;<i> &gt; found&quot;, FZONE); return;
</I>&gt;<i> &gt;      }
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; diff -Naur mu-conference-0.6.0.orig/src/conference_user.c
</I>&gt;<i> &gt; mu-conference-0.6.0/src/conference_user.c
</I>&gt;<i> &gt; --- mu-conference-0.6.0.orig/src/conference_user.c      2003-11-15
</I>&gt;<i> &gt; 05:19:45.000000000 +0100
</I>&gt;<i> &gt; +++ mu-conference-0.6.0/src/conference_user.c   2005-01-06
</I>&gt;<i> &gt; 15:42:34.000000000 +0100
</I>&gt;<i> &gt; @@ -458,7 +458,7 @@
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;      if(user == NULL || data == NULL)
</I>&gt;<i> &gt;      {
</I>&gt;<i> &gt; -        log_warn(NAME, &quot;Aborting: NULL attribute found&quot;, FZONE);
</I>&gt;<i> &gt; +        log_warn(NAME, &quot;[%s]: Aborting: NULL attribute found&quot;, FZONE);
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;         if(data != NULL)
</I>&gt;<i> &gt;              xmlnode_free(data);
</I>&gt;<i> &gt; diff -Naur mu-conference-0.6.0.orig/src/hash.c
</I>&gt;<i> &gt; mu-conference-0.6.0/src/hash.c --- mu-conference-0.6.0.orig/src/hash.c
</I>&gt;<i> &gt; 2003-11-15 05:19:45.000000000 +0100 +++ mu-conference-0.6.0/src/hash.c   
</I>&gt;<i> &gt;   2005-01-06 15:06:11.000000000 +0100 @@ -22,7 +22,7 @@
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;  gboolean remove_key(gpointer key, gpointer data, gpointer arg)
</I>&gt;<i> &gt;  {
</I>&gt;<i> &gt; -   log_debug(NAME, &quot;[%s] Auto-removing key %s&quot;, FZONE, key);
</I>&gt;<i> &gt; +   log_debug(NAME, &quot;[%s] Auto-removing key %s&quot;, FZONE, (char*) key);
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;     free(key);
</I>&gt;<i> &gt;     free(data);
</I>&gt;<i> &gt; @@ -31,7 +31,7 @@
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;  void ght_remove_key(gpointer data)
</I>&gt;<i> &gt;  {
</I>&gt;<i> &gt; -   log_debug(NAME, &quot;[%s] Auto-removing key %s&quot;, FZONE, data);
</I>&gt;<i> &gt; +   log_debug(NAME, &quot;[%s] Auto-removing key %s&quot;, FZONE, (char*) data);
</I>&gt;<i> &gt;     free(data);
</I>&gt;<i> &gt;  }
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; diff -Naur mu-conference-0.6.0.orig/src/xdb.c
</I>&gt;<i> &gt; mu-conference-0.6.0/src/xdb.c --- mu-conference-0.6.0.orig/src/xdb.c 
</I>&gt;<i> &gt; 2003-11-15 05:19:46.000000000 +0100 +++ mu-conference-0.6.0/src/xdb.c    
</I>&gt;<i> &gt;   2005-01-06 15:07:18.000000000 +0100 @@ -462,13 +462,13 @@
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;         if(item)
</I>&gt;<i> &gt;         {
</I>&gt;<i> &gt; -            log_debug(NAME, &quot;[%s] Found (%s) in rooms.xml -
</I>&gt;<i> &gt; removing&quot;, FZONE, jid_full(room-&gt;id), jid_full(jid_fix(store)));
</I>&gt;<i> &gt; +            log_debug(NAME, &quot;[%s] Found (%s) in rooms.xml - removing,
</I>&gt;<i> &gt; %s&quot;, FZONE, jid_full(room-&gt;id), jid_full(jid_fix(store)));
</I>&gt;<i> &gt;             xmlnode_hide(item);
</I>&gt;<i> &gt;             xdb_set(master-&gt;xdbc, fulljid, &quot;muc:room:list&quot;, node);
</I>&gt;<i> &gt;         }
</I>&gt;<i> &gt;         else
</I>&gt;<i> &gt;         {
</I>&gt;<i> &gt; -            log_debug(NAME, &quot;[%s] (%s) not found in rooms.xml -
</I>&gt;<i> &gt; ignoring&quot;, FZONE, jid_full(room-&gt;id), jid_full(jid_fix(store)));
</I>&gt;<i> &gt; +            log_debug(NAME, &quot;[%s] (%s) not found in rooms.xml -
</I>&gt;<i> &gt; ignoring, %s&quot;, FZONE, jid_full(room-&gt;id), jid_full(jid_fix(store)));
</I>&gt;<i> &gt;         }
</I>&gt;<i> &gt;      }
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> jdev mailing list
</I>&gt;<i> <A HREF="http://mail.jabber.org/mailman/listinfo/jdev">jdev at jabber.org</A>
</I>&gt;<i> <A HREF="http://mail.jabber.org/mailman/listinfo/jdev">http://mail.jabber.org/mailman/listinfo/jdev</A>
</I>
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="050224.html">[jdev] Re: patch for mu-conference. arguments for log_* functions
</A></li>
	<LI>Next message: <A HREF="050226.html">[jdev] Re: patch for mu-conference. arguments for log_* functions
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#50225">[ date ]</a>
              <a href="thread.html#50225">[ thread ]</a>
              <a href="subject.html#50225">[ subject ]</a>
              <a href="author.html#50225">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://mail.jabber.org/mailman/listinfo/jdev">More information about the JDev
mailing list</a><br>
</body></html>
