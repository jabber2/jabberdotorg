<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [jdev] Re: [jadmin] Re: One million concurrent user
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:jdev%40jabber.org?Subject=Re%3A%20%5Bjdev%5D%20Re%3A%20%5Bjadmin%5D%20Re%3A%20One%20million%20concurrent%20user&In-Reply-To=%3C41FDBFE4.6030900%40rejon.org%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="079582.html">
   <LINK REL="Next"  HREF="079590.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[jdev] Re: [jadmin] Re: One million concurrent user</H1>
    <B>Jon Phillips</B> 
    <A HREF="mailto:jdev%40jabber.org?Subject=Re%3A%20%5Bjdev%5D%20Re%3A%20%5Bjadmin%5D%20Re%3A%20One%20million%20concurrent%20user&In-Reply-To=%3C41FDBFE4.6030900%40rejon.org%3E"
       TITLE="[jdev] Re: [jadmin] Re: One million concurrent user">jon at rejon.org
       </A><BR>
    <I>Sun Jan 30 23:19:32 CST 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="079582.html">[jdev] Re: [jadmin] Re: One million concurrent user
</A></li>
        <LI>Next message: <A HREF="079590.html">[jdev] Re: [jadmin] Re: One million concurrent user
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#79585">[ date ]</a>
              <a href="thread.html#79585">[ thread ]</a>
              <a href="subject.html#79585">[ subject ]</a>
              <a href="author.html#79585">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Richard Dobson wrote:
&gt;&gt;<i> Were I designing it, I'd have a login server, which validates you and
</I>&gt;&gt;<i> then hands you a new place to connect to, for your actual sustained
</I>&gt;&gt;<i> connection.  All data is shared between the servers (or rather,
</I>&gt;&gt;<i> replicated between them; SQL is your friiiiiend), and you just get
</I>&gt;&gt;<i> handed off to whatever actual messaging server has the least load at
</I>&gt;&gt;<i> the time you connect.
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> Yup although for a truely scalable solution you wouldnt want to rely on 
</I>&gt;<i> a single sql server, you would want the servers to replicate the routing 
</I>&gt;<i> data themselves and store that data in memory for maximum speed and to 
</I>&gt;<i> help keep the load of your sql servers.
</I>
So you are saying have a server that routes individual IM connections to other 
jabber servers and store the route info in the sql db. Then, how to make the sql 
servers redundant? I don't have tons of experience in this area, but am willing 
to work towards it and/or provide code to solve scalability issues if we can 
lead towards some needed improvements.

&gt;&gt;<i> In theory, this would allow for a lot of scalability; getting loaded
</I>&gt;&gt;<i> down, just add another server into the cluster and voila, it
</I>&gt;&gt;<i> automatically starts sharing the load.
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> Yup exactly.
</I>&gt;<i> 
</I>&gt;&gt;<i> Of course, that's harder to do under XMPP since I don't believe we have
</I>&gt;&gt;<i> any proposed extensions to validate login via one server and connect on
</I>&gt;&gt;<i> another, much less split incoming messages out across different actual
</I>&gt;&gt;<i> servers in a cluster.
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> There isnt a token style login mechanism that you describe but 
</I>&gt;<i> connections can be redirected to another server, i.e. redirect 
</I>&gt;<i> connections to a server under lower load. Also there is nothing in the 
</I>&gt;<i> protocol that causes problems with splitting incoming messages out over 
</I>&gt;<i> multiple servers in a cluster, and it doesnt need any specific protocol 
</I>&gt;<i> to be developed for it to work, its simply a server design and 
</I>&gt;<i> architecture issue.
</I>&gt;<i> 
</I>
That is one of the options I am considering is to have a main jabber login 
server that then keeps track of the load of the other jabber servers and then 
routes connections to the other jabber servers and records which current jabber 
server a user is on in mysql.

Thus, could have jabber01.blah.com, jabber02.blah.com and just record that in 
the mysql db as the current server route...but wait, that would mess up the 
rosters...ugh...still thinking about solutions.

As I said before, this company I'm doing this work for is in support of me 
adding code to open source solutions to contribute back to the community, so I 
hope that that can be the best solution.

Jon

&gt;<i> 
</I>&gt;<i> _______________________________________________
</I>&gt;<i> jdev mailing list
</I>&gt;<i> <A HREF="http://mail.jabber.org/mailman/listinfo/jdev">jdev at jabber.org</A>
</I>&gt;<i> <A HREF="http://mail.jabber.org/mailman/listinfo/jdev">http://mail.jabber.org/mailman/listinfo/jdev</A>
</I>&gt;<i> 
</I>&gt;<i> 
</I>

-- 
Jon Phillips

USA PH 510.499.0894
<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">jon at rejon.org</A>
<A HREF="http://www.rejon.org">http://www.rejon.org</A>

Inkscape (<A HREF="http://inkscape.org">http://inkscape.org</A>)
Open Clip Art Library (www.openclipart.org)
CVS Book (<A HREF="http://cvsbook.ucsd.edu">http://cvsbook.ucsd.edu</A>)
Scale Journal (<A HREF="http://scale.ucsd.edu">http://scale.ucsd.edu</A>)	

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="079582.html">[jdev] Re: [jadmin] Re: One million concurrent user
</A></li>
	<LI>Next message: <A HREF="079590.html">[jdev] Re: [jadmin] Re: One million concurrent user
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#79585">[ date ]</a>
              <a href="thread.html#79585">[ thread ]</a>
              <a href="subject.html#79585">[ subject ]</a>
              <a href="author.html#79585">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://mail.jabber.org/mailman/listinfo/jdev">More information about the JDev
mailing list</a><br>
</body></html>
