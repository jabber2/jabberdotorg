<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [JDEV] icqv7 core dumps on external part ?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:jdev%40jabber.org?Subject=%5BJDEV%5D%20icqv7%20core%20dumps%20on%20external%20part%20%3F&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="011913.html">
   <LINK REL="Next"  HREF="011915.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[JDEV] icqv7 core dumps on external part ?</H1>
    <B>Wim Godden</B> 
    <A HREF="mailto:jdev%40jabber.org?Subject=%5BJDEV%5D%20icqv7%20core%20dumps%20on%20external%20part%20%3F&In-Reply-To="
       TITLE="[JDEV] icqv7 core dumps on external part ?">wim at godden.net
       </A><BR>
    <I>Thu Mar 28 12:50:59 CST 2002</I>
    <P><UL>
        <LI>Previous message: <A HREF="011913.html">[JDEV] icqv7 core dumps on external part ?
</A></li>
        <LI>Next message: <A HREF="011915.html">[JDEV] icqv7 core dumps on external part ?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11914">[ date ]</a>
              <a href="thread.html#11914">[ thread ]</a>
              <a href="subject.html#11914">[ subject ]</a>
              <a href="author.html#11914">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Sadly, I'm already using 3.0.4... I had to upgrade to 3.0.4 because my
previous gcc wouldn't work...

So I guess I'm stuck ?


David Waite wrote:

&gt;<i> Without looking at the code, I can say there is a 99% chance this
</I>&gt;<i> means that there has been memory corruption. Several things could have
</I>&gt;<i> caused this corruption (array write out of bounds, double free, etc.)
</I>&gt;<i> There is a good chance it could be gcc 3.0.1 - there are a ton of
</I>&gt;<i> changes which happened to their C++ implementation between 2.95.3 and
</I>&gt;<i> 3.0.x. There have also been a lot of improvements since 3.0, so if you
</I>&gt;<i> can upgrade to 3.0.4, I would recommend it. The STL implementation
</I>&gt;<i> within versions of gcc before 3.0.x were thread-unsafe, especially for
</I>&gt;<i> std:string (they were interally reference-counted, but the reference
</I>&gt;<i> modification was not atomic, nor was the reference comparison)
</I>&gt;<i>
</I>&gt;<i> -David Waite
</I>&gt;<i>
</I>&gt;<i> Wim Godden wrote:
</I>&gt;<i>
</I>&gt;&gt;<i> This is the result :
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Core was generated by `icqv7ext'.
</I>&gt;&gt;<i> Program terminated with signal 11, Segmentation fault.
</I>&gt;&gt;<i> Reading symbols from /usr/local/lib/libsigc-1.0.so.0...done.
</I>&gt;&gt;<i> Reading symbols from /lib/libpthread.so.0...done.
</I>&gt;&gt;<i> Reading symbols from /lib/libresolv.so.2...done.
</I>&gt;&gt;<i> Reading symbols from /usr/local/lib/libstdc++.so.3...done.
</I>&gt;&gt;<i> Reading symbols from /lib/libm.so.6...done.
</I>&gt;&gt;<i> Reading symbols from /usr/local/lib/libgcc_s.so.1...done.
</I>&gt;&gt;<i> Reading symbols from /lib/libc.so.6...done.
</I>&gt;&gt;<i> Reading symbols from /lib/ld-linux.so.2...done.
</I>&gt;&gt;<i> #0  0x40126e88 in chunk_alloc (ar_ptr=0x401bbd40, nb=16) at
</I>&gt;&gt;<i> malloc.c:2875
</I>&gt;&gt;<i> 2875    malloc.c: No such file or directory.
</I>&gt;&gt;<i> (gdb) bt
</I>&gt;&gt;<i> #0  0x40126e88 in chunk_alloc (ar_ptr=0x401bbd40, nb=16) at
</I>&gt;&gt;<i> malloc.c:2875
</I>&gt;&gt;<i> #1  0x401265ae in __libc_malloc (bytes=12) at malloc.c:2696
</I>&gt;&gt;<i> #2  0x80de950 in _ZNSt23__malloc_alloc_templateILi0EE8allocateEj
</I>&gt;&gt;<i> (__n=12) at
</I>&gt;&gt;<i> /usr/local/include/g++-v3/bits/stl_alloc.h:114
</I>&gt;&gt;<i> #3  0x8
</I>&gt;&gt;<i> 06f6d1 in
</I>&gt;&gt;<i> _ZN7bedrock3net6SocketC1ERNS0_13SocketWatcherERNS_10ThreadPoolEiiPNS0_5KarmaEPNS0_15ConnectionLimitE
</I>&gt;&gt;<i> (
</I>&gt;&gt;<i>     this=0x8153010, watcher=@0xbffff81c, pool=@0xbffff7c4, key=0,
</I>&gt;&gt;<i> socketfd=-1, karma=0x0, conn_limit=0x0)
</I>&gt;&gt;<i>     at /usr/local/include/g++-v3/bits/stl_alloc.h:184
</I>&gt;&gt;<i> #4  0x806e655 in
</I>&gt;&gt;<i> _ZN7bedrock3net13SocketWatcher19createConnectSocketEPNS0_19SocketEventListenerEPKcS5_iiPNS0_5KarmaE
</I>&gt;&gt;<i> (
</I>&gt;&gt;<i>     this=0xbffff81c, listener=0xbffff9f4, host=0x814fad4
</I>&gt;&gt;<i> &quot;127.0.0.1&quot;,
</I>&gt;&gt;<i> service=0x814fab4 &quot;_jabber._tcp&quot;, defaultport=7000,
</I>&gt;&gt;<i>     thread_key=0, karma=0x0) at SocketWatcher.cpp:195
</I>&gt;&gt;<i> #5  0x80db48e in
</I>&gt;&gt;<i> _ZN3jax16RouterConnectionINS_6PacketES1_E7connectERKSsS4_RN7bedrock3net7AddressE
</I>&gt;&gt;<i> (this=0xbffff9f0,
</I>&gt;&gt;<i>     name=@0xbffff7a4, secret=@0xbffffac0, a=@0xbffff5d0) at
</I>&gt;&gt;<i> /usr/local/include/g++-v3/bits/basic_string.h:396
</I>&gt;&gt;<i> #6  0x8059516 in _ZN8IcqTransC1ERKSsS1_S1_jb (this=0xbffff7a0,
</I>&gt;&gt;<i> serviceid=@0xbffffad0, password=@0xbffffac0, hostname=@0xbffffab0,
</I>&gt;&gt;<i>     port=
</I>&gt;&gt;<i> 7000, outgoing_dir=true) at IcqTrans.cpp:67
</I>&gt;&gt;<i> #7  0x8069c17 in main (argc=1, argv=0xbffffb44) at main.cpp:113
</I>&gt;&gt;<i> Current language:  auto; currently c
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> David Waite wrote:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> &gt; Wim Godden wrote:
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt;&gt;  Trying to run it like this :
</I>&gt;&gt;<i> &gt;&gt;  icqv7ext -n icqv7ext -s secretpass -h 127.0.0.1 -p 7000 -m
</I>&gt;&gt;<i> &gt;&gt;  sms.localnetwork.local
</I>&gt;&gt;<i> &gt;&gt;
</I>&gt;&gt;<i> &gt;&gt;  I get :
</I>&gt;&gt;<i> &gt;&gt;  Starting component...
</I>&gt;&gt;<i> &gt;&gt;         Component ID : icqv7ext
</I>&gt;&gt;<i> &gt;&gt;         Secret       : secretpass
</I>&gt;&gt;<i> &gt;&gt;         Jabberd IP   : 127.0.0.1
</I>&gt;&gt;<i> &gt;&gt;         Jabberd Port : 7000
</I>&gt;&gt;<i> &gt;&gt;  Segmentation fault (core dumped)
</I>&gt;&gt;<i> &gt;&gt;
</I>&gt;&gt;<i> &gt;&gt;
</I>&gt;&gt;<i> &gt;&gt;  Any ideas ?
</I>&gt;&gt;<i> &gt;&gt;
</I>&gt;&gt;<i> &gt;&gt;
</I>&gt;&gt;<i> &gt; Sounds like it is core-dumping wihle trying to start the component
</I>&gt;&gt;<i> &gt; :-)
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt; Perhaps you could post a backtrace from the core? (perhaps &quot;gdb
</I>&gt;&gt;<i> &gt; icqv7ext
</I>&gt;&gt;<i> &gt; -c core&quot;, then &quot;bt&quot;.) Cores from threaded components are much nicer
</I>&gt;&gt;<i> &gt; if
</I>&gt;&gt;<i> &gt; they are generated from something other than Linux; if you are
</I>&gt;&gt;<i> &gt; using
</I>&gt;&gt;<i> &gt; Linux try to use the newest kernel possible (as they reworked a bit
</I>&gt;&gt;<i> &gt; of
</I>&gt;&gt;<i> &gt; this logic within the 2.4 series)
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt; -David Waite
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt; _______________________________________________
</I>&gt;&gt;<i> &gt; jdev mailing list
</I>&gt;&gt;<i> &gt; <A HREF="http://mail.jabber.org/mailman/listinfo/jdev">jdev at jabber.org</A>
</I>&gt;&gt;<i> &gt; <A HREF="http://mailman.jabber.org/listinfo/jdev">http://mailman.jabber.org/listinfo/jdev</A>
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> --
</I>&gt;&gt;<i> -----
</I>&gt;&gt;<i> FirstLink Networks - <A HREF="http://www.firstlinknetworks.com">http://www.firstlinknetworks.com</A>
</I>&gt;&gt;<i> -----
</I>&gt;&gt;<i> De leukste moppen op je scherm en in je mailbox :
</I>&gt;&gt;<i> <A HREF="http://www.moppen.be">http://www.moppen.be</A> !!!!
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> _______________________________________________
</I>&gt;&gt;<i> jdev mailing list
</I>&gt;&gt;<i> <A HREF="http://mail.jabber.org/mailman/listinfo/jdev">jdev at jabber.org</A>
</I>&gt;&gt;<i> <A HREF="http://mailman.jabber.org/listinfo/jdev">http://mailman.jabber.org/listinfo/jdev</A>
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>
--
-----
FirstLink Networks - <A HREF="http://www.firstlinknetworks.com">http://www.firstlinknetworks.com</A>
-----
De leukste moppen op je scherm en in je mailbox : <A HREF="http://www.moppen.be">http://www.moppen.be</A>
!!!!

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="https://www.jabber.org/jdev/attachments/20020328/35beb065/attachment.htm">https://www.jabber.org/jdev/attachments/20020328/35beb065/attachment.htm</A> 
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="011913.html">[JDEV] icqv7 core dumps on external part ?
</A></li>
	<LI>Next message: <A HREF="011915.html">[JDEV] icqv7 core dumps on external part ?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11914">[ date ]</a>
              <a href="thread.html#11914">[ thread ]</a>
              <a href="subject.html#11914">[ subject ]</a>
              <a href="author.html#11914">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://mail.jabber.org/mailman/listinfo/jdev">More information about the JDev
mailing list</a><br>
</body></html>
