<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [JDEV] [JDEV]XML- RPC
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:jdev%40jabber.org?Subject=Re%3A%20%5BJDEV%5D%20%5BJDEV%5DXML-%20RPC&In-Reply-To=%3C9A40480D4F8E0248A54FA20AA33A840B097829%40alexisex.jambotech.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="070504.html">
   <LINK REL="Next"  HREF="070515.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[JDEV] [JDEV]XML- RPC</H1>
    <B>Jonathan Augenstine</B> 
    <A HREF="mailto:jdev%40jabber.org?Subject=Re%3A%20%5BJDEV%5D%20%5BJDEV%5DXML-%20RPC&In-Reply-To=%3C9A40480D4F8E0248A54FA20AA33A840B097829%40alexisex.jambotech.com%3E"
       TITLE="[JDEV] [JDEV]XML- RPC">jaugenstine at jambotech.com
       </A><BR>
    <I>Sat Mar 30 11:14:42 CST 2002</I>
    <P><UL>
        <LI>Previous message: <A HREF="070504.html">[JDEV] Watchdog tool for Jabber..
</A></li>
        <LI>Next message: <A HREF="070515.html">[JDEV] Jabber Advocacy and looking for M$ Windows client
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#70506">[ date ]</a>
              <a href="thread.html#70506">[ thread ]</a>
              <a href="subject.html#70506">[ subject ]</a>
              <a href="author.html#70506">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Nick,

You know that you can't do straight XMLRPC through jabber right? 
Yes.

&gt;&gt;<i>If you pick up DJ Adams' Programming Jabber.
</I>This is the second most important book in my life at the moment.

&gt;&gt;<i>With all of that said, I dont quite think you understand the Jabber
</I>Protocol well enough.
You will get no argument from me.  I installed Jabber about 5-6 weeks
ago and received Mr. Adams book shortly thereafter.  I am definitely
drinking from the firehose.

&gt;&gt;<i>You can easily setup two clients and send whatever you want inside of
</I>the confines of the Jabber protocol.
I have had two client nodes communicating and sending simple messages to
each other for about two weeks.

&gt;&gt;<i>A more simplistic approach to RPC would be passing simple messages
</I>within the &lt;message/&gt;.
We currently use that approach in other applications and are trying to
get away from that approach due to the inherent difficulty in
maintaining and extending the applications.

&gt;&gt;<i>more complex would be embedding XMLRPC inside of a &lt;message/&gt;
</I>I considered this but wanted to try to implement the RPC described by
Adams.

&gt;&gt;<i>the proper way to do it is to wrap the XMLRPC in an &lt;iq
</I>xmlns='jabber:iq:rpc'/&gt;.
This is what I attempted.  I should have provided more information on
what I did and the result I obtained.  Following is the XML I sent the
Jabber and its' response.

Sent by rpcclient:
BYTES sent: 229[&lt;iq type='set' to='<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">rpcserver at 192.168.1.152</A>'
id='1'&gt;&lt;query
xmlns='jabber:iq:rpc'&gt;&lt;methodCall&gt;&lt;methodName&gt;switch.StartCall&lt;/methodNa
me&gt;&lt;params&gt;&lt;param&gt;&lt;value&gt;&lt;string&gt;8186763443&lt;/string&gt;&lt;/value&gt;&lt;/param&gt;&lt;/pa
rams&gt;&lt;/methodCall&gt;&lt;/query&gt;&lt;/iq&gt;]

Respnse from Jabber:
BYTES received: 314[&lt;iq type='error' to='<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">rpcclient at 192.168.1.152</A>/Work'
id='1' from='<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">rpcserver at 192.168.1.152</A>'&gt;&lt;query
xmlns='jabber:iq:rpc'&gt;&lt;methodCall&gt;&lt;methodName&gt;switch.StartCall&lt;/methodNa
me&gt;&lt;params&gt;&lt;param&gt;&lt;value&gt;&lt;string&gt;8186763443&lt;/string&gt;&lt;/value&gt;&lt;/param&gt;&lt;/pa
rams&gt;&lt;/methodCall&gt;&lt;/query&gt;&lt;error code='503'&gt;Service
Unavailable&lt;/error&gt;&lt;/iq&gt;]

I realize that my ignorance about Jabber namspace and iq handling is the
problem.  I do not understand how to tell Jabber that my rpcserver will
handle the iq requests for the jabber:iq:rpc namespace.  This is where I
am looking for guidance.

&gt;&gt;<i>I think overall, you need to think simple :)
</I>I am a big fan of the Beauty Principle.

&gt;&gt;<i>Feel free to IM me if you wanna talk more about JabberRPC.
</I>Thank you for the offer.  Rest assured that I will be contacting you
next week.  I feel like I am groping in the dark and would appreciate
your feedback and input.

Jonathan

-----Original Message-----
From: Nicholas Perez [mailto:<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">nick at jabberstudio.org</A>] 
Sent: Friday, March 29, 2002 3:52 PM
To: <A HREF="http://mail.jabber.org/mailman/listinfo/jdev">jdev at jabber.org</A>
Subject: Re: [JDEV] [JDEV]XML- RPC


You know that you can't do straight XMLRPC through jabber right? There
is a namespace for it 
and everything. If you pick up DJ Adams' Programming Jabber, there is a
section on doing 
JabberRPC, in java, python, and perl. Also, JabminRPC is a server
component that does 
administration and it uses purely iq:rpc. I ended up using mister DJ's
perl Jabber::Connection 
and Jabber::RPC libs (really the Jabber::RPC libs are just wrappers
around an XMLRPC parser 
so its not hard to write or substitute your own XMLRPC parser). With all
of that said, I dont quite 
think you understand the Jabber Protocol well enough. You can easily
setup two clients and send 
whatever you want inside of the confines of the Jabber protocol. A more
simplistic approach to 
RPC would be passing simple messages within the &lt;message/&gt;, more complex
would be 
embedding XMLRPC inside of a &lt;message/&gt;, and the proper way to do it is
to wrap the 
XMLRPC in an &lt;iq xmlns='jabber:iq:rpc'/&gt;. I think overall, you need to
think simple :) 

Feel free to IM me if you wanna talk more about JabberRPC. 

Nick

<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">Nick at lug.du.edu</A>

On Fri, 29 Mar 2002 11:10:15 -0800, &quot;Jonathan Augenstine&quot;
&lt;<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">jaugenstine at jambotech.com</A>&gt; wrote: I am developing a Jabber application
and I would like to use XML-RPC. Documentation is somewhat sparse and I
was wondering if I could have someone point me towards more info or
answer some questions.  I am using O'Reilly's &quot;XML-RPC&quot; book for the
XML-RPC packet format and am primarily looking for more info on Jabber
configuration help.

Basically, I want to develop two node applications with one acting as
the RPC-client and the other as the RPC-server.  I have sent an RPC
packet from the client to the server but it is rejected by Jabber with
an error code 503 - Service Unavailable.  The server node never sees the
request.

My questions are (I am running Jabber v1.4.2):
1. How do I tell the Jabber server that I am registering a node as an
RPC server? 2. Is this possible or does the RPC-server have to exist as
a module?

Jonathan Augenstine
Sr. Software Engineer
JamboTech, Inc.
<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">jaugenstine at jambotech.com</A>
818.676.3443

_______________________________________________
jdev mailing list
<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">jdev at jabber.org</A>
<A HREF="http://mailman.jabber.org/listinfo/jdev">http://mailman.jabber.org/listinfo/jdev</A>

_______________________________________________
jdev mailing list
<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">jdev at jabber.org</A>
<A HREF="http://mailman.jabber.org/listinfo/jdev">http://mailman.jabber.org/listinfo/jdev</A>

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="070504.html">[JDEV] Watchdog tool for Jabber..
</A></li>
	<LI>Next message: <A HREF="070515.html">[JDEV] Jabber Advocacy and looking for M$ Windows client
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#70506">[ date ]</a>
              <a href="thread.html#70506">[ thread ]</a>
              <a href="subject.html#70506">[ subject ]</a>
              <a href="author.html#70506">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://mail.jabber.org/mailman/listinfo/jdev">More information about the JDev
mailing list</a><br>
</body></html>
