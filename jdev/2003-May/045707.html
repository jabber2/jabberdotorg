<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [JDEV] jabber:iq:last Bug in version 1.4.2. for Windows?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:jdev%40jabber.org?Subject=Re%3A%20%5BJDEV%5D%20jabber%3Aiq%3Alast%20Bug%20in%20version%201.4.2.%20for%20Windows%3F&In-Reply-To=%3CMLENLBPKAPCJOBHPOHJPAELLCIAA.geiroves%40online.no%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="045705.html">
   <LINK REL="Next"  HREF="045709.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[JDEV] jabber:iq:last Bug in version 1.4.2. for Windows?</H1>
    <B>Geir Ove Skj&#230;rvik</B> 
    <A HREF="mailto:jdev%40jabber.org?Subject=Re%3A%20%5BJDEV%5D%20jabber%3Aiq%3Alast%20Bug%20in%20version%201.4.2.%20for%20Windows%3F&In-Reply-To=%3CMLENLBPKAPCJOBHPOHJPAELLCIAA.geiroves%40online.no%3E"
       TITLE="[JDEV] jabber:iq:last Bug in version 1.4.2. for Windows?">geiroves at online.no
       </A><BR>
    <I>Wed May 14 17:19:58 CDT 2003</I>
    <P><UL>
        <LI>Previous message: <A HREF="045705.html">[JDEV] Wireless Village Jabber Connector
</A></li>
        <LI>Next message: <A HREF="045709.html">[JDEV] jabber:iq:last Bug in version 1.4.2. for Windows?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#45707">[ date ]</a>
              <a href="thread.html#45707">[ thread ]</a>
              <a href="subject.html#45707">[ subject ]</a>
              <a href="author.html#45707">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello,

I am new to this list, so sorry if this has been discussed before.

&gt;<i>From <A HREF="http://www.jabber.org/ietf/draft-ietf-xmpp-im-11.html#def-last">http://www.jabber.org/ietf/draft-ietf-xmpp-im-11.html#def-last</A> I read:
</I>
The server MUST maintain a record of the time at which a user became
unavailable (whether gracefully or ungracefully). An authorized subscriber
to that user's presence MAY request the time of last activity by sending an
IQ stanza to the user's bare JID (<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">user at domain</A>) containing an empty &lt;query/&gt;
element scoped by the 'jabber:iq:last' namespace:

Requesting the last active time of a user:

&lt;iq type='get' to='<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">user at domain</A>'&gt;	// Note no resource !!
  &lt;query xmlns='jabber:iq:last'/&gt;
&lt;/iq&gt;

&lt;snip&gt;...the server SHOULD return an IQ stanza of type &quot;result&quot; with the
number of seconds since the user was last active (if the user is online and
available, the 'seconds' attribute should be set to a value of &quot;0&quot;, i.e.,
zero):


The issue is, that if I use a &quot;bare JID&quot; (no resource), 1.4.2 always returns
the LAST disconnect time, wheter the Client is online and availble (with
subscription both) or not.

However, if I send the request to the specific resource:

&lt;iq type='get' to='<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">user at domain</A>/resource'&gt;	//WITH resource it works ok!!
  &lt;query xmlns='jabber:iq:last'/&gt;
&lt;/iq&gt;


then it works as described!

Questions:

a) Is this bug reported? If not, where to report it?
b) Is there a buglist?
c) Any workaround for this? (don't want to use the resource, but to check if
user is online)


Geir Ove
Norway.



</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="045705.html">[JDEV] Wireless Village Jabber Connector
</A></li>
	<LI>Next message: <A HREF="045709.html">[JDEV] jabber:iq:last Bug in version 1.4.2. for Windows?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#45707">[ date ]</a>
              <a href="thread.html#45707">[ thread ]</a>
              <a href="subject.html#45707">[ subject ]</a>
              <a href="author.html#45707">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://mail.jabber.org/mailman/listinfo/jdev">More information about the JDev
mailing list</a><br>
</body></html>
