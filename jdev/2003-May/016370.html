<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [JDEV] Jabberd 1.4.2 - Memory Leak !
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:jdev%40jabber.org?Subject=%5BJDEV%5D%20Jabberd%201.4.2%20-%20Memory%20Leak%20%21&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="016368.html">
   <LINK REL="Next"  HREF="016371.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[JDEV] Jabberd 1.4.2 - Memory Leak !</H1>
    <B>Asif Ahsan</B> 
    <A HREF="mailto:jdev%40jabber.org?Subject=%5BJDEV%5D%20Jabberd%201.4.2%20-%20Memory%20Leak%20%21&In-Reply-To="
       TITLE="[JDEV] Jabberd 1.4.2 - Memory Leak !">aahsan at actiontec.com
       </A><BR>
    <I>Mon May  5 17:42:49 CDT 2003</I>
    <P><UL>
        <LI>Previous message: <A HREF="016368.html">[JDEV] Jabber and Blogging
</A></li>
        <LI>Next message: <A HREF="016371.html">[JDEV] Jabberd 1.4.2 - Memory Leak !
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16370">[ date ]</a>
              <a href="thread.html#16370">[ thread ]</a>
              <a href="subject.html#16370">[ subject ]</a>
              <a href="author.html#16370">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi All,

Denying registration from XDB FILE causes memory leak ! I am running 
Jabberd
1.4.2 with some modification to allow only certain users to the system. 
However
I've found out denying registration is causing accumulating memory leak

To validate me experiment, I've done some testing with original Jabber 
source code.
(1.4.2) without any modification elsewhere except xdb_file.c
To reproduce the bug please follow the instructions below (I've used 
RedHat 7.2).

1) Return NULL from function : xdb_file_full  and return r_ERR from 
xbd_file_phandler
(I've commented out the functions and added the returns)
2) Rebuild Jabberd
3) Run process viewer and see the memory usage of jabberd.
4) Now try to register for a new account - Make sure the account doesn't 
exist.
5) Keep trying and you will see the memory utilization is going up slowly.

It took me a lot (Few thousands) of  login attempt to consume 512 MB of 
my systems memory completely.
Then Jabberd crashed.

Anyone has any idea ! It is very critical for me since my setup will get 
few thousand failed
login attempts everyday. Any help will be appreciated.


Thank you,
Asif Ahsan





</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="016368.html">[JDEV] Jabber and Blogging
</A></li>
	<LI>Next message: <A HREF="016371.html">[JDEV] Jabberd 1.4.2 - Memory Leak !
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16370">[ date ]</a>
              <a href="thread.html#16370">[ thread ]</a>
              <a href="subject.html#16370">[ subject ]</a>
              <a href="author.html#16370">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://mail.jabber.org/mailman/listinfo/jdev">More information about the JDev
mailing list</a><br>
</body></html>
