<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [JDEV] Breaking the 1020 client barrier
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:jdev%40jabber.org?Subject=Re%3A%20%5BJDEV%5D%20Breaking%20the%201020%20client%20barrier&In-Reply-To=%3C00110911063500.00431%40dennis%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="063178.html">
   <LINK REL="Next"  HREF="063145.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[JDEV] Breaking the 1020 client barrier</H1>
    <B>Dennis Noordsij</B> 
    <A HREF="mailto:jdev%40jabber.org?Subject=Re%3A%20%5BJDEV%5D%20Breaking%20the%201020%20client%20barrier&In-Reply-To=%3C00110911063500.00431%40dennis%3E"
       TITLE="[JDEV] Breaking the 1020 client barrier">dennis.noordsij at wiral.com
       </A><BR>
    <I>Thu Nov  9 03:06:35 CST 2000</I>
    <P><UL>
        <LI>Previous message: <A HREF="063178.html">[JDEV] Project info needed
</A></li>
        <LI>Next message: <A HREF="063145.html">[JDEV] Remote Server Error
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#63144">[ date ]</a>
              <a href="thread.html#63144">[ thread ]</a>
              <a href="subject.html#63144">[ subject ]</a>
              <a href="author.html#63144">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>This is how it worked for me..

Kernel 2.4.0-test10. Modified some kernel internals in various .h files to 
for example increase the FD size macro so that select() works on more than 
1024 (default) sockets, (I made it 8192). Also changed the maximum number of 
FD's a process can have from 1024 up to 8192 (also upped 
/proc/sys/fs/file-max). I got most of this info from tuning pages on the web 
and some older posts in this mailing list.

Remove the in the c2s section everything to do with pthsock, and set up an 
accept section, set up a port, ip to listen to on, and a secret. This was 
pure voodoo but seemed to work :-)

Run jabberd, then run jpolld (compiled by removing the -lsocket reference 
from the Makefile - it compiles fine without it) and tell it to connect to 
jabberd to the port you gave, jpolld will now listen on the standard jabber 
port and connections go through jpolld. Again, lucky voodoo :)

I am running the simulator though, and I am not sure what it tries to do 
exactly, but I get up to 2200 clients before the system becomes to washed out 
(P3-700 with 128MB, though running X etc, oh and also running the simulator 
on the same machine! Right, let me try that again by using a different 
machine! :-)

ICQ and Yahoo! transports register themselves, show up in gabber, etc. But 
due to firewalls I haven't been able to connect yet. It seems to be ok though.


What I would like: 

Puhlease someone send me a compiled version of kjabber, I can't get it to 
compile, missing those kde headers etc etc, apt-getting one set removes 
another etc. Blargh

LDAP authentication. I have the MySQL authentication src from the CVS so I'll 
play with that some more.



Regards,
Dennis :-)


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="063178.html">[JDEV] Project info needed
</A></li>
	<LI>Next message: <A HREF="063145.html">[JDEV] Remote Server Error
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#63144">[ date ]</a>
              <a href="thread.html#63144">[ thread ]</a>
              <a href="subject.html#63144">[ subject ]</a>
              <a href="author.html#63144">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://mail.jabber.org/mailman/listinfo/jdev">More information about the JDev
mailing list</a><br>
</body></html>
