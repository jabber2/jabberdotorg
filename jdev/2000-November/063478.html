<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [JDEV] Some more :)
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:jdev%40jabber.org?Subject=Re%3A%20%5BJDEV%5D%20Some%20more%20%3A%29&In-Reply-To=%3C3A2437D3.6010003%40wiral.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="063492.html">
   <LINK REL="Next"  HREF="063484.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[JDEV] Some more :)</H1>
    <B>Dennis Noordsij</B> 
    <A HREF="mailto:jdev%40jabber.org?Subject=Re%3A%20%5BJDEV%5D%20Some%20more%20%3A%29&In-Reply-To=%3C3A2437D3.6010003%40wiral.com%3E"
       TITLE="[JDEV] Some more :)">dennis.noordsij at wiral.com
       </A><BR>
    <I>Tue Nov 28 16:55:15 CST 2000</I>
    <P><UL>
        <LI>Previous message: <A HREF="063492.html">[JDEV] Jabber server 1.2 &quot; Undefined symbol. &quot;
</A></li>
        <LI>Next message: <A HREF="063484.html">[JDEV] Some more :)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#63478">[ date ]</a>
              <a href="thread.html#63478">[ thread ]</a>
              <a href="subject.html#63478">[ subject ]</a>
              <a href="author.html#63478">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello,

I know it's a little rude to repeat the same question, but I really need 
the answer as it is pretty much the only thing stopping me from doing my 
authentication through a Perl script (I have given up on huge 
combinations of C files depending on specific libraries all missing one 
or another symbol etc when the Perl script does the LDAP authentication 
for me in 4 lines as long as I could get the jabber server to send me 
the password the user sent).

In order to make it easy to answer the question I will try to be as 
specific as possible.


I have made a Perl script that I would to use to authenticate users with 
that log into our jabber server. I am using the Net::Jabber perl module, 
though mostly to do the connecting to the jabberd server, parsing the 
login packet and composing the reply is quite easy. (brushing up on the 
old regex :)

I have defined  &lt;service id=&quot;perlauth&quot;&gt; with an accept statement. I have 
added &lt;auth&gt;perlauth&lt;/auth&gt; to the jsm section. I connect fine to the 
jabberd service. It reports my connection and when a user connections it 
says DELIVERING to perlauth module.

My module receives the request packet, basically an &lt;iq&gt; set inside of a 
&lt;route&gt; set. However, the only data contained within this login request 
is the username and the resource.

Now, the old auth modules are still present. Maybe I am supposed to 
reject this login, after which a new login packet is sent containing the 
password? Right now the original mod_auth accepts the connection if I 
don't. If I do accept the connection, I basically logged the user in 
without ever even knowing what password he/she entered :-))

I need to know how to do this, how to get the password the user entered, 
I also need to know how to reject a request, accept it, basically do 
anything what an auth module is supposed to do.

I know it's asking for much, but here I am having a lot of time to spend 
on doing this and it's a waste if lack of documentation delays so much. 
I do want jabber to become big and I have a million ideas for it, I 
spend most of my time doing something related to it, experimenting, but 
it is so undocumented. There are few examples, I know know, read the 
source, and it has helped on a lot of occasions, but, this mailinglist 
is my only up-to-date source :) Every time I have logged into #jabber 
noone actually said anything :-)

  Schuyler, your example worked very well, and helped me along quite a 
lot, I just need a little more info to get it all to work :) Don't think 
I am not grateful for the help so far :)

Kind regards,
Dennis



</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="063492.html">[JDEV] Jabber server 1.2 &quot; Undefined symbol. &quot;
</A></li>
	<LI>Next message: <A HREF="063484.html">[JDEV] Some more :)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#63478">[ date ]</a>
              <a href="thread.html#63478">[ thread ]</a>
              <a href="subject.html#63478">[ subject ]</a>
              <a href="author.html#63478">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://mail.jabber.org/mailman/listinfo/jdev">More information about the JDev
mailing list</a><br>
</body></html>
