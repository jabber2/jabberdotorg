<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [jdev] XML::Stream question.....
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:jdev%40jabber.org?Subject=Re%3A%20%5Bjdev%5D%20XML%3A%3AStream%20question.....&In-Reply-To=%3C%21%7E%21AAAAADhBaEzZdDZPm3rr/HcZERXEsi4A%40jabber.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="077417.html">
   <LINK REL="Next"  HREF="077409.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[jdev] XML::Stream question.....</H1>
    <B>troyer at xs4all.nl</B> 
    <A HREF="mailto:jdev%40jabber.org?Subject=Re%3A%20%5Bjdev%5D%20XML%3A%3AStream%20question.....&In-Reply-To=%3C%21%7E%21AAAAADhBaEzZdDZPm3rr/HcZERXEsi4A%40jabber.com%3E"
       TITLE="[jdev] XML::Stream question.....">troyer at xs4all.nl
       </A><BR>
    <I>Sun Feb 22 08:18:13 CST 2004</I>
    <P><UL>
        <LI>Previous message: <A HREF="077417.html">[jdev] Suggestions for Windows installer creators
</A></li>
        <LI>Next message: <A HREF="077409.html">[jdev] XML::Stream question.....
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#77407">[ date ]</a>
              <a href="thread.html#77407">[ thread ]</a>
              <a href="subject.html#77407">[ subject ]</a>
              <a href="author.html#77407">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello everyone,
 
I am trying to build a rather simple perl script using the Ryan Eatmon's
XML::Stream library.  Unfortunately, I am having a hard time getting the
Send method to work.  The send method requires both a sid (stream id)
and a
XML string.  Below is the script that I am using.  Upto about line 18
everything works fine.  On line 18, I would like to send out the xml:
&lt;iq
type=&quot;get&quot;&gt;&lt;query xmlns=&quot;jabber:iq:auth&quot;/&gt;&lt;/iq&gt;
 
I am assuming that the sid is the $stream hash?  Am I misunderstanding
this?
 
Thanks,
 
Mark
------------------------------------------------------------------------
----
-------
 
  use XML::Stream qw(Tree);
  use Data::Dumper;
 
  my $already_sent = 0;
 
  my $stream = new XML::Stream(debug=&gt;&quot;stdout&quot;, debuglevel=&gt;3);
 
  $stream-&gt;SetCallBacks(node=&gt;\&amp;noder);
 
  $stream-&gt;Connect(hostname =&gt; &quot;compaq&quot;,
                   port =&gt; 5222,
                   namespace =&gt; &quot;jabber:client&quot;,
                   timeout =&gt; undef) || die $!;
 
  while(1) {
            $stream-&gt;Process(1);
            if (!$already_sent) {
                        # Call to Send below does not work.  What am I
doing
wrong??
                        $stream-&gt;Send($stream,'&lt;iq type=&quot;get&quot;&gt;&lt;query
xmlns=&quot;jabber:iq:auth&quot;/&gt;&lt;/iq&gt;');
                        $already_sent = 1;
            }
  }
 
 
  sub noder
  {
    my $sid = shift;
    my $node = shift;
 
    # do something with $node
 
            print Dumper \$node
  }


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="077417.html">[jdev] Suggestions for Windows installer creators
</A></li>
	<LI>Next message: <A HREF="077409.html">[jdev] XML::Stream question.....
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#77407">[ date ]</a>
              <a href="thread.html#77407">[ thread ]</a>
              <a href="subject.html#77407">[ subject ]</a>
              <a href="author.html#77407">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://mail.jabber.org/mailman/listinfo/jdev">More information about the JDev
mailing list</a><br>
</body></html>
