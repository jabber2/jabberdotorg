<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [jdev] Empty &lt;stream:features/&gt;
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:jdev%40jabber.org?Subject=Re%3A%20%5Bjdev%5D%20Empty%20%3Cstream%3Afeatures/%3E&In-Reply-To=%3C1077040343.12708.16.camel%40eternity.devianttechnologies.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="077381.html">
   <LINK REL="Next"  HREF="077383.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[jdev] Empty &lt;stream:features/&gt;</H1>
    <B>Bob Phan</B> 
    <A HREF="mailto:jdev%40jabber.org?Subject=Re%3A%20%5Bjdev%5D%20Empty%20%3Cstream%3Afeatures/%3E&In-Reply-To=%3C1077040343.12708.16.camel%40eternity.devianttechnologies.com%3E"
       TITLE="[jdev] Empty &lt;stream:features/&gt;">bob at devianttechnologies.com
       </A><BR>
    <I>Tue Feb 17 11:52:23 CST 2004</I>
    <P><UL>
        <LI>Previous message: <A HREF="077381.html">[jdev] Empty &lt;stream:features/&gt;
</A></li>
        <LI>Next message: <A HREF="077383.html">[jdev] ACTIVE: JEP-0086 (Error Condition Mappings)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#77382">[ date ]</a>
              <a href="thread.html#77382">[ thread ]</a>
              <a href="subject.html#77382">[ subject ]</a>
              <a href="author.html#77382">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Mon, 2004-02-16 at 17:59, Robert Norris wrote:
&gt;<i> On Mon, Feb 16, 2004 at 04:42:36PM -0500, Bob Phan wrote:
</I>&gt;<i> &gt; Okay, a little progress update on the component library for perl for
</I>&gt;<i> &gt; jabber2.  It can now successfully authenticate using SASL and such.
</I>&gt;<i> &gt; I re-initiate the stream and the server returns this:
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; &lt;stream:features xmlns:stream='<A HREF="http://etherx.jabber.org/streams'/">http://etherx.jabber.org/streams'/</A>&gt;
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; Which most likely explains why when I try to bind to a domain,
</I>&gt;<i> &gt; the server debug output shows this:
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; ROUT: sx (io.c:189) decoded read data (33 bytes): &lt;bind
</I>&gt;<i> &gt; name='logger'&gt;&lt;log/&gt;&lt;/bind&gt;
</I>&gt;<i> &gt; ROUT: sx (io.c:65) completed nad: &lt;bind name='logger'&gt;&lt;log/&gt;&lt;/bind&gt;
</I>&gt;<i> &gt; ROUT: sx (chain.c:119) calling nad read chain
</I>&gt;<i> &gt; ROUT: sx (io.c:108) tag 12 event 6 data 0x80c1600
</I>&gt;<i> &gt; ROUT: Mon Feb 16 16:22:39 2004 router.c:736 invalid packet namespace,
</I>&gt;<i> &gt; dropping
</I>&gt;<i> &gt; ROUT: Mon Feb 16 16:22:42 2004 router.c:831 read action on fd 12
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; Since binding doesn't show up as a feature and all...
</I>&gt;<i> 
</I>&gt;<i> Component binding doesn't show up as a feature because it predates
</I>&gt;<i> stream features. Your problem stems from the (as the error messages say)
</I>&gt;<i> your packets being in the wrong namespace.
</I>&gt;<i> 
</I>&gt;<i> Either declare the component namespace on the stream header:
</I>&gt;<i> 
</I>&gt;<i>   &lt;stream:stream xmlns:stream='<A HREF="http://etherx.jabber.org/streams'">http://etherx.jabber.org/streams'</A>
</I>&gt;<i>                  xmlns='<A HREF="http://jabberd.jabberstudio.org/ns/component/1.0'">http://jabberd.jabberstudio.org/ns/component/1.0'</A>&gt;
</I>&gt;<i> 
</I>&gt;<i> Or on the packets themselves:
</I>&gt;<i> 
</I>&gt;<i>   &lt;bind xmlns='<A HREF="http://jabberd.jabberstudio.org/ns/component/1.0'">http://jabberd.jabberstudio.org/ns/component/1.0'</A>&gt;
</I>&gt;<i>     &lt;log/&gt;
</I>&gt;<i>   &lt;/bind&gt;
</I>Thanks!  That was exactly the problem.  I didn't see any mention of
that namespace in the component doc you linked before.

&gt;<i> Take a look at the component protocol docs for more info. It may also
</I>&gt;<i> help to run a j2 component (the resolver is nice and simple) in debug
</I>&gt;<i> mode and watch the traffic that is passed back and forth.
</I>Yes, that was very helpful.  I was looking for a component to mess
around with as an example before.

Thanks again for all your help.  I just finished up the library and
everything works now.  I sent a patch upstream to the maintainer, and
I'll shoot the list an email once it's been applied.

Now it's time to start work on the logging component.  I'll keep the
list informed on the progress of this component a little further
down the week.

Thanks again,
-- 
/*
 * Bob Phan &lt;<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">bob at devianttechnologies.com</A>&gt;
 * Code Master General
 * Deviant Technologies Incorporated
 * (203)458-2312
 *
 * <A HREF="http://www.devianttechnologies.com/">http://www.devianttechnologies.com/</A>
 */



</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="077381.html">[jdev] Empty &lt;stream:features/&gt;
</A></li>
	<LI>Next message: <A HREF="077383.html">[jdev] ACTIVE: JEP-0086 (Error Condition Mappings)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#77382">[ date ]</a>
              <a href="thread.html#77382">[ thread ]</a>
              <a href="subject.html#77382">[ subject ]</a>
              <a href="author.html#77382">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://mail.jabber.org/mailman/listinfo/jdev">More information about the JDev
mailing list</a><br>
</body></html>
