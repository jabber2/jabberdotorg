<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [jdev] Re: jabberd 1.4.x password changing
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:jdev%40jabber.org?Subject=%5Bjdev%5D%20Re%3A%20jabberd%201.4.x%20password%20changing&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="021144.html">
   <LINK REL="Next"  HREF="021146.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[jdev] Re: jabberd 1.4.x password changing</H1>
    <B>Peter Saint-Andre</B> 
    <A HREF="mailto:jdev%40jabber.org?Subject=%5Bjdev%5D%20Re%3A%20jabberd%201.4.x%20password%20changing&In-Reply-To="
       TITLE="[jdev] Re: jabberd 1.4.x password changing">stpeter at jabber.org
       </A><BR>
    <I>Fri Feb 11 16:15:27 CST 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="021144.html">[jdev] jabberd 1.4.x password changing
</A></li>
        <LI>Next message: <A HREF="021146.html">[jdev] anonymous login redux
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21145">[ date ]</a>
              <a href="thread.html#21145">[ thread ]</a>
              <a href="subject.html#21145">[ subject ]</a>
              <a href="author.html#21145">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Thanks, that's helpful.

A little bird told me that jabberd 1.4.4 is on the way, and that this 
might be fixed in that release. ;-)

/psa

In article 
&lt;<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">E7650E6BCAF2414E8134C60A29AE28800132B915 at ms3aex05.USIEXCHANGE.COM</A>&gt;,
 &quot;Bresler, Jonathan&quot; &lt;<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">Jonathan.Bresler at usi.net</A>&gt; wrote:

&gt;<i> Peter,
</I>&gt;<i> 
</I>&gt;<i> jsm/users.c user data caching.
</I>&gt;<i> 
</I>&gt;<i> as long as there is a session for a user, the cached user data will not be 
</I>&gt;<i> purged.
</I>&gt;<i> one all session go away you must wait as long as 
</I>&gt;<i> &lt;jsm&gt;&lt;usergc&gt;NNN&lt;/usergc&gt;&lt;/jsm&gt; seconds
</I>&gt;<i> for the cached user data to be discarded.
</I>&gt;<i> 
</I>&gt;<i> IMHO its an error to cache the password information at all.  its only needed 
</I>&gt;<i> at login.
</I>&gt;<i> so read the disk for each login of each user.
</I>&gt;<i> 
</I>&gt;<i> unfortunately the &quot;bounce user on null resource login&quot; depends upon the 
</I>&gt;<i> password being
</I>&gt;<i> in the user cache.  could be re-implemented with a flag/variable in the user 
</I>&gt;<i> data structure
</I>&gt;<i> rather than overloading the password field.
</I>&gt;<i> 
</I>&gt;<i> dealing with this here.  have some code that begins to address it.  issue i 
</I>&gt;<i> have right now
</I>&gt;<i> is that the register and change password code is intermixed...split that out. 
</I>&gt;<i>  have two 
</I>&gt;<i> controls in .xml file now.  (newuser=&quot;yes|no&quot;  changepassword=&quot;yes|no&quot;).
</I>&gt;<i> 
</I>&gt;<i> have to stop the code from disallowing the change but modifying disk anyway 
</I>&gt;<i> ;)
</I>&gt;<i> 
</I>&gt;<i> Jonathan
</I>&gt;<i> 
</I>&gt;<i> -----Original Message-----
</I>&gt;<i> From: <A HREF="http://mail.jabber.org/mailman/listinfo/jdev">jdev-bounces at jabber.org</A> on behalf of Peter Saint-Andre
</I>&gt;<i> Sent: Fri 2/11/2005 1:09 PM
</I>&gt;<i> To: <A HREF="http://mail.jabber.org/mailman/listinfo/jdev">jdev at jabber.org</A>
</I>&gt;<i> Subject: [jdev] jabberd 1.4.x password changing
</I>&gt;<i>  
</I>&gt;<i> At jabber.org (running jabberd 1.4.2cvs plus patches, it's a long story, 
</I>&gt;<i> don't ask), I see the following behavior with regard to password changes:
</I>&gt;<i> 
</I>&gt;<i> 1. Log in with pw1, change password to pw2 (confirmed as changed in 
</I>&gt;<i> database), log out, successfully log in with pw2. All is happy.
</I>&gt;<i> 
</I>&gt;<i> 2. Log in with pw1 as resource1, log in with pw1 as resource2, change 
</I>&gt;<i> password to pw2 from resource2 (confirmed as changed in database), log 
</I>&gt;<i> out of resource2, leave resource1 logged in, try to log in with pw2 as 
</I>&gt;<i> resource2, get 401 error (but can successfully log in with pw1 as 
</I>&gt;<i> resource2). Once I log out of resource1 (no more connected resources), I 
</I>&gt;<i> am then able to successfully log in with pw2.
</I>&gt;<i> 
</I>&gt;<i> So it seems that there is some kind of session caching happening, even 
</I>&gt;<i> though pgmillard confirms that we have all xdb caching turned off. Is 
</I>&gt;<i> there a way to configure jabberd 1.4 to not cache anything, do we need 
</I>&gt;<i> to finally and definitively upgrade to 1.4.3, or is this a bug?
</I>&gt;<i> 
</I>&gt;<i> Thanks!
</I>&gt;<i> 
</I>&gt;<i> /psa
</I>&gt;<i>
</I>

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="021144.html">[jdev] jabberd 1.4.x password changing
</A></li>
	<LI>Next message: <A HREF="021146.html">[jdev] anonymous login redux
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21145">[ date ]</a>
              <a href="thread.html#21145">[ thread ]</a>
              <a href="subject.html#21145">[ subject ]</a>
              <a href="author.html#21145">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://mail.jabber.org/mailman/listinfo/jdev">More information about the JDev
mailing list</a><br>
</body></html>
