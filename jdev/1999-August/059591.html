<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [JDEV] Problems with open() calls?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:jdev%40jabber.org?Subject=Re%3A%20%5BJDEV%5D%20Problems%20with%20open%28%29%20calls%3F&In-Reply-To=%3CIJAPCHACOOAIAAAA%40my-deja.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="059590.html">
   <LINK REL="Next"  HREF="059602.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[JDEV] Problems with open() calls?</H1>
    <B>Thomas D. Charron</B> 
    <A HREF="mailto:jdev%40jabber.org?Subject=Re%3A%20%5BJDEV%5D%20Problems%20with%20open%28%29%20calls%3F&In-Reply-To=%3CIJAPCHACOOAIAAAA%40my-deja.com%3E"
       TITLE="[JDEV] Problems with open() calls?">tcharron at my-deja.com
       </A><BR>
    <I>Fri Aug  6 13:52:10 CDT 1999</I>
    <P><UL>
        <LI>Previous message: <A HREF="059590.html">[JDEV] Problems with open() calls?
</A></li>
        <LI>Next message: <A HREF="059602.html">[JDEV] Client scriping language
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#59591">[ date ]</a>
              <a href="thread.html#59591">[ thread ]</a>
              <a href="subject.html#59591">[ subject ]</a>
              <a href="author.html#59591">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>  Answering my own question..  ;-P

  Currently, the open calls are:

jabber/transports/jabber:
mod_basic.c:    fd = open(file, O_WRONLY | O_CREAT, S_IRWXU);
mod_basic.c:    fd = open(file, O_RDWR | O_CREAT, S_IRWXU);
utils.c:                        log = open(jpair_getval(etc.vars, &quot;errorlog&quot;), O_WRONLY | O_CREAT | O_APPEND);

jabber/etherx:
log.c:                  log = open(jpair_getval(etc.vars, &quot;log&quot;), O_WRONLY | O_CREAT | O_APPEND);

  The open calls that use either open or create still need to be passed S_IRWXU, in case they need to create the file..  That's why the roster files get created fine and dandy, but the LOG files are funny looking.. ;-P
---
Thomas Charron

On Fri, 06 Aug 1999 11:44:01   Thomas D. Charron wrote:
&gt;<i>  Perhaps it's just me, but I've notices that repeatedly, jabbertransport and etherx do funny things with file permisions on logfiles and username.offline.xml files..  Out of curiousity, could this be something funny with using the open function call vs fopen?  Here is an example:
</I>&gt;<i>
</I>&gt;<i>-rw---Sr--   1 tcha     tcha          742 Aug  6 12:18 error.log
</I>&gt;<i>-rw---Sr--   1 tcha     tcha          198 Aug  6 12:18 etherx.log
</I>&gt;<i>
</I>&gt;<i>  Now, it shouldn't be looking like that, but it does..  Is it possible that O_CREAT, etc, flags passed are being trounced by another include file somewhere?
</I>&gt;<i>
</I>&gt;<i>  For that matter what file DEFINES O_CREAT..  I just tried to grep for it, but to no avail..
</I>&gt;<i>
</I>&gt;<i>  Any ideas?
</I>&gt;<i>---
</I>&gt;<i>Thomas Charron
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>--== Sent via Deja.com <A HREF="http://www.deja.com/">http://www.deja.com/</A> ==--
</I>&gt;<i>Share what you know. Learn what you don't.
</I>&gt;<i>
</I>&gt;<i>_______________________________________________
</I>&gt;<i>jdev mailing list
</I>&gt;<i><A HREF="http://mail.jabber.org/mailman/listinfo/jdev">jdev at jabber.org</A>
</I>&gt;<i><A HREF="http://mailman.jabber.org/listinfo/jdev">http://mailman.jabber.org/listinfo/jdev</A>
</I>&gt;<i>
</I>

--== Sent via Deja.com <A HREF="http://www.deja.com/">http://www.deja.com/</A> ==--
Share what you know. Learn what you don't.


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="059590.html">[JDEV] Problems with open() calls?
</A></li>
	<LI>Next message: <A HREF="059602.html">[JDEV] Client scriping language
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#59591">[ date ]</a>
              <a href="thread.html#59591">[ thread ]</a>
              <a href="subject.html#59591">[ subject ]</a>
              <a href="author.html#59591">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://mail.jabber.org/mailman/listinfo/jdev">More information about the JDev
mailing list</a><br>
</body></html>
