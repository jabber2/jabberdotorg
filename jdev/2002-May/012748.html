<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [JDEV] Dialup and laptop users, lost packets, and faulty presence info
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:jdev%40jabber.org?Subject=%5BJDEV%5D%20Dialup%20and%20laptop%20users%2C%20lost%20packets%2C%20and%20faulty%20presence%0A%20info&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="012784.html">
   <LINK REL="Next"  HREF="012749.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[JDEV] Dialup and laptop users, lost packets, and faulty presence info</H1>
    <B>Nathan Sharp</B> 
    <A HREF="mailto:jdev%40jabber.org?Subject=%5BJDEV%5D%20Dialup%20and%20laptop%20users%2C%20lost%20packets%2C%20and%20faulty%20presence%0A%20info&In-Reply-To="
       TITLE="[JDEV] Dialup and laptop users, lost packets, and faulty presence info">spamnps+jabber at phoenix-int.com
       </A><BR>
    <I>Thu May 16 16:59:06 CDT 2002</I>
    <P><UL>
        <LI>Previous message: <A HREF="012784.html">[JDEV] Dialup and laptop users, lost packets, and faulty presence info
</A></li>
        <LI>Next message: <A HREF="012749.html">[JDEV] Dialup and laptop users, lost packets, and faulty presence info
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12748">[ date ]</a>
              <a href="thread.html#12748">[ thread ]</a>
              <a href="subject.html#12748">[ subject ]</a>
              <a href="author.html#12748">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>David,
   I had originally thought that, but was having difficulty parsing
through the jabberd code, plus I figured an external component would be
a configurable tool that I could publish back somewhere, if it worked.
  Regardless, your message gave me inspiration to parse through more code
and once I found the right place - pthsock/client.c - it was incredibly
easy to add just that in.  I've added it in as a configurable option and
am pretty sure that with just a little more work I can even have it skip
heartbeats when there has been recent activity on the socket (saving
bandwidth and resources).  Once I have a chance to set up a test server
and run it for a while to prove the point, I'll submit a patch back here.
   So the questions become:
1) How different is the 1.5 code?  (don't answer that, I can take a look
later myself )
2) What does it take to get my patch into the main distribution?

   Anyhow, thanks for the thoughts!
    Nathan (aka tinman on <A HREF="http://mail.jabber.org/mailman/listinfo/jdev">jdev at conference.jabber.org</A>)

David Waite wrote:

 &gt; I would recommend a heartbeat which instead does what clients have
 &gt; done for a while - sends a whitespace character in-between XML
 &gt; packets. You would need to modify the client connection piece to do
 &gt; this (c2s/jadc2s/jpoll/dpsm/whatever); but it would be significantly
 &gt; less intrusive to a client than a separate component sending new XML
 &gt; elements. Rather than having the clients reply to this message, their
 &gt; TCP/IP stack will just ACK the new packet. Failure will result in the
 &gt; stack of the server recognising the socket as dead, which will be
 &gt; treated just like a (clean) disconnect is now.
 &gt;
 &gt; -David Waite
 &gt;



-- 
Nathan P Sharp
Phoenix Integration
1715 Pratt Dr
Suite 2000
540-961-7215
540-961-5831 (fax)


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="012784.html">[JDEV] Dialup and laptop users, lost packets, and faulty presence info
</A></li>
	<LI>Next message: <A HREF="012749.html">[JDEV] Dialup and laptop users, lost packets, and faulty presence info
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12748">[ date ]</a>
              <a href="thread.html#12748">[ thread ]</a>
              <a href="subject.html#12748">[ subject ]</a>
              <a href="author.html#12748">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://mail.jabber.org/mailman/listinfo/jdev">More information about the JDev
mailing list</a><br>
</body></html>
