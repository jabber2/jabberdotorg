<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [JDEV] Heartbeat patch for dialup and laptop users and faulty presence info
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:jdev%40jabber.org?Subject=Re%3A%20%5BJDEV%5D%20Heartbeat%20patch%20for%20dialup%20and%20laptop%20users%20and%20faulty%0A%20presence%20info&In-Reply-To=%3C3CF51D78.7040905%40akuma.org%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="042156.html">
   <LINK REL="Next"  HREF="042165.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[JDEV] Heartbeat patch for dialup and laptop users and faulty presence info</H1>
    <B>David Waite</B> 
    <A HREF="mailto:jdev%40jabber.org?Subject=Re%3A%20%5BJDEV%5D%20Heartbeat%20patch%20for%20dialup%20and%20laptop%20users%20and%20faulty%0A%20presence%20info&In-Reply-To=%3C3CF51D78.7040905%40akuma.org%3E"
       TITLE="[JDEV] Heartbeat patch for dialup and laptop users and faulty presence info">mass at akuma.org
       </A><BR>
    <I>Wed May 29 13:27:04 CDT 2002</I>
    <P><UL>
        <LI>Previous message: <A HREF="042156.html">[JDEV] Heartbeat patch for dialup and laptop users and faulty presence info
</A></li>
        <LI>Next message: <A HREF="042165.html">[JDEV] Heartbeat patch for dialup and laptop users and faulty presence info
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#42161">[ date ]</a>
              <a href="thread.html#42161">[ thread ]</a>
              <a href="subject.html#42161">[ subject ]</a>
              <a href="author.html#42161">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Nathan Sharp wrote:

&gt;<i> <A HREF="http://mail.jabber.org/mailman/listinfo/jdev">admin at jabber.fsinf.de</A> wrote:
</I>&gt;<i>
</I>&gt;&gt;<i> Well, in case anyone has a better idea he is free to contribute. For the
</I>&gt;&gt;<i> time being your solution seems okay especially for it does not need
</I>&gt;&gt;<i> protocol or client changes.
</I>&gt;&gt;<i>
</I>&gt;<i> Just a quick note here.  The solution I submitted as a patch is a PING 
</I>&gt;<i> only solution, which is good because I can implement it now w/o 
</I>&gt;<i> protocol or client changes, although it still has a 10-20 minute 
</I>&gt;<i> window for noticing disconnects.  The solution I'm proposing is a 
</I>&gt;<i> PING/PONG solution which will require changes to both the protocol and 
</I>&gt;<i> clients in order to be useful.  I do plan, however, to make it an 
</I>&gt;<i> optional feature for the client (i.e. the server can deal w/ older 
</I>&gt;<i> clients).  I'm taking note of all this input and will work up a design 
</I>&gt;<i> document when I get a chance (may take a while, maybe not, just 
</I>&gt;<i> depends on my spare time...).
</I>
I do think you can do an optional ping/pong solution - if the client 
does not indicate in some manner they support it, fall back to the 
whitespace manner. They don't get reported offline as quickly.

&gt;&gt;<i> Even with your patch messages may get lost. One should implement sending
</I>&gt;&gt;<i> of an error message or offline storage of the message that failed (if
</I>&gt;&gt;<i> possible).
</I>&gt;&gt;<i>
</I>&gt;<i> Unfortunately, unless the protocol is changed such that the client 
</I>&gt;<i> sends an acknowledgement of receiving a message (this is unlikely to 
</I>&gt;<i> happen), there is no way to capture the lost packets.  The way TCP/IP 
</I>&gt;<i> is implemented, any data that is queued up in the send buffers 
</I>&gt;<i> (possibly on remote computers, remember), is just lost once the 
</I>&gt;<i> connection is noticed as dead.  There is really no way to know the 
</I>&gt;<i> difference between a packet that made it through just before the 
</I>&gt;<i> disconnect to one that didn't make it through just after a disconnect 
</I>&gt;<i> (in my knowledge, which is probably incomplete).  That is one more 
</I>&gt;<i> reason that it is important to notice quickly when a client disconnects. 
</I>
Right; TCP acknowledges receipt by the remote operating system, not by 
the remote application. So you have edge cases where the remote system 
gets the message and processes it without receiving an acknowledgement 
back, and where you get an acknowledgement back but the remote 
application never processes the message (for instance, due to an 
application crash relating to the contents of the message).

-David Waite


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="042156.html">[JDEV] Heartbeat patch for dialup and laptop users and faulty presence info
</A></li>
	<LI>Next message: <A HREF="042165.html">[JDEV] Heartbeat patch for dialup and laptop users and faulty presence info
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#42161">[ date ]</a>
              <a href="thread.html#42161">[ thread ]</a>
              <a href="subject.html#42161">[ subject ]</a>
              <a href="author.html#42161">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://mail.jabber.org/mailman/listinfo/jdev">More information about the JDev
mailing list</a><br>
</body></html>
