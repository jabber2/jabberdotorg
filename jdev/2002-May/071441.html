<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [JDEV] Heartbeat patch for dialup and laptop users and faulty presence info
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:jdev%40jabber.org?Subject=Re%3A%20%5BJDEV%5D%20Heartbeat%20patch%20for%20dialup%20and%20laptop%20users%20and%20faulty%0A%20presence%20info&In-Reply-To=%3C3CF4FFAB.6070902%40phoenix-int.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="071432.html">
   <LINK REL="Next"  HREF="071446.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[JDEV] Heartbeat patch for dialup and laptop users and faulty presence info</H1>
    <B>Nathan Sharp</B> 
    <A HREF="mailto:jdev%40jabber.org?Subject=Re%3A%20%5BJDEV%5D%20Heartbeat%20patch%20for%20dialup%20and%20laptop%20users%20and%20faulty%0A%20presence%20info&In-Reply-To=%3C3CF4FFAB.6070902%40phoenix-int.com%3E"
       TITLE="[JDEV] Heartbeat patch for dialup and laptop users and faulty presence info">spamnps+jabber at phoenix-int.com
       </A><BR>
    <I>Wed May 29 11:19:55 CDT 2002</I>
    <P><UL>
        <LI>Previous message: <A HREF="071432.html">[JDEV] Heartbeat patch for dialup and laptop users and faulty presence info
</A></li>
        <LI>Next message: <A HREF="071446.html">[JDEV] Heartbeat patch for dialup and laptop users and faulty presence info
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#71441">[ date ]</a>
              <a href="thread.html#71441">[ thread ]</a>
              <a href="subject.html#71441">[ subject ]</a>
              <a href="author.html#71441">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE><A HREF="http://mail.jabber.org/mailman/listinfo/jdev">admin at jabber.fsinf.de</A> wrote:

&gt;<i>Well, in case anyone has a better idea he is free to contribute. For the
</I>&gt;<i>time being your solution seems okay especially for it does not need
</I>&gt;<i>protocol or client changes.
</I>&gt;<i>
</I>Just a quick note here.  The solution I submitted as a patch is a PING 
only solution, which is good because I can implement it now w/o protocol 
or client changes, although it still has a 10-20 minute window for 
noticing disconnects.  The solution I'm proposing is a PING/PONG 
solution which will require changes to both the protocol and clients in 
order to be useful.  I do plan, however, to make it an optional feature 
for the client (i.e. the server can deal w/ older clients).  I'm taking 
note of all this input and will work up a design document when I get a 
chance (may take a while, maybe not, just depends on my spare time...).

&gt;<i>Even with your patch messages may get lost. One should implement sending
</I>&gt;<i>of an error message or offline storage of the message that failed (if
</I>&gt;<i>possible).
</I>&gt;<i>
</I>Unfortunately, unless the protocol is changed such that the client sends 
an acknowledgement of receiving a message (this is unlikely to happen), 
there is no way to capture the lost packets.  The way TCP/IP is 
implemented, any data that is queued up in the send buffers (possibly on 
remote computers, remember), is just lost once the connection is noticed 
as dead.  There is really no way to know the difference between a packet 
that made it through just before the disconnect to one that didn't make 
it through just after a disconnect (in my knowledge, which is probably 
incomplete).  That is one more reason that it is important to notice 
quickly when a client disconnects.

  Nathan



</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="071432.html">[JDEV] Heartbeat patch for dialup and laptop users and faulty presence info
</A></li>
	<LI>Next message: <A HREF="071446.html">[JDEV] Heartbeat patch for dialup and laptop users and faulty presence info
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#71441">[ date ]</a>
              <a href="thread.html#71441">[ thread ]</a>
              <a href="subject.html#71441">[ subject ]</a>
              <a href="author.html#71441">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://mail.jabber.org/mailman/listinfo/jdev">More information about the JDev
mailing list</a><br>
</body></html>
