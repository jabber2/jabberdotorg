<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [JDEV] Heartbeat patch for dialup and laptop users and faulty presence info
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:jdev%40jabber.org?Subject=Re%3A%20%5BJDEV%5D%20Heartbeat%20patch%20for%20dialup%20and%20laptop%20users%20and%20faulty%20presence%20info&In-Reply-To=%3CLingoMAIL.290502170216.0582.thoutbeckers%40splendo.nl%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="042196.html">
   <LINK REL="Next"  HREF="042164.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[JDEV] Heartbeat patch for dialup and laptop users and faulty presence info</H1>
    <B>Tijl Houtbeckers</B> 
    <A HREF="mailto:jdev%40jabber.org?Subject=Re%3A%20%5BJDEV%5D%20Heartbeat%20patch%20for%20dialup%20and%20laptop%20users%20and%20faulty%20presence%20info&In-Reply-To=%3CLingoMAIL.290502170216.0582.thoutbeckers%40splendo.nl%3E"
       TITLE="[JDEV] Heartbeat patch for dialup and laptop users and faulty presence info">tijl at druppel.nl
       </A><BR>
    <I>Wed May 29 10:02:16 CDT 2002</I>
    <P><UL>
        <LI>Previous message: <A HREF="042196.html">[JDEV] [Jabberd] Performance
</A></li>
        <LI>Next message: <A HREF="042164.html">[JDEV] Heartbeat patch for dialup and laptop users and faulty presence info
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#42148">[ date ]</a>
              <a href="thread.html#42148">[ thread ]</a>
              <a href="subject.html#42148">[ subject ]</a>
              <a href="author.html#42148">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>---------- Original Message ----------
&gt;<i>Please take note, what I'm suggesting is a configurable option, not a 
</I>&gt;<i>required protocol change.  In fact, in the patch I submitted the 
</I>&gt;<i>heartbeat option is turned off by default (a mistake in my mind, but I 
</I>&gt;<i>wanted to be polite).  
</I>
I think your problem should be fixed as well, but if this is the way I think  it should be 
turned off by default.

&gt;<i>The biggest argument I've heard so far is that ping/pongs would take too 
</I>&gt;<i>much bandwidth.  If your end users would prefer very slightly less 
</I>&gt;<i>bandwidth used yet LOST MESSAGES AND FAULTY PRESENCE info, well, you got 
</I>&gt;<i>different users than mine.
</I>
This is not my argument against it, my argument is that right now there is nothing in 
the jabber protocol that requires a client to respond to any packet within a surthen 
amount of time (expect during login maybe). The only thing it has to do is keep it's 
TCP connection open. This means you can for example buffer the data on the client 
side till the client is available for processing it. (Perhaps this doesn't make sense for a 
desktop instant messaging application but there are lot's of situtations in wich this 
happens, for example a GPRS link). Forcing any kind of ping/pong mechanism on 
these clients will break them in a way you often can't fix.

&gt;<i>So unless some new solution comes up (my ears are open!), I'm going to 
</I>&gt;<i>continue down the ping/pong solution.  If anyone wants to help design 
</I>&gt;<i>this such that minimum bandwidth is consumed, I'd be happy to entertain 
</I>&gt;<i>further discussion along those lines.
</I>
Maybe letting the client indicate that it actually wants to have this kind of monitoring 
(and letting is specify under wich terms, like wich interval) will be the most usefull. It 
can be enabled in the server by default then, without breaking any excisting clients. If 
there is an admin outthere who doesn't want to &quot;waste&quot; bandwidth on proper 
presence info he/she can turn the feature off or set the minimum interval higher.
I also recommend this type of monitoring is done with proper XML, since a lot of the 
bandwidth here goes lost on IP and TCP headers, not the actual content of the 
package (so wether it's &quot; &quot; or &quot;&lt;ping id='123'&gt;&quot; or &quot;&lt;iq id='124' 
type='result'&gt;&lt;pong/&gt;&lt;/iq&gt;&quot; doesn't matter *that* much).

Takes more time to write a patch for though :(


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="042196.html">[JDEV] [Jabberd] Performance
</A></li>
	<LI>Next message: <A HREF="042164.html">[JDEV] Heartbeat patch for dialup and laptop users and faulty presence info
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#42148">[ date ]</a>
              <a href="thread.html#42148">[ thread ]</a>
              <a href="subject.html#42148">[ subject ]</a>
              <a href="author.html#42148">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://mail.jabber.org/mailman/listinfo/jdev">More information about the JDev
mailing list</a><br>
</body></html>
