<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [JDEV] Heartbeat patch for dialup and laptop users and faulty presence info
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:jdev%40jabber.org?Subject=Re%3A%20%5BJDEV%5D%20Heartbeat%20patch%20for%20dialup%20and%20laptop%20users%20and%20faulty%20presence%20info&In-Reply-To=%3CBB7CFA89-7370-11D6-9C8D-003065E5F91E%40mac.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="042160.html">
   <LINK REL="Next"  HREF="042162.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[JDEV] Heartbeat patch for dialup and laptop users and faulty presence info</H1>
    <B>tom_waters at mac.com</B> 
    <A HREF="mailto:jdev%40jabber.org?Subject=Re%3A%20%5BJDEV%5D%20Heartbeat%20patch%20for%20dialup%20and%20laptop%20users%20and%20faulty%20presence%20info&In-Reply-To=%3CBB7CFA89-7370-11D6-9C8D-003065E5F91E%40mac.com%3E"
       TITLE="[JDEV] Heartbeat patch for dialup and laptop users and faulty presence info">tom_waters at mac.com
       </A><BR>
    <I>Wed May 29 20:58:27 CDT 2002</I>
    <P><UL>
        <LI>Previous message: <A HREF="042160.html">[JDEV] Heartbeat patch for dialup and laptop users and faulty	 presence info
</A></li>
        <LI>Next message: <A HREF="042162.html">[JDEV] [Jabberd] Performance
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#42169">[ date ]</a>
              <a href="thread.html#42169">[ thread ]</a>
              <a href="subject.html#42169">[ subject ]</a>
              <a href="author.html#42169">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>how does this work if you can't even be sure that the first server 
received the message from the client?

for example, what if the client's ethernet cable was unplugged... the 
client sends the message, the socket buffers the write, the client 
quits,... did the message get delivered?

         sent = send(socketfd, bytes, len, 0);

doesn't return -1 if the remote side hasn't &quot;closed&quot;, if it's just the 
cable unplugged, you don't know whether the bits got there or not.

am i nuts?



On Wednesday, May 29, 2002, at 11:11  AM, Gallo, Felix S. wrote:
&gt;<i> Another poster couldn't figure out how to get guaranteed message
</I>&gt;<i> delivery to work, but it's actually pretty simple:
</I>&gt;<i>
</I>&gt;<i> 1.&#160; User sends guaranteed message, with checksum, retry count,
</I>&gt;<i> and what-to-do-if-it-gets-stuck.
</I>&gt;<i> 2.&#160; Server receives message, verifies that it's OK.
</I>&gt;<i> 3.&#160; Server optionally passes it on to any intermediate servers,
</I>&gt;<i> handshaking to make sure that the message is received before
</I>&gt;<i> deleting it from local store.
</I>&gt;<i> 4.&#160; If the message is received successfully by the next server
</I>&gt;<i> in the chain, the delivery responsibility passes to that next
</I>&gt;<i> server, and the local server deletes it.
</I>&gt;<i> 5.&#160; If the message can't be passed to the intermediate server,
</I>&gt;<i> the what-to-do-if-it-gets-stuck field is examined (possible
</I>&gt;<i> values might include delete-with-notification, retry-for-a-certain-
</I>&gt;<i> number-of-times, etc.)
</I>&gt;<i> 6.&#160; Upon receipt, you're done.
</I>-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: text/enriched
Size: 1460 bytes
Desc: not available
URL: &lt;<A HREF="https://www.jabber.org/jdev/attachments/20020529/1fe0a463/attachment-0001.bin">https://www.jabber.org/jdev/attachments/20020529/1fe0a463/attachment-0001.bin</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="042160.html">[JDEV] Heartbeat patch for dialup and laptop users and faulty	 presence info
</A></li>
	<LI>Next message: <A HREF="042162.html">[JDEV] [Jabberd] Performance
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#42169">[ date ]</a>
              <a href="thread.html#42169">[ thread ]</a>
              <a href="subject.html#42169">[ subject ]</a>
              <a href="author.html#42169">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://mail.jabber.org/mailman/listinfo/jdev">More information about the JDev
mailing list</a><br>
</body></html>
