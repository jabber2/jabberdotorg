<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [JDEV] Heartbeat patch for dialup and laptop users and faulty presence info
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:jdev%40jabber.org?Subject=Re%3A%20%5BJDEV%5D%20Heartbeat%20patch%20for%20dialup%20and%20laptop%20users%20and%20faulty%0A%20presence%20info&In-Reply-To=%3C3CF43131.1050302%40phoenix-int.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="042131.html">
   <LINK REL="Next"  HREF="042135.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[JDEV] Heartbeat patch for dialup and laptop users and faulty presence info</H1>
    <B>Nathan Sharp</B> 
    <A HREF="mailto:jdev%40jabber.org?Subject=Re%3A%20%5BJDEV%5D%20Heartbeat%20patch%20for%20dialup%20and%20laptop%20users%20and%20faulty%0A%20presence%20info&In-Reply-To=%3C3CF43131.1050302%40phoenix-int.com%3E"
       TITLE="[JDEV] Heartbeat patch for dialup and laptop users and faulty presence info">spamnps+jabber at phoenix-int.com
       </A><BR>
    <I>Tue May 28 20:38:57 CDT 2002</I>
    <P><UL>
        <LI>Previous message: <A HREF="042131.html">[JDEV] Heartbeat patch for dialup and laptop users and faulty presence info
</A></li>
        <LI>Next message: <A HREF="042135.html">[JDEV] Heartbeat patch for dialup and laptop users and faulty presence info
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#42134">[ date ]</a>
              <a href="thread.html#42134">[ thread ]</a>
              <a href="subject.html#42134">[ subject ]</a>
              <a href="author.html#42134">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Thanks so much to Bernd and Perry for backing me up here with better 
arguments that I originally made.  This is incredibly important if you 
have any dial-up users.  I had a case on one of my servers where a user 
showed up as online for more than 12 hours after I know they were 
disconnected!  The solution I've given so far fixes this so that it is 
now down to a maximum of 10-20 minutes (which actually has to do with 
the TCP timeout, since I made a ping only solution).  I'd like to 
eventually make that less than 5 minutes using a ping-pong approach.

I think note should be taken that IRC uses such a ping-pong solution. 
 I'd be willing to bet that AOL, Yahoo, and MSN all include such a 
feature as the TCP timeout logic is severely limited (there was a 
discussion of this point a month ago or so on this list).  

Please note that my code includes logic to NOT send a heartbeat when any 
regular packets to or from the client has happened in the last heartbeat 
timeout.  This will limit added bandwidth considerably, which should be 
small compared to the size of all the message and presence information 
that is sent via Jabber.

Perhaps Matthias Wimmer would be willing to re-run his  traffic analysis 
that he recently posted a second time w/ heartbeats turned on for 
comparison.

  Nathan

Bernd Eckenfels wrote:

&gt;<i>A TCP ping is one thing, to detect reset sockets which are idle. On IRC for
</I>&gt;<i>example in addition to the ping, there is also a pong message required
</I>&gt;<i>within a (configurable time frame). The server will simply disconnect the
</I>&gt;<i>connection of no repsonse is received. this requires a echo protocol
</I>&gt;<i>function but is IMHO quite important.
</I>&gt;<i>
</I>&gt;<i>  
</I>&gt;<i>
</I>



</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="042131.html">[JDEV] Heartbeat patch for dialup and laptop users and faulty presence info
</A></li>
	<LI>Next message: <A HREF="042135.html">[JDEV] Heartbeat patch for dialup and laptop users and faulty presence info
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#42134">[ date ]</a>
              <a href="thread.html#42134">[ thread ]</a>
              <a href="subject.html#42134">[ subject ]</a>
              <a href="author.html#42134">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://mail.jabber.org/mailman/listinfo/jdev">More information about the JDev
mailing list</a><br>
</body></html>
