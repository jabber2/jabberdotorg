<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [JDEV] Dialup and laptop users, lost packets, and faulty presence info
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:jdev%40jabber.org?Subject=Re%3A%20%5BJDEV%5D%20Dialup%20and%20laptop%20users%2C%20lost%20packets%2C%20and%20faulty%20presence%0A%20info&In-Reply-To=%3C3CE4269C.1060704%40phoenix-int.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="071321.html">
   <LINK REL="Next"  HREF="071323.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[JDEV] Dialup and laptop users, lost packets, and faulty presence info</H1>
    <B>Nathan Sharp</B> 
    <A HREF="mailto:jdev%40jabber.org?Subject=Re%3A%20%5BJDEV%5D%20Dialup%20and%20laptop%20users%2C%20lost%20packets%2C%20and%20faulty%20presence%0A%20info&In-Reply-To=%3C3CE4269C.1060704%40phoenix-int.com%3E"
       TITLE="[JDEV] Dialup and laptop users, lost packets, and faulty presence info">nsharp at phoenix-int.com
       </A><BR>
    <I>Thu May 16 16:37:32 CDT 2002</I>
    <P><UL>
        <LI>Previous message: <A HREF="071321.html">[JDEV] Dialup and laptop users, lost packets, and faulty presence info
</A></li>
        <LI>Next message: <A HREF="071323.html">[JDEV] Dialup and laptop users, lost packets, and faulty presence info
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#71359">[ date ]</a>
              <a href="thread.html#71359">[ thread ]</a>
              <a href="subject.html#71359">[ subject ]</a>
              <a href="author.html#71359">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>David,
  I had originally thought that, but was having difficulty parsing 
through the jabberd code, plus I figured an external component would be 
a configurable tool that I could publish back somewhere, if it worked. 
 Regardless, your message gave me inspiration to parse through more code 
and once I found the right place - pthsock/client.c - it was incredibly 
easy to add just that in.  I've added it in as a configurable option and 
am pretty sure that with just a little more work I can even have it skip 
heartbeats when there has been recent activity on the socket (saving 
bandwidth and resources).  Once I have a chance to set up a test server 
and run it for a while to prove the point, I'll submit a patch back here.  
  So the questions become:
1) How different is the 1.5 code?  (don't answer that, I can take a look 
later myself )
2) What does it take to get my patch into the main distribution?

  Anyhow, thanks for the thoughts!  
   Nathan (aka tinman on <A HREF="http://mail.jabber.org/mailman/listinfo/jdev">jdev at conference.jabber.org</A>)

David Waite wrote:

&gt;<i> I would recommend a heartbeat which instead does what clients have 
</I>&gt;<i> done for a while - sends a whitespace character in-between XML 
</I>&gt;<i> packets. You would need to modify the client connection piece to do 
</I>&gt;<i> this (c2s/jadc2s/jpoll/dpsm/whatever); but it would be significantly 
</I>&gt;<i> less intrusive to a client than a separate component sending new XML 
</I>&gt;<i> elements. Rather than having the clients reply to this message, their 
</I>&gt;<i> TCP/IP stack will just ACK the new packet. Failure will result in the 
</I>&gt;<i> stack of the server recognising the socket as dead, which will be 
</I>&gt;<i> treated just like a (clean) disconnect is now.
</I>&gt;<i>
</I>&gt;<i> -David Waite
</I>&gt;<i>
</I>


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="071321.html">[JDEV] Dialup and laptop users, lost packets, and faulty presence info
</A></li>
	<LI>Next message: <A HREF="071323.html">[JDEV] Dialup and laptop users, lost packets, and faulty presence info
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#71359">[ date ]</a>
              <a href="thread.html#71359">[ thread ]</a>
              <a href="subject.html#71359">[ subject ]</a>
              <a href="author.html#71359">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://mail.jabber.org/mailman/listinfo/jdev">More information about the JDev
mailing list</a><br>
</body></html>
