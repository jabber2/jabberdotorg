<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [JDEV] Q: oob and direct P2P communications
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:jdev%40jabber.org?Subject=Re%3A%20%5BJDEV%5D%20Q%3A%20oob%20and%20direct%20P2P%20communications&In-Reply-To=%3C5.0.2.1.2.20010330105804.02f6cb60%40world.std.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="065434.html">
   <LINK REL="Next"  HREF="065436.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[JDEV] Q: oob and direct P2P communications</H1>
    <B>Oliver Jones</B> 
    <A HREF="mailto:jdev%40jabber.org?Subject=Re%3A%20%5BJDEV%5D%20Q%3A%20oob%20and%20direct%20P2P%20communications&In-Reply-To=%3C5.0.2.1.2.20010330105804.02f6cb60%40world.std.com%3E"
       TITLE="[JDEV] Q: oob and direct P2P communications">oj at world.std.com
       </A><BR>
    <I>Fri Mar 30 10:11:44 CST 2001</I>
    <P><UL>
        <LI>Previous message: <A HREF="065434.html">[JDEV] Q: oob and direct P2P communications
</A></li>
        <LI>Next message: <A HREF="065436.html">[JDEV] xdb + new namespace
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#65464">[ date ]</a>
              <a href="thread.html#65464">[ thread ]</a>
              <a href="subject.html#65464">[ subject ]</a>
              <a href="author.html#65464">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>At 10:03 AM 3/28/01 -0800, Jens Alfke wrote:


&gt;<i>As I understand it the flow of control looks like this:
</I>&gt;<i>* Sender opens a TCP port on its host and listens for HTTP connections on it.
</I>&gt;<i>* Sender sends a Jabber message to receiver with an 'oob'-namespace 
</I>&gt;<i>element containing an HTTP URL pointing to its own IP address and the 
</I>&gt;<i>opened port.
</I>&gt;<i>* Receiver initiates an HTTP download via the URL.
</I>&gt;<i>* Sender gets the HTTP connection on the port it opened and sends the file 
</I>&gt;<i>data.
</I>&gt;<i>* Both sides close the connection, and the sender stops listening on that 
</I>&gt;<i>port.
</I>
The issue with peer-to-peer transport is that the acceptor of the 
peer-to-peer TCP connection (probably but not definitely also the recipient 
of the transfer) needs to be visible on the network to the initiator of the 
connection.

When the acceptor is behind a firewall or a NAT (ipmasq), that's a problem.

The JabberCOM client library  contains support for initiating OUTBOUND 
connections (from the client to a Jabber server) via a SOCKS proxy server.

The SOCKS proxy server spec also contains a protocol by which an 
application can accept INBOUND connections through the proxy server.  Both 
the proxy server implementations I know of implement this correctly.  For 
what it's worth, the Napster client supports this method of exposing an 
internal server to an external client, and, as we all know, works really well.

Here's my brief bibliography on SOCKS, for your information.

1.      General Information on SOCKS proxy servers and 
protocols:  <A HREF="http://www.socks.nec.com">http://www.socks.nec.com</A>
2.      SOCKS version 5 protocol specification, 
RFC1928  <A HREF="http://www.socks.nec.com/rfc/rfc1928.txt">http://www.socks.nec.com/rfc/rfc1928.txt</A>
3.      SOCKS version 5 Username/password authentication, RFC1929 
<A HREF="http://www.socks.nec.com/rfc/rfc1929.txt">http://www.socks.nec.com/rfc/rfc1929.txt</A>
4.      SOCKS version 4 Protocol 
<A HREF="http://www.socks.nec.com/protocol/socks4.protocol">http://www.socks.nec.com/protocol/socks4.protocol</A>
5.      SOCKS Technology background paper. 
<A HREF="http://www.eborder.nec.com/Library/techgrounder.pdf">http://www.eborder.nec.com/Library/techgrounder.pdf</A>
6.      Dante open-source SOCKS proxy server implementation: 
<A HREF="http://www.inet.no/dante/">http://www.inet.no/dante/</A>
7.      Squid open-source HTTP proxy server implementation:
<A HREF="http://www.squid-cache.org/Versions/v2/">http://www.squid-cache.org/Versions/v2/</A>

Regards,
Oliver Jones



</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="065434.html">[JDEV] Q: oob and direct P2P communications
</A></li>
	<LI>Next message: <A HREF="065436.html">[JDEV] xdb + new namespace
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#65464">[ date ]</a>
              <a href="thread.html#65464">[ thread ]</a>
              <a href="subject.html#65464">[ subject ]</a>
              <a href="author.html#65464">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://mail.jabber.org/mailman/listinfo/jdev">More information about the JDev
mailing list</a><br>
</body></html>
