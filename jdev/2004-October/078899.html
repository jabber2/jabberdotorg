<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [jdev] tcp acknowledged sequence number
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:jdev%40jabber.org?Subject=Re%3A%20%5Bjdev%5D%20tcp%20acknowledged%20sequence%20number&In-Reply-To=%3Copsfrrpgh1qj7son%40smtp.chello.nl%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="078898.html">
   <LINK REL="Next"  HREF="078900.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[jdev] tcp acknowledged sequence number</H1>
    <B>Tijl Houtbeckers</B> 
    <A HREF="mailto:jdev%40jabber.org?Subject=Re%3A%20%5Bjdev%5D%20tcp%20acknowledged%20sequence%20number&In-Reply-To=%3Copsfrrpgh1qj7son%40smtp.chello.nl%3E"
       TITLE="[jdev] tcp acknowledged sequence number">thoutbeckers at splendo.com
       </A><BR>
    <I>Tue Oct 12 13:16:18 CDT 2004</I>
    <P><UL>
        <LI>Previous message: <A HREF="078898.html">[jdev] tcp acknowledged sequence number
</A></li>
        <LI>Next message: <A HREF="078900.html">[jdev] tcp acknowledged sequence number
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#78899">[ date ]</a>
              <a href="thread.html#78899">[ thread ]</a>
              <a href="subject.html#78899">[ subject ]</a>
              <a href="author.html#78899">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Tue, 12 Oct 2004 21:31:46 +0400, Alexey Nezhdanov &lt;<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">snake at penza-gsm.ru</A>&gt;  
wrote:

&gt;<i> Hello. Sorry slightly offtopic question.
</I>&gt;<i>
</I>&gt;<i> I need to know which data is reliably delivered to the other party for my
</I>&gt;<i> currently developed jabber server.
</I>&gt;<i> If the client silently looses it's connection server will not notice
</I>&gt;<i> it and will continue to send messages to it during all the time of tcp
</I>&gt;<i> timeout.
</I>&gt;<i> Currently we know this as &quot;blackhole effect&quot; - if you will loose  
</I>&gt;<i> connection
</I>&gt;<i> you will risk loose messages that will be sent to you during tcp timeout  
</I>&gt;<i> time
</I>&gt;<i> window.
</I>
How reliable do you want this to be? Only clients connected directly to  
your server will benefit from the technique you suggest. Most proxies will  
still experience the &quot;blackhole&quot; effect. That includes some SOCKS proxies,  
transparant JEP-25 proxies, GPRS APNs etc. Also don't forget that even if  
both clients talking are connected directly through a TCP socket with your  
server and one client doesn't use simulair techniques in a conversation  
messages could still end up in the &quot;black hole&quot;.

&gt;<i> When time out will be hit - connection will broke so I need to know
</I>&gt;<i> wich packet was delivered last and wich were just dropped by tcp/ip  
</I>&gt;<i> stack to
</I>&gt;<i> re-send them later when client come back online.
</I>&gt;<i>
</I>&gt;<i> I know that such info can be obtained from tcp's acknowledged sequence  
</I>&gt;<i> number
</I>&gt;<i> but I haven't found how to access it.
</I>
I think people will be more able to help you if you state on what platform  
this is on. Some platforms will definatly not provide you with this  
information. Some platform also work with an &quot;internal&quot; blackhole. Data  
and such is buffered before sending, and while you might get an error or  
exception when trying to send some more data, you won't know what happend  
to whatever was still in the buffer.

In the end, if you want to provide your users a reliable infrastructure, a  
Jabber protocol level solution is needed. For end-to-end this can be done  
with JEP-0022, for hop to hop (easy to implement since you have to do no  
real tracking) there is the JEP-ACK initiative which was discussed a while  
back on SJIG. Either would be more reliable than relying on the TCP layer,  
but it's still not a bad idea to implement that as well, since it will  
work with all existing clients. Just remember it'll only give you *some*  
extra reliability in *some* of the cases.

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="078898.html">[jdev] tcp acknowledged sequence number
</A></li>
	<LI>Next message: <A HREF="078900.html">[jdev] tcp acknowledged sequence number
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#78899">[ date ]</a>
              <a href="thread.html#78899">[ thread ]</a>
              <a href="subject.html#78899">[ subject ]</a>
              <a href="author.html#78899">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://mail.jabber.org/mailman/listinfo/jdev">More information about the JDev
mailing list</a><br>
</body></html>
