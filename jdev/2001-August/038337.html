<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [JDEV] Two jabber:iq:roster questions
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:jdev%40jabber.org?Subject=Re%3A%20%5BJDEV%5D%20Two%20jabber%3Aiq%3Aroster%20questions&In-Reply-To=%3CFF2AF4D762A0D3119E86009027C39A060BBA4E23%40sea-ex0.starwave.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="038335.html">
   <LINK REL="Next"  HREF="038341.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[JDEV] Two jabber:iq:roster questions</H1>
    <B>Robert Temple</B> 
    <A HREF="mailto:jdev%40jabber.org?Subject=Re%3A%20%5BJDEV%5D%20Two%20jabber%3Aiq%3Aroster%20questions&In-Reply-To=%3CFF2AF4D762A0D3119E86009027C39A060BBA4E23%40sea-ex0.starwave.com%3E"
       TITLE="[JDEV] Two jabber:iq:roster questions">Robert.Temple at dig.com
       </A><BR>
    <I>Thu Aug 16 03:09:42 CDT 2001</I>
    <P><UL>
        <LI>Previous message: <A HREF="038335.html">[JDEV] Two jabber:iq:roster questions
</A></li>
        <LI>Next message: <A HREF="038341.html">[JDEV] Two jabber:iq:roster questions
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#38337">[ date ]</a>
              <a href="thread.html#38337">[ thread ]</a>
              <a href="subject.html#38337">[ subject ]</a>
              <a href="author.html#38337">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>You do have to send both the presence and the jabber:iq:roster 
packets. You can send them in either order.   

I don't think you are ever supposed to send a jabber:iq:roster 
with a subscription attribute.  From what I remember from my 
conversations with temas, the server just ignores that attribute 
if you send it.

About the groups, unfortunately you always have to send the groups
even if you are just changing the name attribute.  If you forget
to send the groups, you will lose them the next time you login.

If I also remember groups correctly, whatever you put in the area for
groups (inside of the item element) is just stored by the server
as is.  You can put whatever XML you want in there.  So if you sent:
&lt;item jid='...'&gt;&lt;foo&gt;abc&lt;/foo&gt;&lt;bar&gt;123&lt;/bar&gt;&lt;/item&gt;, you would
get that back the next time you signin and get your roster.  Of
course if you put something other then groups in there, it would
might break other clients.

-Robert

&gt;<i> -----Original Message-----
</I>&gt;<i> From: Jens Alfke [mailto:<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">jens at mac.com</A>]
</I>&gt;<i> Sent: Wednesday, August 15, 2001 4:21 PM
</I>&gt;<i> To: <A HREF="http://mail.jabber.org/mailman/listinfo/jdev">jdev at jabber.org</A>
</I>&gt;<i> Subject: [JDEV] Two jabber:iq:roster questions
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> I'm trying to improve my roster support by storing the actual 
</I>&gt;<i> names in 
</I>&gt;<i> addition to the jids. I have two questions:
</I>&gt;<i> 
</I>&gt;<i> (1) When adding a buddy, do I have to first send a &lt;presence&gt; 
</I>&gt;<i> element to 
</I>&gt;<i> subscribe, then a jabber:iq:roster &quot;set&quot; to add a name? I 
</I>&gt;<i> can't specify 
</I>&gt;<i> the real name in the &lt;presence&gt; element, and conversely, I 
</I>&gt;<i> don't think 
</I>&gt;<i> simply changing the 'subscription' mode in a roster element will 
</I>&gt;<i> actually cause a subscription attempt to occur, right? This 
</I>&gt;<i> seems sort 
</I>&gt;<i> of kludgy.
</I>&gt;<i> 
</I>&gt;<i> (2) When sending a roster &quot;set&quot;, can I just skip the fields I 
</I>&gt;<i> don't want 
</I>&gt;<i> to change? Ideally I'd just like to send:
</I>&gt;<i> 	&lt;iq type=&quot;set&quot;&gt;
</I>&gt;<i> 		&lt;query xmlns=&quot;jabber:iq&quot;roster&quot;&gt;
</I>&gt;<i> 			&lt;item jid=&quot;<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">snej at jabber.org</A>&quot;
</I>&gt;<i> 			      name=&quot;Jens Alfke&quot;/&gt;
</I>&gt;<i> 		&lt;/query&gt;
</I>&gt;<i> 	&lt;/iq&gt;
</I>&gt;<i> but I'm afraid that omitting the 'group' and 'subscription' elements 
</I>&gt;<i> might clear their values.
</I>&gt;<i> 
</I>&gt;<i> --Jens
</I>&gt;<i> 
</I>&gt;<i> _______________________________________________
</I>&gt;<i> jdev mailing list
</I>&gt;<i> <A HREF="http://mail.jabber.org/mailman/listinfo/jdev">jdev at jabber.org</A>
</I>&gt;<i> <A HREF="http://mailman.jabber.org/listinfo/jdev">http://mailman.jabber.org/listinfo/jdev</A>
</I>&gt;<i> 
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="https://www.jabber.org/jdev/attachments/20010816/5d0c3c14/attachment-0001.htm">https://www.jabber.org/jdev/attachments/20010816/5d0c3c14/attachment-0001.htm</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="038335.html">[JDEV] Two jabber:iq:roster questions
</A></li>
	<LI>Next message: <A HREF="038341.html">[JDEV] Two jabber:iq:roster questions
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#38337">[ date ]</a>
              <a href="thread.html#38337">[ thread ]</a>
              <a href="subject.html#38337">[ subject ]</a>
              <a href="author.html#38337">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://mail.jabber.org/mailman/listinfo/jdev">More information about the JDev
mailing list</a><br>
</body></html>
