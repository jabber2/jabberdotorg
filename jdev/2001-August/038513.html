<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [JDEV] Buddy Icon (Avatar) Proposal
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:jdev%40jabber.org?Subject=Re%3A%20%5BJDEV%5D%20Buddy%20Icon%20%28Avatar%29%20Proposal&In-Reply-To=%3C008e01c131a6%247f8d3fa0%247900a8c0%40genesis.adtech.internet.ibm.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="038512.html">
   <LINK REL="Next"  HREF="038514.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[JDEV] Buddy Icon (Avatar) Proposal</H1>
    <B>Julian Missig</B> 
    <A HREF="mailto:jdev%40jabber.org?Subject=Re%3A%20%5BJDEV%5D%20Buddy%20Icon%20%28Avatar%29%20Proposal&In-Reply-To=%3C008e01c131a6%247f8d3fa0%247900a8c0%40genesis.adtech.internet.ibm.com%3E"
       TITLE="[JDEV] Buddy Icon (Avatar) Proposal">julian at jabber.org
       </A><BR>
    <I>Thu Aug 30 17:52:38 CDT 2001</I>
    <P><UL>
        <LI>Previous message: <A HREF="038512.html">[JDEV] Buddy icon support?
</A></li>
        <LI>Next message: <A HREF="038514.html">[JDEV] Buddy Icon (Avatar) Proposal
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#38513">[ date ]</a>
              <a href="thread.html#38513">[ thread ]</a>
              <a href="subject.html#38513">[ subject ]</a>
              <a href="author.html#38513">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>The proposal we put together a while ago is available at
<A HREF="http://temas.dyndns.org/~temas/buddy_icons.txt">http://temas.dyndns.org/~temas/buddy_icons.txt</A> - pasted here for
convenience. Gabber should hopefully support this soon-ish. :)

A simple method to support small buddy icons in Jabber has been an often
requested feature.  Here is a proposal that was generated for how this could
be
achieved.

First, the requirements on the image.  The image should be a 50 x 50 image
in
either GIF, PNG, or MNG format, as well as under 8k of data.  MNG support is
optional.

To let other clients know that you support the buddy icons and have one
available a new x namespace is sent out with the initial presence.  If the
user
changes the icon, or disables the icon, a new presence update is sent out
with
the correct information.  Examples:

- First login, and user has icon:
    &lt;presence&gt;
      &lt;x xmlns='jabber:x:avatar'&gt;
        &lt;hash&gt;00000000000000000000000000000000000000000&lt;/hash&gt;
      &lt;/x&gt;
    &lt;/presence&gt;

- User changes their icon:
    &lt;presence&gt;
      &lt;x xmlns='jabber:x:avatar'&gt;
        &lt;hash&gt;1111111111111111111111111111111111111111&lt;/hash&gt;
      &lt;/x&gt;
    &lt;/presence&gt;

- User disables their icon:
    &lt;presence&gt;
      &lt;x xmlns='jabber:x:avatar'/&gt;
    &lt;/presence&gt;

The hash is the SHA1 digest of the icon's data, and is sent so that the
client
can store user images across sessions and not have to request the icon as
often.
The actual icon request is in a new IQ namespace:

- Request the icon:
    &lt;iq id='1' type='get' to='<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">user at server</A>/resource'&gt;
      &lt;query xmlns='jabber:iq:avatar'/&gt;
    &lt;/iq&gt;

- Sending the icon:
    &lt;iq id='1' type='result' to='<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">user at server</A>/resource'&gt;
      &lt;query xmlns='jabber:iq:avatar'&gt;
        &lt;data type='gif|png|mng'&gt;
          Base64 Encoded Data Here
        &lt;/data&gt;
      &lt;/query&gt;
    &lt;/iq&gt;




</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="038512.html">[JDEV] Buddy icon support?
</A></li>
	<LI>Next message: <A HREF="038514.html">[JDEV] Buddy Icon (Avatar) Proposal
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#38513">[ date ]</a>
              <a href="thread.html#38513">[ thread ]</a>
              <a href="subject.html#38513">[ subject ]</a>
              <a href="author.html#38513">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://mail.jabber.org/mailman/listinfo/jdev">More information about the JDev
mailing list</a><br>
</body></html>
