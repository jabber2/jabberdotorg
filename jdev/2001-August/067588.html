<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [JDEV] Roster vs. Presence
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:jdev%40jabber.org?Subject=Re%3A%20%5BJDEV%5D%20Roster%20vs.%20Presence&In-Reply-To=%3CBF6CCBA0-9006-11D5-986E-0030657FAB12%40apple.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="067586.html">
   <LINK REL="Next"  HREF="067587.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[JDEV] Roster vs. Presence</H1>
    <B>jens at mac.com</B> 
    <A HREF="mailto:jdev%40jabber.org?Subject=Re%3A%20%5BJDEV%5D%20Roster%20vs.%20Presence&In-Reply-To=%3CBF6CCBA0-9006-11D5-986E-0030657FAB12%40apple.com%3E"
       TITLE="[JDEV] Roster vs. Presence">jens at mac.com
       </A><BR>
    <I>Mon Aug 13 11:17:53 CDT 2001</I>
    <P><UL>
        <LI>Previous message: <A HREF="067586.html">[JDEV] Roster vs. Presence
</A></li>
        <LI>Next message: <A HREF="067587.html">[JDEV] What about the resource?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#67588">[ date ]</a>
              <a href="thread.html#67588">[ thread ]</a>
              <a href="subject.html#67588">[ subject ]</a>
              <a href="author.html#67588">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Sunday, August 12, 2001, at 08:58 PM, Paul Vet wrote:

&gt;<i> To do the same process in Jabber, what is necessary?  I see a &lt;presence&gt;
</I>&gt;<i> subscribe action, and there's seperate roster stuff.  So to get the full
</I>&gt;<i> functionality of a user, do I add them to the roster, then send a 
</I>&gt;<i> presence
</I>&gt;<i> subsctiption request?
</I>
No, just send the &lt;presence type=&quot;subscribe&quot;&gt; to request a subscription. 
You'll get a different presence element back as confirmation or denial. 
If the subscription succeeds you will _also_ get a roster set element.

This stuff confused me a lot too, at first. The jabber:iq:roster stuff 
is for managing the roster (=buddy list) since it's shared between 
multiple machines. You can have people on your roster whose presence 
you're not subscribed to, so it's not isomorphic to your set of 
subscriptions (although deleting someone from the roster will 
unsubscribe you from their status.)

You can basically drive the management of your GUI buddy list from the 
roster. At login request the entire roster and use it to fill in the GUI 
list. When you receive notifications of changes to the roster, update 
the list accordingly. That way multiple clients logged into the same 
account will stay in sync.

The one thing to watch out for is to be careful when deleting someone 
from the roster. If they have a subscription to _your_ status and you 
simply remove them from your roster, they lose the subscription. You 
shouldn't do this inadvertently or you'll look rude! Instead, if you're 
removing them from your buddy list, you just change the subscription 
type from &quot;both&quot; to &quot;from&quot;.

--Jens


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="067586.html">[JDEV] Roster vs. Presence
</A></li>
	<LI>Next message: <A HREF="067587.html">[JDEV] What about the resource?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#67588">[ date ]</a>
              <a href="thread.html#67588">[ thread ]</a>
              <a href="subject.html#67588">[ subject ]</a>
              <a href="author.html#67588">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://mail.jabber.org/mailman/listinfo/jdev">More information about the JDev
mailing list</a><br>
</body></html>
