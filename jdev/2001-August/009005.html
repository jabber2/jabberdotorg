<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [JDEV] OOB filetransfer negotiation
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:jdev%40jabber.org?Subject=%5BJDEV%5D%20OOB%20filetransfer%20negotiation&In-Reply-To=004f01c1223c%24b5f06fa0%241400a8c0%40cbas">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="009004.html">
   <LINK REL="Next"  HREF="009006.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[JDEV] OOB filetransfer negotiation</H1>
    <B>Chris Chen</B> 
    <A HREF="mailto:jdev%40jabber.org?Subject=%5BJDEV%5D%20OOB%20filetransfer%20negotiation&In-Reply-To=004f01c1223c%24b5f06fa0%241400a8c0%40cbas"
       TITLE="[JDEV] OOB filetransfer negotiation">ckchris at idream.net
       </A><BR>
    <I>Sat Aug 11 03:41:14 CDT 2001</I>
    <P><UL>
        <LI>Previous message: <A HREF="009004.html">[JDEV] OOB filetransfer negotiation
</A></li>
        <LI>Next message: <A HREF="009006.html">[JDEV] OOB filetransfer negotiation
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9005">[ date ]</a>
              <a href="thread.html#9005">[ thread ]</a>
              <a href="subject.html#9005">[ subject ]</a>
              <a href="author.html#9005">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE><A HREF="http://docs.jabber.org/proto/">http://docs.jabber.org/proto/</A>

Look for the two links to the OOB stuff..

Chris

At 01:06 AM 8/11/2001, you wrote:
&gt;<i>Hello everyone,
</I>&gt;<i>
</I>&gt;<i>I'm trying to figure out how exactly file-transfers get negotiated.
</I>&gt;<i>WinJab seems to use an &lt;iq&gt; with namespace &quot;jabber:iq:oob&quot; containing the
</I>&gt;<i>URL of the file.
</I>&gt;<i>
</I>&gt;<i>Example:
</I>&gt;<i>&lt;iq type='set' to='<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">cbas at localhost</A>/Home' from='<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">winjab at localhost</A>/WinJab'&gt;
</I>&gt;<i>   &lt;query xmlns='jabber:iq:oob'&gt;
</I>&gt;<i>     &lt;url&gt;<A HREF="http://127.0.0.1:5600/foo.html&lt;/url">http://127.0.0.1:5600/foo.html&lt;/url</A>&gt;
</I>&gt;<i>   &lt;/query&gt;
</I>&gt;<i>&lt;/iq&gt;
</I>&gt;<i>(Note that there is no &quot;id&quot; information in the &lt;iq /&gt; element.)
</I>&gt;<i>
</I>&gt;<i>Now <A HREF="http://mail.jabber.org/mailman/listinfo/jdev">cbas at localhost</A>/Home will receive the filetransfer request.
</I>&gt;<i>cbas is asked by his client software if he wants to download.
</I>&gt;<i>- If he chooses to do so, his client starts the HTTP transfer without
</I>&gt;<i>further ado. WinJab is supposed to realise the download has started and stop
</I>&gt;<i>displaying the filerequest dialog, which looks &quot;clumsy&quot; to me but it could
</I>&gt;<i>work.
</I>&gt;<i>- If cbas chooses not to download, what must his client do? Nothing? That
</I>&gt;<i>doesn't seem like a nice thing to do because winjab will still be waiting on
</I>&gt;<i>the other end of the line.
</I>&gt;<i>
</I>&gt;<i>I noticed that the WinJab software sends a deny-notification like so:
</I>&gt;<i>&lt;iq to=&quot;<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">cbas at localhost</A>/Home&quot; type=&quot;error&quot; id=&quot;file_37113969196&quot;&gt;
</I>&gt;<i>   &lt;error code=&quot;406&quot;&gt;Refusing File Send&lt;/error&gt;
</I>&gt;<i>&lt;/iq&gt;
</I>&gt;<i>(Note the seemingly random &quot;id&quot; in the &lt;iq /&gt; element)
</I>&gt;<i>
</I>&gt;<i>Is this documented anywhere?
</I>&gt;<i>The Protocol Overview (section 1.6.9) shows an &lt;iq /&gt; element with namespace
</I>&gt;<i>&quot;jabber:iq:oob&quot; and an &quot;id&quot; property like most message or iq elements. Why
</I>&gt;<i>does WinJab not use this? Why is the ID not used to confirm or deny the
</I>&gt;<i>filetransfer request?
</I>&gt;<i>
</I>&gt;<i>I would appreciate any comments, suggestions or answers and I'm sure other
</I>&gt;<i>people have had problems with this aswell.
</I>&gt;<i>
</I>&gt;<i>Thanks in advance,
</I>&gt;<i>Sebastiaan
</I>&gt;<i>
</I>&gt;<i>_______________________________________________
</I>&gt;<i>jdev mailing list
</I>&gt;<i><A HREF="http://mail.jabber.org/mailman/listinfo/jdev">jdev at jabber.org</A>
</I>&gt;<i><A HREF="http://mailman.jabber.org/listinfo/jdev">http://mailman.jabber.org/listinfo/jdev</A>
</I>
PGP at <A HREF="ldap://certserver.pgp.com/">ldap://certserver.pgp.com/</A>


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="009004.html">[JDEV] OOB filetransfer negotiation
</A></li>
	<LI>Next message: <A HREF="009006.html">[JDEV] OOB filetransfer negotiation
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9005">[ date ]</a>
              <a href="thread.html#9005">[ thread ]</a>
              <a href="subject.html#9005">[ subject ]</a>
              <a href="author.html#9005">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://mail.jabber.org/mailman/listinfo/jdev">More information about the JDev
mailing list</a><br>
</body></html>
