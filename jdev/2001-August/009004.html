<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [JDEV] OOB filetransfer negotiation
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:jdev%40jabber.org?Subject=%5BJDEV%5D%20OOB%20filetransfer%20negotiation&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="009009.html">
   <LINK REL="Next"  HREF="009005.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[JDEV] OOB filetransfer negotiation</H1>
    <B>Sebastiaan 'CBAS' Deckers</B> 
    <A HREF="mailto:jdev%40jabber.org?Subject=%5BJDEV%5D%20OOB%20filetransfer%20negotiation&In-Reply-To="
       TITLE="[JDEV] OOB filetransfer negotiation">cbas at screaming3d.com
       </A><BR>
    <I>Sat Aug 11 03:06:37 CDT 2001</I>
    <P><UL>
        <LI>Previous message: <A HREF="009009.html">[JDEV] Security Jig Meeting
</A></li>
        <LI>Next message: <A HREF="009005.html">[JDEV] OOB filetransfer negotiation
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9004">[ date ]</a>
              <a href="thread.html#9004">[ thread ]</a>
              <a href="subject.html#9004">[ subject ]</a>
              <a href="author.html#9004">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello everyone,

I'm trying to figure out how exactly file-transfers get negotiated.
WinJab seems to use an &lt;iq&gt; with namespace &quot;jabber:iq:oob&quot; containing the
URL of the file.

Example:
&lt;iq type='set' to='<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">cbas at localhost</A>/Home' from='<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">winjab at localhost</A>/WinJab'&gt;
  &lt;query xmlns='jabber:iq:oob'&gt;
    &lt;url&gt;<A HREF="http://127.0.0.1:5600/foo.html&lt;/url">http://127.0.0.1:5600/foo.html&lt;/url</A>&gt;
  &lt;/query&gt;
&lt;/iq&gt;
(Note that there is no &quot;id&quot; information in the &lt;iq /&gt; element.)

Now <A HREF="http://mail.jabber.org/mailman/listinfo/jdev">cbas at localhost</A>/Home will receive the filetransfer request.
cbas is asked by his client software if he wants to download.
- If he chooses to do so, his client starts the HTTP transfer without
further ado. WinJab is supposed to realise the download has started and stop
displaying the filerequest dialog, which looks &quot;clumsy&quot; to me but it could
work.
- If cbas chooses not to download, what must his client do? Nothing? That
doesn't seem like a nice thing to do because winjab will still be waiting on
the other end of the line.

I noticed that the WinJab software sends a deny-notification like so:
&lt;iq to=&quot;<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">cbas at localhost</A>/Home&quot; type=&quot;error&quot; id=&quot;file_37113969196&quot;&gt;
  &lt;error code=&quot;406&quot;&gt;Refusing File Send&lt;/error&gt;
&lt;/iq&gt;
(Note the seemingly random &quot;id&quot; in the &lt;iq /&gt; element)

Is this documented anywhere?
The Protocol Overview (section 1.6.9) shows an &lt;iq /&gt; element with namespace
&quot;jabber:iq:oob&quot; and an &quot;id&quot; property like most message or iq elements. Why
does WinJab not use this? Why is the ID not used to confirm or deny the
filetransfer request?

I would appreciate any comments, suggestions or answers and I'm sure other
people have had problems with this aswell.

Thanks in advance,
Sebastiaan


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="009009.html">[JDEV] Security Jig Meeting
</A></li>
	<LI>Next message: <A HREF="009005.html">[JDEV] OOB filetransfer negotiation
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9004">[ date ]</a>
              <a href="thread.html#9004">[ thread ]</a>
              <a href="subject.html#9004">[ subject ]</a>
              <a href="author.html#9004">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://mail.jabber.org/mailman/listinfo/jdev">More information about the JDev
mailing list</a><br>
</body></html>
