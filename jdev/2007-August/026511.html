<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [jdev] File Transfer Interoperability
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:jdev%40jabber.org?Subject=%5Bjdev%5D%20File%20Transfer%20Interoperability&In-Reply-To=f60b7eb60708072229j2a6eecc8i25fea4e3e0c730fb%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="026510.html">
   <LINK REL="Next"  HREF="026512.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[jdev] File Transfer Interoperability</H1>
    <B>Justin Karneges</B> 
    <A HREF="mailto:jdev%40jabber.org?Subject=%5Bjdev%5D%20File%20Transfer%20Interoperability&In-Reply-To=f60b7eb60708072229j2a6eecc8i25fea4e3e0c730fb%40mail.gmail.com"
       TITLE="[jdev] File Transfer Interoperability">justin-keyword-jabber.093179 at affinix.com
       </A><BR>
    <I>Wed Aug  8 01:40:46 CDT 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="026510.html">[jdev] File Transfer Interoperability
</A></li>
        <LI>Next message: <A HREF="026512.html">[jdev] File Transfer Interoperability
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#26511">[ date ]</a>
              <a href="thread.html#26511">[ thread ]</a>
              <a href="subject.html#26511">[ subject ]</a>
              <a href="author.html#26511">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Tuesday 07 August 2007 10:29 pm, Sergei Golovan wrote:
&gt;<i> On 8/8/07, Peter Saint-Andre &lt;<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">stpeter at jabber.org</A>&gt; wrote:
</I>&gt;<i> &gt; 3. IBB (XEP-0047) is a great fallback if all else fails.
</I>&gt;<i>
</I>&gt;<i> IBB couldn't be a great fallback. It's very inconvenient to use in the
</I>&gt;<i> fillowing circumstances (which don't so rarely happen):
</I>&gt;<i>
</I>&gt;<i> 1) JID A offers file to JID B and waits for the answer (note that to
</I>&gt;<i> answer, B must return an IQ result, and the time interval might be
</I>&gt;<i> quite long).
</I>&gt;<i>
</I>&gt;<i> 2) JID A decides to abort file transfer and closes the
</I>&gt;<i> file-transfer-window-or-whatever-GUI-she-has.
</I>&gt;<i>
</I>&gt;<i> 3) JID B replies with IQ result, but
</I>&gt;<i>         a) File transfer doesn't start (A aborted it)
</I>&gt;<i>         b) JID B will NEVER know about A aborted file transfer and
</I>&gt;<i> will stuck with file-receiving-GUI forever since there's no mechanism
</I>&gt;<i> to recognize this unwilling to transfer.
</I>&gt;<i>
</I>&gt;<i> Wouldn't it better to add an extra query from B to A after stream
</I>&gt;<i> negotiation part? If A doesn't want to send file anymore, she will
</I>&gt;<i> return error to B.
</I>
I wouldn't put this at the IBB level.  A negotiation timeout will work well 
enough there.

The problem you speak of, which does indeed happen a lot, has more to do with 
the SI exchange.  If someone offers a file, and you take too long to accept, 
they may cancel the file offer and you'll never know.  This will happen 
regardless of whether you use S5B or IBB or anything.

In Psi we solved this by adding a timeout to the accept phase.  The sender 
must begin the S5B negotiation within 30 seconds of the receiver 
pressing &quot;Accept&quot;.  If the timeout expires, a dialog is presented to the 
receiver that says something along the lines of &quot;the sender probably 
cancelled&quot;.

I believe Jive added a protocol extension so that the receiver can know if a 
file transfer was cancelled.  Maybe it is worth documenting.

-Justin

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="026510.html">[jdev] File Transfer Interoperability
</A></li>
	<LI>Next message: <A HREF="026512.html">[jdev] File Transfer Interoperability
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#26511">[ date ]</a>
              <a href="thread.html#26511">[ thread ]</a>
              <a href="subject.html#26511">[ subject ]</a>
              <a href="author.html#26511">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://mail.jabber.org/mailman/listinfo/jdev">More information about the JDev
mailing list</a><br>
</body></html>
