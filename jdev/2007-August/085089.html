<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [jdev] File Transfer Interoperability
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:jdev%40jabber.org?Subject=Re%3A%20%5Bjdev%5D%20File%20Transfer%20Interoperability&In-Reply-To=%3C200708081004.14383.justin-keyword-jabber.093179%40affinix.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="085087.html">
   <LINK REL="Next"  HREF="085090.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[jdev] File Transfer Interoperability</H1>
    <B>Justin Karneges</B> 
    <A HREF="mailto:jdev%40jabber.org?Subject=Re%3A%20%5Bjdev%5D%20File%20Transfer%20Interoperability&In-Reply-To=%3C200708081004.14383.justin-keyword-jabber.093179%40affinix.com%3E"
       TITLE="[jdev] File Transfer Interoperability">justin-keyword-jabber.093179 at affinix.com
       </A><BR>
    <I>Wed Aug  8 12:04:14 CDT 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="085087.html">[jdev] File Transfer Interoperability
</A></li>
        <LI>Next message: <A HREF="085090.html">[jdev] File Transfer Interoperability
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#85089">[ date ]</a>
              <a href="thread.html#85089">[ thread ]</a>
              <a href="subject.html#85089">[ subject ]</a>
              <a href="author.html#85089">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Wednesday 08 August 2007 12:22 am, Sergei Golovan wrote:
&gt;<i> On 8/8/07, Justin Karneges &lt;<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">justin-keyword-jabber.093179 at affinix.com</A>&gt; wrote:
</I>&gt;<i> &gt; I wouldn't put this at the IBB level.  A negotiation timeout will work
</I>&gt;<i> &gt; well enough there.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; The problem you speak of, which does indeed happen a lot, has more to do
</I>&gt;<i> &gt; with the SI exchange.  If someone offers a file, and you take too long to
</I>&gt;<i> &gt; accept, they may cancel the file offer and you'll never know.  This will
</I>&gt;<i> &gt; happen regardless of whether you use S5B or IBB or anything.
</I>&gt;<i>
</I>&gt;<i> Any other file transfer method requires opening a socket by the
</I>&gt;<i> receiving party. If the socket can't be opened then the stream is
</I>&gt;<i> obviously invalid. IBB lacks this part, and I think it would be good
</I>&gt;<i> to add it. It would make a file transfer working essentially the same
</I>&gt;<i> regardless of the SI method used.
</I>
If the sender offers a file and then cancels it before the receiver accepts, 
then S5B hasn't even started yet.  In other words, the sender hasn't sent the 
iq-set for the S5B open.  Therefore, there are no sockets to time out, and 
the receiver will wait forever.  Just like with IBB, just like with anything.  
It's an SI issue.

If the sender cancels the file transfer immediately after the receiver 
accepts, then there is a chance that the sender may have started an IBB or 
S5B negotiation.  This is much less common than the SI problem, and I think a 
timeout in IBB here would be enough to solve this situation of bad luck.

FWIW, S5B also doesn't specify any timeouts.  If the receiver goes offline 
instead of replying with an iq, then the sender will wait forever (and this 
is the case today with Psi).  As you can see, endlessly waiting is not a 
feature of just IBB.  We generally don't specify timeouts in XEPs.  For 
example, how long should you wait for a vcard request to be answered?  Today, 
all of these possible timeouts are left to implementations to decide.

-Justin

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="085087.html">[jdev] File Transfer Interoperability
</A></li>
	<LI>Next message: <A HREF="085090.html">[jdev] File Transfer Interoperability
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#85089">[ date ]</a>
              <a href="thread.html#85089">[ thread ]</a>
              <a href="subject.html#85089">[ subject ]</a>
              <a href="author.html#85089">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://mail.jabber.org/mailman/listinfo/jdev">More information about the JDev
mailing list</a><br>
</body></html>
