<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [jdev] Why is my jabber server kicking out a remote user on an	error?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:jdev%40jabber.org?Subject=%5Bjdev%5D%20Why%20is%20my%20jabber%20server%20kicking%20out%20a%20remote%20user%20on%20an%0A%09error%3F&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="027098.html">
   <LINK REL="Next"  HREF="027100.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[jdev] Why is my jabber server kicking out a remote user on an	error?</H1>
    <B>Tom Kalafut</B> 
    <A HREF="mailto:jdev%40jabber.org?Subject=%5Bjdev%5D%20Why%20is%20my%20jabber%20server%20kicking%20out%20a%20remote%20user%20on%20an%0A%09error%3F&In-Reply-To="
       TITLE="[jdev] Why is my jabber server kicking out a remote user on an	error?">tommyk at tridsys.com
       </A><BR>
    <I>Mon Feb 18 15:33:12 CST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="027098.html">[jdev] February 79% OFF
</A></li>
        <LI>Next message: <A HREF="027100.html">[jdev] Why is my jabber server kicking out a remote user on an	error?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#27099">[ date ]</a>
              <a href="thread.html#27099">[ thread ]</a>
              <a href="subject.html#27099">[ subject ]</a>
              <a href="author.html#27099">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>We have developed some middleware that handles some errors.  When it
does, it reverses the from and to elements and adds an error element to
form an &quot;error message&quot;.  But the jabber server is kicking the remote
user out of the chat room where the original message came from.

 

Original message:

 

&lt;message xmlns=&quot;jabber:client&quot;
from=&quot;<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">relroom at conference.cglow.reldomain.com</A>/reluser1&quot; id=&quot;Gh7px-26&quot;
to=&quot;<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">secuser1 at cghigh.secdomain.com</A>/TransVerse&quot; type=&quot;groupchat&quot;
xml:lang=&quot;en&quot;&gt;&lt;body xml:lang=&quot;en&quot;&gt;confidential message 9&lt;/body&gt;&lt;x
xmlns=&quot;urn:us:gov:ic:ism:v2&quot; classification=&quot;U&quot;
declassManualReview=&quot;true&quot; ownerProducer=&quot;USA&quot;
x-label_bg_color=&quot;#006400&quot; x-label_fg_color=&quot;#FFFFFF&quot;
x-portionMarking=&quot;U&quot; x-securityBanner=&quot;UNCLASSIFIED&quot;
xml:lang=&quot;en&quot;/&gt;&lt;addresses
xmlns=&quot;<A HREF="http://jabber.org/protocol/address&quot;">http://jabber.org/protocol/address&quot;</A>&gt;&lt;address delivered=&quot;true&quot;
jid=&quot;<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">reluser1 at cglow.reldomain.com</A>/BuddySpace2.5Plus JFCOM/J9&quot;
type=&quot;to&quot;/&gt;&lt;address delivered=&quot;true&quot;
jid=&quot;<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">secuser1 at cghigh.secdomain.com</A>/TransVerse&quot;
type=&quot;to&quot;/&gt;&lt;/addresses&gt;&lt;/message&gt;

 

[Error detected and handled]

 

Returned &quot;error message&quot;:

 

&lt;message xmlns=&quot;jabber:client&quot;
from=&quot;<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">secuser1 at cghigh.secdomain.com</A>/TransVerse&quot; id=&quot;Gh7px-26&quot;
to=&quot;<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">relroom at conference.cglow.reldomain.com</A>/reluser1&quot; type=&quot;error&quot;
xml:lang=&quot;en&quot;&gt;&lt;body xml:lang=&quot;en&quot;&gt;confidential message
9&lt;/body&gt;&lt;addresses xmlns=&quot;<A HREF="http://jabber.org/protocol/address&quot;">http://jabber.org/protocol/address&quot;</A>&gt;&lt;address
delivered=&quot;true&quot; jid=&quot;<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">reluser1 at cglow.reldomain.com</A>/BuddySpace2.5Plus
JFCOM/J9&quot; type=&quot;to&quot;/&gt;&lt;address delivered=&quot;true&quot;
jid=&quot;<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">secuser1 at cghigh.secdomain.com</A>/TransVerse&quot;
type=&quot;to&quot;/&gt;&lt;/addresses&gt;&lt;error type=&quot;cancel&quot;
code=&quot;404&quot;&gt;&lt;remote-server-not-found
xmlns=&quot;urn:ietf:params:xml:ns:xmpp-stanzas&quot;/&gt;&lt;text
xmlns=&quot;urn:ietf:params:xml:ns:xmpp-stanzas&quot;&gt;Message rejected by
DSG&lt;/text&gt;&lt;/error&gt;&lt;x xmlns=&quot;urn:us:gov:ic:ism:v2&quot; classification=&quot;U&quot;
declassManualReview=&quot;true&quot; ownerProducer=&quot;USA&quot;
x-label_bg_color=&quot;#006400&quot; x-label_fg_color=&quot;#FFFFFF&quot;
x-portionMarking=&quot;U&quot; x-securityBanner=&quot;UNCLASSIFIED&quot;
xml:lang=&quot;en&quot;/&gt;&lt;/message&gt;

 

The next packet that gets sent is a presence-unavailable packet from the
jabber server, kicking out remote user (<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">secuser1 at cghigh.secdomain.com</A>)
from the local chat room (<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">relroom at conference.cglow.reldomain.com</A>):

 

&lt;presence xmlns=&quot;jabber:client&quot;
from=&quot;<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">relroom at conference.cglow.reldomain.com</A>/secuser1&quot; id=&quot;heAq5-27&quot;
to=&quot;<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">reluser1 at cglow.reldomain.com</A>/BuddySpace2.5Plus JFCOM/J9&quot;
type=&quot;unavailable&quot;
xml:lang=&quot;en&quot;&gt;&lt;status&gt;Online&lt;/status&gt;&lt;priority&gt;0&lt;/priority&gt;&lt;x
xmlns=&quot;<A HREF="http://jabber.org/protocol/muc#user&quot;">http://jabber.org/protocol/muc#user&quot;</A>&gt;&lt;item affiliation=&quot;none&quot;
jid=&quot;<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">secuser1 at cghigh.secdomain.com</A>/TransVerse&quot; role=&quot;none&quot;/&gt;&lt;/x&gt;&lt;x
xmlns=&quot;urn:us:gov:ic:ism:v2&quot; classification=&quot;U&quot; ownerProducer=&quot;USA&quot;
x-label_bg_color=&quot;#006400&quot; x-label_fg_color=&quot;#FFFFFF&quot;
x-portionMarking=&quot;U&quot; x-securityBanner=&quot;UNCLASSIFIED&quot;
xml:lang=&quot;en&quot;/&gt;&lt;addresses
xmlns=&quot;<A HREF="http://jabber.org/protocol/address&quot;">http://jabber.org/protocol/address&quot;</A>&gt;&lt;address delivered=&quot;true&quot;
jid=&quot;<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">reluser1 at cglow.reldomain.com</A>/BuddySpace2.5Plus JFCOM/J9&quot;
type=&quot;to&quot;/&gt;&lt;address delivered=&quot;true&quot;
jid=&quot;<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">secuser1 at cghigh.secdomain.com</A>/TransVerse&quot;
type=&quot;to&quot;/&gt;&lt;/addresses&gt;&lt;/presence&gt;

 

It doesn't seem to matter which error code I send back, my remote user
(secuser1) gets kicked out of my local chat room (relroom).  The &quot;error
message&quot; never makes it to my XMPP client (Transverse).

 

Any ideas?  What can I do so that the remote user (secuser) doesn't get
kicked out and my &quot;error message&quot; makes it to my XMPP client
(Transverse)?

 

Thanks,

Tom K.

 

 

Tom Kalafut

I3/CG Crew Member

Trident Systems Inc.

<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">tommyk at tridsys.com</A> &lt;mailto:<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">tommyk at tridsys.com</A>&gt; 

(919)388-1264

 

============

The opinions expressed in this e-mail may not necessarily reflect the
opinions of Trident Systems Inc.

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="https://www.jabber.org/jdev/attachments/20080218/65e2e2ea/attachment.htm">https://www.jabber.org/jdev/attachments/20080218/65e2e2ea/attachment.htm</A> 
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="027098.html">[jdev] February 79% OFF
</A></li>
	<LI>Next message: <A HREF="027100.html">[jdev] Why is my jabber server kicking out a remote user on an	error?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#27099">[ date ]</a>
              <a href="thread.html#27099">[ thread ]</a>
              <a href="subject.html#27099">[ subject ]</a>
              <a href="author.html#27099">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://mail.jabber.org/mailman/listinfo/jdev">More information about the JDev
mailing list</a><br>
</body></html>
