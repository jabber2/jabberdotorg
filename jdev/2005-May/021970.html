<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [jdev] Re: s2s doubts
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:jdev%40jabber.org?Subject=%5Bjdev%5D%20Re%3A%20s2s%20doubts&In-Reply-To=20050518185434.GB6344%40jabber.org">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="021968.html">
   <LINK REL="Next"  HREF="021971.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[jdev] Re: s2s doubts</H1>
    <B>Stephen Marquard</B> 
    <A HREF="mailto:jdev%40jabber.org?Subject=%5Bjdev%5D%20Re%3A%20s2s%20doubts&In-Reply-To=20050518185434.GB6344%40jabber.org"
       TITLE="[jdev] Re: s2s doubts">scm at marquard.net
       </A><BR>
    <I>Wed May 18 14:16:34 CDT 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="021968.html">[jdev] Re: s2s doubts
</A></li>
        <LI>Next message: <A HREF="021971.html">[jdev] Re: s2s doubts
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21970">[ date ]</a>
              <a href="thread.html#21970">[ thread ]</a>
              <a href="subject.html#21970">[ subject ]</a>
              <a href="author.html#21970">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Peter Saint-Andre wrote:

&gt;<i> On Wed, May 18, 2005 at 11:18:58AM -0700, Justin Karneges wrote:
</I>&gt;<i> 
</I>&gt;&gt;<i>On Wednesday 18 May 2005 09:42 am, Stephen Marquard wrote:
</I>&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>Justin Karneges wrote:
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i>If this was meant to be possible, it certainly isn't clear in RFC 3920. 
</I>&gt;&gt;&gt;&gt;<i>Is this an extension documented somewhere?
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>You do TLS as documented for streams (if advertised as a stream
</I>&gt;&gt;&gt;<i>feature), and then dialback as documented. TLS doesn't add much
</I>&gt;&gt;&gt;<i>additional complexity - the only subtlety is to wait for TLS to complete
</I>&gt;&gt;&gt;<i>once it's started before sending any dialback packets.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>The spec does not discuss dialback with TLS, or even &lt;stream:features&gt; for 
</I>&gt;&gt;<i>that matter.  My problem with what you describe is that it would probably 
</I>&gt;&gt;<i>cause breakage between jabberd and my own server implementation which was 
</I>&gt;&gt;<i>created according to the spec.  Please don't make stuff up.  If we really 
</I>&gt;&gt;<i>want dialback + TLS, this _needs_ to be documented in the RFC.
</I>&gt;<i> 
</I>&gt;<i> I fail to see what anyone is making up here. TLS is documented in
</I>&gt;<i> Section 5 of RFC 3920. Server dialback is documented in Section 8
</I>&gt;<i> of RFC 3920. Stream features are documented in Section 4.6 of RFC
</I>&gt;<i> 3920. Nowhere in RFC 3920 is it set forth that two servers MUST 
</I>&gt;<i> NOT or SHOULD NOT complete dialback if they have completed TLS 
</I>&gt;<i> (although RFC 3920 does say that two servers SHOULD NOT complete
</I>&gt;<i> dialback if they have completed SASL). If you are suggesting that
</I>&gt;<i> rfc3920bis be changed to so specify the relationship between TLS
</I>&gt;<i> and dialback, that is one thing. But the spec as written does not
</I>&gt;<i> forbid this behavior in any way.
</I>
TLS + Dialback (as implemented in j1 and j2) would seem to violate these 
rules in XMPP 5.1:

7. The initiating entity MUST validate the certificate presented by the 
receiving entity; see Certificate ValidationCertificate Validation 
regarding certificate validation procedures.

12. If the TLS negotiation is successful, the initiating entity MUST 
continue with SASL negotiation.

So in this regard, j1 &amp; j2 are not XMPP-compliant. But then as they're 
already not XMPP compliant by not implementing SASL, this is nothing new.

Regards
Stephen


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="021968.html">[jdev] Re: s2s doubts
</A></li>
	<LI>Next message: <A HREF="021971.html">[jdev] Re: s2s doubts
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21970">[ date ]</a>
              <a href="thread.html#21970">[ thread ]</a>
              <a href="subject.html#21970">[ subject ]</a>
              <a href="author.html#21970">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://mail.jabber.org/mailman/listinfo/jdev">More information about the JDev
mailing list</a><br>
</body></html>
