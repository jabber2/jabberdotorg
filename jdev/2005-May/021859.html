<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [jdev] Regarding-JSO-Multithreading-Java
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:jdev%40jabber.org?Subject=%5Bjdev%5D%20Regarding-JSO-Multithreading-Java&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="021858.html">
   <LINK REL="Next"  HREF="021860.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[jdev] Regarding-JSO-Multithreading-Java</H1>
    <B>Merwin Pinto</B> 
    <A HREF="mailto:jdev%40jabber.org?Subject=%5Bjdev%5D%20Regarding-JSO-Multithreading-Java&In-Reply-To="
       TITLE="[jdev] Regarding-JSO-Multithreading-Java">pintomerwin at rediffmail.com
       </A><BR>
    <I>Thu May  5 08:25:49 CDT 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="021858.html">[jdev] JabSimul
</A></li>
        <LI>Next message: <A HREF="021860.html">[jdev] Re: jdev Digest, Vol 16, Issue 4
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21859">[ date ]</a>
              <a href="thread.html#21859">[ thread ]</a>
              <a href="subject.html#21859">[ subject ]</a>
              <a href="author.html#21859">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE> &#160;

Hi All,
I had downloaded the JSO some time back. I was trying to run the code .....
now with respect to the example given in ...  example/EchoServer.java. 
i was connecting to the server , Using the  client programme which is also gien in
examples . Now the server works fine for
 most part ...except that some times it goes into a infinite loop....at the 
point where the code tries to remove the session ....for some reason it is
 not able to remove the session and goes into the infinite loop... 
This happens more often when server is running on Linux .... 
Can someone help me with this ...why could this be happening ? .... is the KEY 
not being cancelled ....??? I am not sure
PLEASE HELP ME ..... Solve This Problem
a part of the code is  below...
Thanks a lotregards, Merwin
-------------------------------------------------------
-------------------------------------------------------
conn = JSOImplementation.getInstance().createStream(&quot;jabber:client&quot;);
src = ChannelStreamSource.createSocket(host, port);

conn.connect(src);
conn.open();
src.register(selector, SelectionKey.OP_READ, conn);

Then ......
Selector.select() to retrieve the available selection keys, 
and process the attached Streams:

while (selector.select() &gt; 0) {
Iterator itr = selector.selectedKeys().iterator();
SelectionKey key;
Stream conn;

while (itr.hasNext()) {
key = (SelectionKey)itr.next();
conn = (Stream)key.attachment();

conn.process();
if (!conn.getCurrentStatus().isConnected())
key.cancel(); //Stream disconnected; remove from selector
}
}



</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="021858.html">[jdev] JabSimul
</A></li>
	<LI>Next message: <A HREF="021860.html">[jdev] Re: jdev Digest, Vol 16, Issue 4
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21859">[ date ]</a>
              <a href="thread.html#21859">[ thread ]</a>
              <a href="subject.html#21859">[ subject ]</a>
              <a href="author.html#21859">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://mail.jabber.org/mailman/listinfo/jdev">More information about the JDev
mailing list</a><br>
</body></html>
