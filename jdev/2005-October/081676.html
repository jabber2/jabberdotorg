<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [jdev] Re: iq packet routing error
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:jdev%40jabber.org?Subject=Re%3A%20%5Bjdev%5D%20Re%3A%20iq%20packet%20routing%20error&In-Reply-To=%3C5b698f5a0510061453x64ee1a17i%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="081675.html">
   <LINK REL="Next"  HREF="081677.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[jdev] Re: iq packet routing error</H1>
    <B>Norman Rasmussen</B> 
    <A HREF="mailto:jdev%40jabber.org?Subject=Re%3A%20%5Bjdev%5D%20Re%3A%20iq%20packet%20routing%20error&In-Reply-To=%3C5b698f5a0510061453x64ee1a17i%40mail.gmail.com%3E"
       TITLE="[jdev] Re: iq packet routing error">normanr at gmail.com
       </A><BR>
    <I>Thu Oct  6 16:53:10 CDT 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="081675.html">[jdev] MUC Nickname legacy conflict question
</A></li>
        <LI>Next message: <A HREF="081677.html">[jdev] Re: Google Talk transport?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#81676">[ date ]</a>
              <a href="thread.html#81676">[ thread ]</a>
              <a href="subject.html#81676">[ subject ]</a>
              <a href="author.html#81676">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>just to confirm this breaks with both 'subscribe' and 'unsubscribe'
events.  jabberd2 is not treating 5.1.6 correctly:

   If there is more than one available resource
   associated with the user when the subscription request is received by
   the user's server, the user's server MUST broadcast that subscription
   request to all available resources in accordance with Server Rules
   for Handling XML Stanzas (Section 11)

at the moment the presence packet is only going to highest resource.

FYI: the iq:roster push with the new subscription status _is_ going to
all resources correctly.

On 25/09/05, Norman Rasmussen &lt;<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">normanr at gmail.com</A>&gt; wrote:
&gt;<i> Created as bug #128: <A HREF="http://j2.openaether.org/bugzilla/show_bug.cgi?id=128">http://j2.openaether.org/bugzilla/show_bug.cgi?id=128</A>
</I>&gt;<i>
</I>&gt;<i> On 24/09/05, Stephen Marquard &lt;<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">scm at marquard.net</A>&gt; wrote:
</I>&gt;<i> &gt; Norman Rasmussen wrote:
</I>&gt;<i> &gt; &gt; oops, just to clarify: the subject is wrong, it's a presence packet
</I>&gt;<i> &gt; &gt; routing error.
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; On 24/09/05, Norman Rasmussen &lt;<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">normanr at gmail.com</A>&gt; wrote:
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt;&gt;re: <A HREF="http://j2.openaether.org/bugzilla/show_bug.cgi?id=93">http://j2.openaether.org/bugzilla/show_bug.cgi?id=93</A>
</I>&gt;<i> &gt; &gt;&gt;
</I>&gt;<i> &gt; &gt;&gt;I think I may have found another case that breaks 11.1.4.2:
</I>&gt;<i> &gt; &gt;&gt;           For presence stanzas other than those of type &quot;probe&quot;, the
</I>&gt;<i> &gt; &gt;&gt;           server MUST deliver the stanza to all available resources;
</I>&gt;<i> &gt; &gt;&gt;           for presence probes, the server SHOULD reply based on the
</I>&gt;<i> &gt; &gt;&gt;           rules defined in Presence Probes (Section 5.1.3).  In
</I>&gt;<i> &gt; &gt;&gt;           addition, the server MUST NOT rewrite the 'to' attribute
</I>&gt;<i> &gt; &gt;&gt;           (i.e., it MUST leave it as &lt;<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">user at domain</A>&gt; rather than change
</I>&gt;<i> &gt; &gt;&gt;           it to &lt;<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">user at domain</A>/resource&gt;).
</I>&gt;<i> &gt; &gt;&gt;
</I>&gt;<i> &gt; &gt;&gt;I'm busy testing my irc component, and when I send an unsubscribe from
</I>&gt;<i> &gt; &gt;&gt;the component to my user it only goes to the highest resource.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Please file this as a new bug report on <A HREF="http://j2.openaether.org/bugzilla/">http://j2.openaether.org/bugzilla/</A>
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Thanks
</I>&gt;<i> &gt; Stephen
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> --
</I>&gt;<i> - Norman Rasmussen
</I>&gt;<i>  - Email: <A HREF="http://mail.jabber.org/mailman/listinfo/jdev">norman at rasmussen.co.za</A>
</I>&gt;<i>  - Home page: <A HREF="http://norman.rasmussen.co.za/">http://norman.rasmussen.co.za/</A>
</I>&gt;<i>
</I>

--
- Norman Rasmussen
 - Email: <A HREF="http://mail.jabber.org/mailman/listinfo/jdev">norman at rasmussen.co.za</A>
 - Home page: <A HREF="http://norman.rasmussen.co.za/">http://norman.rasmussen.co.za/</A>

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="081675.html">[jdev] MUC Nickname legacy conflict question
</A></li>
	<LI>Next message: <A HREF="081677.html">[jdev] Re: Google Talk transport?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#81676">[ date ]</a>
              <a href="thread.html#81676">[ thread ]</a>
              <a href="subject.html#81676">[ subject ]</a>
              <a href="author.html#81676">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://mail.jabber.org/mailman/listinfo/jdev">More information about the JDev
mailing list</a><br>
</body></html>
