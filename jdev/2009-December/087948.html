<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [jdev] plaintext passwords hack
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:jdev%40jabber.org?Subject=Re%3A%20%5Bjdev%5D%20plaintext%20passwords%20hack&In-Reply-To=%3C874onppjsa.fsf%40mocca.josefsson.org%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="087947.html">
   <LINK REL="Next"  HREF="087951.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[jdev] plaintext passwords hack</H1>
    <B>Simon Josefsson</B> 
    <A HREF="mailto:jdev%40jabber.org?Subject=Re%3A%20%5Bjdev%5D%20plaintext%20passwords%20hack&In-Reply-To=%3C874onppjsa.fsf%40mocca.josefsson.org%3E"
       TITLE="[jdev] plaintext passwords hack">simon at josefsson.org
       </A><BR>
    <I>Thu Dec 17 11:55:33 CST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="087947.html">[jdev] plaintext passwords hack
</A></li>
        <LI>Next message: <A HREF="087951.html">[jdev] plaintext passwords hack
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#87948">[ date ]</a>
              <a href="thread.html#87948">[ thread ]</a>
              <a href="subject.html#87948">[ subject ]</a>
              <a href="author.html#87948">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Kurt Zeilenga &lt;<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">Kurt.Zeilenga at Isode.com</A>&gt; writes:

&gt;<i> On Dec 17, 2009, at 7:58 AM, Simon Josefsson wrote:
</I>&gt;<i>
</I>&gt;&gt;<i> Tomasz Sterna &lt;<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">tomek at xiaoka.com</A>&gt; writes:
</I>&gt;&gt;<i> 
</I>&gt;&gt;&gt;<i> Dnia 2009-12-17, czw o godzinie 14:35 +0100, Simon Josefsson pisze:
</I>&gt;&gt;&gt;&gt;<i> If you don't store the hashed password for SCRAM, you need to burn CPU
</I>&gt;&gt;&gt;&gt;<i> time for every login to derive the SCRAM hash keys.  That doesn't scale
</I>&gt;&gt;&gt;&gt;<i> well.
</I>&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;<i> Why do you say so?
</I>&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;<i> It scales well vertically by CPU upgrade, and horizontally by putting
</I>&gt;&gt;&gt;<i> more machines/CPUs to handle user connections.
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> Sure, but caching the hashed values scales better.  Remember, we are not
</I>&gt;&gt;<i> talking about just one hash call, typically there is 4096 hash
</I>&gt;&gt;<i> iterations when deriving the keys from a password in SCRAM.
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> If you do want to hash the password on every authentication with SCRAM,
</I>&gt;&gt;<i> make sure you use the same salt and iteration count every time,
</I>&gt;&gt;<i> otherwise clients cannot cache ClientKey&amp;ServerKey (or SaltedPassword)
</I>&gt;&gt;<i> which will cause performance problems for mobile devices...
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> ...unless you use a very low iteration count value (e.g., 1).  Is that
</I>&gt;&gt;<i> what you are suggesting?
</I>&gt;<i>
</I>&gt;<i> I find it interesting that large iteration counts are more a determent
</I>&gt;<i> to the intended clients and servers of the system than a sophisticated
</I>&gt;<i> attacker.  That is, where a client and server have quite limited
</I>&gt;<i> resources, an attacker has to viewed has a massive resources available
</I>&gt;<i> to their disposal (at very little cost to attacker).
</I>
Yes, and I suspect we'll see some SCRAM deployments with iteration count
1 for this reason.

An iteration count of 1 isn't too problematic, but I fear poor user
experience in clients if servers were to use a new salt every time.
Some clients may re-query the user for the password when that happens.

Low iteration counts removes one nice features of SCRAM (mitigating
dictionary attacks on stolen hash databases).  It is possible to get the
features back, without the high iteration cost, by using SRP though.
(But obviously SRP has other pros and cons..)

/Simon
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="087947.html">[jdev] plaintext passwords hack
</A></li>
	<LI>Next message: <A HREF="087951.html">[jdev] plaintext passwords hack
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#87948">[ date ]</a>
              <a href="thread.html#87948">[ thread ]</a>
              <a href="subject.html#87948">[ subject ]</a>
              <a href="author.html#87948">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://mail.jabber.org/mailman/listinfo/jdev">More information about the JDev
mailing list</a><br>
</body></html>
