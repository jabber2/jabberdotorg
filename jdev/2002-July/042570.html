<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [JDEV] Keep-Alives
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:jdev%40jabber.org?Subject=Re%3A%20%5BJDEV%5D%20Keep-Alives&In-Reply-To=%3C1025544668.20432.45.camel%40corrosion%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="042567.html">
   <LINK REL="Next"  HREF="042573.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[JDEV] Keep-Alives</H1>
    <B>Thomas Muldowney</B> 
    <A HREF="mailto:jdev%40jabber.org?Subject=Re%3A%20%5BJDEV%5D%20Keep-Alives&In-Reply-To=%3C1025544668.20432.45.camel%40corrosion%3E"
       TITLE="[JDEV] Keep-Alives">temas at box5.net
       </A><BR>
    <I>Mon Jul  1 12:31:08 CDT 2002</I>
    <P><UL>
        <LI>Previous message: <A HREF="042567.html">[JDEV] Keep-Alives
</A></li>
        <LI>Next message: <A HREF="042573.html">[JDEV] Keep-Alives
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#42570">[ date ]</a>
              <a href="thread.html#42570">[ thread ]</a>
              <a href="subject.html#42570">[ subject ]</a>
              <a href="author.html#42570">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Well the main point of the section is that it is a way to implement a
true heartbeat that is mostly transparent.  KEEPALIVE is designed so
that it is only sent after some amout of idleness.  That is potentially
ok, but you can't use that to better guarantee to no data loss.  A true
heartbeat could be used to partially regulate the sending of data.

Regarding the NIDS/Firewalls.  We're designing a protocol so they can
learn about this, and admins that are installing a server can add rules
for this.  They have to work with us, not against us, otherwise they are
useless.

--temas


On Mon, 2002-07-01 at 11:46, Matthias Wimmer wrote:
&gt;<i> Hi Thomas!
</I>&gt;<i> 
</I>&gt;<i> Thomas Muldowney wrote:
</I>&gt;<i> 
</I>&gt;<i> &gt;I believe the problems I found when playing with this were the large
</I>&gt;<i> &gt;timeout and you lose the data you've pushed into the buffer.  Basically
</I>&gt;<i> &gt;you have to be idle before it kicks in.  The data loss is the more
</I>&gt;<i> &gt;important case so we need a smaller spacing in the tests.
</I>&gt;<i> &gt;
</I>&gt;<i> The timeouts just default to a very long time. They can be configured 
</I>&gt;<i> with the sysctl interface (tcp_keepalive_probes and tcp_keepalive_time). 
</I>&gt;<i> At Linux you can also change the timeout by accessing the proc 
</I>&gt;<i> filesystem (/proc/sys/net/ipv4/tcp_keepalive_*).
</I>&gt;<i> 
</I>&gt;<i> &gt;If you have
</I>&gt;<i> &gt;the Stevens book take a look at section 21.5.  It has a pretty nifty
</I>&gt;<i> &gt;client-server heartbeat example.  It uses the TCP OOB data (sometimes
</I>&gt;<i> &gt;called urgent) to send heartbeats to one another.  This could be used at
</I>&gt;<i> &gt;regular intervals to ensure minimal data loss.  The problem is that a
</I>&gt;<i> &gt;lot of the higher level socket implementations (Java pre 1.4 included)
</I>&gt;<i> &gt;don't support OOB data well.  At least not that I've figured out.  If we
</I>&gt;<i> &gt;could guarantee that most languages could use this, then I would support
</I>&gt;<i> &gt;it.
</I>&gt;<i> &gt;
</I>&gt;<i> Yeah I know. Even with Java there was a discussion if it should be 
</I>&gt;<i> implemented or not. But I think the bigger problem with OOB is that 
</I>&gt;<i> there was a big bug in windows. Older versions of Windows (pre Windows 
</I>&gt;<i> NT sp 4 I think) can be kicked by sending them OOB data. This has been 
</I>&gt;<i> fixed by Microsoft, but I expect that many unfixed Win95/98 are still 
</I>&gt;<i> out and we would kick our user's systems if the server starts sending OOB.
</I>&gt;<i> As far as I know OOB is also tracked by some intrusion detection systems 
</I>&gt;<i> and they will kick your connection if you use it with a protocol that is 
</I>&gt;<i> not known to use OOB (and I don't think Jabber is known by them). This 
</I>&gt;<i> would make it harder for our service to be used behind corporate firewalls.
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> Tot kijk
</I>&gt;<i>    Matthias
</I>&gt;<i> 
</I>&gt;<i> -- 
</I>&gt;<i> Fon: +49-700 77007770		<A HREF="http://matthias-wimmer.de/">http://matthias-wimmer.de/</A>
</I>&gt;<i> Fax: +49-89 312 88654		<A HREF="jabber://mawis@charente.de">jabber://mawis@charente.de</A>
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> _______________________________________________
</I>&gt;<i> jdev mailing list
</I>&gt;<i> <A HREF="http://mail.jabber.org/mailman/listinfo/jdev">jdev at jabber.org</A>
</I>&gt;<i> <A HREF="http://mailman.jabber.org/listinfo/jdev">http://mailman.jabber.org/listinfo/jdev</A>
</I>


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="042567.html">[JDEV] Keep-Alives
</A></li>
	<LI>Next message: <A HREF="042573.html">[JDEV] Keep-Alives
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#42570">[ date ]</a>
              <a href="thread.html#42570">[ thread ]</a>
              <a href="subject.html#42570">[ subject ]</a>
              <a href="author.html#42570">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://mail.jabber.org/mailman/listinfo/jdev">More information about the JDev
mailing list</a><br>
</body></html>
