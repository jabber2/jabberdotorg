<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> General Redirect, was RE: [JDEV] 302 Redirect
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:jdev%40jabber.org?Subject=General%20Redirect%2C%20was%20RE%3A%20%5BJDEV%5D%20302%20Redirect&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="013649.html">
   <LINK REL="Next"  HREF="013652.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>General Redirect, was RE: [JDEV] 302 Redirect</H1>
    <B>Richard Dobson</B> 
    <A HREF="mailto:jdev%40jabber.org?Subject=General%20Redirect%2C%20was%20RE%3A%20%5BJDEV%5D%20302%20Redirect&In-Reply-To="
       TITLE="General Redirect, was RE: [JDEV] 302 Redirect">richard at dobson-i.net
       </A><BR>
    <I>Mon Jul 29 08:17:26 CDT 2002</I>
    <P><UL>
        <LI>Previous message: <A HREF="013649.html">General Redirect, was RE: [JDEV] 302 Redirect
</A></li>
        <LI>Next message: <A HREF="013652.html">General Redirect, was RE: [JDEV] 302 Redirect
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13651">[ date ]</a>
              <a href="thread.html#13651">[ thread ]</a>
              <a href="subject.html#13651">[ subject ]</a>
              <a href="author.html#13651">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Ok then this seems reasonable,

Seeing as the use of 302 redirect is not set in stone yet, I suggest we
change it to this while we can and implement a different and better way of
telling a client to reconnect to a different server, similar to the way msn
messenger does with its server transfer command, this also has the advantage
that it can be done at any time not just as an error response to a request.

I suggest the following protocol:

&lt;iq type=&quot;set&quot;&gt;
    &lt;transfer xmlns=&quot;jabber:iq:srvxfr&quot;&gt;
        &lt;protocol&gt;tcp&lt;/protocol&gt;
        &lt;host&gt;176.12.23.42&lt;/host&gt;
        &lt;port&gt;5222&lt;/port&gt;
    &lt;/transfer&gt;
&lt;/iq&gt;

Can someone write a JEP up for me? Or have any information on how a JEP
should be written/styled?
Would you like to help Klaus and include your bit into it?

Richard

----- Original Message -----
From: &quot;Klaus H. Wolf&quot; &lt;<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">wolf at bluehands.de</A>&gt;
To: &lt;<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">jdev at jabber.org</A>&gt;
Sent: Monday, July 29, 2002 12:38 PM
Subject: General Redirect, was RE: [JDEV] 302 Redirect


&gt;<i> OK,
</I>&gt;<i>
</I>&gt;<i> 1. reason:
</I>&gt;<i> In my application I need to be able to redirect an IQ GET. The client asks
</I>&gt;<i> for a data object, but the data object might be somewhere else.
</I>&gt;<i>
</I>&gt;<i> 2. reason:
</I>&gt;<i> I assume we agree, that Jabber is not only a presence Protocol, but a
</I>&gt;<i> presence enabled messaging infrastructure with browsing capability.
</I>Browsing
&gt;<i> is very important and will even grow. There might be other cases where
</I>only
&gt;<i> the browse-target knows the real location of the data object. The case is
</I>&gt;<i> very similar to reasons for HTTP redirect.
</I>&gt;<i>
</I>&gt;<i> My idea was that the IQ result returns the entire new request (including
</I>&gt;<i> id-attr) so that the client does not have to do more than just sending
</I>this
&gt;<i> data. Even a potential request (which will usually be identified by the
</I>&gt;<i> id-attr) is preserved and re-used. The redirect won't even surface at the
</I>&gt;<i> protocol engine level. It would be handled by lower layers of a Jabber
</I>&gt;<i> protocol processor.
</I>&gt;<i>
</I>&gt;<i> --
</I>&gt;<i> Dr. Klaus H. Wolf
</I>&gt;<i> bluehands GmbH &amp; Co.mmunication KG
</I>&gt;<i> <A HREF="http://www.bluehands.de/people/hw">http://www.bluehands.de/people/hw</A>
</I>&gt;<i> +49 (0721) 16108 75
</I>&gt;<i>
</I>&gt;<i> &gt; -----Original Message-----
</I>&gt;<i> &gt; From: <A HREF="http://mail.jabber.org/mailman/listinfo/jdev">jdev-admin at jabber.org</A> [mailto:<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">jdev-admin at jabber.org</A>]On Behalf Of
</I>&gt;<i> &gt; Richard Dobson
</I>&gt;<i> &gt; Sent: Saturday, July 27, 2002 11:17 PM
</I>&gt;<i> &gt; To: <A HREF="http://mail.jabber.org/mailman/listinfo/jdev">jdev at jabber.org</A>
</I>&gt;<i> &gt; Subject: Re: [JDEV] 302 Redirect
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Why do you want to do redirects like this anyway? whats the point?
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Can you explain it to me/us please.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Thanks
</I>&gt;<i> &gt; Richard
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; ----- Original Message -----
</I>&gt;<i> &gt; From: &quot;Klaus H. Wolf&quot; &lt;<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">wolf at bluehands.de</A>&gt;
</I>&gt;<i> &gt; To: &lt;<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">jdev at jabber.org</A>&gt;
</I>&gt;<i> &gt; Sent: Saturday, July 27, 2002 3:27 PM
</I>&gt;<i> &gt; Subject: RE: [JDEV] 302 Redirect
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; &gt; Ok, right, I take a different one.
</I>&gt;<i> &gt; &gt; Would you folks take note that WE might need a redirection scheme for
</I>IQ
&gt;<i> &gt; &gt; requests as we know it from HTTP, i.e. to be able to redirect the
</I>entire
&gt;<i> &gt; &gt; request. Since IQ-get is used much (and more and more) like
</I>&gt;<i> &gt; HTTP GET this
</I>&gt;<i> &gt; &gt; probably appropriate.
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; --
</I>&gt;<i> &gt; &gt; Dr. Klaus H. Wolf
</I>&gt;<i> &gt; &gt; bluehands GmbH &amp; Co.mmunication KG
</I>&gt;<i> &gt; &gt; <A HREF="http://www.bluehands.de/people/hw">http://www.bluehands.de/people/hw</A>
</I>&gt;<i> &gt; &gt; +49 (0721) 16108 75
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; -----Original Message-----
</I>&gt;<i> &gt; &gt; &gt; From: <A HREF="http://mail.jabber.org/mailman/listinfo/jdev">jdev-admin at jabber.org</A> [mailto:<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">jdev-admin at jabber.org</A>]On Behalf
</I>Of
&gt;<i> &gt; &gt; &gt; Richard Dobson
</I>&gt;<i> &gt; &gt; &gt; Sent: Saturday, July 27, 2002 2:47 PM
</I>&gt;<i> &gt; &gt; &gt; To: <A HREF="http://mail.jabber.org/mailman/listinfo/jdev">jdev at jabber.org</A>
</I>&gt;<i> &gt; &gt; &gt; Subject: Re: [JDEV] 302 Redirect
</I>&gt;<i> &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; Hi,
</I>&gt;<i> &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; My understanding is that a 302 redirect is supposed to be for
</I>telling
&gt;<i> &gt; the
</I>&gt;<i> &gt; &gt; &gt; client to re-connect to a specified server, for use in server farm
</I>or
&gt;<i> &gt; &gt; &gt; similar.
</I>&gt;<i> &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; E.g. as a response to an authentication the server may send:
</I>&gt;<i> &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; &lt;iq type=&quot;error&quot; id=&quot;authtag&quot; to=<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">client at server.com</A>
</I>from=&quot;server.com&quot;&gt;
&gt;<i> &gt; &gt; &gt; &lt;error code=&quot;302&quot;&gt;jabber2.server.com:5269&lt;/error&gt;
</I>&gt;<i> &gt; &gt; &gt; &lt;/iq&gt;
</I>&gt;<i> &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; I dont think your use of 302 is correct, maybe your need a different
</I>&gt;<i> &gt; error
</I>&gt;<i> &gt; &gt; &gt; code for your use.
</I>&gt;<i> &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; Richard
</I>&gt;<i> &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; ----- Original Message -----
</I>&gt;<i> &gt; &gt; &gt; From: &quot;Klaus H. Wolf&quot; &lt;<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">wolf at bluehands.de</A>&gt;
</I>&gt;<i> &gt; &gt; &gt; To: &quot;<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">Jdev at Jabber.</A> Org&quot; &lt;<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">jdev at jabber.org</A>&gt;
</I>&gt;<i> &gt; &gt; &gt; Sent: Friday, July 26, 2002 4:43 PM
</I>&gt;<i> &gt; &gt; &gt; Subject: [JDEV] 302 Redirect
</I>&gt;<i> &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; Hi,
</I>&gt;<i> &gt; &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; can the 302 Redirect code be used for iq error responses?
</I>&gt;<i> &gt; &gt; &gt; &gt; If yes: The saying is that the redirect JID is sent as CDATA of
</I>&gt;<i> &gt; &gt; &gt; the error
</I>&gt;<i> &gt; &gt; &gt; &gt; tag, right?
</I>&gt;<i> &gt; &gt; &gt; &gt; I propose to put the entire should-be request into the CDATA.
</I>&gt;<i> &gt; &gt; &gt; This allows
</I>&gt;<i> &gt; &gt; &gt; to
</I>&gt;<i> &gt; &gt; &gt; &gt; change more than just the destination, i.e. the namespace or more.
</I>&gt;<i> &gt; &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; Example :
</I>&gt;<i> &gt; &gt; &gt; &gt; CLIENT: &lt;iq id='5' type='get' to='<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">user at server</A>'&gt;&lt;query
</I>&gt;<i> &gt; &gt; &gt; &gt; xmlns='jabber:iq:xx'/&gt;&lt;/iq&gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; SERVER: &lt;iq id='5' type='error'&gt;
</I>&gt;<i> &gt; &gt; &gt; &gt;          &lt;error code='302'&gt;
</I>&gt;<i> &gt; &gt; &gt; &gt;            &lt;iq id='5' type='get' to='<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">user at server</A>'&gt;&lt;query
</I>&gt;<i> &gt; &gt; &gt; &gt; xmlns='storage:client:xx'/&gt;&lt;/iq&gt;
</I>&gt;<i> &gt; &gt; &gt; &gt;          &lt;/error&gt;
</I>&gt;<i> &gt; &gt; &gt; &gt;         &lt;/iq&gt;
</I>&gt;<i> &gt; &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; It might be necessary to escape the embedded data.
</I>&gt;<i> &gt; &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; Opinions?
</I>&gt;<i> &gt; &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; --
</I>&gt;<i> &gt; &gt; &gt; &gt; Dr. Klaus H. Wolf
</I>&gt;<i> &gt; &gt; &gt; &gt; bluehands GmbH &amp; Co.mmunication KG
</I>&gt;<i> &gt; &gt; &gt; &gt; <A HREF="http://www.bluehands.de/people/hw">http://www.bluehands.de/people/hw</A>
</I>&gt;<i> &gt; &gt; &gt; &gt; +49 (0721) 16108 75
</I>&gt;<i> &gt; &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; _______________________________________________
</I>&gt;<i> &gt; &gt; &gt; &gt; jdev mailing list
</I>&gt;<i> &gt; &gt; &gt; &gt; <A HREF="http://mail.jabber.org/mailman/listinfo/jdev">jdev at jabber.org</A>
</I>&gt;<i> &gt; &gt; &gt; &gt; <A HREF="http://mailman.jabber.org/listinfo/jdev">http://mailman.jabber.org/listinfo/jdev</A>
</I>&gt;<i> &gt; &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; _______________________________________________
</I>&gt;<i> &gt; &gt; &gt; jdev mailing list
</I>&gt;<i> &gt; &gt; &gt; <A HREF="http://mail.jabber.org/mailman/listinfo/jdev">jdev at jabber.org</A>
</I>&gt;<i> &gt; &gt; &gt; <A HREF="http://mailman.jabber.org/listinfo/jdev">http://mailman.jabber.org/listinfo/jdev</A>
</I>&gt;<i> &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; _______________________________________________
</I>&gt;<i> &gt; &gt; jdev mailing list
</I>&gt;<i> &gt; &gt; <A HREF="http://mail.jabber.org/mailman/listinfo/jdev">jdev at jabber.org</A>
</I>&gt;<i> &gt; &gt; <A HREF="http://mailman.jabber.org/listinfo/jdev">http://mailman.jabber.org/listinfo/jdev</A>
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; _______________________________________________
</I>&gt;<i> &gt; jdev mailing list
</I>&gt;<i> &gt; <A HREF="http://mail.jabber.org/mailman/listinfo/jdev">jdev at jabber.org</A>
</I>&gt;<i> &gt; <A HREF="http://mailman.jabber.org/listinfo/jdev">http://mailman.jabber.org/listinfo/jdev</A>
</I>&gt;<i> &gt;
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> jdev mailing list
</I>&gt;<i> <A HREF="http://mail.jabber.org/mailman/listinfo/jdev">jdev at jabber.org</A>
</I>&gt;<i> <A HREF="http://mailman.jabber.org/listinfo/jdev">http://mailman.jabber.org/listinfo/jdev</A>
</I>&gt;<i>
</I>&gt;<i>
</I>


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="013649.html">General Redirect, was RE: [JDEV] 302 Redirect
</A></li>
	<LI>Next message: <A HREF="013652.html">General Redirect, was RE: [JDEV] 302 Redirect
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13651">[ date ]</a>
              <a href="thread.html#13651">[ thread ]</a>
              <a href="subject.html#13651">[ subject ]</a>
              <a href="author.html#13651">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://mail.jabber.org/mailman/listinfo/jdev">More information about the JDev
mailing list</a><br>
</body></html>
