<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [JDEV] component developement
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:jdev%40jabber.org?Subject=Re%3A%20%5BJDEV%5D%20component%20developement&In-Reply-To=%3CDJEGIMEGIKHENDDAFKECGECACBAA.mathias.waag%40web.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="074694.html">
   <LINK REL="Next"  HREF="074696.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[JDEV] component developement</H1>
    <B>Mathias Waag</B> 
    <A HREF="mailto:jdev%40jabber.org?Subject=Re%3A%20%5BJDEV%5D%20component%20developement&In-Reply-To=%3CDJEGIMEGIKHENDDAFKECGECACBAA.mathias.waag%40web.de%3E"
       TITLE="[JDEV] component developement">mathias.waag at web.de
       </A><BR>
    <I>Tue Apr  1 18:13:00 CST 2003</I>
    <P><UL>
        <LI>Previous message: <A HREF="074694.html">[JDEV] jabberbeans api
</A></li>
        <LI>Next message: <A HREF="074696.html">[JDEV] jabber extensions available for handling location	information
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#74695">[ date ]</a>
              <a href="thread.html#74695">[ thread ]</a>
              <a href="subject.html#74695">[ subject ]</a>
              <a href="author.html#74695">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>hi,

i am writing a component and all jabber users are publishing their presence
to this component. my component does the following for every presence packet
it receives:
1) check if it is the first presence packet of the publisher (=&gt; publisher
goes online). right now i am sending the roster of the publisher with the
first presence packet. store roster.
2) if it is not the first presence packet it is a presence update. if type
equals unavailable remove presence packet and roster otherwise merge the
update with the old presence packet. store presence packet.(i am sending
lots of additional presence information within the &lt;x&gt; element, e.g.
location, address, client info).
3) get the JIDs of all subcribers (using the roster of the publisher) that
are online (using the JIDs of the stored presence packets)
4) for every online subscriber JID take the presence packet of the publisher
and the subscriber and execute some rules on it (using drools (drools.org))
and create an individual presence packet for the subcriber
5) send the created presence packets to the subscribers

the reason for the above is that i want to be able to convey differnt kinds
of presence to the subscribers. for example for some people -- say, HR -- I
want to convey &quot;I'm at work&quot;. For people who are members of any of the
projects that I am on, I might also want to convey &quot;at my desk, working&quot;.
But given that I am working under a tight deadline for project X, I want to
also convey &quot;for matters relating to project X, I can be interrupted, but
for matters relating to any other project, I do not want to be disturbed&quot;.
Unless, of course, it is my boss who can interrupt me for any reason.

the presence server is creating the from attribute. because of this the
subscribers will receive the packet including the JID of the component. is
there a possibility to send it with the JID of the original publisher?

is it possible for the component to receive the rosters directly from the
server instead of step 1)?

any comments welcome, especially about my &quot;algorithm&quot;...

cheers
mathias


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="074694.html">[JDEV] jabberbeans api
</A></li>
	<LI>Next message: <A HREF="074696.html">[JDEV] jabber extensions available for handling location	information
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#74695">[ date ]</a>
              <a href="thread.html#74695">[ thread ]</a>
              <a href="subject.html#74695">[ subject ]</a>
              <a href="author.html#74695">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://mail.jabber.org/mailman/listinfo/jdev">More information about the JDev
mailing list</a><br>
</body></html>
