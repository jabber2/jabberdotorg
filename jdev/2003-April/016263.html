<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [JDEV] XDB_SQL: Problems with the stored &quot;token&quot; value in &quot;users0k&quot; table
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:jdev%40jabber.org?Subject=%5BJDEV%5D%20XDB_SQL%3A%20Problems%20with%20the%20stored%20%22token%22%20value%20in%20%22users0k%22%20table&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="016232.html">
   <LINK REL="Next"  HREF="016235.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[JDEV] XDB_SQL: Problems with the stored &quot;token&quot; value in &quot;users0k&quot; table</H1>
    <B>Alexis Darnois</B> 
    <A HREF="mailto:jdev%40jabber.org?Subject=%5BJDEV%5D%20XDB_SQL%3A%20Problems%20with%20the%20stored%20%22token%22%20value%20in%20%22users0k%22%20table&In-Reply-To="
       TITLE="[JDEV] XDB_SQL: Problems with the stored &quot;token&quot; value in &quot;users0k&quot; table">alexis.darnois at terravirtual.net
       </A><BR>
    <I>Wed Apr 23 05:09:51 CDT 2003</I>
    <P><UL>
        <LI>Previous message: <A HREF="016232.html">[JDEV] XDB_SQL: Problems with the stored &quot;token&quot; value in &quot;users0k&quot; table
</A></li>
        <LI>Next message: <A HREF="016235.html">[JDEV] How to develop a Jabber application in web?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16263">[ date ]</a>
              <a href="thread.html#16263">[ thread ]</a>
              <a href="subject.html#16263">[ subject ]</a>
              <a href="author.html#16263">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

Thanks for your answer but my question was more on a XDB_SQL issue than a Jabber issue. Have you any idea about this problem ?

Alexis Darnois

----- Original Message ----- 
From: &quot;Tijl Houtbeckers&quot; &lt;<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">thoutbeckers at splendo.com</A>&gt;
To: &lt;<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">jdev at jabber.org</A>&gt;
Sent: Thursday, April 17, 2003 7:26 PM
Subject: Re:[JDEV] XDB_SQL: Problems with the stored &quot;token&quot; value in &quot;users0k&quot; table


&gt;<i> &quot;Alexis Darnois&quot; &lt;<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">alexis.darnois at terravirtual.net</A>&gt; wrote on 15-4-2003 
</I>&gt;<i> 19:07:40: 
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;Hi all,
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;About the &quot;token&quot; field written by XDB_SQL module  in the &quot;users0k&quot; 
</I>&gt;<i> &gt;table, it seems that the original token is transformed before beeing 
</I>&gt;<i> &gt;inserted, the token is generated by this line in &quot;mod_auth_0k.c&quot; (line 
</I>&gt;<i> &gt;94):
</I>&gt;<i> 
</I>&gt;<i> Note that there are important issues with 0k.
</I>&gt;<i> 
</I>&gt;<i> Here is a repost (from someone else) from the SJIG mailinglist:
</I>&gt;<i> 
</I>&gt;<i> ----------
</I>&gt;<i> 
</I>&gt;<i> Matthias Wimmer &lt;<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">m at tthias.net</A>&gt; wrote on 12-4-2003 20:00:36:
</I>&gt;<i> 
</I>&gt;<i> -----BEGIN PGP SIGNED MESSAGE-----
</I>&gt;<i> Hash: SHA1
</I>&gt;<i>  
</I>&gt;<i> Hi!
</I>&gt;<i>  
</I>&gt;<i>  
</I>&gt;<i> I see two problems with the 0k authentication protocol of Jabber and
</I>&gt;<i> would like to get some comments on these two issues.
</I>&gt;<i>  
</I>&gt;<i> 1.
</I>&gt;<i> With each login a counter is decremented by the server. This counter is
</I>&gt;<i> sent to the client before it authenticates with the server. (To tell the
</I>&gt;<i> client which hash it has to send to the server.)
</I>&gt;<i> This counter can be queried by everybody as it is send to the client
</I>&gt;<i> before it is authenticated. With this information everybody can
</I>&gt;<i> determine how often a user (that uses 0k) has logged in to its account.
</I>&gt;<i> By checking the counter regularly one can check at which times a user
</I>&gt;<i> (that uses 0k) logs in to the Jabber server.
</I>&gt;<i>  
</I>&gt;<i> 2.
</I>&gt;<i> If an attacker manages to redirect a login attempt to its own server
</I>&gt;<i> (e.g. by a DNS attack) he can query a hash value with a low sequence
</I>&gt;<i> number from the client. With this hash value he can calculate all the
</I>&gt;<i> following hash values and use them to login to the (real) Jabber server.
</I>&gt;<i> Especially he can use this hashes not only at the moment he gets them.
</I>&gt;<i> As he knows all hash values with a higher sequence number he can use
</I>&gt;<i> them later - after he has removed everything that could be used to
</I>&gt;<i> identify the attacker.
</I>&gt;<i>  
</I>&gt;<i> I think these two problems make 0k-authentication less secure than
</I>&gt;<i> digenst authentication. I propose that Jabber server administrators
</I>&gt;<i> should disable 0k as most clients will use digest authentication then.
</I>&gt;<i>  
</I>&gt;<i> One small note: Jabber's 0k authentication protocol is not a &quot;zero
</I>&gt;<i> knowledge authentication&quot; protocol as this term is defined in 
</I>&gt;<i> cryptology. 
</I>&gt;<i>  
</I>&gt;<i>  
</I>&gt;<i> Tot kijk
</I>&gt;<i> ~    Matthias
</I>&gt;<i>  
</I>&gt;<i> - --
</I>&gt;<i> Fon: +49-(0)70 0770 07770       <A HREF="http://matthias.wimmer.name/">http://matthias.wimmer.name/</A>
</I>&gt;<i> Fax: +49-(0)89-312 88 654         <A HREF="jabber://mawis@charente.de">jabber://mawis@charente.de</A>
</I>&gt;<i> HAM: DB1MW     OpenPGP: <A HREF="http://matthias.wimmer.name/encrypt/">http://matthias.wimmer.name/encrypt/</A>
</I>&gt;<i> -----BEGIN PGP SIGNATURE-----
</I>&gt;<i> Version: GnuPG v1.2.1 (MingW32)
</I>&gt;<i> Comment: Using GnuPG with Mozilla - <A HREF="http://enigmail.mozdev.org">http://enigmail.mozdev.org</A>
</I>&gt;<i>  
</I>&gt;<i> iD8DBQE+mFRDJ/5jVqqDmvkRArB2AJ4/xChJ61w1n+qrbHxhxejU1sjWcACfdsSS
</I>&gt;<i> 7+FM81PhysGqcJA/AevAFMM=
</I>&gt;<i> =kazY
</I>&gt;<i> -----END PGP SIGNATURE-----
</I>&gt;<i>  
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Standards-JIG mailing list
</I>&gt;<i> <A HREF="http://mail.jabber.org/mailman/listinfo/jdev">Standards-JIG at jabber.org</A>
</I>&gt;<i> <A HREF="http://mailman.jabber.org/listinfo/standards-jig">http://mailman.jabber.org/listinfo/standards-jig</A>
</I>&gt;<i> 
</I>&gt;<i> -- 
</I>&gt;<i> Tijl Houtbeckers
</I>&gt;<i> Software Engineer @ Splendo
</I>&gt;<i> The Netherlands
</I>&gt;<i> 
</I>&gt;<i> _______________________________________________
</I>&gt;<i> jdev mailing list
</I>&gt;<i> <A HREF="http://mail.jabber.org/mailman/listinfo/jdev">jdev at jabber.org</A>
</I>&gt;<i> <A HREF="http://mailman.jabber.org/listinfo/jdev">http://mailman.jabber.org/listinfo/jdev</A>
</I>

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="016232.html">[JDEV] XDB_SQL: Problems with the stored &quot;token&quot; value in &quot;users0k&quot; table
</A></li>
	<LI>Next message: <A HREF="016235.html">[JDEV] How to develop a Jabber application in web?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16263">[ date ]</a>
              <a href="thread.html#16263">[ thread ]</a>
              <a href="subject.html#16263">[ subject ]</a>
              <a href="author.html#16263">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://mail.jabber.org/mailman/listinfo/jdev">More information about the JDev
mailing list</a><br>
</body></html>
