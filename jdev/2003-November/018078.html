<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [JDEV] Re: jabberd 1.4.3 release candidate again
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:jdev%40jabber.org?Subject=%5BJDEV%5D%20Re%3A%20jabberd%201.4.3%20release%20candidate%20again&In-Reply-To=boj8k6%24jjg%241%40sea.gmane.org">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="018077.html">
   <LINK REL="Next"  HREF="018084.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[JDEV] Re: jabberd 1.4.3 release candidate again</H1>
    <B>Frank Seesink</B> 
    <A HREF="mailto:jdev%40jabber.org?Subject=%5BJDEV%5D%20Re%3A%20jabberd%201.4.3%20release%20candidate%20again&In-Reply-To=boj8k6%24jjg%241%40sea.gmane.org"
       TITLE="[JDEV] Re: jabberd 1.4.3 release candidate again">frank at mail.wvnet.edu
       </A><BR>
    <I>Sat Nov  8 18:08:21 CST 2003</I>
    <P><UL>
        <LI>Previous message: <A HREF="018077.html">[JDEV] Re: jabberd 1.4.3 release candidate again
</A></li>
        <LI>Next message: <A HREF="018084.html">[JDEV] Re: jabberd 1.4.3 release candidate again
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18078">[ date ]</a>
              <a href="thread.html#18078">[ thread ]</a>
              <a href="subject.html#18078">[ subject ]</a>
              <a href="author.html#18078">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Frank Seesink wrote:
&gt;<i> Downloaded latest CVS with all the newest Cygwin changes.  It 
</I>&gt;<i> compiles/runs great!  Thanks very much.  Hope this helps others as much 
</I>&gt;<i> as it does me.
</I>&gt;<i> 
</I>&gt;<i> Now if I could just figure out the debug mode issue, this would be 
</I>&gt;<i> perfect.  But don't let that hold things up.  I suspect the debug mode 
</I>&gt;<i> segfaults are due to some pth/fork() issue, which means a real change in 
</I>&gt;<i> code (which I have not touched to date...only how to compile/link). 
</I>&gt;<i> Those under Cygwin will have to live without using -D for the time 
</I>&gt;<i> being, as I suspect the fix for this may require much more time.  And 
</I>&gt;<i> hopefully by then Jabberd2 will up and running cleanly.
</I>
Ok, I admit it.  I'm kind of on a mission.  At this point Jabberd 
1.4.3CVS compiles/links/runs the same under Cygwin as it does on other 
*nix platforms, with the one exception of running in debug mode (using 
the -D switch).

So let me ask this, as I'm just starting to dig into the source code 
itself.  Can anyone steer me in the right direction as to why, whenever 
I attempt to fire up Jabberd in debug mode, I see the following:
____________________________________________________________
$ ./jabberd/jabberd.exe -D
Sat Nov  8 18:44:11 2003  mio.c:787 MIO is starting up
Sat Nov  8 18:44:11 2003  mio.c:816 mio while loop top
**Pth** STACK OVERFLOW: thread pid_t=0xa040750, name=&quot;unknown&quot;
Segmentation fault
____________________________________________________________

This happens regardless of whether I have configured/built jabberd with 
(--enable-ssl) or without SSL support.  So I've ruled that out at least. 
  It fails with the generic jabber.xml config.  Basically, I have not 
been able to get Jabberd to fire up if I use the -D switch.

The actual pid_t number may vary (haven't been paying enough attention 
to notice if it changes or if there's a pattern to be honest), but the 
sequence of messages is always the same.  Jabberd starts and dies in the 
blink of an eye.

However, simply NOT running in debug mode avoids ALL this, and I've had 
a Jabber server running for weeks at a time in production (granted, low 
user load, but still), usually only restarting when I reboot the Windows 
XP Pro box it's running on.

Has anyone else experienced this kind of behavior on any other platform? 
   Any insight into where to look?  I realize running Cygwin under 
Windows, I'm working in a cludged environment at best.  But figured it 
best to ask you good folks if you've ever seen this before, as you might 
save me a great deal of time in finding the source of the problem...even 
if the end result is just &quot;It's a limitation of Cygwin/Windows.  Suck it 
up.&quot; :-)

In the meantime, the hunt continues...



</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="018077.html">[JDEV] Re: jabberd 1.4.3 release candidate again
</A></li>
	<LI>Next message: <A HREF="018084.html">[JDEV] Re: jabberd 1.4.3 release candidate again
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18078">[ date ]</a>
              <a href="thread.html#18078">[ thread ]</a>
              <a href="subject.html#18078">[ subject ]</a>
              <a href="author.html#18078">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://mail.jabber.org/mailman/listinfo/jdev">More information about the JDev
mailing list</a><br>
</body></html>
