<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [JDEV] MUC problems
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:jdev%40jabber.org?Subject=Re%3A%20%5BJDEV%5D%20MUC%20problems&In-Reply-To=%3C8D96EDA0AC04D31197B400A0C96C148002B9D3D7%40ossex1.corp.webb.net%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="074420.html">
   <LINK REL="Next"  HREF="074423.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[JDEV] MUC problems</H1>
    <B>Constantin Nickonov</B> 
    <A HREF="mailto:jdev%40jabber.org?Subject=Re%3A%20%5BJDEV%5D%20MUC%20problems&In-Reply-To=%3C8D96EDA0AC04D31197B400A0C96C148002B9D3D7%40ossex1.corp.webb.net%3E"
       TITLE="[JDEV] MUC problems">Nickonov at jabber.com
       </A><BR>
    <I>Fri Feb 14 10:44:38 CST 2003</I>
    <P><UL>
        <LI>Previous message: <A HREF="074420.html">[JDEV] MUC problems
</A></li>
        <LI>Next message: <A HREF="074423.html">[JDEV] MUC problems
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#74422">[ date ]</a>
              <a href="thread.html#74422">[ thread ]</a>
              <a href="subject.html#74422">[ subject ]</a>
              <a href="author.html#74422">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I'm sorry if my responses have sounded over-bearing. I, too, have talked to
the JEP author (and have some experience with implementing the JEP-0045
protocol). It's pretty clear that we both believe in what we're saying, and
it's not a bad thing to have a little passion. If it's not implicit in my
responses, you are to be commended for your efforts. Perhaps this discussion
should've taken place on the foundation mailing list, as a more formal &quot;call
for experience&quot; exchange.

In any case, the best thing about Jabber is its extensibility. I just wanted
to go on record with some points of view -- just as you did -- for the
benefit of others who may be looking to implement MUC. It was never meant to
be dismissive or as a personal attack.

I still maintain that accountability can be achieved without SHA-hashes,
however. :)

&gt;<i> -----Original Message-----
</I>&gt;<i> From: David Sutton [mailto:<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">jabber at dsutton.legend.uk.com</A>]
</I>&gt;<i> Sent: Friday, February 14, 2003 9:18 AM
</I>&gt;<i> To: <A HREF="http://mail.jabber.org/mailman/listinfo/jdev">jdev at jabber.org</A>
</I>&gt;<i> Subject: Re: [JDEV] MUC problems
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> Hello,
</I>&gt;<i> 
</I>&gt;<i> On Fri, Feb 14, 2003 at 08:26:05AM -0700, Constantin Nickonov wrote:
</I>&gt;<i> &gt; OK, I'll try one more time to make the point that 
</I>&gt;<i> SHA-hashes are useless and
</I>&gt;<i> &gt; counter-productive...
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; 1. Useless
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; If a room is not (semi)anonymous, participants have access 
</I>&gt;<i> -- via either
</I>&gt;<i> &gt; browse or disco -- to the other participants' real JID's. 
</I>&gt;<i> So why not just
</I>&gt;<i> &gt; use that to &quot;track&quot; nick changes? After all, the SHA-hash 
</I>&gt;<i> is a direct
</I>&gt;<i> &gt; derivative of the JID.
</I>&gt;<i> &gt;
</I>&gt;<i> This is common sense, and there would be no hash.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; If a room is (semi)anonymous, noting the SHA-hash of an 
</I>&gt;<i> offensive person's
</I>&gt;<i> &gt; JID doesn't do a whole lot of good -- not for the person 
</I>&gt;<i> doing the noting,
</I>&gt;<i> &gt; and not for an administrator who receives the complaint. 
</I>&gt;<i> SHA-hashing is a
</I>&gt;<i> &gt; one way street, so there's no good way to deduce the real 
</I>&gt;<i> JID and take
</I>&gt;<i> &gt; action. Sending complaints through the service (like 
</I>&gt;<i> invites), however, is
</I>&gt;<i> &gt; an option that allows the real JID to be added to the 
</I>&gt;<i> complaint (by the
</I>&gt;<i> &gt; service) and passed on to the admin.
</I>&gt;<i> &gt;
</I>&gt;<i> If you read my previous postings more carefully, I already 
</I>&gt;<i> explained how
</I>&gt;<i> this would work. The aim is to provide a link for administrators to be
</I>&gt;<i> able to tie events together. A room admin who purely reacts to one
</I>&gt;<i> message from a user, without witnessing the event themselves, 
</I>&gt;<i> it someone
</I>&gt;<i> I would be worried about. An abuse may be a one-off event, 
</I>&gt;<i> and in which
</I>&gt;<i> case the admin won't have to do anything. However, if an abuse takes
</I>&gt;<i> place whilst an admin is online and available, they can then tie this
</I>&gt;<i> event to other events that they had been informed about.
</I>&gt;<i> 
</I>&gt;<i> Also, sending complaints through the service is outside the 
</I>&gt;<i> scope of the
</I>&gt;<i> JEP. We are talking about a specific application using the 
</I>&gt;<i> MUC protocol,
</I>&gt;<i> not the MUC protocol itself. It was always noted that there would be a
</I>&gt;<i> requirement for a MUC Services JEP, once the MUC JEP was 
</I>&gt;<i> finalised. What
</I>&gt;<i> I am providing is the possibility for people to have some protection
</I>&gt;<i> now. I've already said I can make this into an option, so your
</I>&gt;<i> overbearing attitude is confusing me. I subscribe to the view 
</I>&gt;<i> that there
</I>&gt;<i> is more than one way of doing something, and look forward to a formal
</I>&gt;<i> specification for extending MUC with Services, however at the 
</I>&gt;<i> same time,
</I>&gt;<i> there is still likely to be some switch hidden away to allow the hash
</I>&gt;<i> jid to be enabled for those who want to use it. I would also like to
</I>&gt;<i> point out that it will not be you fielding support calls or people
</I>&gt;<i> wanting a mechanism such as this in place for accountability. 
</I>&gt;<i> My aim is
</I>&gt;<i> to provide flexibility, which is why I agreed to make it a switch. 
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; 2. Counter-productive
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; If a room is (semi)anonymous, the SHA-hash reveals the 
</I>&gt;<i> identity of everyone.
</I>&gt;<i> &gt; Sure, it doesn't give away their true JID so that people 
</I>&gt;<i> can send spam to
</I>&gt;<i> &gt; them, etc. But it allows context to be established, where 
</I>&gt;<i> none is desired.
</I>&gt;<i> &gt; The resource portion of a SHA-hashed version of a user's 
</I>&gt;<i> JID may be (unless
</I>&gt;<i> &gt; you're concatenating the room JID to the user's JID prior 
</I>&gt;<i> to hashing) the
</I>&gt;<i> &gt; same in every room, which opens a can of worms. Also, 
</I>&gt;<i> ordinary, non-abusive
</I>&gt;<i> &gt; people cannot change their nicknames and avoid being 
</I>&gt;<i> tracked -- contrary to
</I>&gt;<i> &gt; the definition of &quot;anonymous&quot;.
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; If a room isn't (semi)anonymous, then... see section &quot;1. Useless&quot;.
</I>&gt;<i> &gt; 
</I>&gt;<i> One thing of note is that there is no such thing as a fully anonymous
</I>&gt;<i> room. This is the point I tried to bring up earlier, and obviously
</I>&gt;<i> failed. Let me ask you this question. What is wrong with 
</I>&gt;<i> being, at least
</I>&gt;<i> in part, accountable for your actions? If you are abiding by the rules
</I>&gt;<i> of the room, there is no reason for anyone to even bother looking. If
</I>&gt;<i> you are not, then there is a reason to check. This technology could
</I>&gt;<i> quite easily be used in forums for younger children, where you want to
</I>&gt;<i> provide a safety mechanism to protect the children against potential
</I>&gt;<i> abuse. This time of scenario is why room message filtering is 
</I>&gt;<i> on my todo
</I>&gt;<i> list as well. 
</I>&gt;<i> &gt; ---
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; There's nothing wrong with a MUC implementation supporting 
</I>&gt;<i> both disco and
</I>&gt;<i> &gt; browse, even though the latter may be removed from the JEP 
</I>&gt;<i> at some point.
</I>&gt;<i> &gt; 
</I>&gt;<i> The thing is that you could have fooled me with the way that 
</I>&gt;<i> you do not
</I>&gt;<i> seem to take my points fully on board before telling me i'm blatently
</I>&gt;<i> wrong. A discussion is a two way street, and I have made concessions
</I>&gt;<i> trying to provide a balance or half-way point.
</I>&gt;<i> 
</I>&gt;<i> I personally asked Peter Saint-Andre to review this thread, 
</I>&gt;<i> when he had
</I>&gt;<i> time, because I value his input and he is also the JEP 
</I>&gt;<i> author. I removed
</I>&gt;<i> browse because things were not clear and I was investigating how to
</I>&gt;<i> ensure that I followed the spirit of the JEP. I also stated 
</I>&gt;<i> that I would
</I>&gt;<i> re-enable browse as an option once everything is cleared up. I'm sorry
</I>&gt;<i> that you seemed to have missed those points I made.
</I>&gt;<i> 
</I>&gt;<i> Regards,
</I>&gt;<i> 
</I>&gt;<i>   David
</I>&gt;<i>   
</I>&gt;<i> &gt; &gt; -----Original Message-----
</I>&gt;<i> &gt; &gt; From: David Sutton [mailto:<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">jabber at dsutton.legend.uk.com</A>]
</I>&gt;<i> &gt; &gt; Sent: Thursday, February 13, 2003 10:40 PM
</I>&gt;<i> &gt; &gt; To: <A HREF="http://mail.jabber.org/mailman/listinfo/jdev">jdev at jabber.org</A>
</I>&gt;<i> &gt; &gt; Subject: Re: [JDEV] MUC problems
</I>&gt;<i> &gt; &gt; 
</I>&gt;<i> &gt; &gt; 
</I>&gt;<i> &gt; &gt; Hello all,
</I>&gt;<i> &gt; &gt; 
</I>&gt;<i> &gt; &gt;   I've spent some time thinking about this over the evening.
</I>&gt;<i> &gt; &gt;   
</I>&gt;<i> &gt; &gt; On Thu, Feb 13, 2003 at 03:01:33PM -0600, Peter Saint-Andre wrote:
</I>&gt;<i> &gt; &gt; &gt; First of all, the question here is related more to browse 
</I>&gt;<i> &gt; &gt; implementation
</I>&gt;<i> &gt; &gt; &gt; than MUC implementation. Unfortunately, the browse 
</I>&gt;<i> &gt; &gt; specification is not
</I>&gt;<i> &gt; &gt; &gt; consistent with usage such as this:
</I>&gt;<i> &gt; &gt; &gt; 
</I>&gt;<i> &gt; &gt; &gt; &lt;iq
</I>&gt;<i> &gt; &gt; &gt;     type='result'
</I>&gt;<i> &gt; &gt; &gt;     id='1011'
</I>&gt;<i> &gt; &gt; &gt;     to='<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">xxx at localhost</A>/coccinella'
</I>&gt;<i> &gt; &gt; &gt;     from='<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">girls at conference.localhost</A>'&gt;
</I>&gt;<i> &gt; &gt; &gt;   &lt;conference xmlns='jabber:iq:browse' name='girls' 
</I>&gt;<i> type='public'&gt;
</I>&gt;<i> &gt; &gt; &gt;     &lt;ns&gt;<A HREF="http://jabber.org/protocol/muc&lt;/ns">http://jabber.org/protocol/muc&lt;/ns</A>&gt;
</I>&gt;<i> &gt; &gt; &gt;     &lt;user name='mats'
</I>&gt;<i> &gt; &gt; &gt; 
</I>&gt;<i> &gt; &gt; jid='<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">girls at conference.localhost</A>/13c6a01dc31309e331c2b018640b9c
</I>&gt;<i> &gt; &gt; 03b8534327'/&gt;
</I>&gt;<i> &gt; &gt; &gt;   &lt;/conference&gt;
</I>&gt;<i> &gt; &gt; &gt; &lt;/iq&gt;
</I>&gt;<i> &gt; &gt; &gt; 
</I>&gt;<i> &gt; &gt; &gt; The browse JEP (which is incomplete) does not seem to allow 
</I>&gt;<i> &gt; &gt; &lt;conference/&gt;
</I>&gt;<i> &gt; &gt; &gt; as a root element for the jabber:iq:browse namespace (there 
</I>&gt;<i> &gt; &gt; is no DTD or
</I>&gt;<i> &gt; &gt; &gt; schema so we can't be sure, but it appears that &lt;item/&gt; 
</I>&gt;<i> is the root
</I>&gt;<i> &gt; &gt; &gt; element and as we know only one root element should be 
</I>&gt;<i> allowed). In
</I>&gt;<i> &gt; &gt; &gt; addition, it does not define &lt;user/&gt; as a child element 
</I>&gt;<i> of the root
</I>&gt;<i> &gt; &gt; &gt; element. So I would say that the above stanza is 
</I>&gt;<i> &gt; &gt; questionable from the
</I>&gt;<i> &gt; &gt; &gt; perspective of browse.
</I>&gt;<i> &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; I will review the browse and see if it is possible to 
</I>&gt;<i> return with a
</I>&gt;<i> &gt; &gt; result which follows the meaning of the JEP. The existing 
</I>&gt;<i> method was
</I>&gt;<i> &gt; &gt; used to provide compatability to the existing conference 
</I>&gt;<i> &gt; &gt; system running
</I>&gt;<i> &gt; &gt; on jabber.org.
</I>&gt;<i> &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; Second, given the ambiguities involved in browse, it 
</I>&gt;<i> may behoove the
</I>&gt;<i> &gt; &gt; &gt; author of JEP-0045 to remove all references to browse and 
</I>&gt;<i> &gt; &gt; require support
</I>&gt;<i> &gt; &gt; &gt; for disco only. However, I am loath to do so until disco 
</I>&gt;<i> &gt; &gt; goes to Draft, so
</I>&gt;<i> &gt; &gt; &gt; it is possible I will hold off on submitting JEP-0045 to 
</I>&gt;<i> &gt; &gt; the Council until
</I>&gt;<i> &gt; &gt; &gt; disco is advanced to Draft.
</I>&gt;<i> &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; Until the debate on browse reaches some stability, i've 
</I>&gt;<i> removed the
</I>&gt;<i> &gt; &gt; browse code from the MU-Conference cvs. I've already 
</I>&gt;<i> heard from people
</I>&gt;<i> &gt; &gt; who feel that it is a bad idea to remove browse, as it 
</I>&gt;<i> &gt; &gt; already has place
</I>&gt;<i> &gt; &gt; in many of the existing clients. Another expressed 
</I>&gt;<i> concern that disco
</I>&gt;<i> &gt; &gt; made it more complicated to retrieve the data necessary. 
</I>&gt;<i> What I may do
</I>&gt;<i> &gt; &gt; is make browse an optional extra which can be enabled or 
</I>&gt;<i> &gt; &gt; disabled at the
</I>&gt;<i> &gt; &gt; service admins choice. If I do this, then the SHA hash idea (for
</I>&gt;<i> &gt; &gt; representing a users true jid, not roster entry) may also be 
</I>&gt;<i> &gt; &gt; an option.
</I>&gt;<i> &gt; &gt; I really perceive this being of use in certain situations, even if
</I>&gt;<i> &gt; &gt; others may not yet.
</I>&gt;<i> &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; Third, I would agree with Constantin that the hashed 
</I>&gt;<i> &gt; &gt; resource in the 'jid'
</I>&gt;<i> &gt; &gt; &gt; attribute in the stanza shown above is inconsistent with 
</I>&gt;<i> &gt; &gt; the spirit of
</I>&gt;<i> &gt; &gt; &gt; MUC. Note example 10 in version 1.3 of JEP-0045:
</I>&gt;<i> &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; I think that the issue is being slightly missed here. the 
</I>&gt;<i> response to
</I>&gt;<i> &gt; &gt; disco#items already does report in the syntax given 
</I>&gt;<i> below. The current
</I>&gt;<i> &gt; &gt; debate about SHA hash jids is in relation to browsing for 
</I>&gt;<i> a users real
</I>&gt;<i> &gt; &gt; jid, not for a room roster. I had already rewritten 
</I>&gt;<i> browse (and disco
</I>&gt;<i> &gt; &gt; iirc) so that for the room listings, it reported them in 
</I>&gt;<i> the format
</I>&gt;<i> &gt; &gt; <A HREF="http://mail.jabber.org/mailman/listinfo/jdev">roomname at service</A>/nick. Only browsing a user for their true jid in 
</I>&gt;<i> &gt; &gt; semi-anonymous rooms returned a hash, to provide a form of
</I>&gt;<i> &gt; &gt; accountability. Does this make the point I am trying to 
</I>&gt;<i> make clearer?
</I>&gt;<i> &gt; &gt; 
</I>&gt;<i> &gt; &gt; On the issue of disco, I also recall a debate going on 
</I>&gt;<i> &gt; &gt; because the exact
</I>&gt;<i> &gt; &gt; details of what items were to be returned was not 
</I>&gt;<i> defined. There are
</I>&gt;<i> &gt; &gt; several possibilities, such as room roster, member list, 
</I>&gt;<i> &gt; &gt; moderator list,
</I>&gt;<i> &gt; &gt; admin list and so on. Was a decision made on which data should be
</I>&gt;<i> &gt; &gt; returned, and if there was a way to return any of the other 
</I>&gt;<i> &gt; &gt; information
</I>&gt;<i> &gt; &gt; via the disco interface?
</I>&gt;<i> &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; Example 10. Room Returns Disco Item Results (Items are Public)
</I>&gt;<i> &gt; &gt; &gt; 
</I>&gt;<i> &gt; &gt; &gt; &lt;iq 
</I>&gt;<i> &gt; &gt; &gt;     type='result'
</I>&gt;<i> &gt; &gt; &gt;     from='<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">darkcave at macbeth.shakespeare.lit</A>'
</I>&gt;<i> &gt; &gt; &gt;     to='<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">hag66 at shakespeare.lit</A>/pda'
</I>&gt;<i> &gt; &gt; &gt;     id='disco4'&gt;
</I>&gt;<i> &gt; &gt; &gt;   &lt;query xmlns='<A HREF="http://jabber.org/protocol/disco#items'">http://jabber.org/protocol/disco#items'</A>&gt;
</I>&gt;<i> &gt; &gt; &gt;     &lt;item jid='<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">darkcave at macbeth.shakespeare.lit</A>/firstwitch'/&gt;
</I>&gt;<i> &gt; &gt; &gt;     &lt;item jid='<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">darkcave at macbeth.shakespeare.lit</A>/secondwitch'/&gt;
</I>&gt;<i> &gt; &gt; &gt;   &lt;/query&gt;
</I>&gt;<i> &gt; &gt; &gt; &lt;/iq&gt;
</I>&gt;<i> &gt; &gt; &gt; 
</I>&gt;<i> &gt; &gt; &gt; In this instance, the user information is public and the 
</I>&gt;<i> &gt; &gt; implementation
</I>&gt;<i> &gt; &gt; &gt; returns each user's room JID (not a hash).
</I>&gt;<i> &gt; &gt; &gt; 
</I>&gt;<i> &gt; &gt; &gt; If user information is *not* public, then the 
</I>&gt;<i> &gt; &gt; implementation SHOULD return
</I>&gt;<i> &gt; &gt; &gt; empty results, not hashed information, as in Example 11:
</I>&gt;<i> &gt; &gt; &gt; 
</I>&gt;<i> &gt; &gt; &gt; Example 11. Room Returns Empty Disco Item Results (Items 
</I>&gt;<i> &gt; &gt; are Private)
</I>&gt;<i> &gt; &gt; &gt; 
</I>&gt;<i> &gt; &gt; &gt; &lt;iq 
</I>&gt;<i> &gt; &gt; &gt;     type='result'
</I>&gt;<i> &gt; &gt; &gt;     from='<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">darkcave at macbeth.shakespeare.lit</A>'
</I>&gt;<i> &gt; &gt; &gt;     to='<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">hag66 at shakespeare.lit</A>/pda'
</I>&gt;<i> &gt; &gt; &gt;     id='disco4'&gt;
</I>&gt;<i> &gt; &gt; &gt;   &lt;query xmlns='<A HREF="http://jabber.org/protocol/disco#items'/">http://jabber.org/protocol/disco#items'/</A>&gt;
</I>&gt;<i> &gt; &gt; &gt; &lt;/iq&gt;
</I>&gt;<i> &gt; &gt; &gt; 
</I>&gt;<i> &gt; &gt; &gt; Or at least so it seems to me. Thoughts?
</I>&gt;<i> &gt; &gt; &gt; 
</I>&gt;<i> &gt; &gt; Disco returning an empty list makes sense, although it 
</I>&gt;<i> was this that
</I>&gt;<i> &gt; &gt; reminded me of the point I made above regarding different lists.
</I>&gt;<i> &gt; &gt; 
</I>&gt;<i> &gt; &gt; Hope this makes my point a little clearer.
</I>&gt;<i> &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; Peter
</I>&gt;<i> &gt; &gt; &gt; 
</I>&gt;<i> &gt; &gt; &gt; --
</I>&gt;<i> &gt; &gt; &gt; Peter Saint-Andre
</I>&gt;<i> &gt; &gt; &gt; Jabber Software Foundation
</I>&gt;<i> &gt; &gt; &gt; <A HREF="http://www.jabber.org/people/stpeter.php">http://www.jabber.org/people/stpeter.php</A>
</I>&gt;<i> &gt; &gt; &gt; 
</I>&gt;<i> &gt; &gt; &gt; On Tue, 11 Feb 2003, Constantin Nickonov wrote:
</I>&gt;<i> &gt; &gt; &gt; 
</I>&gt;<i> &gt; &gt; &gt; &gt; I understand what you're trying to do. The problem is 
</I>&gt;<i> &gt; &gt; that your methods
</I>&gt;<i> &gt; &gt; &gt; &gt; conflict with the intent of JEP-0045, which will 
</I>&gt;<i> &gt; &gt; eventually result in
</I>&gt;<i> &gt; &gt; &gt; &gt; fragmentation of the standard, i.e., when two or more 
</I>&gt;<i> &gt; &gt; implementations of MUC
</I>&gt;<i> &gt; &gt; &gt; &gt; accomplish the same thing in incompatible ways. Perhaps 
</I>&gt;<i> &gt; &gt; the JEP should be
</I>&gt;<i> &gt; &gt; &gt; &gt; more specific when it comes to laying out the 
</I>&gt;<i> 'jabber:iq:browse'
</I>&gt;<i> &gt; &gt; &gt; &gt; capabilities (which are being phased out in favor of 
</I>&gt;<i> &gt; &gt; disco), but it seems to
</I>&gt;<i> &gt; &gt; &gt; &gt; me the re-introduction of SHA-hashing for this purpose is 
</I>&gt;<i> &gt; &gt; not a good thing.
</I>&gt;<i> &gt; &gt; &gt; &gt; 
</I>&gt;<i> &gt; &gt; &gt; &gt; Sure, you can talk about race conditions, like when I 
</I>&gt;<i> &gt; &gt; browse to get a list
</I>&gt;<i> &gt; &gt; &gt; &gt; of users and one of them chooses that moment to change 
</I>&gt;<i> &gt; &gt; his nick, making my
</I>&gt;<i> &gt; &gt; &gt; &gt; subsequent user-level browse requests invalid. But why 
</I>&gt;<i> &gt; &gt; not just return the
</I>&gt;<i> &gt; &gt; &gt; &gt; real JID (if it's allowed by the room) in the room-level 
</I>&gt;<i> &gt; &gt; browse result?
</I>&gt;<i> &gt; &gt; &gt; &gt; Something like this:
</I>&gt;<i> &gt; &gt; &gt; &gt; 
</I>&gt;<i> &gt; &gt; &gt; &gt; SENT: &lt;iq type='get' to='<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">room at muc.server</A>'&gt;
</I>&gt;<i> &gt; &gt; &gt; &gt;         &lt;query xmlns='jabber:iq:browse'/&gt;
</I>&gt;<i> &gt; &gt; &gt; &gt;       &lt;/iq&gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; READ: &lt;iq type='result' to='<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">user at server</A>/resource' 
</I>&gt;<i> &gt; &gt; from='<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">room at muc.server</A>'&gt;
</I>&gt;<i> &gt; &gt; &gt; &gt;         &lt;conference xmlns='jabber:iq:browse' name='room' 
</I>&gt;<i> &gt; &gt; type='public'&gt;
</I>&gt;<i> &gt; &gt; &gt; &gt;           &lt;ns&gt;<A HREF="http://jabber.org/protocol/muc&lt;/ns">http://jabber.org/protocol/muc&lt;/ns</A>&gt;
</I>&gt;<i> &gt; &gt; &gt; &gt;           &lt;user name='nick1' jid='<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">user2 at server</A>/resource'/&gt;
</I>&gt;<i> &gt; &gt; &gt; &gt;         &lt;/conference&gt;
</I>&gt;<i> &gt; &gt; &gt; &gt;       &lt;/iq&gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; 
</I>&gt;<i> &gt; &gt; &gt; &gt; In the case of an anonymous room, the 'jid' attribute 
</I>&gt;<i> &gt; &gt; could be omitted (or
</I>&gt;<i> &gt; &gt; &gt; &gt; contain the in-room JID for that user, i.e., 
</I>&gt;<i> &gt; &gt; '<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">room at muc.server</A>/nick2').
</I>&gt;<i> &gt; &gt; &gt; &gt; 
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; -----Original Message-----
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; From: David Sutton [mailto:<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">jabber at dsutton.legend.uk.com</A>]
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; Sent: Tuesday, February 11, 2003 8:59 AM
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; To: <A HREF="http://mail.jabber.org/mailman/listinfo/jdev">jdev at jabber.org</A>
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; Subject: Re: [JDEV] MUC problems
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; 
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; 
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; Hello there,
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; 
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt;   We are both correct in this situation. The JEP 
</I>&gt;<i> does define 
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; how the jid
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt;   is to be handled for a presence packet, and 
</I>&gt;<i> &gt; &gt; MU-Conference follows
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt;   that. You will never see the SHA1 string in a 
</I>&gt;<i> &gt; &gt; presence packet. 
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; 
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt;   On the other hand, the system of using an iq 
</I>&gt;<i> request, xmlns
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt;   jabber:iq:browse, to discover the room roster is not 
</I>&gt;<i> &gt; &gt; covered by the 
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt;   JEP. In order to maintain sanity, I have opted to 
</I>&gt;<i> &gt; &gt; continue using the
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt;   existing methods. If you require to see the real jid, 
</I>&gt;<i> &gt; &gt; and you are
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt;   allowed, then browsing the SHA1 resource will reveal 
</I>&gt;<i> &gt; &gt; the true jid. I
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt;   have to use the sha1, since it allows you to track 
</I>&gt;<i> &gt; &gt; the user more
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt;   consistantly - as I tried to explain before, I could use
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt;   '<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">girls at conference.localhost</A>/NICK' for the 
</I>&gt;<i> nickname reported 
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; by browse,
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt;   the problem is that if users swap nicknames, I 
</I>&gt;<i> have no way 
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; of knowing
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt;   that is what happened. The SHA1 string is unique 
</I>&gt;<i> to that user.
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; 
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; Regards,
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; 
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt;   David
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; 
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; On Tue, Feb 11, 2003 at 08:12:16AM -0700, Constantin 
</I>&gt;<i> &gt; &gt; Nickonov wrote:
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; see below
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; 
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; -----Original Message-----
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; From: David Sutton [mailto:<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">jabber at dsutton.legend.uk.com</A>]
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; Sent: Monday, February 10, 2003 8:51 PM
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; To: <A HREF="http://mail.jabber.org/mailman/listinfo/jdev">jdev at jabber.org</A>
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; Subject: Re: [JDEV] MUC problems
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; 
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &lt;snip&gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; 
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; The hex string is actually a SHA1 hash of the 
</I>&gt;<i> users real 
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; jid. Its used
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; to reference a user, but not reveal the true jid. 
</I>&gt;<i> &gt; &gt; If the room 
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; is set up to allow people to see the real jid, then 
</I>&gt;<i> &gt; &gt; just browse
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; 
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; 
</I>&gt;<i> <A HREF="http://mail.jabber.org/mailman/listinfo/jdev">girls at conference.localhost</A>/13c6a01dc31309e331c2b018640b9c03b85
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; 34327 and
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; it will show you the true jid. This also helps to keep 
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; compatability to
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; existing clients that are used to this form with the
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; groupchat/conferencing module. The real jid is used as 
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; the reference, as
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; a person can keep changing their nick throughout a 
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; session, but they
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; can't change their real jid
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; 
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; The problem with this is that the MUC standard (JEP-0045) 
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; specifies how
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; nicknames are passed along with presence information, and 
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; how they are
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; changed -- and SHA-hashing isn't the way.
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; 
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; Entering a room (JEP-0045, section 6.2):
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; 
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt;   SENT: &lt;presence to='<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">foo at muc.server</A>/nick1'&gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt;           &lt;x xmlns='<A HREF="http://jabber.org/protocol/muc'/">http://jabber.org/protocol/muc'/</A>&gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt;         &lt;/presence&gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt;   READ: &lt;presence from='<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">foo at muc.server</A>/nick1' 
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; to='<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">user at server</A>/resource'&gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt;           &lt;x xmlns='<A HREF="http://jabber.org/protocol/muc#user'">http://jabber.org/protocol/muc#user'</A>&gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt;             &lt;item affiliation='owner' 
</I>&gt;<i> &gt; &gt; jid='<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">user at server</A>/resource'
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; role='moderator'/&gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt;           &lt;/x&gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt;         &lt;/presence&gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; 
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; Changing the nick (JEP-0045, section 6.4):
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; 
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt;   SENT: &lt;presence to='<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">foo at muc.server</A>/nick2'/&gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt;   READ: &lt;presence type='unavailable' 
</I>&gt;<i> &gt; &gt; from='<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">foo at muc.server</A>/nick1'
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; to='<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">user at server</A>/resource'&gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt;           &lt;x xmlns='<A HREF="http://jabber.org/protocol/muc#user'">http://jabber.org/protocol/muc#user'</A>&gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt;             &lt;item nick='nick2' affiliation='owner'
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; jid='<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">user at server</A>/resource' role='moderator'/&gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt;             &lt;status code='303'/&gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt;           &lt;/x&gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt;         &lt;/presence&gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt;         &lt;presence from='<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">foo at muc.server</A>/nick2' 
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; to='<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">user at server</A>/resource'&gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt;           &lt;x xmlns='<A HREF="http://jabber.org/protocol/muc#user'">http://jabber.org/protocol/muc#user'</A>&gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt;             &lt;item affiliation='owner' 
</I>&gt;<i> &gt; &gt; jid='<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">user at server</A>/resource'
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; role='moderator'/&gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt;           &lt;/x&gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt;         &lt;/presence&gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; 
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; The MUC protocol wasn't designed to be fully 
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; backward-compatible with the
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; JCF draft.
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; 
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; Constantin
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; _______________________________________________
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; jdev mailing list
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; <A HREF="http://mail.jabber.org/mailman/listinfo/jdev">jdev at jabber.org</A>
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; <A HREF="http://mailman.jabber.org/listinfo/jdev">http://mailman.jabber.org/listinfo/jdev</A>
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; 
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; -- 
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; David Sutton
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; Email: <A HREF="http://mail.jabber.org/mailman/listinfo/jdev">dsutton at legend.co.uk</A>
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; Jabber: <A HREF="http://mail.jabber.org/mailman/listinfo/jdev">peregrine at legend.net.uk</A>
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; 
</I>&gt;<i> &gt; &gt; &gt; &gt; _______________________________________________
</I>&gt;<i> &gt; &gt; &gt; &gt; jdev mailing list
</I>&gt;<i> &gt; &gt; &gt; &gt; <A HREF="http://mail.jabber.org/mailman/listinfo/jdev">jdev at jabber.org</A>
</I>&gt;<i> &gt; &gt; &gt; &gt; <A HREF="http://mailman.jabber.org/listinfo/jdev">http://mailman.jabber.org/listinfo/jdev</A>
</I>&gt;<i> &gt; &gt; &gt; &gt; 
</I>&gt;<i> &gt; &gt; &gt; 
</I>&gt;<i> &gt; &gt; &gt; 
</I>&gt;<i> &gt; &gt; &gt; 
</I>&gt;<i> &gt; &gt; &gt; _______________________________________________
</I>&gt;<i> &gt; &gt; &gt; jdev mailing list
</I>&gt;<i> &gt; &gt; &gt; <A HREF="http://mail.jabber.org/mailman/listinfo/jdev">jdev at jabber.org</A>
</I>&gt;<i> &gt; &gt; &gt; <A HREF="http://mailman.jabber.org/listinfo/jdev">http://mailman.jabber.org/listinfo/jdev</A>
</I>&gt;<i> &gt; &gt; 
</I>&gt;<i> &gt; &gt; -- 
</I>&gt;<i> &gt; &gt; David Sutton
</I>&gt;<i> &gt; &gt; Email: <A HREF="http://mail.jabber.org/mailman/listinfo/jdev">dsutton at legend.co.uk</A>
</I>&gt;<i> &gt; &gt; Jabber: <A HREF="http://mail.jabber.org/mailman/listinfo/jdev">peregrine at legend.net.uk</A>
</I>&gt;<i> &gt; &gt; _______________________________________________
</I>&gt;<i> &gt; &gt; jdev mailing list
</I>&gt;<i> &gt; &gt; <A HREF="http://mail.jabber.org/mailman/listinfo/jdev">jdev at jabber.org</A>
</I>&gt;<i> &gt; &gt; <A HREF="http://mailman.jabber.org/listinfo/jdev">http://mailman.jabber.org/listinfo/jdev</A>
</I>&gt;<i> &gt; &gt; 
</I>&gt;<i> &gt; _______________________________________________
</I>&gt;<i> &gt; jdev mailing list
</I>&gt;<i> &gt; <A HREF="http://mail.jabber.org/mailman/listinfo/jdev">jdev at jabber.org</A>
</I>&gt;<i> &gt; <A HREF="http://mailman.jabber.org/listinfo/jdev">http://mailman.jabber.org/listinfo/jdev</A>
</I>&gt;<i> 
</I>&gt;<i> -- 
</I>&gt;<i> David Sutton
</I>&gt;<i> Email: <A HREF="http://mail.jabber.org/mailman/listinfo/jdev">dsutton at legend.co.uk</A>
</I>&gt;<i> Jabber: <A HREF="http://mail.jabber.org/mailman/listinfo/jdev">peregrine at legend.net.uk</A>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> jdev mailing list
</I>&gt;<i> <A HREF="http://mail.jabber.org/mailman/listinfo/jdev">jdev at jabber.org</A>
</I>&gt;<i> <A HREF="http://mailman.jabber.org/listinfo/jdev">http://mailman.jabber.org/listinfo/jdev</A>
</I>&gt;<i> 
</I>
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="074420.html">[JDEV] MUC problems
</A></li>
	<LI>Next message: <A HREF="074423.html">[JDEV] MUC problems
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#74422">[ date ]</a>
              <a href="thread.html#74422">[ thread ]</a>
              <a href="subject.html#74422">[ subject ]</a>
              <a href="author.html#74422">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://mail.jabber.org/mailman/listinfo/jdev">More information about the JDev
mailing list</a><br>
</body></html>
