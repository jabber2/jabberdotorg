<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [jdev] s2s connections and presence
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:jdev%40jabber.org?Subject=Re%3A%20%5Bjdev%5D%20s2s%20connections%20and%20presence&In-Reply-To=%3C20060519170839.GA23796%40adsi-m4.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="083204.html">
   <LINK REL="Next"  HREF="083207.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[jdev] s2s connections and presence</H1>
    <B>Wendell Turner</B> 
    <A HREF="mailto:jdev%40jabber.org?Subject=Re%3A%20%5Bjdev%5D%20s2s%20connections%20and%20presence&In-Reply-To=%3C20060519170839.GA23796%40adsi-m4.com%3E"
       TITLE="[jdev] s2s connections and presence">wendell at adsi-m4.com
       </A><BR>
    <I>Fri May 19 12:08:39 CDT 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="083204.html">[jdev] Re: [Juser] 'lightweighting' Jabber chat for sllloooooow l	inks...&amp; UDP?!
</A></li>
        <LI>Next message: <A HREF="083207.html">[jdev] s2s connections and presence
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#83205">[ date ]</a>
              <a href="thread.html#83205">[ thread ]</a>
              <a href="subject.html#83205">[ subject ]</a>
              <a href="author.html#83205">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I have some questions about s2s connections in jabberd 1.4.

Question 1:

  romeo logs in to montague.com (sets status to online)
  juliet logs in to capulet.com (sets status to online)
  romeo received presence indication for juliet
  juliet received presence indication for romeo

Jabber clients (psi in this case) show presence for both.

  capulet.com crashes (tcp connections between montague.com
  and capulet.com are torn down)

  romeo's presence indication (that juliet is online) never
  changes.

Is this how it is supposed to work?  Is this behavior affected
by the queuetimeout or idletimeout in the s2s section of the
config file?

Would other servers (jabberd2, ejabberd) behave differently
(i.e., remove the presence indication when s2s tcp connections
die)?

Even when romeo tries to send a chat msg, an error is evenutally
sent back to the client, yet still the presence doesn't change.


Question 2:

  romeo logs in to montague.com (sets status to online)
  juliet logs in to capulet.com (sets status to online)

Both montague.com and capulet.com try to establish tcp
connections to each other, but are unsuccessful (Verona's
network is down).  When Verona's networks come back up, what
mechanism in either server causes presence to 'reconnect'?

If either romeo or juliet sets their status to offline, then
back to online, that triggers the servers to re-try the
connections, but will the servers do it by themselves?

Wendell


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="083204.html">[jdev] Re: [Juser] 'lightweighting' Jabber chat for sllloooooow l	inks...&amp; UDP?!
</A></li>
	<LI>Next message: <A HREF="083207.html">[jdev] s2s connections and presence
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#83205">[ date ]</a>
              <a href="thread.html#83205">[ thread ]</a>
              <a href="subject.html#83205">[ subject ]</a>
              <a href="author.html#83205">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://mail.jabber.org/mailman/listinfo/jdev">More information about the JDev
mailing list</a><br>
</body></html>
