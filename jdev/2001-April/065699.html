<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [JDEV] segfault in libpth on 1.4.1
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:jdev%40jabber.org?Subject=Re%3A%20%5BJDEV%5D%20segfault%20in%20libpth%20on%201.4.1&In-Reply-To=%3C20010411140756.D8330%40blank.org%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="065692.html">
   <LINK REL="Next"  HREF="065706.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[JDEV] segfault in libpth on 1.4.1</H1>
    <B>Nathan J. Mehl</B> 
    <A HREF="mailto:jdev%40jabber.org?Subject=Re%3A%20%5BJDEV%5D%20segfault%20in%20libpth%20on%201.4.1&In-Reply-To=%3C20010411140756.D8330%40blank.org%3E"
       TITLE="[JDEV] segfault in libpth on 1.4.1">memory at blank.org
       </A><BR>
    <I>Wed Apr 11 13:07:56 CDT 2001</I>
    <P><UL>
        <LI>Previous message: <A HREF="065692.html">[JDEV] Test Suite released!
</A></li>
        <LI>Next message: <A HREF="065706.html">[JDEV] Kid-safe messaging: [was buddy icons]
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#65699">[ date ]</a>
              <a href="thread.html#65699">[ thread ]</a>
              <a href="subject.html#65699">[ subject ]</a>
              <a href="author.html#65699">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>After an upgrade to 1.4.1, things were mostly quiet until today, when
jabberd took a very ungraceful dive, twice.  All I found in the logs
were:

@400000003ad49bfc2c7752dc aim_tx_new: ERROR: no connection specified
@400000003ad49bfd0ad24d44 unknown capability!
@400000003ad49bfd0adae094 unknown capability!
@400000003ad49bfd0addcaac unknown capability!
@400000003ad49bfd0adf6ca4 unknown capability!
@400000003ad49bfd0ae23f4c unknown capability!
@400000003ad49bfd0b4229fc unknown capability!
@400000003ad49bfd0b4523b4 unknown capability!
@400000003ad49bfd0b4809e4 unknown capability!
@400000003ad49bfd0b49a40c unknown capability!
@400000003ad49bfd0b4c7a9c unknown capability!
@400000003ad49bfd0c6c59ec unknown capability!
@400000003ad49bfd0c7458cc unknown capability!
@400000003ad49bfd0c754ee4 unknown capability!
@400000003ad49bfd0c76ecf4 unknown capability!
@400000003ad49c0713d51c3c 20010411T18:01:33: [notice] (yahoo.mspt.com): Closing down session for <A HREF="http://mail.jabber.org/mailman/listinfo/jdev">yaz at jabber.mspt.com</A>
@400000003ad49c07141044c4 20010411T18:01:33: [warn] (sessions.c:1082): [AT] Closing down session for <A HREF="http://mail.jabber.org/mailman/listinfo/jdev">yaz at jabber.mspt.com</A>/Home
@400000003ad49c0800291d64 Users-Agent: Connection to server lost...
@400000003ad49c0800294474 Users-Agent: Giving up and exiting...

(Note that the odd date format here is an artifact of multilog.)

Backtrace follows:

This GDB was configured as &quot;i386-redhat-linux&quot;...
Core was generated by `/local/vol/jabber/jabberd/jabberd'.
Program terminated with signal 11, Segmentation fault.
Reading symbols from /local/lib/libpth.so.13...done.
Reading symbols from /lib/libdl.so.2...done.
Reading symbols from /lib/libresolv.so.2...done.
Reading symbols from /lib/libc.so.6...done.
Reading symbols from /lib/ld-linux.so.2...done.
Reading symbols from /local/vol/jabber-1.4.1/./jsm/jsm.so...done.
Reading symbols from /local/vol/jabber-1.4.1/./xdb_file/xdb_file.so...done.
Reading symbols from /local/vol/jabber-1.4.1/./pthsock/pthsock_client.so...  done.
Reading symbols from /local/vol/jabber-1.4.1/./dnsrv/dnsrv.so...done.
Reading symbols from /local/vol/jabber-1.4.1/./dialback/dialback.so...done.
Reading symbols from /local/vol/jabber-1.4.1/./conference-0.4/conference.so...  done.
Reading symbols from /local/vol/jabber-1.4.1/./aim-transport/src/aimtrans.so...  done.
Reading symbols from /local/vol/jabber-1.4.1/./icq-transport-0.9/icqtrans.so...  done.
Reading symbols from /local/vol/jabber-1.4.1/./msn-transport-1.1/msntrans.so...  done.
Reading symbols from /local/vol/jabber-1.4.1/./yahoo-transport-0.8-1.4/src/yahootrans.so...done.
Reading symbols from /lib/libnss_dns.so.2...done.
#0  0x8056fd1 in jid_cmp (a=0x30, b=0x83462f0) at jid.c:231 231	    if(_jid_nullstrcmp(a-&gt;resource, b-&gt;resource) != 0) return -1;
(gdb) bt
#0  0x8056fd1 in jid_cmp (a=0x30, b=0x83462f0) at jid.c:231
#1  0x805715d in jid_append (a=0x30, b=0x83462f0) at jid.c:266
#2  0x401cac33 in yahoo_parse_presence (yjp=0x8346340) at presence.c:268
#3  0x401c9ade in yahoo_parse_jpacket (arg=0x8346340) at parser.c:279
#4  0x8055328 in mtq_main (arg=0x81436d8) at mtq.c:150
#5  0x4001eeee in pth_spawn_trampoline () from /local/lib/libpth.so.13
#6  0x4001d058 in pth_mctx_set_bootstrap () from /local/lib/libpth.so.13
#7  0x4001cfd6 in pth_mctx_set_trampoline () from /local/lib/libpth.so.13
#8  0x4005ac68 in __restore () at ../sysdeps/unix/sysv/linux/i386/sigaction.c:127
#9  0x80587e5 in pmalloc (p=0x1ed, size=128) at pool.c:151

-n

------------------------------------------------------------&lt;<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">memory at blank.org</A>&gt;
   &quot;We have a kinky sex emergency over here! Only one man can save us now!&quot;
&lt;<A HREF="http://blank.org/memory/">http://blank.org/memory/</A>&gt;----------------------------------------------------


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="065692.html">[JDEV] Test Suite released!
</A></li>
	<LI>Next message: <A HREF="065706.html">[JDEV] Kid-safe messaging: [was buddy icons]
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#65699">[ date ]</a>
              <a href="thread.html#65699">[ thread ]</a>
              <a href="subject.html#65699">[ subject ]</a>
              <a href="author.html#65699">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://mail.jabber.org/mailman/listinfo/jdev">More information about the JDev
mailing list</a><br>
</body></html>
