<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [JDEV] Transports &amp; Presence
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:jdev%40jabber.org?Subject=Re%3A%20%5BJDEV%5D%20Transports%20%26%20Presence&In-Reply-To=%3C20010403103718.L5692%40obtusian.its.monash.edu.au%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="065488.html">
   <LINK REL="Next"  HREF="065489.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[JDEV] Transports &amp; Presence</H1>
    <B>Robert Norris</B> 
    <A HREF="mailto:jdev%40jabber.org?Subject=Re%3A%20%5BJDEV%5D%20Transports%20%26%20Presence&In-Reply-To=%3C20010403103718.L5692%40obtusian.its.monash.edu.au%3E"
       TITLE="[JDEV] Transports &amp; Presence">Robert.Norris at its.monash.edu.au
       </A><BR>
    <I>Mon Apr  2 19:37:18 CDT 2001</I>
    <P><UL>
        <LI>Previous message: <A HREF="065488.html">[JDEV] Q: How to indicate denial of subscription?
</A></li>
        <LI>Next message: <A HREF="065489.html">[JDEV] Transports &amp; Presence
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#65487">[ date ]</a>
              <a href="thread.html#65487">[ thread ]</a>
              <a href="subject.html#65487">[ subject ]</a>
              <a href="author.html#65487">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

The transport I'm writing interacts with our legacy IM system.
Unfortunately, this system only sends (the equivalent of) presence
information when you go online (based on your &quot;watch&quot;, similar to the
roster, but you don't need to ask for subscription). Because of this,
its not possible to update Jabber rosters in realtime.

An example may prove useful:

1. User logs in (via transport) to external IM system. External system
   replies &quot;Watched people on: foo bar&quot;
2. User goes away/xa/dnd. External system does nothing.
3. User goes online. External system replies &quot;Watched people on: foo bar&quot;

Because I can't get realtime presence info, I wanted to make sure that
all presence information from the external system gets used to update
all Jabber rosters, regardless of who that presence is bound for.

I assumed that simply sending the server a packet like:

&lt;presence from='<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">user at transport</A>/resource'/&gt;

would cause the server to send presence to everyone who has subscribed
to that user. However, the server comes back with &quot;Packet delivery
failed, invalid packet&quot;.

The only way I've made it work so far is to manually send presence to
ever user registered with the transport, which is alot of work and
causes the clients to get presence information for users they have no
interest in.

What am I doing wrong?

TIA,
Rob.
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 232 bytes
Desc: not available
URL: &lt;<A HREF="https://www.jabber.org/jdev/attachments/20010403/feb4e62f/attachment-0002.pgp">https://www.jabber.org/jdev/attachments/20010403/feb4e62f/attachment-0002.pgp</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="065488.html">[JDEV] Q: How to indicate denial of subscription?
</A></li>
	<LI>Next message: <A HREF="065489.html">[JDEV] Transports &amp; Presence
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#65487">[ date ]</a>
              <a href="thread.html#65487">[ thread ]</a>
              <a href="subject.html#65487">[ subject ]</a>
              <a href="author.html#65487">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://mail.jabber.org/mailman/listinfo/jdev">More information about the JDev
mailing list</a><br>
</body></html>
