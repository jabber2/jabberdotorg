<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [JDEV] Non english messages solution
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:jdev%40jabber.org?Subject=%5BJDEV%5D%20Non%20english%20messages%20solution&In-Reply-To=Pine.LNX.4.30.0104081623090.684-100000%40john.if-site.local">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="007044.html">
   <LINK REL="Next"  HREF="007021.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[JDEV] Non english messages solution</H1>
    <B>Eugene Tyurkin</B> 
    <A HREF="mailto:jdev%40jabber.org?Subject=%5BJDEV%5D%20Non%20english%20messages%20solution&In-Reply-To=Pine.LNX.4.30.0104081623090.684-100000%40john.if-site.local"
       TITLE="[JDEV] Non english messages solution">john at if-site.com
       </A><BR>
    <I>Mon Apr  9 00:40:03 CDT 2001</I>
    <P><UL>
        <LI>Previous message: <A HREF="007044.html">[JDEV] Non english messages problem (solution)
</A></li>
        <LI>Next message: <A HREF="007021.html">[JDEV] Relationship with .NET?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7026">[ date ]</a>
              <a href="thread.html#7026">[ thread ]</a>
              <a href="subject.html#7026">[ subject ]</a>
              <a href="author.html#7026">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Looks like you don't understand me correctly. So let's try again.

All I want to say is that jabber's ability to send everything in unicode
can solve ANY problems with characters encodings. If I'll convert message
to unicode using right charset (cp1251) so I can easily decode it to
enother charset (koi8-r). Here's example in python:

#!/usr/bin/python
#---------------------------------------------------------------------
#I use python 1.5.2 in this example, so
#I include unicode support from pynicode python module
#---------------------------------------------------------------------
from pynicode.ustring import ustring

cp1251Text = &quot;&#1088;&#1064; &#1043;&#1044;&#1045;&#1071;&#1069;?&quot; #This is a text in cp1251 encoding

#-------------------------------------------------------
#I know that original text in cp1251 so I can convert it
#to unicode correctly
#-------------------------------------------------------
unicodeText = ustring('cp1251',cp1251Text)

#-----------------------------------------------
#And know all we need is to get original message
#in koi8-r encoding
#-----------------------------------------------
print &quot;text in koi8-r:&quot;,utext.GetValue('koi8-r')

That's all. Actually all that client need is to use last line of example
code. All that agent need is the first lines. Sure it must be a little
more difficult in C to implement this but guess it's not a big problem.

BUT! Agent MUST know incoming encoding. So I suggest to include preferable
encoding to the registration protocol. For example when you register an
ICQ agent you must input you nickname, icq number and other things. So why
do not include encoding information? Once entered during registration you
will never be worry about incorrect character translation. Agent will
always know incoming encoding so it will have an ability to
correctly encode messages to unicode and back. Sure it can have a default
encoding so user can use it if it doesn't care, but in my case it has a big
meaning.

By the way, it must be not only an icq agent problem but any other agents
too. That's why I suggest to include encoding information to the protocol
layer.

So what can YOU say?



</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="007044.html">[JDEV] Non english messages problem (solution)
</A></li>
	<LI>Next message: <A HREF="007021.html">[JDEV] Relationship with .NET?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7026">[ date ]</a>
              <a href="thread.html#7026">[ thread ]</a>
              <a href="subject.html#7026">[ subject ]</a>
              <a href="author.html#7026">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://mail.jabber.org/mailman/listinfo/jdev">More information about the JDev
mailing list</a><br>
</body></html>
