<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [JDEV] Users-Agent Problem
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:jdev%40jabber.org?Subject=%5BJDEV%5D%20Users-Agent%20Problem&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="007027.html">
   <LINK REL="Next"  HREF="007164.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[JDEV] Users-Agent Problem</H1>
    <B>Brazell, Bill</B> 
    <A HREF="mailto:jdev%40jabber.org?Subject=%5BJDEV%5D%20Users-Agent%20Problem&In-Reply-To="
       TITLE="[JDEV] Users-Agent Problem">bill.brazell at attws.com
       </A><BR>
    <I>Mon Apr  9 10:51:42 CDT 2001</I>
    <P><UL>
        <LI>Previous message: <A HREF="007027.html">[JDEV] Icq-transport Bus error on Solaris7&amp;sparc
</A></li>
        <LI>Next message: <A HREF="007164.html">[JDEV] Users-Agent Problem
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7032">[ date ]</a>
              <a href="thread.html#7032">[ thread ]</a>
              <a href="subject.html#7032">[ subject ]</a>
              <a href="author.html#7032">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I'm attempting to get Ryan Eatmon's users-agent user's directory to work but
am having a problem.  I receive a &quot;Server Connect Failed&quot; message when
attempting to find a user.

Hopefully someone will be able to help.

Here is a copy of my config.xml file:

&lt;config&gt;
  &lt;server&gt;
    &lt;connectiontype&gt;stdinout&lt;/connectiontype&gt;
    &lt;hostname&gt;etech-web.nwest.attws.com&lt;/hostname&gt;
    &lt;port&gt;5226&lt;/port&gt;
    &lt;secret&gt;foobar&lt;/secret&gt;
  &lt;/server&gt;
  &lt;component&gt;
    &lt;name&gt;users.etech-web.nwest.attws.com&lt;/name&gt;
  &lt;/component&gt;
  &lt;mysql&gt;
    &lt;dbname&gt;JUD&lt;/dbname&gt;
    &lt;username&gt;root&lt;/username&gt;
    &lt;/password&gt;
    &lt;limit&gt;250&lt;/limit&gt;
  &lt;/mysql&gt;
&lt;/config&gt;

The hostname exists in our internal DNS.  The component name does not.  I
have entered the component name into the local hosts file as follows:

127.0.0.1     localhost.localdomain     localhost
users.etech-web.nwest.attws.com

Here is the first service entry within my jabber.xml file:

&lt;service type=&quot;jud&quot; jid=&quot;users.etech-web.nwest.attws.com&quot; name=&quot;ETech User
Directory&quot;&gt;
          &lt;ns&gt;jabber:iq:search&lt;/ns&gt;
          &lt;ns&gt;jabber:iq:register&lt;/ns&gt;
        &lt;/service&gt;

When I start users-agent in debug mode, I receive the following output:

&quot;my&quot; variable $sth masks earlier declaration in same scope at ./users-agent
line 267.
    DBI::db=HASH(0x870e2a4) trace level set to 2 in DBI 1.14-nothread
XML::Stream: new: hostname = (etech-web.nwest.attws.com)
XML::Stream: SetCallBacks: tag(node) func(CODE(0x871d5e4))
NJ::Component: SetCallBacks: tag(iq) func(CODE(0x86906e8))
NJ::Component: SetCallBacks: tag(presence) func(CODE(0x8689b28))
NJ::Component: SetCallBacks: tag(message) func(CODE(0x868961c))
NJ::Component: Connect: type(stdinout)
XML::Stream: Connect: type(stdinout)
XML::Stream: Send: (&lt;?xml version=&quot;1.0&quot;?&gt;&lt;stream:stream
xmlns:stream=&quot;<A HREF="http://etherx.jabber.org/streams&quot;">http://etherx.jabber.org/streams&quot;</A>
xmlns=&quot;jabber:component:exec&quot; &gt;)
&lt;?xml version=&quot;1.0&quot;?&gt;&lt;stream:stream
xmlns:stream=&quot;<A HREF="http://etherx.jabber.org/streams&quot;">http://etherx.jabber.org/streams&quot;</A>
xmlns=&quot;jabber:component:exec&quot; &gt;

When I select Find from within JabberIM, I receive this:

[<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">root at etech-web</A> users-agent]# 20010409T14:02:16: [alert]
(users.etech-web.nwest.attws.com): hostname maps back to ourselves!
20010409T14:02:16: [notice] (users.etech-web.nwest.attws.com): failed to
establish connection
20010409T14:02:16: [notice] (users.etech-web.nwest.attws.com): bouncing a
packet to users.etech-web.nwest.attws.com from
<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">bbrazell at etech-web.nwest.attws.com</A>/Work: Server Connect Failed

I think the first error is somewhat strange.  I want it to map back to the
local host.  I'm also not sure why the Stream module wants to send to
etherx.jabber.org/streams.

Does anyone have any idea of what I'm missing here?

Thanks,

Bill Brazell
AT&amp;T Wireless




</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="007027.html">[JDEV] Icq-transport Bus error on Solaris7&amp;sparc
</A></li>
	<LI>Next message: <A HREF="007164.html">[JDEV] Users-Agent Problem
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7032">[ date ]</a>
              <a href="thread.html#7032">[ thread ]</a>
              <a href="subject.html#7032">[ subject ]</a>
              <a href="author.html#7032">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://mail.jabber.org/mailman/listinfo/jdev">More information about the JDev
mailing list</a><br>
</body></html>
