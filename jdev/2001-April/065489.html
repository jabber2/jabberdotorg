<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [JDEV] Transports &amp; Presence
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:jdev%40jabber.org?Subject=Re%3A%20%5BJDEV%5D%20Transports%20%26%20Presence&In-Reply-To=%3C20010403135423.G4037%40Flint.digix.dyndns.org%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="065487.html">
   <LINK REL="Next"  HREF="065490.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[JDEV] Transports &amp; Presence</H1>
    <B>Keith Minkler</B> 
    <A HREF="mailto:jdev%40jabber.org?Subject=Re%3A%20%5BJDEV%5D%20Transports%20%26%20Presence&In-Reply-To=%3C20010403135423.G4037%40Flint.digix.dyndns.org%3E"
       TITLE="[JDEV] Transports &amp; Presence">kminkler at jabber.com
       </A><BR>
    <I>Tue Apr  3 13:54:23 CDT 2001</I>
    <P><UL>
        <LI>Previous message: <A HREF="065487.html">[JDEV] Transports &amp; Presence
</A></li>
        <LI>Next message: <A HREF="065490.html">[JDEV] jabber:x:envelope
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#65489">[ date ]</a>
              <a href="thread.html#65489">[ thread ]</a>
              <a href="subject.html#65489">[ subject ]</a>
              <a href="author.html#65489">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>&gt;<i> I assumed that simply sending the server a packet like:
</I>&gt;<i> &lt;presence from='<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">user at transport</A>/resource'/&gt;
</I>&gt;<i> 
</I>&gt;<i> would cause the server to send presence to everyone who has subscribed
</I>&gt;<i> to that user. However, the server comes back with &quot;Packet delivery
</I>&gt;<i> failed, invalid packet&quot;.
</I>
That is an invalid packet (coming from a transport), becuase there is
no destination. When a user sends a packet without a destination, the
server puts the destination on there for them (the local server becomes
the destination), but when you are working from a transport every destination
must be explicit.  

Therefore, your transport must keep track of every user that has a
subscription to the transport *AND* who's presence they are watching.
so that when your transport gets presence info from the external network,
it simply needs to search these lists for people to send out presence to,
then it has to send a single presence packet *FOR EACH* person it needs
to send it to, each time making sure the destination is correct.

At least, that's what I think you are trying to do.. =}

Keith Minkler

-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 232 bytes
Desc: not available
URL: &lt;<A HREF="https://www.jabber.org/jdev/attachments/20010403/fb07b0c0/attachment-0002.pgp">https://www.jabber.org/jdev/attachments/20010403/fb07b0c0/attachment-0002.pgp</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="065487.html">[JDEV] Transports &amp; Presence
</A></li>
	<LI>Next message: <A HREF="065490.html">[JDEV] jabber:x:envelope
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#65489">[ date ]</a>
              <a href="thread.html#65489">[ thread ]</a>
              <a href="subject.html#65489">[ subject ]</a>
              <a href="author.html#65489">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://mail.jabber.org/mailman/listinfo/jdev">More information about the JDev
mailing list</a><br>
</body></html>
