<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [JDEV] Detecting client/server disconnect?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:jdev%40jabber.org?Subject=Re%3A%20%5BJDEV%5D%20Detecting%20client/server%20disconnect%3F&In-Reply-To=%3C01c301c0bebc%24ffc82610%2479ca23d8%40webspective.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="036271.html">
   <LINK REL="Next"  HREF="036276.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[JDEV] Detecting client/server disconnect?</H1>
    <B>Chuck Wegryzn</B> 
    <A HREF="mailto:jdev%40jabber.org?Subject=Re%3A%20%5BJDEV%5D%20Detecting%20client/server%20disconnect%3F&In-Reply-To=%3C01c301c0bebc%24ffc82610%2479ca23d8%40webspective.com%3E"
       TITLE="[JDEV] Detecting client/server disconnect?">wegrzyn at garbagedump.com
       </A><BR>
    <I>Fri Apr  6 12:14:08 CDT 2001</I>
    <P><UL>
        <LI>Previous message: <A HREF="036271.html">[JDEV] Detecting client/server disconnect?
</A></li>
        <LI>Next message: <A HREF="036276.html">[JDEV] Detecting client/server disconnect?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#36273">[ date ]</a>
              <a href="thread.html#36273">[ thread ]</a>
              <a href="subject.html#36273">[ subject ]</a>
              <a href="author.html#36273">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Well I can't answer to how jabber detects outages, but I can comment on the SO_KEEPALIVE. You can program it to be any length of time (it's an ioctl).

Chuck Wegrzyn

  ----- Original Message ----- 
  From: Jens Alfke 
  To: <A HREF="http://mail.jabber.org/mailman/listinfo/jdev">jdev at jabber.org</A> 
  Sent: Friday, April 06, 2001 12:58 PM
  Subject: [JDEV] Detecting client/server disconnect?


  How does the Jabber protocol deal with the unexpected disconnection of a client or server? I'm referring not to a process crash, but to unlikely situations like kernel panic or power failure, as well as more likely ones like network failure (modem hangs up, PacBell's DSL network horks, laptop moves out of 802.11 range, baby yanks out Ethernet plug, etc.)

  According to R. Stevens' Unix Network Programming, vol. 1 (pp.185-186), this situation is not detectable unless the SO_KEEPALIVE socket option is set. (But libjabber doesn't set this option.) And even keepalive only detects it after two hours, which is rather too long for a real-time presence protocol.

  Some other presence protocols solve this by requiring the client to send a &quot;noop&quot; or &quot;ping&quot; command every few minutes, which the server must respond to. Jabber doesn't seem to have anything equivalent. Am I missing or misunderstanding something, or is this an issue with the current Jabber protocol?

  &#8212;Jens
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="https://www.jabber.org/jdev/attachments/20010406/4f01815d/attachment-0001.htm">https://www.jabber.org/jdev/attachments/20010406/4f01815d/attachment-0001.htm</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="036271.html">[JDEV] Detecting client/server disconnect?
</A></li>
	<LI>Next message: <A HREF="036276.html">[JDEV] Detecting client/server disconnect?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#36273">[ date ]</a>
              <a href="thread.html#36273">[ thread ]</a>
              <a href="subject.html#36273">[ subject ]</a>
              <a href="author.html#36273">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://mail.jabber.org/mailman/listinfo/jdev">More information about the JDev
mailing list</a><br>
</body></html>
