<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [JDEV] Karma and transferring large XML message packets...
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:jdev%40jabber.org?Subject=Re%3A%20%5BJDEV%5D%20Karma%20and%20transferring%20large%20XML%20message%20packets...&In-Reply-To=%3C002301c0cb32%24aa442590%246401a8c0%40skippy%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="065881.html">
   <LINK REL="Next"  HREF="065877.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[JDEV] Karma and transferring large XML message packets...</H1>
    <B>Peter Sparago</B> 
    <A HREF="mailto:jdev%40jabber.org?Subject=Re%3A%20%5BJDEV%5D%20Karma%20and%20transferring%20large%20XML%20message%20packets...&In-Reply-To=%3C002301c0cb32%24aa442590%246401a8c0%40skippy%3E"
       TITLE="[JDEV] Karma and transferring large XML message packets...">peter.sparago at snet.net
       </A><BR>
    <I>Sun Apr 22 08:46:42 CDT 2001</I>
    <P><UL>
        <LI>Previous message: <A HREF="065881.html">[JDEV] Jabber Events
</A></li>
        <LI>Next message: <A HREF="065877.html">[JDEV] Karma and transferring large XML message packets...
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#65876">[ date ]</a>
              <a href="thread.html#65876">[ thread ]</a>
              <a href="subject.html#65876">[ subject ]</a>
              <a href="author.html#65876">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi All,

I am fairly new to Jabber (since about Feb 1) but I must say, It ROCKS! I am designing a P2P system that uses Jabber as one of the information transports. In addition to normal chat messaging, we are using Jabber messaging to transfer large amounts of XML data (using an 'x' namespace) between Jabber users. The 'x' XML data will probably be in the 30K - 300K range. I am able to send a 6K packet without any trouble, the packet I am having trouble with is 60K.

We are using Jabber 1.4.1. I've adjusted the Karma settings as follows:

      &lt;karma&gt;
        &lt;heartbeat&gt;2&lt;/heartbeat&gt;
        &lt;init&gt;64&lt;/init&gt;
        &lt;max&gt;64&lt;/max&gt;
        &lt;inc&gt;6&lt;/inc&gt;
        &lt;dec&gt;1&lt;/dec&gt;
        &lt;penalty&gt;-3&lt;/penalty&gt;
        &lt;restore&gt;64&lt;/restore&gt;
      &lt;/karma&gt;


When I send the problem packet I get the following from Jabber:

    &lt;stream:error xmlns=&quot;<A HREF="http://etherx.jabber.org/streams&quot;">http://etherx.jabber.org/streams&quot;</A>&gt;Invalid XML&lt;/stream:error&gt;

And then I get the following Java program exception:

    Exception processing results: java.net.SocketException: Connection aborted by peer: socket write error

I have checked the message packet that Jabber is complaining about by running the XML through a couple of different XML checkers. The XML (as far as I can tell) is valid. I'm assuming that this is may be some kind of burst or buffering error.

I realize that I can transmit the XML out of band, but most of our users will be behind firewalls and therefore the OOB approach is not going to work for us. 

Any help would be greatly appreciated.

peter
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="https://www.jabber.org/jdev/attachments/20010422/05b7162b/attachment-0002.htm">https://www.jabber.org/jdev/attachments/20010422/05b7162b/attachment-0002.htm</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="065881.html">[JDEV] Jabber Events
</A></li>
	<LI>Next message: <A HREF="065877.html">[JDEV] Karma and transferring large XML message packets...
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#65876">[ date ]</a>
              <a href="thread.html#65876">[ thread ]</a>
              <a href="subject.html#65876">[ subject ]</a>
              <a href="author.html#65876">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://mail.jabber.org/mailman/listinfo/jdev">More information about the JDev
mailing list</a><br>
</body></html>
