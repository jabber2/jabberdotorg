<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [jdev] presence subsription rejection notifications while offline.
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:jdev%40jabber.org?Subject=Re%3A%20%5Bjdev%5D%20presence%20subsription%20rejection%20notifications%20while%20offline.&In-Reply-To=%3C395FBEF8576A0743B44A7C362541CBB302AEA1D5%40rvnj-mail1.RADVISION.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="088243.html">
   <LINK REL="Next"  HREF="088245.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[jdev] presence subsription rejection notifications while offline.</H1>
    <B>Daniel V. Grillo</B> 
    <A HREF="mailto:jdev%40jabber.org?Subject=Re%3A%20%5Bjdev%5D%20presence%20subsription%20rejection%20notifications%20while%20offline.&In-Reply-To=%3C395FBEF8576A0743B44A7C362541CBB302AEA1D5%40rvnj-mail1.RADVISION.com%3E"
       TITLE="[jdev] presence subsription rejection notifications while offline.">dgrillo at radvision.com
       </A><BR>
    <I>Wed May 12 09:43:23 CDT 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="088243.html">[jdev] xmpp.org website outage
</A></li>
        <LI>Next message: <A HREF="088245.html">[jdev] presence subsription rejection notifications while	offline.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#88244">[ date ]</a>
              <a href="thread.html#88244">[ thread ]</a>
              <a href="subject.html#88244">[ subject ]</a>
              <a href="author.html#88244">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
Hi Folks,

I've built a minimal xmpp client to keep track of contacts presence
status.  In previous versions, if a user asked a contact for a
subscription to 
presence, my client automatically granted it.  Now I want to notify a
contact of such a request and let them grant or reject it. I have it
working according to rfc 3921 section 8.

I do have one question/issue though.  If a users presence request is
denied by the contact while the user is online, he gets notified of the
rejection as defined in section 8.2.1 (using the ejabberd server).  I
can then pop up a notification stating &quot;so and so rejected your
request&quot;. But if the user is offline when the rejection happens, and
then logs in, he gets no such notification.   He just gets his roster
with that contact in the &quot;none&quot; state with the &quot;ask&quot; flag stripped and
no indication of how that contact got that way. Since  a contact can end
up in the none state in various ways, I can't use that fact to pop up a
notification. So my question is, how can I give a user notification that
his subscription requests were rejected while he was offline?  I see
that psi has the same issue and so does Exodus. They give rejection
notifications while the user is online, but not when he got the
rejection while logged off and then logs on. Any way to implement such a
feature?
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="https://www.jabber.org/jdev/attachments/20100512/c79b3279/attachment.htm">https://www.jabber.org/jdev/attachments/20100512/c79b3279/attachment.htm</A>&gt;
</PRE>



<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="088243.html">[jdev] xmpp.org website outage
</A></li>
	<LI>Next message: <A HREF="088245.html">[jdev] presence subsription rejection notifications while	offline.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#88244">[ date ]</a>
              <a href="thread.html#88244">[ thread ]</a>
              <a href="subject.html#88244">[ subject ]</a>
              <a href="author.html#88244">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://mail.jabber.org/mailman/listinfo/jdev">More information about the JDev
mailing list</a><br>
</body></html>
