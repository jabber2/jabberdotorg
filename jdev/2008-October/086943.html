<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [jdev] Presence hiccups
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:jdev%40jabber.org?Subject=Re%3A%20%5Bjdev%5D%20Presence%20hiccups&In-Reply-To=%3CA21C504D-783B-4AA8-B2D6-79BDEF422C7C%40geni.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="086931.html">
   <LINK REL="Next"  HREF="086945.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[jdev] Presence hiccups</H1>
    <B>Adam Pisoni</B> 
    <A HREF="mailto:jdev%40jabber.org?Subject=Re%3A%20%5Bjdev%5D%20Presence%20hiccups&In-Reply-To=%3CA21C504D-783B-4AA8-B2D6-79BDEF422C7C%40geni.com%3E"
       TITLE="[jdev] Presence hiccups">apisoni at geni.com
       </A><BR>
    <I>Wed Oct  1 16:13:32 CDT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="086931.html">[jdev] special-purpose xmpp.org lists
</A></li>
        <LI>Next message: <A HREF="086945.html">[jdev] Presence hiccups
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#86943">[ date ]</a>
              <a href="thread.html#86943">[ thread ]</a>
              <a href="subject.html#86943">[ subject ]</a>
              <a href="author.html#86943">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I wrote the yammer bot as an xmpp component.   This component keeps  
track of users' presence by resource, as I think it should.  The  
problem has come if, for reasons I can't identify yet, occasionally an  
unavail presence for a resource doesn't make it to the component.  In  
this case I have a stale resource marked as online.  The user may come  
on and off with other resources, which will be marked accordingly, but  
will always appear online because of that stale resource.   We care if  
they are on/offline because we do not send offline users messages.

Most xmpp servers we send to send back a 503 if we send a message to a  
user who is offline.   When we get a 503 we mark that JID as offline  
so we do not continue sending them messages.  The real issue is gtalk,  
which supports offline messaging and never tells you whether a JID is  
offline.   A few of our users have complained that they're still  
getting messages from us when they're offline, which gtalk them emails  
them.   I know the rabbiter guys have talked about having the same  
problems.  What is the best practice as far as how to deal with this.   
Do you expire resources eventually?    Or probe if a resource hasn't  
been updated in some amount of time?

Any ideas?

Thanks,
adam


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="086931.html">[jdev] special-purpose xmpp.org lists
</A></li>
	<LI>Next message: <A HREF="086945.html">[jdev] Presence hiccups
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#86943">[ date ]</a>
              <a href="thread.html#86943">[ thread ]</a>
              <a href="subject.html#86943">[ subject ]</a>
              <a href="author.html#86943">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://mail.jabber.org/mailman/listinfo/jdev">More information about the JDev
mailing list</a><br>
</body></html>
