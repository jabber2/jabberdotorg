<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [jdev] Presence hiccups
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:jdev%40jabber.org?Subject=Re%3A%20%5Bjdev%5D%20Presence%20hiccups&In-Reply-To=%3C365521.14706.qm%40web38107.mail.mud.yahoo.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="086950.html">
   <LINK REL="Next"  HREF="086952.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[jdev] Presence hiccups</H1>
    <B>Ernest Nova</B> 
    <A HREF="mailto:jdev%40jabber.org?Subject=Re%3A%20%5Bjdev%5D%20Presence%20hiccups&In-Reply-To=%3C365521.14706.qm%40web38107.mail.mud.yahoo.com%3E"
       TITLE="[jdev] Presence hiccups">ennova2005-jabber at yahoo.com
       </A><BR>
    <I>Thu Oct  2 13:04:33 CDT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="086950.html">[jdev] Presence hiccups
</A></li>
        <LI>Next message: <A HREF="086952.html">[jdev] Presence hiccups
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#86951">[ date ]</a>
              <a href="thread.html#86951">[ thread ]</a>
              <a href="subject.html#86951">[ subject ]</a>
              <a href="author.html#86951">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>


--- On Wed, 10/1/08, Adam Pisoni &lt;<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">apisoni at geni.com</A>&gt; wrote:

&gt;<i> 
</I>&gt;<i> Most xmpp servers we send to send back a 503 if we send a
</I>&gt;<i> message to a  
</I>&gt;<i> user who is offline.   When we get a 503 we mark that JID
</I>&gt;<i> as offline  
</I>&gt;<i> so we do not continue sending them messages.  The real
</I>&gt;<i> issue is gtalk,  
</I>&gt;<i> which supports offline messaging and never tells you
</I>&gt;<i> whether a JID is  
</I>&gt;<i> offline.   A few of our users have complained that
</I>&gt;<i> they're still  
</I>&gt;<i> getting messages from us when they're offline, which
</I>&gt;<i> gtalk them emails  
</I>&gt;<i> them.   I know the rabbiter guys have talked about having
</I>&gt;<i> the same  
</I>&gt;<i> problems.  What is the best practice as far as how to deal
</I>&gt;<i> with this.   
</I>&gt;<i> Do you expire resources eventually?    Or probe if a
</I>&gt;<i> resource hasn't  
</I>&gt;<i> been updated in some amount of time?
</I>&gt;<i> 
</I>&gt;<i> Any ideas?
</I>&gt;<i> 
</I>&gt;<i> Thanks,
</I>&gt;<i> adam
</I>
Adam

No immediate suggestions - just some thoughts for the future.


1. Periodic Probes for Presence Freshness =~ SIP presence subscriptions with expiry/TTL

(ducking for cover... )

2. Presence may also be stale within the TCP timeout or XMPP keep alive interval or the presence probe interval before an XMPP server detects the remote client has disappeared, or your outbound message and the inbound presence update may cross paths.. so you would always have offline delivery in some boundary conditions. We see this in networks that do not offer offline delivery.

3. I believe the specific remedy for your situation and of similar other alerting bots would be to define an XMPP extension / message attribute that would instruct the remote server to deliver a message only if it thinks the user is in a certain presence state. (Whether or not Gtalk will implement it is another matter).  This could be part of extensions defining delivery instructions in general.




</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="086950.html">[jdev] Presence hiccups
</A></li>
	<LI>Next message: <A HREF="086952.html">[jdev] Presence hiccups
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#86951">[ date ]</a>
              <a href="thread.html#86951">[ thread ]</a>
              <a href="subject.html#86951">[ subject ]</a>
              <a href="author.html#86951">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://mail.jabber.org/mailman/listinfo/jdev">More information about the JDev
mailing list</a><br>
</body></html>
