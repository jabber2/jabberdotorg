<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [jdev] Spoofing of iq ids and misbehaving servers
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:jdev%40jabber.org?Subject=Re%3A%20%5Bjdev%5D%20Spoofing%20of%20iq%20ids%20and%20misbehaving%20servers&In-Reply-To=%3CCAPZ8mV7tNHfUyPLfuQ2U53LutrvGk0YR1Tk5Y9ruMg6cY-5wiA%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="089838.html">
   <LINK REL="Next"  HREF="089833.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[jdev] Spoofing of iq ids and misbehaving servers</H1>
    <B>Mark Doliner</B> 
    <A HREF="mailto:jdev%40jabber.org?Subject=Re%3A%20%5Bjdev%5D%20Spoofing%20of%20iq%20ids%20and%20misbehaving%20servers&In-Reply-To=%3CCAPZ8mV7tNHfUyPLfuQ2U53LutrvGk0YR1Tk5Y9ruMg6cY-5wiA%40mail.gmail.com%3E"
       TITLE="[jdev] Spoofing of iq ids and misbehaving servers">mark at kingant.net
       </A><BR>
    <I>Fri Jan 31 16:46:37 UTC 2014</I>
    <P><UL>
        <LI>Previous message: <A HREF="089838.html">[jdev] [Security]  Spoofing of iq ids and misbehaving servers
</A></li>
        <LI>Next message: <A HREF="089833.html">[jdev] Improving XEP-0016: Privacy Lists
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#89835">[ date ]</a>
              <a href="thread.html#89835">[ thread ]</a>
              <a href="subject.html#89835">[ subject ]</a>
              <a href="author.html#89835">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Small correction...

On Fri, Jan 31, 2014 at 12:26 AM, Mark Doliner &lt;<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">mark at kingant.net</A>&gt; wrote:
&gt;<i> In a server generated IQ reply it seems like it's never acceptable to
</I>&gt;<i> set 'from' to the user's full JID. Thijs mentioned that he thought
</I>&gt;<i> iChat server (unknown version) and ejabberd (probably 2.1.10) do this.
</I>&gt;<i> That seems wrong to me.
</I>
It looks like this was allowed in RFC 3920: &quot;When a server generates a
stanza from the server itself for delivery to a connected client
(e.g., in the context of data storage services provided by the server
on behalf of the client), the stanza MUST either (1) not include a
'from' attribute or (2) include a 'from' attribute whose value is the
account's bare JID (&lt;<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">node at domain</A>&gt;) or client's full JID
(&lt;<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">node at domain</A>/resource&gt;).&quot;

Compare that to the corresponding text in RFC 6120: &quot;When the server
generates a stanza from the server for delivery to the client on
behalf of the account of the connected client (e.g., in the context of
data storage services provided by the server on behalf of the client),
the stanza MUST either (a) not include a 'from' attribute or (b)
include a 'from' attribute whose value is the account's bare JID
(&lt;<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">localpart at domainpart</A>&gt;).&quot;

So iChat and ejabberd are behaving mostly reasonably and clients
probably should allow the the full JID in this case.
</PRE>




<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="089838.html">[jdev] [Security]  Spoofing of iq ids and misbehaving servers
</A></li>
	<LI>Next message: <A HREF="089833.html">[jdev] Improving XEP-0016: Privacy Lists
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#89835">[ date ]</a>
              <a href="thread.html#89835">[ thread ]</a>
              <a href="subject.html#89835">[ subject ]</a>
              <a href="author.html#89835">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://mail.jabber.org/mailman/listinfo/jdev">More information about the JDev
mailing list</a><br>
</body></html>
