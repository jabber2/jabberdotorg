<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [jdev] Re: jdev Digest, Vol 10, Issue 4
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:jdev%40jabber.org?Subject=%5Bjdev%5D%20Re%3A%20jdev%20Digest%2C%20Vol%2010%2C%20Issue%204&In-Reply-To=20041105082851.455FB21A5BD%40atlas.jabber.org">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="020496.html">
   <LINK REL="Next"  HREF="020498.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[jdev] Re: jdev Digest, Vol 10, Issue 4</H1>
    <B>Kamran Zafar</B> 
    <A HREF="mailto:jdev%40jabber.org?Subject=%5Bjdev%5D%20Re%3A%20jdev%20Digest%2C%20Vol%2010%2C%20Issue%204&In-Reply-To=20041105082851.455FB21A5BD%40atlas.jabber.org"
       TITLE="[jdev] Re: jdev Digest, Vol 10, Issue 4">dearkami at yahoo.com
       </A><BR>
    <I>Fri Nov  5 03:55:35 CST 2004</I>
    <P><UL>
        <LI>Previous message: <A HREF="020496.html">[jdev] TCP Packet Construction
</A></li>
        <LI>Next message: <A HREF="020498.html">[jdev] Re: jdev Digest, Vol 10, Issue 4
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20497">[ date ]</a>
              <a href="thread.html#20497">[ thread ]</a>
              <a href="subject.html#20497">[ subject ]</a>
              <a href="author.html#20497">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>&gt;<i> TLS is a binary protocol, and the negotiation is an
</I>&gt;<i> exchange of packets 
</I>&gt;<i> between the client and server to trade public keys
</I>&gt;<i> and decide on security 
</I>&gt;<i> parameters.  This negotiation, as well as the rest
</I>&gt;<i> of the TLS protocol, is 
</I>&gt;<i> covered in RFC 2246.
</I>&gt;<i>   <A HREF="http://www.faqs.org/rfcs/rfc2246.html">http://www.faqs.org/rfcs/rfc2246.html</A>
</I>&gt;<i> 
</I>&gt;<i> However, most everyone just uses a library for this,
</I>&gt;<i> such as OpenSSL.
</I>
Justin,

Ok I will be going through this RFC.

In the meantime, can you please give me a rough idea
of an estimation (in terms of hours or days)if i have
to provide implementation/support for TLS and SALS
(Note: I have already developed a xmpp compliant
client and server
applications with most of the features.).

And what do you mean by &quot;most everyone just uses a
library for this&quot;. From where can I get this library
and would this be helpful for me since my development
is in c-sharp?

Your help will be highly appreciated.

Regards,
Kamran

--- <A HREF="http://mail.jabber.org/mailman/listinfo/jdev">jdev-request at jabber.org</A> wrote:

&gt;<i> Send jdev mailing list submissions to
</I>&gt;<i> 	<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">jdev at jabber.org</A>
</I>&gt;<i> 
</I>&gt;<i> To subscribe or unsubscribe via the World Wide Web,
</I>&gt;<i> visit
</I>&gt;<i> 	<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">http://mail.jabber.org/mailman/listinfo/jdev</A>
</I>&gt;<i> or, via email, send a message with subject or body
</I>&gt;<i> 'help' to
</I>&gt;<i> 	<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">jdev-request at jabber.org</A>
</I>&gt;<i> 
</I>&gt;<i> You can reach the person managing the list at
</I>&gt;<i> 	<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">jdev-owner at jabber.org</A>
</I>&gt;<i> 
</I>&gt;<i> When replying, please edit your Subject line so it
</I>&gt;<i> is more specific
</I>&gt;<i> than &quot;Re: Contents of jdev digest...&quot;
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> Today's Topics:
</I>&gt;<i> 
</I>&gt;<i>    1. Re: jdev Digest, Vol 10, Issue 3 (Kamran
</I>&gt;<i> Zafar)
</I>&gt;<i>    2. TCP Packet Construction (Jon Phillips)
</I>&gt;<i>    3. Re: TLS negotiation (kavitha e)
</I>&gt;<i>    4. Re: Re: jdev Digest, Vol 10, Issue 3 (Justin
</I>&gt;<i> Karneges)
</I>&gt;<i>    5. RE: TCP Packet Construction (Heiner Wolf)
</I>&gt;<i>    6. Re: TCP Packet Construction (Jon Phillips)
</I>&gt;<i>    7. Re: TLS negotiation (<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">aliban at gmx.net</A>)
</I>&gt;<i>    8. Re: TCP Packet Construction (<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">aliban at gmx.net</A>)
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i>
</I>----------------------------------------------------------------------
&gt;<i> 
</I>&gt;<i> Message: 1
</I>&gt;<i> Date: Thu, 4 Nov 2004 21:23:21 -0800 (PST)
</I>&gt;<i> From: Kamran Zafar &lt;<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">dearkami at yahoo.com</A>&gt;
</I>&gt;<i> Subject: [jdev] Re: jdev Digest, Vol 10, Issue 3
</I>&gt;<i> To: <A HREF="http://mail.jabber.org/mailman/listinfo/jdev">jdev at jabber.org</A>
</I>&gt;<i> Message-ID:
</I>&gt;<i> &lt;<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">20041105052321.89604.qmail at web60803.mail.yahoo.com</A>&gt;
</I>&gt;<i> Content-Type: text/plain; charset=us-ascii
</I>&gt;<i> 
</I>&gt;<i> Hi Alexey,
</I>&gt;<i> 
</I>&gt;<i> Thanks for your reply and giving the reference of
</I>&gt;<i> RFC
</I>&gt;<i> 3920.
</I>&gt;<i> 
</I>&gt;<i> Yes, I have gone through this RFC (specially
</I>&gt;<i> &quot;section
</I>&gt;<i> 5. Use of TLS&quot;). But my confusion is still there.I
</I>&gt;<i> have a perfect understanding of how and what stanzas
</I>&gt;<i> should be passed through client-server-client. 
</I>&gt;<i> 
</I>&gt;<i> Let me explain my question in other way, 
</I>&gt;<i> 
</I>&gt;<i> In RFC 3920, please go to (section &quot;5.3.
</I>&gt;<i> Client-to-Server Example&quot;). There is written:
</I>&gt;<i> 
</I>&gt;<i> Step 4: Client sends the STARTTLS command to server:
</I>&gt;<i>     &lt;starttls
</I>&gt;<i> xmlns='urn:ietf:params:xml:ns:xmpp-tls'/&gt;
</I>&gt;<i> 
</I>&gt;<i> Step 5: Server informs client that it is allowed to
</I>&gt;<i> proceed:
</I>&gt;<i> &lt;proceed xmlns='urn:ietf:params:xml:ns:xmpp-tls'/&gt;
</I>&gt;<i>  
</I>&gt;<i> Step 6: Client and server attempt to complete TLS
</I>&gt;<i> negotiation over the existing TCP connection.
</I>&gt;<i> 
</I>&gt;<i> Step 7: If TLS negotiation is successful, client
</I>&gt;<i> initiates a new stream to server:
</I>&gt;<i> 
</I>&gt;<i> I want to know what exactly happens in the &quot;TLS
</I>&gt;<i> negotiation&quot; (implementation point of view). What I
</I>&gt;<i> have to do (other than making and send/receiving of
</I>&gt;<i> TLS related stanzas) in my client and server
</I>&gt;<i> application in &quot;step 6&quot;?
</I>&gt;<i> 
</I>&gt;<i> I hope this time I am more explanatory.
</I>&gt;<i> 
</I>&gt;<i> Regards,
</I>&gt;<i> Kamran
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> --- <A HREF="http://mail.jabber.org/mailman/listinfo/jdev">jdev-request at jabber.org</A> wrote:
</I>&gt;<i> 
</I>&gt;<i> &gt; Send jdev mailing list submissions to
</I>&gt;<i> &gt; 	<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">jdev at jabber.org</A>
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; To subscribe or unsubscribe via the World Wide
</I>&gt;<i> Web,
</I>&gt;<i> &gt; visit
</I>&gt;<i> &gt; 	<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">http://mail.jabber.org/mailman/listinfo/jdev</A>
</I>&gt;<i> &gt; or, via email, send a message with subject or body
</I>&gt;<i> &gt; 'help' to
</I>&gt;<i> &gt; 	<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">jdev-request at jabber.org</A>
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; You can reach the person managing the list at
</I>&gt;<i> &gt; 	<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">jdev-owner at jabber.org</A>
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; When replying, please edit your Subject line so it
</I>&gt;<i> &gt; is more specific
</I>&gt;<i> &gt; than &quot;Re: Contents of jdev digest...&quot;
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; Today's Topics:
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt;    1. TLS negotiation (Kamran Zafar)
</I>&gt;<i> &gt;    2. Re: TLS negotiation (Alexey Nezhdanov)
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt;
</I>&gt;<i>
</I>----------------------------------------------------------------------
&gt;<i> &gt; 
</I>&gt;<i> &gt; Message: 1
</I>&gt;<i> &gt; Date: Thu, 4 Nov 2004 02:33:14 -0800 (PST)
</I>&gt;<i> &gt; From: Kamran Zafar &lt;<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">dearkami at yahoo.com</A>&gt;
</I>&gt;<i> &gt; Subject: [jdev] TLS negotiation
</I>&gt;<i> &gt; To: <A HREF="http://mail.jabber.org/mailman/listinfo/jdev">jdev at jabber.org</A>
</I>&gt;<i> &gt; Message-ID:
</I>&gt;<i> &gt;
</I>&gt;<i> &lt;<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">20041104103314.69660.qmail at web60806.mail.yahoo.com</A>&gt;
</I>&gt;<i> &gt; Content-Type: text/plain; charset=us-ascii
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; Hi,
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; I have developed a xmpp compliant client and
</I>&gt;<i> server
</I>&gt;<i> &gt; applications with most of the features.
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; Now I want to give (client 2 server )TLS
</I>&gt;<i> &gt; implementation in it.
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; Please let me know what should i need to do in my
</I>&gt;<i> &gt; existing coding in order to add this feature.
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; Regards,
</I>&gt;<i> &gt; Kamran
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; 		
</I>&gt;<i> &gt; __________________________________ 
</I>&gt;<i> &gt; Do you Yahoo!? 
</I>&gt;<i> &gt; Check out the new Yahoo! Front Page. 
</I>&gt;<i> &gt; www.yahoo.com 
</I>&gt;<i> &gt;  
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; ------------------------------
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; Message: 2
</I>&gt;<i> &gt; Date: Thu, 4 Nov 2004 13:37:07 +0300
</I>&gt;<i> &gt; From: Alexey Nezhdanov &lt;<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">snake at penza-gsm.ru</A>&gt;
</I>&gt;<i> &gt; Subject: Re: [jdev] TLS negotiation
</I>&gt;<i> &gt; To: Jabber software development list
</I>&gt;<i> &gt; &lt;<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">jdev at jabber.org</A>&gt;
</I>&gt;<i> &gt; Message-ID:
</I>&gt;<i> &lt;<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">200411041337.07598.snake at penza-gsm.ru</A>&gt;
</I>&gt;<i> &gt; Content-Type: text/plain;  charset=&quot;koi8-r&quot;
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; &#247; &#211;&#207;&#207;&#194;&#221;&#197;&#206;&#201;&#201; &#207;&#212; &#254;&#197;&#212;&#215;&#197;&#210;&#199; 04 &#238;&#207;&#209;&#194;&#210;&#216; 2004 13:33 Kamran
</I>&gt;<i> &gt; Zafar &#206;&#193;&#208;&#201;&#211;&#193;&#204;(a):
</I>&gt;<i> &gt; &gt; Hi,
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; I have developed a xmpp compliant client and
</I>&gt;<i> &gt; server
</I>&gt;<i> &gt; &gt; applications with most of the features.
</I>&gt;<i> &gt; What language/license/download location ?
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; Now I want to give (client 2 server )TLS
</I>&gt;<i> &gt; &gt; implementation in it.
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; Please let me know what should i need to do in
</I>&gt;<i> my
</I>&gt;<i> &gt; &gt; existing coding in order to add this feature.
</I>&gt;<i> &gt; Did you read RFC 3920? I think there is very good
</I>&gt;<i> &gt; description of how TLS 
</I>&gt;<i> &gt; should be done. If yes - then eveluate your
</I>&gt;<i> question
</I>&gt;<i> &gt; in more words please.
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; Regards,
</I>&gt;<i> &gt; &gt; Kamran
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; -- 
</I>&gt;<i> &gt; Respectfully
</I>&gt;<i> &gt; Alexey Nezhdanov
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; ------------------------------
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; _______________________________________________
</I>&gt;<i> &gt; jdev mailing list
</I>&gt;<i> &gt; <A HREF="http://mail.jabber.org/mailman/listinfo/jdev">jdev at jabber.org</A>
</I>&gt;<i> &gt; <A HREF="http://mail.jabber.org/mailman/listinfo/jdev">http://mail.jabber.org/mailman/listinfo/jdev</A>
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; End of jdev Digest, Vol 10, Issue 3
</I>&gt;<i> &gt; ***********************************
</I>&gt;<i> &gt; 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 		
</I>&gt;<i> __________________________________ 
</I>&gt;<i> Do you Yahoo!? 
</I>&gt;<i> Check out the new Yahoo! Front Page. 
</I>&gt;<i> www.yahoo.com 
</I>&gt;<i>  
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> ------------------------------
</I>&gt;<i> 
</I>&gt;<i> Message: 2
</I>&gt;<i> Date: Fri, 05 Nov 2004 14:31:41 +0900
</I>&gt;<i> From: Jon Phillips &lt;<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">jon at rejon.org</A>&gt;
</I>&gt;<i> Subject: [jdev] TCP Packet Construction
</I>&gt;<i> To: Jabber software development list
</I>&gt;<i> &lt;<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">jdev at jabber.org</A>&gt;
</I>&gt;<i> Message-ID: &lt;<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">418B103D.6060102 at rejon.org</A>&gt;
</I>&gt;<i> Content-Type: text/plain; charset=ISO-8859-1;
</I>&gt;<i> format=flowed
</I>&gt;<i> 
</I>&gt;<i> Hello,
</I>&gt;<i> 
</I>&gt;<i> I interested to know if there are any good
</I>&gt;<i> resources, documents, or 
</I>&gt;<i> source code I could look at to see how to properly
</I>&gt;<i> receive packets from 
</I>&gt;<i> a jabber server like jabberd (which I am using) via
</I>&gt;<i> TCP and then how to 
</I>&gt;<i> receive and reconstruct the entire packet.
</I>&gt;<i> 
</I>&gt;<i> I'm using Visual Studio .net and WINSOCK to do
</I>&gt;<i> connection and receiving. 
</I>&gt;<i> Right now I have a working client that receive
</I>&gt;<i> packets that are 8129 
</I>&gt;<i> bytes, but these packets might not contain the full
</I>&gt;<i> message. This 
</I>&gt;<i> problem gets worse with more traffic.
</I>&gt;<i> 
</I>&gt;<i> What is the best way to construct entire jabber
</I>&gt;<i> server packets into 
</I>&gt;<i> comlete packets/message. For example, the server
</I>&gt;<i> might send a user's 
</I>&gt;<i> message in xml, and because of web traffic the
</I>&gt;<i> complete message might 
</I>&gt;<i> not arrive in teh received 8192 bytes...
</I>&gt;<i> 
</I>&gt;<i> Other than this problem, my custom jabber client for
</I>&gt;<i> this game, 
</I>&gt;<i> gopetslive.com is going pretty well.
</I>&gt;<i> 
</I>&gt;<i> Any help or code sample or pointers would be much
</I>&gt;<i> appreciated.
</I>&gt;<i> 
</I>&gt;<i> Thanks,
</I>&gt;<i> Jon
</I>&gt;<i> 
</I>&gt;<i> -- 
</I>&gt;<i> Jon Phillips
</I>&gt;<i> 
</I>&gt;<i> KOREA.PH.010.3140.7483
</I>&gt;<i> USA.PH.858.361.2811
</I>&gt;<i> <A HREF="http://mail.jabber.org/mailman/listinfo/jdev">jon at rejon.org</A>
</I>&gt;<i> <A HREF="http://www.rejon.org">http://www.rejon.org</A>
</I>&gt;<i> 
</I>&gt;<i> Inkscape (<A HREF="http://inkscape.org">http://inkscape.org</A>)
</I>&gt;<i> Open Clip Art Library (www.openclipart.org)
</I>&gt;<i> CVS Book (<A HREF="http://cvsbook.ucsd.edu">http://cvsbook.ucsd.edu</A>)
</I>&gt;<i> Scale Journal (<A HREF="http://scale.ucsd.edu">http://scale.ucsd.edu</A>)
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> ------------------------------
</I>&gt;<i> 
</I>&gt;<i> Message: 3
</I>&gt;<i> Date: Thu, 4 Nov 2004 21:36:24 -0800 (PST)
</I>&gt;<i> From: kavitha e &lt;<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">kavi_el at yahoo.com</A>&gt;
</I>&gt;<i> Subject: Re: [jdev] TLS negotiation
</I>&gt;<i> To: Jabber software development list
</I>&gt;<i> &lt;<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">jdev at jabber.org</A>&gt;
</I>&gt;<i> Message-ID:
</I>&gt;<i> &lt;<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">20041105053624.32093.qmail at web20328.mail.yahoo.com</A>&gt;
</I>&gt;<i> Content-Type: text/plain; charset=us-ascii
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> Hi Kamran,
</I>&gt;<i> 
</I>&gt;<i> I am new to this jabber, i am just going thru
</I>&gt;<i> RFC's,i
</I>&gt;<i> cant help you, but i need your help if you dont
</I>&gt;<i> mind. 
</I>&gt;<i> 
</I>&gt;<i> You said u have developed xmpp complient C/S
</I>&gt;<i> applications can you just tell me how to do that?
</I>&gt;<i> 
</I>&gt;<i> I have to create an application to access jabber
</I>&gt;<i> server &amp; its transports for MSN &amp; Yahoo messengers.
</I>&gt;<i> More clearly, i need access the API provided by
</I>&gt;<i> Jabber
</I>&gt;<i> server through xml protocols. 
</I>&gt;<i> 
</I>&gt;<i> Can you suggest me how to go about it? What are the
</I>&gt;<i> jabber servers i need to download? What are steps i
</I>&gt;<i> need to follow?
</I>&gt;<i> 
</I>&gt;<i> Please help me...
</I>&gt;<i> 
</I>&gt;<i> Thanks &amp; Regards
</I>&gt;<i> Kavitha
</I>&gt;<i> --- Kamran Zafar &lt;<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">dearkami at yahoo.com</A>&gt; wrote:
</I>&gt;<i> 
</I>&gt;<i> &gt; Hi,
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; I have developed a xmpp compliant client and
</I>&gt;<i> server
</I>&gt;<i> &gt; applications with most of the features.
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; Now I want to give (client 2 server )TLS
</I>&gt;<i> &gt; implementation in it.
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; Please let me know what should i need to do in my
</I>&gt;<i> &gt; existing coding in order to add this feature.
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; Regards,
</I>&gt;<i> &gt; Kamran
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; 		
</I>&gt;<i> &gt; __________________________________ 
</I>&gt;<i> &gt; Do you Yahoo!? 
</I>&gt;<i> &gt; Check out the new Yahoo! Front Page. 
</I>&gt;<i> &gt; www.yahoo.com 
</I>&gt;<i> &gt;  
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; _______________________________________________
</I>&gt;<i> &gt; jdev mailing list
</I>&gt;<i> &gt; <A HREF="http://mail.jabber.org/mailman/listinfo/jdev">jdev at jabber.org</A>
</I>&gt;<i> &gt; <A HREF="http://mail.jabber.org/mailman/listinfo/jdev">http://mail.jabber.org/mailman/listinfo/jdev</A>
</I>&gt;<i> &gt; 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 		
</I>&gt;<i> __________________________________ 
</I>&gt;<i> Do you Yahoo!? 
</I>&gt;<i> Check out the new Yahoo! Front Page. 
</I>&gt;<i> www.yahoo.com 
</I>&gt;<i>  
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> ------------------------------
</I>&gt;<i> 
</I>&gt;<i> Message: 4
</I>&gt;<i> Date: Thu, 4 Nov 2004 21:37:38 -0800
</I>&gt;<i> From: Justin Karneges
</I>&gt;<i> &lt;<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">justin-keyword-jabber.093179 at affinix.com</A>&gt;
</I>&gt;<i> Subject: Re: [jdev] Re: jdev Digest, Vol 10, Issue 3
</I>&gt;<i> To: Jabber software development list
</I>&gt;<i> &lt;<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">jdev at jabber.org</A>&gt;
</I>&gt;<i> Message-ID:
</I>&gt;<i> 
</I>&gt;<i>
</I>&lt;<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">200411042137.38709.justin-keyword-jabber.093179 at affinix.com</A>&gt;
&gt;<i> Content-Type: text/plain;  charset=&quot;iso-8859-1&quot;
</I>&gt;<i> 
</I>&gt;<i> On Thursday 04 November 2004 09:23 pm, Kamran Zafar
</I>&gt;<i> wrote:
</I>&gt;<i> &gt; Step 5: Server informs client that it is allowed
</I>&gt;<i> to
</I>&gt;<i> &gt; proceed:
</I>&gt;<i> &gt; &lt;proceed xmlns='urn:ietf:params:xml:ns:xmpp-tls'/&gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Step 6: Client and server attempt to complete TLS
</I>&gt;<i> &gt; negotiation over the existing TCP connection.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Step 7: If TLS negotiation is successful, client
</I>&gt;<i> &gt; initiates a new stream to server:
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; I want to know what exactly happens in the &quot;TLS
</I>&gt;<i> &gt; negotiation&quot; (implementation point of view). What
</I>&gt;<i> I
</I>&gt;<i> &gt; have to do (other than making and send/receiving
</I>&gt;<i> of
</I>&gt;<i> &gt; TLS related stanzas) in my client and server
</I>&gt;<i> &gt; application in &quot;step 6&quot;?
</I>&gt;<i> 
</I>&gt;<i> TLS is a binary protocol, and the negotiation is an
</I>&gt;<i> exchange of packets 
</I>&gt;<i> between the client and server to trade public keys
</I>&gt;<i> and decide on security 
</I>&gt;<i> parameters.  This negotiation, as well as the rest
</I>&gt;<i> of the TLS protocol, is 
</I>&gt;<i> covered in RFC 2246.
</I>&gt;<i>   <A HREF="http://www.faqs.org/rfcs/rfc2246.html">http://www.faqs.org/rfcs/rfc2246.html</A>
</I>&gt;<i> 
</I>&gt;<i> However, most everyone just uses a library for this,
</I>&gt;<i> such as OpenSSL.
</I>&gt;<i> 
</I>&gt;<i> -Justin
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> ------------------------------
</I>&gt;<i> 
</I>&gt;<i> Message: 5
</I>&gt;<i> Date: Fri, 5 Nov 2004 07:19:43 +0100
</I>&gt;<i> From: &quot;Heiner Wolf&quot; &lt;<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">wolf at bluehands.de</A>&gt;
</I>&gt;<i> Subject: RE: [jdev] TCP Packet Construction
</I>&gt;<i> To: &quot;Jabber software development list&quot;
</I>&gt;<i> &lt;<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">jdev at jabber.org</A>&gt;
</I>&gt;<i> Message-ID:
</I>&gt;<i> 
</I>&gt;<i>
</I>&lt;<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">11D121AB355B69448D3A9F2132D2A3AA4202A9 at niobe.BlueHands.de</A>&gt;
&gt;<i> Content-Type: text/plain;	charset=&quot;iso-8859-1&quot;
</I>&gt;<i> 
</I>&gt;<i> Hi,
</I>&gt;<i> 
</I>&gt;<i> &gt;I interested to know if there are any good
</I>&gt;<i> resources, documents, or 
</I>&gt;<i> &gt;source code I could look at to see how to properly
</I>&gt;<i> receive 
</I>&gt;<i> &gt;packets from a jabber server like jabberd (which I
</I>&gt;<i> am using) via TCP and 
</I>&gt;<i> &gt;then how to receive and reconstruct the entire
</I>&gt;<i> packet.
</I>&gt;<i> 
</I>&gt;<i> When you deal with TCP as in the case of Jabber,
</I>&gt;<i> then you must not think in terms of 'packets'. Both
</I>&gt;<i> parties will receive a stream of bytes. While they
</I>&gt;<i> send chunks of data on the connection, there is no
</I>&gt;<i> guarantee that the receiver gets the data in the
</I>&gt;<i> original chunks. The only guarantees that TCP gives
</I>&gt;<i> are 1. that the data will arrive or you get an error
</I>&gt;<i> 2. the byte order will be retained. Again: the
</I>&gt;<i> receiver might get the data in totally different
</I>&gt;<i> 'packets'. 
</I>&gt;<i> 
</I>&gt;<i> &gt;I'm using Visual Studio .net and WINSOCK to do
</I>&gt;<i> connection and 
</I>&gt;<i> &gt;receiving. Right now I have a working client that
</I>&gt;<i> receive packets that 
</I>&gt;<i> &gt;are 8129 bytes, but these packets might not contain
</I>&gt;<i> the full message. 
</I>&gt;<i> &gt;This problem gets worse with more traffic.
</I>&gt;<i> 
</I>&gt;<i> What you must do is: forward every piece of data to
</I>&gt;<i> the protocol parser. In this case it is an XML
</I>&gt;<i> parser. The XML parser must be able to parse
</I>&gt;<i> 'incomplete' XML and tell you about the structure
</I>&gt;<i> before the main wrapper tag is closed. People call
</I>&gt;<i> it a SAX parser as opposed to DOM parsers. You need
</I>&gt;<i> a SAX parser. You feed it with every byte that comes
</I>&gt;<i> from the connection. There is virtually nothing
</I>&gt;<i> between the read() system call where you get data
</I>&gt;<i> from the connection and the parse() where you
</I>&gt;<i> forward the data to the parser. The parser will
</I>&gt;<i> consume the bytes. The parser will tell you when a
</I>&gt;<i> first order tag is finished. That would be something
</I>&gt;<i> like a &lt;message/&gt; or &lt;presence/&gt; inside a
</I>&gt;<i> &lt;stream:stream&gt;. If this happens then you can
</I>&gt;<i> analyze the first order tag. That's then called a
</I>&gt;<i> stanza in Jabber terms. In XML terms it is just the
</I>&gt;<i> first order sub tag of the XML wrapper tag.
</I>&gt;<i> 
</I>&gt;<i> &gt;What is the best way to construct entire jabber
</I>&gt;<i> server packets into 
</I>&gt;<i> &gt;comlete packets/message. For example, the server
</I>&gt;<i> might send a user's 
</I>&gt;<i> &gt;message in xml, and because of web traffic the
</I>&gt;<i> complete message might 
</I>&gt;<i> &gt;not arrive in teh received 8192 bytes...
</I>&gt;<i> 
</I>&gt;<i> I reiterate, because this is important: this is TCP.
</I>&gt;<i> There are no messages. Your network API will give
</I>&gt;<i> you multiple bytes at once. This looks like a
</I>&gt;<i> message. You don't care. You handle all data to the
</I>&gt;<i> XML parser. The parser will tell you when stanzas
</I>&gt;<i> are complete. You are probably testing in your lab.
</I>&gt;<i> Over the wide internet you might even get smaller
</I>&gt;<i> pieces of data at once (like 500 bytes). Stanzas
</I>&gt;<i> might be split badly. There might be even the last
</I>&gt;<i> '&gt;' missing. Don't look at the data directly. Let
</I>&gt;<i> the XML parser look. It will tell you when a stanza
</I>&gt;<i> is complete. 
</I>&gt;<i> 
</I>&gt;<i> &gt;Other than this problem, my custom jabber client
</I>&gt;<i> for this game, 
</I>&gt;<i> &gt;gopetslive.com is going pretty well.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;Any help or code sample or pointers would be much
</I>&gt;<i> appreciated.
</I>&gt;<i> 
</I>&gt;<i> hw
</I>&gt;<i> --
</I>&gt;<i> Dr. Klaus H. Wolf
</I>&gt;<i> bluehands GmbH &amp; Co.mmunication KG
</I>&gt;<i> <A HREF="http://www.bluehands.de/people/hw">http://www.bluehands.de/people/hw</A>
</I>&gt;<i> +49 (0721) 16108 75
</I>&gt;<i> --
</I>&gt;<i> Jabber enabled Virtual Presence on the Web:
</I>&gt;<i> <A HREF="http://www.lluna.de/">http://www.lluna.de/</A>
</I>&gt;<i> Open Source Future History:
</I>&gt;<i> <A HREF="http://www.galactic-developments.com/">http://www.galactic-developments.com/</A>
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> ------------------------------
</I>&gt;<i> 
</I>&gt;<i> Message: 6
</I>&gt;<i> Date: Fri, 05 Nov 2004 17:06:09 +0900
</I>&gt;<i> From: Jon Phillips &lt;<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">jon at rejon.org</A>&gt;
</I>&gt;<i> Subject: Re: [jdev] TCP Packet Construction
</I>&gt;<i> To: Jabber software development list
</I>&gt;<i> &lt;<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">jdev at jabber.org</A>&gt;
</I>&gt;<i> Message-ID: &lt;<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">418B3471.8070209 at rejon.org</A>&gt;
</I>&gt;<i> Content-Type: text/plain; charset=ISO-8859-1;
</I>&gt;<i> format=flowed
</I>&gt;<i> 
</I>&gt;<i> First of all thanks for your wonderful insight!
</I>&gt;<i> 
</I>&gt;<i> Heiner Wolf wrote:
</I>&gt;<i> &gt; Hi,
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt;&gt;I interested to know if there are any good
</I>&gt;<i> resources, documents, or 
</I>&gt;<i> &gt;&gt;source code I could look at to see how to properly
</I>&gt;<i> receive 
</I>&gt;<i> &gt;&gt;packets from a jabber server like jabberd (which I
</I>&gt;<i> am using) via TCP and 
</I>&gt;<i> &gt;&gt;then how to receive and reconstruct the entire
</I>&gt;<i> packet.
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; When you deal with TCP as in the case of Jabber,
</I>&gt;<i> then you must not think in terms of 'packets'. Both
</I>&gt;<i> parties will receive a stream of bytes. While they
</I>&gt;<i> send chunks of data on the connection, there is no
</I>&gt;<i> guarantee that the receiver gets the data in the
</I>&gt;<i> original chunks. The only guarantees that TCP gives
</I>&gt;<i> are 1. that the data will arrive or you get an error
</I>&gt;<i> 2. the byte order will be retained. Again: the
</I>&gt;<i> receiver might get the data in totally different
</I>&gt;<i> 'packets'. 
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt;&gt;I'm using Visual Studio .net and WINSOCK to do
</I>&gt;<i> connection and 
</I>&gt;<i> &gt;&gt;receiving. Right now I have a working client that
</I>&gt;<i> receive packets that 
</I>&gt;<i> &gt;&gt;are 8129 bytes, but these packets might not
</I>&gt;<i> contain the full message. 
</I>&gt;<i> &gt;&gt;This problem gets worse with more traffic.
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; What you must do is: forward every piece of data
</I>&gt;<i> to the protocol parser. In this case it is an XML
</I>&gt;<i> parser. The XML parser must be able to parse
</I>&gt;<i> 'incomplete' XML and tell you about the structure
</I>&gt;<i> before the main wrapper tag is closed. People call
</I>&gt;<i> it a SAX parser as opposed to DOM parsers. You need
</I>&gt;<i> a SAX parser. You feed it with every byte that comes
</I>&gt;<i> from the connection. There is virtually nothing
</I>&gt;<i> between the read() system call where you get data
</I>&gt;<i> from the connection and the parse() where you
</I>&gt;<i> forward the data to the parser. The parser will
</I>&gt;<i> consume the bytes. The parser will tell you when a
</I>&gt;<i> first order tag is finished. That would be something
</I>&gt;<i> like a &lt;message/&gt; or &lt;presence/&gt; inside a
</I>&gt;<i> &lt;stream:stream&gt;. If this happens then you can
</I>&gt;<i> analyze the first order tag. That's then called a
</I>&gt;<i> stanza in Jabber terms. In XML terms it is just the
</I>&gt;<i> first order sub tag of the XML wrapper tag.
</I>&gt;<i> 
</I>&gt;<i> What parser would you recommend? I'm looking into
</I>&gt;<i> expat. I was using 
</I>&gt;<i> tinyXML, but it doesn't seem to fit the bill you are
</I>&gt;<i> describing...
</I>&gt;<i> 
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt;&gt;What is the best way to construct entire jabber
</I>&gt;<i> server packets into 
</I>&gt;<i> &gt;&gt;comlete packets/message. For example, the server
</I>&gt;<i> might send a user's 
</I>&gt;<i> &gt;&gt;message in xml, and because of web traffic the
</I>&gt;<i> complete message might 
</I>&gt;<i> &gt;&gt;not arrive in teh received 8192 bytes...
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; I reiterate, because this is important: this is
</I>&gt;<i> TCP. There are no messages. Your network API will
</I>&gt;<i> give you multiple bytes at once. This looks like a
</I>&gt;<i> message. You don't care. You handle all data to the
</I>&gt;<i> XML parser. The parser will tell you when stanzas
</I>&gt;<i> are complete. You are probably testing in your lab.
</I>&gt;<i> Over the wide internet you might even get smaller
</I>&gt;<i> pieces of data at once (like 500 bytes). Stanzas
</I>&gt;<i> might be split badly. There might be even the last
</I>&gt;<i> '&gt;' missing. Don't look at the data directly. Let
</I>&gt;<i> the XML parser look. It will tell you when a stanza
</I>&gt;<i> is complete. 
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt;&gt;Other than this problem, my custom jabber client
</I>&gt;<i> for this game, 
</I>&gt;<i> &gt;&gt;gopetslive.com is going pretty well.
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;Any help or code sample or pointers would be much
</I>&gt;<i> appreciated.
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; hw
</I>&gt;<i> &gt; --
</I>&gt;<i> &gt; Dr. Klaus H. Wolf
</I>&gt;<i> &gt; bluehands GmbH &amp; Co.mmunication KG
</I>&gt;<i> &gt; <A HREF="http://www.bluehands.de/people/hw">http://www.bluehands.de/people/hw</A>
</I>&gt;<i> &gt; +49 (0721) 16108 75
</I>&gt;<i> &gt; --
</I>&gt;<i> &gt; Jabber enabled Virtual Presence on the Web:
</I>&gt;<i> <A HREF="http://www.lluna.de/">http://www.lluna.de/</A>
</I>&gt;<i> &gt; Open Source Future History:
</I>&gt;<i> <A HREF="http://www.galactic-developments.com/">http://www.galactic-developments.com/</A>
</I>&gt;<i> &gt; _______________________________________________
</I>&gt;<i> &gt; jdev mailing list
</I>&gt;<i> &gt; <A HREF="http://mail.jabber.org/mailman/listinfo/jdev">jdev at jabber.org</A>
</I>&gt;<i> &gt; <A HREF="http://mail.jabber.org/mailman/listinfo/jdev">http://mail.jabber.org/mailman/listinfo/jdev</A>
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; 
</I>&gt;<i> 
</I>&gt;<i> -- 
</I>&gt;<i> Jon Phillips
</I>&gt;<i> 
</I>&gt;<i> KOREA.PH.010.3140.7483
</I>&gt;<i> USA.PH.858.361.2811
</I>&gt;<i> <A HREF="http://mail.jabber.org/mailman/listinfo/jdev">jon at rejon.org</A>
</I>&gt;<i> <A HREF="http://www.rejon.org">http://www.rejon.org</A>
</I>&gt;<i> 
</I>&gt;<i> Inkscape (<A HREF="http://inkscape.org">http://inkscape.org</A>)
</I>&gt;<i> Open Clip Art Library (www.openclipart.org)
</I>&gt;<i> CVS Book (<A HREF="http://cvsbook.ucsd.edu">http://cvsbook.ucsd.edu</A>)
</I>&gt;<i> Scale Journal (<A HREF="http://scale.ucsd.edu">http://scale.ucsd.edu</A>)
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> ------------------------------
</I>&gt;<i> 
</I>&gt;<i> Message: 7
</I>&gt;<i> Date: Fri, 05 Nov 2004 09:27:19 +0100
</I>&gt;<i> From: <A HREF="http://mail.jabber.org/mailman/listinfo/jdev">aliban at gmx.net</A>
</I>&gt;<i> Subject: Re: [jdev] TLS negotiation
</I>&gt;<i> To: Jabber software development list
</I>&gt;<i> &lt;<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">jdev at jabber.org</A>&gt;
</I>&gt;<i> Message-ID: &lt;<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">418B4777.29221.4570563 at localhost</A>&gt;
</I>&gt;<i> Content-Type: text/plain; charset=US-ASCII
</I>&gt;<i> 
</I>&gt;<i> Just go to jabber.org and get a working client lib
</I>&gt;<i> for your 
</I>&gt;<i> programming language.
</I>&gt;<i> 
</I>&gt;<i> many of them have enough documentation, too.
</I>&gt;<i> 
</I>&gt;<i> for c++/win32 you might try mine... XCD
</I>&gt;<i> 
</I>&gt;<i> Edrin
</I>&gt;<i> 
</I>&gt;<i> On 4 Nov 2004 at 21:36, kavitha e wrote:
</I>&gt;<i> 
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; Hi Kamran,
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; I am new to this jabber, i am just going thru
</I>&gt;<i> RFC's,i
</I>&gt;<i> &gt; cant help you, but i need your help if you dont
</I>&gt;<i> mind. 
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; You said u have developed xmpp complient C/S
</I>&gt;<i> &gt; applications can you just tell me how to do that?
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; I have to create an application to access jabber
</I>&gt;<i> &gt; server &amp; its transports for MSN &amp; Yahoo
</I>&gt;<i> messengers.
</I>&gt;<i> &gt; More clearly, i need access the API provided by
</I>&gt;<i> Jabber
</I>&gt;<i> &gt; server through xml protocols. 
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; Can you suggest me how to go about it? What are
</I>&gt;<i> the
</I>&gt;<i> &gt; jabber servers i need to download? What are steps
</I>&gt;<i> i
</I>&gt;<i> &gt; need to follow?
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; Please help me...
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; Thanks &amp; Regards
</I>&gt;<i> &gt; Kavitha
</I>&gt;<i> &gt; --- Kamran Zafar &lt;<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">dearkami at yahoo.com</A>&gt; wrote:
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; &gt; Hi,
</I>&gt;<i> &gt; &gt; 
</I>&gt;<i> &gt; &gt; I have developed a xmpp compliant client and
</I>&gt;<i> server
</I>&gt;<i> &gt; &gt; applications with most of the features.
</I>&gt;<i> &gt; &gt; 
</I>&gt;<i> &gt; &gt; Now I want to give (client 2 server )TLS
</I>&gt;<i> &gt; &gt; implementation in it.
</I>&gt;<i> &gt; &gt; 
</I>&gt;<i> &gt; &gt; Please let me know what should i need to do in
</I>&gt;<i> my
</I>&gt;<i> &gt; &gt; existing coding in order to add this feature.
</I>&gt;<i> &gt; &gt; 
</I>&gt;<i> &gt; &gt; Regards,
</I>&gt;<i> &gt; &gt; Kamran
</I>&gt;<i> &gt; &gt; 
</I>&gt;<i> &gt; &gt; 
</I>&gt;<i> &gt; &gt; 		
</I>&gt;<i> &gt; &gt; __________________________________ 
</I>&gt;<i> &gt; &gt; Do you Yahoo!? 
</I>&gt;<i> &gt; &gt; Check out the new Yahoo! Front Page. 
</I>&gt;<i> &gt; &gt; www.yahoo.com 
</I>&gt;<i> &gt; &gt;  
</I>&gt;<i> &gt; &gt; 
</I>&gt;<i> &gt; &gt; _______________________________________________
</I>&gt;<i> &gt; &gt; jdev mailing list
</I>&gt;<i> &gt; &gt; <A HREF="http://mail.jabber.org/mailman/listinfo/jdev">jdev at jabber.org</A>
</I>&gt;<i> &gt; &gt; <A HREF="http://mail.jabber.org/mailman/listinfo/jdev">http://mail.jabber.org/mailman/listinfo/jdev</A>
</I>&gt;<i> &gt; &gt; 
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; 		
</I>&gt;<i> &gt; __________________________________ 
</I>&gt;<i> &gt; Do you Yahoo!? 
</I>&gt;<i> &gt; Check out the new Yahoo! Front Page. 
</I>&gt;<i> &gt; www.yahoo.com 
</I>&gt;<i> &gt;  
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; _______________________________________________
</I>&gt;<i> &gt; jdev mailing list
</I>&gt;<i> &gt; <A HREF="http://mail.jabber.org/mailman/listinfo/jdev">jdev at jabber.org</A>
</I>&gt;<i> &gt; <A HREF="http://mail.jabber.org/mailman/listinfo/jdev">http://mail.jabber.org/mailman/listinfo/jdev</A>
</I>&gt;<i> &gt; 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> ------------------------------
</I>&gt;<i> 
</I>&gt;<i> Message: 8
</I>&gt;<i> Date: Fri, 05 Nov 2004 09:29:34 +0100
</I>&gt;<i> From: <A HREF="http://mail.jabber.org/mailman/listinfo/jdev">aliban at gmx.net</A>
</I>&gt;<i> Subject: Re: [jdev] TCP Packet Construction
</I>&gt;<i> To: Jabber software development list
</I>&gt;<i> &lt;<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">jdev at jabber.org</A>&gt;
</I>&gt;<i> Message-ID: &lt;<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">418B47FE.15003.4591528 at localhost</A>&gt;
</I>&gt;<i> Content-Type: text/plain; charset=US-ASCII
</I>&gt;<i> 
</I>&gt;<i> yes, expat is good.
</I>&gt;<i> 
</I>&gt;<i> you may look in my code, i did it this way
</I>&gt;<i> with
</I>&gt;<i> winsock /vc++
</I>&gt;<i> expat
</I>&gt;<i> 
</I>&gt;<i> my source is under GPL! available at
</I>&gt;<i> xcd.jabberstudio.org
</I>&gt;<i> 
</I>&gt;<i> Edrin
</I>&gt;<i> 
</I>&gt;<i> On 5 Nov 2004 at 17:06, Jon Phillips wrote:
</I>&gt;<i> 
</I>&gt;<i> &gt; First of all thanks for your wonderful insight!
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; Heiner Wolf wrote:
</I>&gt;<i> &gt; &gt; Hi,
</I>&gt;<i> &gt; &gt; 
</I>&gt;<i> &gt; &gt; 
</I>&gt;<i> &gt; &gt;&gt;I interested to know if there are any good
</I>&gt;<i> resources, documents, or 
</I>&gt;<i> &gt; &gt;&gt;source code I could look at to see how to
</I>&gt;<i> properly receive 
</I>&gt;<i> &gt; &gt;&gt;packets from a jabber server like jabberd (which
</I>&gt;<i> I am using) via TCP and 
</I>&gt;<i> &gt; &gt;&gt;then how to receive and reconstruct the entire
</I>&gt;<i> packet.
</I>&gt;<i> &gt; &gt; 
</I>&gt;<i> &gt; &gt; 
</I>&gt;<i> &gt; &gt; When you deal with TCP as in the case of Jabber,
</I>&gt;<i> then you must not think in terms of 'packets'. Both
</I>&gt;<i> parties will receive a stream of bytes. While they
</I>&gt;<i> send chunks of data on the connection, there is no
</I>&gt;<i> guarantee that the receiver gets the data in the
</I>&gt;<i> original chunks. The only guarantees that TCP gives
</I>&gt;<i> are 1. that the data will arrive or you get an error
</I>&gt;<i> 2. the byte order will be retained. Again: the
</I>&gt;<i> receiver might get the data in totally different
</I>&gt;<i> 'packets'. 
</I>&gt;<i> &gt; &gt; 
</I>&gt;<i> &gt; &gt; 
</I>&gt;<i> &gt; &gt;&gt;I'm using Visual Studio .net and WINSOCK to do
</I>&gt;<i> connection and 
</I>&gt;<i> &gt; &gt;&gt;receiving. Right now I have a working client
</I>&gt;<i> that receive packets that 
</I>&gt;<i> &gt; &gt;&gt;are 8129 bytes, but these packets might not
</I>&gt;<i> contain the full message. 
</I>&gt;<i> &gt; &gt;&gt;This problem gets worse with more traffic.
</I>&gt;<i> &gt; &gt; 
</I>&gt;<i> &gt; &gt; 
</I>&gt;<i> &gt; &gt; What you must do is: forward every piece of data
</I>&gt;<i> to the protocol parser. In this case it is an XML
</I>&gt;<i> parser. The XML parser must be able to parse
</I>&gt;<i> 'incomplete' XML and tell you about the structure
</I>&gt;<i> before the main wrapper tag is closed. People call
</I>&gt;<i> it a SAX parser as opposed to DOM parsers. You need
</I>&gt;<i> a SAX parser. You feed it with every byte that comes
</I>&gt;<i> from the connection. There is virtually nothing
</I>&gt;<i> between the read() system call where you get data
</I>&gt;<i> from the connection and the parse() where you
</I>&gt;<i> forward the data to 
</I>&gt;<i> the parser. The parser will consume the bytes. The
</I>&gt;<i> parser will tell you when a first order tag is
</I>&gt;<i> finished. That would be something like a &lt;message/&gt;
</I>&gt;<i> or &lt;presence/&gt; inside a &lt;stream:stream&gt;. If this
</I>&gt;<i> happens then you can analyze the first order tag.
</I>&gt;<i> That's then called a stanza in Jabber terms. In XML
</I>&gt;<i> terms it is just the first order sub tag of the XML
</I>&gt;<i> wrapper tag.
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; What parser would you recommend? I'm looking into
</I>&gt;<i> expat. I was using 
</I>&gt;<i> &gt; tinyXML, but it doesn't seem to fit the bill you
</I>&gt;<i> are describing...
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; &gt; 
</I>&gt;<i> &gt; &gt; 
</I>&gt;<i> &gt; &gt;&gt;What is the best way to construct entire jabber
</I>&gt;<i> server packets into 
</I>&gt;<i> &gt; &gt;&gt;comlete packets/message. For example, the server
</I>&gt;<i> might send a user's 
</I>&gt;<i> &gt; &gt;&gt;message in xml, and because of web traffic the
</I>&gt;<i> complete message might 
</I>&gt;<i> &gt; &gt;&gt;not arrive in teh received 8192 bytes...
</I>&gt;<i> &gt; &gt; 
</I>&gt;<i> &gt; &gt; 
</I>&gt;<i> &gt; &gt; I reiterate, because this is important: this is
</I>&gt;<i> TCP. There are no messages. Your network API will
</I>&gt;<i> give you multiple bytes at once. This looks like a
</I>&gt;<i> message. You don't care. You handle all data to the
</I>&gt;<i> XML parser. The parser will tell you when stanzas
</I>&gt;<i> are complete. You are probably testing in your lab.
</I>&gt;<i> Over the wide internet you might even get smaller
</I>&gt;<i> pieces of data at once (like 500 bytes). Stanzas
</I>&gt;<i> might be split badly. There might be even the last
</I>&gt;<i> '&gt;' missing. Don't look at the data directly. Let
</I>&gt;<i> the XML 
</I>&gt;<i> parser look. It will tell you when a stanza is
</I>&gt;<i> complete. 
</I>&gt;<i> &gt; &gt; 
</I>&gt;<i> &gt; &gt; 
</I>&gt;<i> &gt; &gt;&gt;Other than this problem, my custom jabber client
</I>&gt;<i> for this game, 
</I>&gt;<i> &gt; &gt;&gt;gopetslive.com is going pretty well.
</I>&gt;<i> &gt; &gt;&gt;
</I>&gt;<i> &gt; &gt;&gt;Any help or code sample or pointers would be
</I>&gt;<i> much appreciated.
</I>&gt;<i> &gt; &gt; 
</I>&gt;<i> &gt; &gt; 
</I>&gt;<i> &gt; &gt; hw
</I>&gt;<i> &gt; &gt; --
</I>&gt;<i> &gt; &gt; Dr. Klaus H. Wolf
</I>&gt;<i> &gt; &gt; bluehands GmbH &amp; Co.mmunication KG
</I>&gt;<i> &gt; &gt; <A HREF="http://www.bluehands.de/people/hw">http://www.bluehands.de/people/hw</A>
</I>&gt;<i> &gt; &gt; +49 (0721) 16108 75
</I>&gt;<i> &gt; &gt; --
</I>&gt;<i> &gt; &gt; Jabber enabled Virtual Presence on the Web:
</I>&gt;<i> <A HREF="http://www.lluna.de/">http://www.lluna.de/</A>
</I>&gt;<i> &gt; &gt; Open Source Future History:
</I>&gt;<i> <A HREF="http://www.galactic-developments.com/">http://www.galactic-developments.com/</A>
</I>&gt;<i> &gt; &gt; _______________________________________________
</I>&gt;<i> &gt; &gt; jdev mailing list
</I>&gt;<i> &gt; &gt; <A HREF="http://mail.jabber.org/mailman/listinfo/jdev">jdev at jabber.org</A>
</I>&gt;<i> &gt; &gt; <A HREF="http://mail.jabber.org/mailman/listinfo/jdev">http://mail.jabber.org/mailman/listinfo/jdev</A>
</I>&gt;<i> &gt; &gt; 
</I>&gt;<i> &gt; &gt; 
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; -- 
</I>&gt;<i> &gt; Jon Phillips
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; KOREA.PH.010.3140.7483
</I>&gt;<i> &gt; USA.PH.858.361.2811
</I>&gt;<i> &gt; <A HREF="http://mail.jabber.org/mailman/listinfo/jdev">jon at rejon.org</A>
</I>&gt;<i> &gt; <A HREF="http://www.rejon.org">http://www.rejon.org</A>
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; Inkscape (<A HREF="http://inkscape.org">http://inkscape.org</A>)
</I>&gt;<i> &gt; Open Clip Art Library (www.openclipart.org)
</I>&gt;<i> &gt; CVS Book (<A HREF="http://cvsbook.ucsd.edu">http://cvsbook.ucsd.edu</A>)
</I>&gt;<i> &gt; Scale Journal (<A HREF="http://scale.ucsd.edu">http://scale.ucsd.edu</A>)
</I>&gt;<i> &gt; _______________________________________________
</I>&gt;<i> &gt; jdev mailing list
</I>&gt;<i> &gt; <A HREF="http://mail.jabber.org/mailman/listinfo/jdev">jdev at jabber.org</A>
</I>&gt;<i> &gt; <A HREF="http://mail.jabber.org/mailman/listinfo/jdev">http://mail.jabber.org/mailman/listinfo/jdev</A>
</I>&gt;<i> &gt; 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> ------------------------------
</I>&gt;<i> 
</I>&gt;<i> _______________________________________________
</I>&gt;<i> jdev mailing list
</I>&gt;<i> <A HREF="http://mail.jabber.org/mailman/listinfo/jdev">jdev at jabber.org</A>
</I>&gt;<i> <A HREF="http://mail.jabber.org/mailman/listinfo/jdev">http://mail.jabber.org/mailman/listinfo/jdev</A>
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> End of jdev Digest, Vol 10, Issue 4
</I>&gt;<i> ***********************************
</I>&gt;<i> 
</I>


		
__________________________________ 
Do you Yahoo!? 
Check out the new Yahoo! Front Page. 
www.yahoo.com 
 


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="020496.html">[jdev] TCP Packet Construction
</A></li>
	<LI>Next message: <A HREF="020498.html">[jdev] Re: jdev Digest, Vol 10, Issue 4
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20497">[ date ]</a>
              <a href="thread.html#20497">[ thread ]</a>
              <a href="subject.html#20497">[ subject ]</a>
              <a href="author.html#20497">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://mail.jabber.org/mailman/listinfo/jdev">More information about the JDev
mailing list</a><br>
</body></html>
