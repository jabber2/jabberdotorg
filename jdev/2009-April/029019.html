<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [jdev] update on XMPP location (wherein beer is offered)
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:jdev%40jabber.org?Subject=%5Bjdev%5D%20update%20on%20XMPP%20location%20%28wherein%20beer%20is%20offered%29&In-Reply-To=28B8BE8DCC88448192FEF978639142CC%40movsoftware.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="029018.html">
   <LINK REL="Next"  HREF="029028.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[jdev] update on XMPP location (wherein beer is offered)</H1>
    <B>Simon Tennant</B> 
    <A HREF="mailto:jdev%40jabber.org?Subject=%5Bjdev%5D%20update%20on%20XMPP%20location%20%28wherein%20beer%20is%20offered%29&In-Reply-To=28B8BE8DCC88448192FEF978639142CC%40movsoftware.com"
       TITLE="[jdev] update on XMPP location (wherein beer is offered)">simon at buddycloud.com
       </A><BR>
    <I>Wed Apr  1 14:10:21 CDT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="029018.html">[jdev] [ANN] Prosody 0.4.0 Released
</A></li>
        <LI>Next message: <A HREF="029028.html">[jdev] update on XMPP location (wherein beer is offered)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#29019">[ date ]</a>
              <a href="thread.html#29019">[ thread ]</a>
              <a href="subject.html#29019">[ subject ]</a>
              <a href="author.html#29019">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Stephen Pendleton wrote:
&gt;<i> I like this a lot. How does the &quot;nearby&quot; query work? Does it returned
</I>&gt;<i> bookmarked places that are owned by the submitting jid, or any bookmarked
</I>&gt;<i> place nearby? What is &quot;cellpatternquality&quot; mean?
</I>A place can have one of two modes.

    * Public places are those that can be shared with other people. Eg
      my placemark for Starbucks would be useful to others.
    * Private places are those that will not be shared with others. For
      example my placemark called &quot;Home sweet home&quot; is probably not
      useful to others on the network (and/or I want it to be private to
      just me and only shared with my friends).

butler.buddycloud.com will only show public in a nearby query. These
will be public places from all users. Additionally you can subscribe to
a place which then places it on your own list of places that you are
placed at in the future.

CellPatternQuality reflects the certainty of the place.  How &quot;distinct&quot;
it is. For example when you are driving the location butler will be
seeing lots of new wifi and cell towers. Saving a placemark at that
point will save it but it will be a &quot;blurry&quot; pattern in the database. 
Better would be to wait a moment, submit a couple more location queries,
watch for the cellpatternquality to increase to 100% and then send a
placemark save stanza.  Then the butler will be far more likely to
accurately place you back at that point in the future.

&gt;<i> Also, how does the component push my location to my PEP node if I am on
</I>&gt;<i> another server? Would this be allowed by XMPP servers? I would be
</I>&gt;<i> interested
</I>&gt;<i> in seeing these stanzas though to test it out.
</I>Indeed for non-buddycloud.com domains PEP would not work. There are two
solutions for this that we are looking at. Either:

    * having the remote non buddycloud node publish their own pep node
      after getting a reply to their location query stanza or
    * granting publisher rights to butler.buddycloud.com on your own
      pubsub geoloc node and passing the address to this node as part of
      the location query. The query results would then be published on
      your behalf in XEP-0080 (user location) format as well as being
      returned to the client.

&gt;<i> There is another application we are working on that involves XEP-0255. It
</I>&gt;<i> currently supports what you are calling &quot;beacon logs&quot; stanzas to
</I>&gt;<i> return back
</I>&gt;<i> postal addresses. The system uses a combination of wifi access
</I>&gt;<i> points/mobile
</I>&gt;<i> towers to pinpoint your position and return back a lat/lon. It is very
</I>&gt;<i> accurate in a populated area.
</I>The butler does a best effort on the lookup of lat/long too and
publishes it as part of the XEP-0080 stack. I don't think we fill out
the post code for general locations (we do for known places) but this
could presumably be added with access to the right lat/long -&gt; postcode
mapping tables.  It's not something that we have spent too much time on.
Our main efforts in butler development have focused on making location
something social by describing it as known places like home or work or
&quot;on the road in munich&quot; (travelling) or  &quot;near  Jo's house&quot; for example.

S.

-- 
Simon Tennant
Buddycloud
uk: +44 20 7043 6756               de: +49 89 420 955 854  
uk: +44 78 5335 6047               de: +49 17 8545 0880
email and xmpp: <A HREF="http://mail.jabber.org/mailman/listinfo/jdev">simon at buddycloud.com</A>
<A HREF="http://buddycloud.com">http://buddycloud.com</A>

</PRE>



<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="029018.html">[jdev] [ANN] Prosody 0.4.0 Released
</A></li>
	<LI>Next message: <A HREF="029028.html">[jdev] update on XMPP location (wherein beer is offered)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#29019">[ date ]</a>
              <a href="thread.html#29019">[ thread ]</a>
              <a href="subject.html#29019">[ subject ]</a>
              <a href="author.html#29019">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://mail.jabber.org/mailman/listinfo/jdev">More information about the JDev
mailing list</a><br>
</body></html>
