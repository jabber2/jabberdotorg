<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [JDEV] Playing with xdb files while jabberd is running.
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:jdev%40jabber.org?Subject=Re%3A%20%5BJDEV%5D%20Playing%20with%20xdb%20files%20while%20jabberd%20is%20running.&In-Reply-To=%3C200209271124312.SM04628%40127.0.0.1%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="072880.html">
   <LINK REL="Next"  HREF="072873.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[JDEV] Playing with xdb files while jabberd is running.</H1>
    <B>worklists at dovkatz.net</B> 
    <A HREF="mailto:jdev%40jabber.org?Subject=Re%3A%20%5BJDEV%5D%20Playing%20with%20xdb%20files%20while%20jabberd%20is%20running.&In-Reply-To=%3C200209271124312.SM04628%40127.0.0.1%3E"
       TITLE="[JDEV] Playing with xdb files while jabberd is running.">worklists at dovkatz.net
       </A><BR>
    <I>Fri Sep 27 11:24:28 CDT 2002</I>
    <P><UL>
        <LI>Previous message: <A HREF="072880.html">[JDEV] Re: Info about v2 queries in xdb_sql
</A></li>
        <LI>Next message: <A HREF="072873.html">[JDEV] Playing with xdb files while jabberd is running.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#72872">[ date ]</a>
              <a href="thread.html#72872">[ thread ]</a>
              <a href="subject.html#72872">[ subject ]</a>
              <a href="author.html#72872">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello, don't ask why this is necessary, but I have a production jabberd process using file-based xdb to store registration info for remote transports (such as toc,yahoo,etc).

Is there a deterministic behavior of jabberd if I were to move/delete an xdb file while everything is running?  I need to immediately remove users from a remote transport/gateway and while I can boot them by admin-ing the gateway, I need them to be temporarily unregistered so they cannot log back in.  The best solution I can think of is moving the xdb files, without stopping jabberd.

So, this is really 2 questions.

1) Does jabberd keep file handles open (thus will be connected to the inode on disk) to the xdb's even when it's done reading them? If so, moving the file won't help me.

2) If [1] is false, then what happens if I move the file? 

3) if [1] is true, what happens if i delete the file?

Thanks in advance
-Dov

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="072880.html">[JDEV] Re: Info about v2 queries in xdb_sql
</A></li>
	<LI>Next message: <A HREF="072873.html">[JDEV] Playing with xdb files while jabberd is running.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#72872">[ date ]</a>
              <a href="thread.html#72872">[ thread ]</a>
              <a href="subject.html#72872">[ subject ]</a>
              <a href="author.html#72872">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://mail.jabber.org/mailman/listinfo/jdev">More information about the JDev
mailing list</a><br>
</body></html>
