<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [jdev] Local history storage
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:jdev%40jabber.org?Subject=Re%3A%20%5Bjdev%5D%20Local%20history%20storage&In-Reply-To=%3C51538F66-0F1D-467B-994A-FF581D7CD998%40xnyhps.nl%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="089287.html">
   <LINK REL="Next"  HREF="089289.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[jdev] Local history storage</H1>
    <B>Thijs Alkemade</B> 
    <A HREF="mailto:jdev%40jabber.org?Subject=Re%3A%20%5Bjdev%5D%20Local%20history%20storage&In-Reply-To=%3C51538F66-0F1D-467B-994A-FF581D7CD998%40xnyhps.nl%3E"
       TITLE="[jdev] Local history storage">thijs at xnyhps.nl
       </A><BR>
    <I>Wed Dec 19 16:25:16 UTC 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="089287.html">[jdev] Local history storage
</A></li>
        <LI>Next message: <A HREF="089289.html">[jdev] Presence ACL
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#89288">[ date ]</a>
              <a href="thread.html#89288">[ thread ]</a>
              <a href="subject.html#89288">[ subject ]</a>
              <a href="author.html#89288">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
Op 19 dec. 2012, om 11:02 heeft Mathieu Pasquet &lt;<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">mathieui at mathieui.net</A>&gt; het volgende geschreven:

&gt;<i> On 19/12/2012 08:14, David E. Ammouial wrote:
</I>&gt;&gt;<i> Hello,
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> I'm currently switching from Gajim to Empathy (trying it out becomes I'm
</I>&gt;&gt;<i> discovering GNOME 3), and as a user I'd like to express a wish to client
</I>&gt;&gt;<i> developers: IMHO, clients should store the chat history at the same place.
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> Gajim, for instance, has taken interesting steps since its beginning.
</I>&gt;&gt;<i> Before, everything was stored under $HOME/.gajim and now there's
</I>&gt;&gt;<i> .local/share/gajim, .config/gajim and .cache/gajim. Such sweetness is a
</I>&gt;&gt;<i> global naming policy change that modern software tend to respect, so
</I>&gt;&gt;<i> that there's more consistency (e.g. all local storage goes to .local).
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> So here, my proposal is to go one step further: I guess .local/share is
</I>&gt;&gt;<i> called &quot;share&quot; because it's supposed to host shared resources, not one
</I>&gt;&gt;<i> subdirectory per program. Chat history is a good example: a
</I>&gt;&gt;<i> .local/share/xmpplogs/ directory would make total sense.
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> Of course, the exact format would need to be thoughtfully defined, but
</I>&gt;&gt;<i> does the goal itself sound reasonable?
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> (I'm well aware of the efforts to store history on server side, but I
</I>&gt;&gt;<i> think local history will still be around for a while.)
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> Regards.
</I>&gt;<i> I&#8217;m not sure about having the same location for every clients (conflicts, concurrent access, and all the fun of shared resources), but a common format in order to allow easy migrations (copy + paste of the log files) would indeed be nice. It would also mean that we could have an external, standardized tool to view the logs.
</I>&gt;<i> 
</I>&gt;<i> As it was mentionned, XEP-0136 introduces a standard for querying and retrieving message logs, but in order to create a new XEP to specify the file format of the client logs, we would need to extend its scope. Most clients nowadays store lots of things in their logs (namely, presences) which are not mentionned in the XEP (or did I misread?) ; this is especially true for nick changes in a groupchat.
</I>&gt;<i> 
</I>&gt;<i> Another issue with a standardized file format is that the chosen file format depends of the goal of the client. E.g gajim, if I&#8217;m not mistaken, stores its logs in a sqlite database, which allows them to have a nice graphical tool dedicated to query the logs in various ways, and stay efficient. But other clients (like poezio, or mcabber) have opted for a plain text and file-based file format, because it keeps the logs human-readable, and less prone to corruption (and we can still kinda-query it with grep).
</I>&gt;<i> 
</I>&gt;<i> (for reference, you were talking about the freedesktop basedir spec: <A HREF="http://standards.freedesktop.org/basedir-spec/basedir-spec-latest.html">http://standards.freedesktop.org/basedir-spec/basedir-spec-latest.html</A> )
</I>&gt;<i> 
</I>&gt;<i> --
</I>&gt;<i> Mathieu Pasquet (mathieui)
</I>&gt;<i> 
</I>
Previous Adium developers set up this proposal[1] for an &quot;official chat log spec&quot;.
However, I'm not aware of any other client ever showing interest in also supporting it.

It has, in my own opinion, a number of drawbacks (for example, some information is
only stored in the file paths!), but I want to mention it as a good candidate for a starting
point for a common format.

Considering the existing differences in clients and the large amounts of logs already
existing, it might be a too ambitious goal to have all clients use the same format, but
export/import functionality for one common format would already be a good step.

Regards
Thijs Alkemade

[1] = <A HREF="http://trac.adium.im/wiki/XMLLogFormat">http://trac.adium.im/wiki/XMLLogFormat</A>
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="089287.html">[jdev] Local history storage
</A></li>
	<LI>Next message: <A HREF="089289.html">[jdev] Presence ACL
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#89288">[ date ]</a>
              <a href="thread.html#89288">[ thread ]</a>
              <a href="subject.html#89288">[ subject ]</a>
              <a href="author.html#89288">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://mail.jabber.org/mailman/listinfo/jdev">More information about the JDev
mailing list</a><br>
</body></html>
