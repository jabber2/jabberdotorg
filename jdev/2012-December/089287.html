<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [jdev] Local history storage
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:jdev%40jabber.org?Subject=Re%3A%20%5Bjdev%5D%20Local%20history%20storage&In-Reply-To=%3C50D190A3.3080505%40mathieui.net%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="089286.html">
   <LINK REL="Next"  HREF="089288.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[jdev] Local history storage</H1>
    <B>Mathieu Pasquet</B> 
    <A HREF="mailto:jdev%40jabber.org?Subject=Re%3A%20%5Bjdev%5D%20Local%20history%20storage&In-Reply-To=%3C50D190A3.3080505%40mathieui.net%3E"
       TITLE="[jdev] Local history storage">mathieui at mathieui.net
       </A><BR>
    <I>Wed Dec 19 10:02:11 UTC 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="089286.html">[jdev] Local history storage
</A></li>
        <LI>Next message: <A HREF="089288.html">[jdev] Local history storage
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#89287">[ date ]</a>
              <a href="thread.html#89287">[ thread ]</a>
              <a href="subject.html#89287">[ subject ]</a>
              <a href="author.html#89287">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 19/12/2012 08:14, David E. Ammouial wrote:
&gt;<i> Hello,
</I>&gt;<i>
</I>&gt;<i> I'm currently switching from Gajim to Empathy (trying it out becomes I'm
</I>&gt;<i> discovering GNOME 3), and as a user I'd like to express a wish to client
</I>&gt;<i> developers: IMHO, clients should store the chat history at the same place.
</I>&gt;<i>
</I>&gt;<i> Gajim, for instance, has taken interesting steps since its beginning.
</I>&gt;<i> Before, everything was stored under $HOME/.gajim and now there's
</I>&gt;<i> .local/share/gajim, .config/gajim and .cache/gajim. Such sweetness is a
</I>&gt;<i> global naming policy change that modern software tend to respect, so
</I>&gt;<i> that there's more consistency (e.g. all local storage goes to .local).
</I>&gt;<i>
</I>&gt;<i> So here, my proposal is to go one step further: I guess .local/share is
</I>&gt;<i> called &quot;share&quot; because it's supposed to host shared resources, not one
</I>&gt;<i> subdirectory per program. Chat history is a good example: a
</I>&gt;<i> .local/share/xmpplogs/ directory would make total sense.
</I>&gt;<i>
</I>&gt;<i> Of course, the exact format would need to be thoughtfully defined, but
</I>&gt;<i> does the goal itself sound reasonable?
</I>&gt;<i>
</I>&gt;<i> (I'm well aware of the efforts to store history on server side, but I
</I>&gt;<i> think local history will still be around for a while.)
</I>&gt;<i>
</I>&gt;<i> Regards.
</I>I&#8217;m not sure about having the same location for every clients 
(conflicts, concurrent access, and all the fun of shared resources), but 
a common format in order to allow easy migrations (copy + paste of the 
log files) would indeed be nice. It would also mean that we could have 
an external, standardized tool to view the logs.

As it was mentionned, XEP-0136 introduces a standard for querying and 
retrieving message logs, but in order to create a new XEP to specify the 
file format of the client logs, we would need to extend its scope. Most 
clients nowadays store lots of things in their logs (namely, presences) 
which are not mentionned in the XEP (or did I misread?) ; this is 
especially true for nick changes in a groupchat.

Another issue with a standardized file format is that the chosen file 
format depends of the goal of the client. E.g gajim, if I&#8217;m not 
mistaken, stores its logs in a sqlite database, which allows them to 
have a nice graphical tool dedicated to query the logs in various ways, 
and stay efficient. But other clients (like poezio, or mcabber) have 
opted for a plain text and file-based file format, because it keeps the 
logs human-readable, and less prone to corruption (and we can still 
kinda-query it with grep).

(for reference, you were talking about the freedesktop basedir spec: 
<A HREF="http://standards.freedesktop.org/basedir-spec/basedir-spec-latest.html">http://standards.freedesktop.org/basedir-spec/basedir-spec-latest.html</A> )

--
Mathieu Pasquet (mathieui)


</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="089286.html">[jdev] Local history storage
</A></li>
	<LI>Next message: <A HREF="089288.html">[jdev] Local history storage
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#89287">[ date ]</a>
              <a href="thread.html#89287">[ thread ]</a>
              <a href="subject.html#89287">[ subject ]</a>
              <a href="author.html#89287">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://mail.jabber.org/mailman/listinfo/jdev">More information about the JDev
mailing list</a><br>
</body></html>
