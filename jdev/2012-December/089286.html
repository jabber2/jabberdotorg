<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [jdev] Local history storage
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:jdev%40jabber.org?Subject=Re%3A%20%5Bjdev%5D%20Local%20history%20storage&In-Reply-To=%3C9355685.Y1xu7FRayz%40earthbind%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="089285.html">
   <LINK REL="Next"  HREF="089287.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[jdev] Local history storage</H1>
    <B>Justin Karneges</B> 
    <A HREF="mailto:jdev%40jabber.org?Subject=Re%3A%20%5Bjdev%5D%20Local%20history%20storage&In-Reply-To=%3C9355685.Y1xu7FRayz%40earthbind%3E"
       TITLE="[jdev] Local history storage">justin at affinix.com
       </A><BR>
    <I>Wed Dec 19 09:55:41 UTC 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="089285.html">[jdev] Local history storage
</A></li>
        <LI>Next message: <A HREF="089287.html">[jdev] Local history storage
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#89286">[ date ]</a>
              <a href="thread.html#89286">[ thread ]</a>
              <a href="subject.html#89286">[ subject ]</a>
              <a href="author.html#89286">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Wednesday, December 19, 2012 09:01:13 AM Will Thompson wrote:
&gt;<i> On 19/12/12 08:14, Justin Karneges wrote:
</I>&gt;<i> &gt; On Wednesday, December 19, 2012 08:14:34 AM David E. Ammouial wrote:
</I>&gt;<i> &gt;&gt; Of course, the exact format would need to be thoughtfully defined, but
</I>&gt;<i> &gt;&gt; does the goal itself sound reasonable?
</I>&gt;<i> &gt;&gt; 
</I>&gt;<i> &gt;&gt; (I'm well aware of the efforts to store history on server side, but I
</I>&gt;<i> &gt;&gt; think local history will still be around for a while.)
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; I've been wanting this since forever. Email has mbox and Maildir. IM could
</I>&gt;<i> &gt; use something similar. Maybe we could even just use an email format
</I>&gt;<i> &gt; (conversations in RFC822 format anyone?). I say it now just so it gets
</I>&gt;<i> &gt; said.
</I>&gt;<i> 
</I>&gt;<i> I think you're suggesting storing each message as a separate email?
</I>&gt;<i>
</I>&gt;<i> For a data point, Google Talk conversation logs show up over IMAP as
</I>&gt;<i> emails, with one email per conversation. One alternative in the mail is
</I>&gt;<i> human-readable HTML; the more interesting one is a &lt;conversation
</I>&gt;<i> xmlns='google:archive:conversation'&gt; document with simple &lt;message
</I>&gt;<i> xmlns='jabber:client'&gt; children. 1-1 conversations have the From: header
</I>&gt;<i> set to your correspondent; MUCs have all participants in CC:.
</I>
Yes I was thinking something like this, where an email encapsulates an entire 
conversation.

&gt;<i> I spent a little while hooking this up to Telepathy's log storage a few
</I>&gt;<i> months ago and it was pretty straightforward, because of course we
</I>&gt;<i> already have the machinery needed to show &lt;message&gt;s. Appending messages
</I>&gt;<i> to the log file as a conversation continues would be more painful in
</I>&gt;<i> that format, though.
</I>
Yup, you'd want to append/update each email-per-chat as the chats go on.

&gt;<i> Storage as one or more emails lets one use existing tools to quickly
</I>&gt;<i> index and search by sender, time etc.
</I>
Exactly.

&gt;<i> It seems a bit of a shame that XEP-0136 doesn't use collections of
</I>&gt;<i> &lt;message&gt; elements timestamped with jabber:x:delay/urn:xmpp:delay. I'm
</I>&gt;<i> late to the party, but presumably this was considered and rejected for
</I>&gt;<i> some reason?
</I>
I suspect the currently documented format was used for compactness. Whole 
message stanzas could be interesting if you wanted full-on recording of 
everything, like chat states, but in most cases it is overkill and we also 
didn't want to log non-IM stanzas (no logging of IBB traffic). So that's why the 
collections format is lean and to the point. I believe the intent was to allow 
other IM-related elements sibling to &lt;body&gt; though (like &lt;html&gt;).

Justin
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="089285.html">[jdev] Local history storage
</A></li>
	<LI>Next message: <A HREF="089287.html">[jdev] Local history storage
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#89286">[ date ]</a>
              <a href="thread.html#89286">[ thread ]</a>
              <a href="subject.html#89286">[ subject ]</a>
              <a href="author.html#89286">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://mail.jabber.org/mailman/listinfo/jdev">More information about the JDev
mailing list</a><br>
</body></html>
