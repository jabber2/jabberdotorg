<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [jdev] virtual hosting and certificate checking
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:jdev%40jabber.org?Subject=Re%3A%20%5Bjdev%5D%20virtual%20hosting%20and%20certificate%20checking&In-Reply-To=%3C20060301205755.GA6684%40z273.org.uk%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="053409.html">
   <LINK REL="Next"  HREF="053430.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[jdev] virtual hosting and certificate checking</H1>
    <B>Brian Campbell</B> 
    <A HREF="mailto:jdev%40jabber.org?Subject=Re%3A%20%5Bjdev%5D%20virtual%20hosting%20and%20certificate%20checking&In-Reply-To=%3C20060301205755.GA6684%40z273.org.uk%3E"
       TITLE="[jdev] virtual hosting and certificate checking">bacam at z273.org.uk
       </A><BR>
    <I>Wed Mar  1 14:57:55 CST 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="053409.html">[jdev] virtual hosting and certificate checking
</A></li>
        <LI>Next message: <A HREF="053430.html">[jdev] virtual hosting and certificate checking
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#53422">[ date ]</a>
              <a href="thread.html#53422">[ thread ]</a>
              <a href="subject.html#53422">[ subject ]</a>
              <a href="author.html#53422">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Wed, Mar 01, 2006 at 11:42:53AM -0700, Peter Saint-Andre wrote:
&gt;<i> 
</I>&gt;<i> There are two possibilities I can see.
</I>&gt;<i> 
</I>&gt;<i> 1. Every time shakespeare.lit adds a new virtual host, it needs to
</I>&gt;<i> generate a new certificate. This is a real pain because of how
</I>&gt;<i> certificates are usually generated (e.g., now William Shakespeare needs
</I>&gt;<i> to be a root contact for denmark.lit, montague.lit, etc.).
</I>
Well, he could also get a single certificate with a wildcard
id-on-xmppAddr.

&gt;<i> 2. Clients open TCP connections to shakespeare.lit (rather than
</I>&gt;<i> denmark.lit etc.) but specify the desired virtual hostname in the 'to'
</I>&gt;<i> address of the stream header, then check the certificate presented by
</I>&gt;<i> the server as either 'shakespeare.lit' or 'denmark.lit' (etc.).
</I>&gt;<i> 
</I>&gt;<i> Option #2 is not explicitly forbidden by RFC 3920 as far as I can see,
</I>&gt;<i> because the phrase &quot;the hostname as provided by the initiating entity&quot;
</I>&gt;<i> is ambiguous -- it could mean
</I>&gt;<i> (a) the hostname at which the TCP connection was opened or
</I>
As far as I can see, this is only allowed if the hostname was explicitly
given by the user (or something acting on their behalf).  If you
resolved a SRV record, it's explicitly forbidden.  After all, you've
no reason to believe the DNS, and nothing other than the certificate to
link the domain you want with the server you've connected to.

&gt;<i> (b) the hostname of the stream header's 'to' address.
</I>
That's what I took it to mean.

The use of &quot;hostname&quot; in that bit of the XMPP RFC surprised me though.
Surely it's almost always a domain name, and you'll look up the
hostname?

  Brian


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="053409.html">[jdev] virtual hosting and certificate checking
</A></li>
	<LI>Next message: <A HREF="053430.html">[jdev] virtual hosting and certificate checking
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#53422">[ date ]</a>
              <a href="thread.html#53422">[ thread ]</a>
              <a href="subject.html#53422">[ subject ]</a>
              <a href="author.html#53422">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://mail.jabber.org/mailman/listinfo/jdev">More information about the JDev
mailing list</a><br>
</body></html>
