<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Fwd: Re: [Fwd: Re: [jdev] Re: tls + plain sasl not working]]
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:jdev%40jabber.org?Subject=Re%3A%20%5BFwd%3A%20Re%3A%20%5BFwd%3A%20Re%3A%20%5Bjdev%5D%20Re%3A%20tls%20%2B%20plain%20sasl%20not%20working%5D%5D&In-Reply-To=%3C4427F9E8.2060501%40jabber.org%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="082905.html">
   <LINK REL="Next"  HREF="082908.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Fwd: Re: [Fwd: Re: [jdev] Re: tls + plain sasl not working]]</H1>
    <B>Peter Saint-Andre</B> 
    <A HREF="mailto:jdev%40jabber.org?Subject=Re%3A%20%5BFwd%3A%20Re%3A%20%5BFwd%3A%20Re%3A%20%5Bjdev%5D%20Re%3A%20tls%20%2B%20plain%20sasl%20not%20working%5D%5D&In-Reply-To=%3C4427F9E8.2060501%40jabber.org%3E"
       TITLE="[Fwd: Re: [Fwd: Re: [jdev] Re: tls + plain sasl not working]]">stpeter at jabber.org
       </A><BR>
    <I>Mon Mar 27 08:42:48 CST 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="082905.html">[jdev] Security-related thought experiment
</A></li>
        <LI>Next message: <A HREF="082908.html">AW: [jdev] SamePlace 0.2.9+0.3.0prealpha
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#82903">[ date ]</a>
              <a href="thread.html#82903">[ thread ]</a>
              <a href="subject.html#82903">[ subject ]</a>
              <a href="author.html#82903">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Forwarded with permission...

/psa

- -------- Original Message --------
Subject: Re: [Fwd: Re: [jdev] Re: tls + plain sasl not working]
Date: Sun, 26 Mar 2006 15:12:28 -0800
From: Kurt D. Zeilenga &lt;<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">Kurt at OpenLDAP.org</A>&gt;
To: Peter Saint-Andre &lt;<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">stpeter at jabber.org</A>&gt;
CC: <A HREF="http://mail.jabber.org/mailman/listinfo/jdev">Alexey.Melnikov at isode.com</A>
References: &lt;<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">442184D5.7090401 at jabber.org</A>&gt;

Sorry for the delayed response, been busy at (and recovering
from) IETF#65.

At 09:09 AM 3/22/2006, Peter Saint-Andre wrote:
&gt;<i>-----BEGIN PGP SIGNED MESSAGE-----
</I>&gt;<i>Hash: SHA1
</I>&gt;<i>
</I>&gt;<i>Hello SASL gurus,
</I>&gt;<i>
</I>&gt;<i>A question has some up on the Jabber developer mailing list that perhaps
</I>&gt;<i>could be clarified in rfc2222bis. Please read on for details...
</I>&gt;<i>
</I>&gt;<i>Thanks!
</I>&gt;<i>
</I>&gt;<i>Peter
</I>&gt;<i>
</I>&gt;<i>- -------- Original Message --------
</I>&gt;<i>Subject: Re: [jdev] Re: tls + plain sasl not working
</I>&gt;<i>Date: Wed, 22 Mar 2006 10:05:52 -0700
</I>&gt;<i>From: Peter Saint-Andre &lt;<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">stpeter at jabber.org</A>&gt;
</I>&gt;<i>Reply-To: Jabber software development list &lt;<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">jdev at jabber.org</A>&gt;
</I>&gt;<i>To: Jabber software development list &lt;<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">jdev at jabber.org</A>&gt;
</I>&gt;<i>References:
</I>&gt;<i>&lt;<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">5b698f5a0603220643y289a45deh1f5afdce5d85383e at mail.gmail.com</A>&gt;
</I>&gt;<i>&lt;dvrtqg$qk9$<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">1 at sea.gmane.org</A>&gt;    &lt;<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">20060322164815.GA33696 at ik.nu</A>&gt;
</I>&gt;<i>
</I>&gt;<i>Ralph Meijer wrote:
</I>&gt;&gt;<i> On Wed, Mar 22, 2006 at 01:25:47PM -0300, Gaston Dombiak wrote:
</I>&gt;&gt;&gt;<i> Hey Norman,
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Wildfire implementation is based on
</I>&gt;&gt;&gt;<i> <A HREF="http://www.ietf.org/internet-drafts/draft-ietf-sasl-plain-08.txt.">http://www.ietf.org/internet-drafts/draft-ietf-sasl-plain-08.txt.</A> My
</I>&gt;&gt;&gt;<i> understanding after reading &quot;
</I>&gt;&gt;&gt;<i> The mechanism consists of a single message, a string of [UTF-8]
</I>&gt;&gt;&gt;<i>   encoded [Unicode] characters, from the client to the server.  The
</I>&gt;&gt;&gt;<i>   client presents the authorization identity (identity to act as),
</I>&gt;&gt;&gt;<i>   followed by a NULL (U+0000) character, followed by the authentication
</I>&gt;&gt;&gt;<i>   identity (identity whose password will be used), followed by a NULL
</I>&gt;&gt;&gt;<i>   (U+0000) character, followed by the clear-text password.&quot;
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> is that the client MUST include the user and password in the &lt;auth&gt; PLAIN
</I>&gt;&gt;&gt;<i> stanza. I don't see any option for sending an empty &lt;auth&gt; PLAIN stanza and
</I>&gt;&gt;&gt;<i> expecting the server to send a challenge so that the client can send the
</I>&gt;&gt;&gt;<i> user and password information. Have I missed something here? :)
</I>
Yes, that the &quot;single message&quot; defined here may be either carried
in the PDU the client sends to initiate the PLAIN exchange, or
sent in response to initial challedge (In the case the client
sends no mechanism data in its message that indicates the
exchange.



&gt;&gt;<i>
</I>&gt;&gt;<i> The point is that SASL allows for two different ways of conveying the
</I>&gt;&gt;<i> so-called initial response (a similar thing happens with 'additional
</I>&gt;&gt;<i> data on success').
</I>
Correct.  These cases are illustrated in section 5 of the [SASL-PLAIN].

&gt;<i>rfc2222bis (just approved by the IESG for publication as an RFC to
</I>&gt;<i>superseded RFC 2222) states:
</I>&gt;<i>
</I>&gt;<i>******
</I>&gt;<i>
</I>&gt;<i>  Some mechanisms specify that the first data sent in the authentication
</I>&gt;<i>  exchange is from the client to the server.  Protocols may provide an
</I>&gt;<i>  optional initial response field in the request message to carry this
</I>&gt;<i>  data.  Where the mechanism specifies the first data sent in the
</I>&gt;<i>  exchange is from the client to the server, the protocol provides an
</I>&gt;<i>  optional initial response field, and the client uses this field, the
</I>&gt;<i>  exchange is shortened by one round-trip:
</I>&gt;<i>
</I>&gt;<i>      C: Request authentication exchange + Initial response
</I>&gt;<i>      &lt;additional challenge/response messages&gt;
</I>&gt;<i>      S: Outcome of authentication exchange
</I>&gt;<i>
</I>&gt;<i>  Where the mechanism specifies the first data sent in the exchange is
</I>&gt;<i>  from the client to the server and this field is unavailable or unused,
</I>&gt;<i>  the client request is followed by an empty challenge.
</I>&gt;<i>
</I>&gt;<i>      C: Request authentication exchange
</I>&gt;<i>      S: Empty Challenge
</I>&gt;<i>      C: Initial Response
</I>&gt;<i>      &lt;additional challenge/response messages&gt;
</I>&gt;<i>      S: Outcome of authentication exchange
</I>&gt;<i>
</I>&gt;<i>  Should a client include an initial response in its request where the
</I>&gt;<i>  mechanism does not allow the client to send data first, the
</I>&gt;<i>  authentication exchange fails.
</I>&gt;<i>
</I>&gt;<i>******
</I>&gt;<i>
</I>&gt;<i>Now this is still not crystal clear, I think. Does &quot;protocols may
</I>&gt;<i>provide an optional initial response field&quot; mean that &quot;optionally, a
</I>&gt;<i>protocol may require the client to send the initial response&quot; or does it
</I>&gt;<i>mean &quot;a protocol may specify a way for the client to send the initial
</I>&gt;<i>response, and sending the initial response is optional&quot;? I read this as
</I>&gt;<i>stating the former -- that a protocol may require the client to send an
</I>&gt;<i>initial response. But I will seek clarification on this point with my
</I>&gt;<i>SASL friends.
</I>
The field, when provided, should generally be &quot;optional&quot; to the client.
That is, if the protocol provides the field, its use is (by default*)
at the client's option.  This implies that servers must support
exchanges regardless of whether the client makes use of the field
or not.

The same applies to the optional data on success field.  If the
protocol provides the field, it's the server's option (by default*)
to use it.  Hence clients have to deal with both cases.

Now, nothing prevents an application protocol specification
from restricting use of protocol options such as these.
For instance, a protocol specification can say: clients
MUST use the initial response field in applicable cases,
and/or say: servers MUST use the additional data field in
applicable cases.  The problem with such MUSTs is
'applicable cases' and how that's communicated between
independently developed portions of implementation (e.g.,
between the SASL library and the application-layer
code).  In general, I would recommend against such MUSTs
(though a SHOULD would be good to encourage less roundtrips).

Regards, Peter


- --
Peter Saint-Andre
Jabber Software Foundation
<A HREF="http://www.jabber.org/people/stpeter.shtml">http://www.jabber.org/people/stpeter.shtml</A>

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.1 (Darwin)
Comment: Using GnuPG with Mozilla - <A HREF="http://enigmail.mozdev.org">http://enigmail.mozdev.org</A>

iD8DBQFEJ/noNF1RSzyt3NURAkgrAKCrpeFryLIlYDTYEeJlpgNiXVW7OACggcuD
QPdG0TV3nTS8+6KP8VJv2tY=
=z8iV
-----END PGP SIGNATURE-----
-------------- next part --------------
A non-text attachment was scrubbed...
Name: smime.p7s
Type: application/x-pkcs7-signature
Size: 3641 bytes
Desc: S/MIME Cryptographic Signature
URL: &lt;<A HREF="https://www.jabber.org/jdev/attachments/20060327/2d571d4a/attachment-0002.bin">https://www.jabber.org/jdev/attachments/20060327/2d571d4a/attachment-0002.bin</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="082905.html">[jdev] Security-related thought experiment
</A></li>
	<LI>Next message: <A HREF="082908.html">AW: [jdev] SamePlace 0.2.9+0.3.0prealpha
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#82903">[ date ]</a>
              <a href="thread.html#82903">[ thread ]</a>
              <a href="subject.html#82903">[ subject ]</a>
              <a href="author.html#82903">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://mail.jabber.org/mailman/listinfo/jdev">More information about the JDev
mailing list</a><br>
</body></html>
