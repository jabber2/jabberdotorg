<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [JDEV] About changing the S2S communication port
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:jdev%40jabber.org?Subject=Re%3A%20%5BJDEV%5D%20About%20changing%20the%20S2S%20communication%20port&In-Reply-To=%3CF31A3E544E05D411A97D0090279333D8DEBECF%40srv-grp-sp.segin.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="038179.html">
   <LINK REL="Next"  HREF="038182.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[JDEV] About changing the S2S communication port</H1>
    <B>Riviere St&#233;phane</B> 
    <A HREF="mailto:jdev%40jabber.org?Subject=Re%3A%20%5BJDEV%5D%20About%20changing%20the%20S2S%20communication%20port&In-Reply-To=%3CF31A3E544E05D411A97D0090279333D8DEBECF%40srv-grp-sp.segin.com%3E"
       TITLE="[JDEV] About changing the S2S communication port">Stephane.SR.Riviere at atosorigin.com
       </A><BR>
    <I>Thu Jul 26 08:27:02 CDT 2001</I>
    <P><UL>
        <LI>Previous message: <A HREF="038179.html">[JDEV] Jabber DevZone News - JabberCon Developer Sponsorship Update
</A></li>
        <LI>Next message: <A HREF="038182.html">[JDEV] About changing the S2S communication port
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#38181">[ date ]</a>
              <a href="thread.html#38181">[ thread ]</a>
              <a href="subject.html#38181">[ subject ]</a>
              <a href="author.html#38181">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

I have sent a mail on this subject a few weeks ago but I had no response,
so, let's try again :-)

I noticed the following about S2S communication :

- the jabber.xml file allows to change the LISTENING port of the server
for S2S communication (by default 5269) as for C2S communication

- when initializing the server in the dialback.c file the configured
listening port is correctly read in the conf file

- BUT in the dialback_out.c file, any outgoing connection is tried on the
5269 port of the distant server !


So, If I understood correctly this part of the server :

A server can be configured to listen on any port for S2S com BUT will always
try to connect on the 5269 port of other servers...

Everything is fine with clients and C2S communication because you can set
the server port in the client...

Imagine server myjabberX is configured to listen on 6666 instead of 5269,
how would my second server myjabberY could &quot;know&quot; ?
If I'm right, a new section should be added in the config file to add exotic
distant servers configurations. This section would be read in the
dialback_out.c file to use the correct port...

Something like :

&lt;service id=&quot;s2s&quot;&gt;
    &lt;load&gt;
      &lt;dialback&gt;./dialback/dialback.so&lt;/dialback&gt;
    &lt;/load&gt;
    
    &lt;dialback xmlns='jabber:config:dialback'&gt;
    
      (...)

      &lt;distant&gt;
        &lt;host name=&quot;myjabberX.com&quot;&gt;6666&lt;/host&gt;
      &lt;/distant&gt;

    &lt;/dialback&gt;
&lt;/service&gt;


I hope I was clear enough this time and get some feedback :-)

St&#233;phane


------------------------------------------
email : <A HREF="http://mail.jabber.org/mailman/listinfo/jdev">Stephane.sr.Riviere at atosorigin.com</A>
t&#233;l : (0)3.20.60.83.01

Ing&#233;nieur R&amp;D
Equipe Grands Projets
Direction Recherche &amp; D&#233;veloppement
ATOS ORIGIN Activit&#233; Multim&#233;dia
<A HREF="http://www.atosorigin.com">http://www.atosorigin.com</A> 

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="038179.html">[JDEV] Jabber DevZone News - JabberCon Developer Sponsorship Update
</A></li>
	<LI>Next message: <A HREF="038182.html">[JDEV] About changing the S2S communication port
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#38181">[ date ]</a>
              <a href="thread.html#38181">[ thread ]</a>
              <a href="subject.html#38181">[ subject ]</a>
              <a href="author.html#38181">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://mail.jabber.org/mailman/listinfo/jdev">More information about the JDev
mailing list</a><br>
</body></html>
