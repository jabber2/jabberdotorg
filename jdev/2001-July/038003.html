<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [JDEV] Threading problem in jabbercom and my solution
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:jdev%40jabber.org?Subject=Re%3A%20%5BJDEV%5D%20Threading%20problem%20in%20jabbercom%20and%20my%20solution&In-Reply-To=%3C000901c10483%245eb1ebf0%240464a8c0%40tqz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="038006.html">
   <LINK REL="Next"  HREF="038004.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[JDEV] Threading problem in jabbercom and my solution</H1>
    <B>Alan.tan</B> 
    <A HREF="mailto:jdev%40jabber.org?Subject=Re%3A%20%5BJDEV%5D%20Threading%20problem%20in%20jabbercom%20and%20my%20solution&In-Reply-To=%3C000901c10483%245eb1ebf0%240464a8c0%40tqz%3E"
       TITLE="[JDEV] Threading problem in jabbercom and my solution">Alan.Tan at china.com
       </A><BR>
    <I>Wed Jul  4 07:18:00 CDT 2001</I>
    <P><UL>
        <LI>Previous message: <A HREF="038006.html">[JDEV] Jabberoo available for Windows CE
</A></li>
        <LI>Next message: <A HREF="038004.html">[JDEV] Java Jabber Server.. The first steps
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#38003">[ date ]</a>
              <a href="thread.html#38003">[ thread ]</a>
              <a href="subject.html#38003">[ subject ]</a>
              <a href="author.html#38003">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>In developing Jabber client, I fould that the jabbercom is not stable sometimes, especially when the server is busy(my server of coz.:).

When debug into the source, I think the reason is that jabbercom postmessage from _DataThd  to TJabberSession to avoid conflict between threads.However,for the asynchronous nature of postmessage,the execute order is not guaranteed. Some strange thing may happen due to the wrong execute order.

My solution is quite simple: Change all the  postmessage into sendmessage, where later can  guarantee the execute order. Another solution is using the Synchronize method of _DataThd, which also utilize SendMessage anyway.

Sorry,Peter.I sent email to you mailbox and jabberd you days ago, but no response :( So I have to post here on the chance of get your notice.
  
Regards

Alan.tan

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="038006.html">[JDEV] Jabberoo available for Windows CE
</A></li>
	<LI>Next message: <A HREF="038004.html">[JDEV] Java Jabber Server.. The first steps
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#38003">[ date ]</a>
              <a href="thread.html#38003">[ thread ]</a>
              <a href="subject.html#38003">[ subject ]</a>
              <a href="author.html#38003">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://mail.jabber.org/mailman/listinfo/jdev">More information about the JDev
mailing list</a><br>
</body></html>
