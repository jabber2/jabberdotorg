<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [JDEV] Re: MUC problems...
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:jdev%40jabber.org?Subject=Re%3A%20%5BJDEV%5D%20Re%3A%20MUC%20problems...&In-Reply-To=%3C3EE4636D.33BCDEC4%40privat.utfors.se%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="075146.html">
   <LINK REL="Next"  HREF="075149.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[JDEV] Re: MUC problems...</H1>
    <B>Mats Bengtsson</B> 
    <A HREF="mailto:jdev%40jabber.org?Subject=Re%3A%20%5BJDEV%5D%20Re%3A%20MUC%20problems...&In-Reply-To=%3C3EE4636D.33BCDEC4%40privat.utfors.se%3E"
       TITLE="[JDEV] Re: MUC problems...">matben at privat.utfors.se
       </A><BR>
    <I>Mon Jun  9 05:37:34 CDT 2003</I>
    <P><UL>
        <LI>Previous message: <A HREF="075146.html">[JDEV] MUC problems...
</A></li>
        <LI>Next message: <A HREF="075149.html">[JDEV] Re: MUC problems...
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#75148">[ date ]</a>
              <a href="thread.html#75148">[ thread ]</a>
              <a href="subject.html#75148">[ subject ]</a>
              <a href="author.html#75148">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi David,

David Sutton wrote:
&gt;<i>   I will look into these, however I need a little more information from
</I>&gt;<i> you. Can you show me the full xml sent and received when you are
</I>&gt;<i> changing room options. By the sounds of things, your request to change
</I>&gt;<i> the options is being ignored. Also, try running the jabberd MUC is
</I>&gt;<i> connected to in debug mode (-D command line switch). There will be clues
</I>&gt;<i> in the output from there too.
</I>
There is perhaps a better alternative. Check out my app from SourceForge:
&quot;<A HREF="http://sourceforge.net/cvs/?group_id=68334&quot;,">http://sourceforge.net/cvs/?group_id=68334&quot;,</A> be sure Tcl/Tk (wish) is
installed on your Linux box (found on all major distros), 
cd coccinella/; ./Whiteboard.tcl, and pick the Jabber/Debug menu to get
xml IO. From there on it is self explanatory.

The debug output from jabberd doesn't tell me anything... (except that the
persistant room is killed after 5 minutes)

In any case here is the xml IO during room creation/configuration:
(Sorry for the size)

SEND: &lt;presence to='<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">fun at conference.sgi.se</A>/mats' id='1006'&gt;&lt;x xmlns='<A HREF="http://jabber.org/protocol/muc'/">http://jabber.org/protocol/muc'/</A>&gt;&lt;/presence&gt;
RECV: &lt;presence to='<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">matben at sgi.se</A>/coccinella' id='1006'
from='<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">fun at conference.sgi.se</A>/mats'&gt;&lt;x
xmlns='<A HREF="http://jabber.org/protocol/muc#user'">http://jabber.org/protocol/muc#user'</A>&gt;&lt;item jid='<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">matben at sgi.se</A>/coccinella'
affiliation='owner' role='moderator'/&gt;&lt;/x&gt;&lt;created xmlns='<A HREF="http://jabber.org/protocol/muc#owner'/">http://jabber.org/protocol/muc#owner'/</A>&gt;&lt;/presence&gt;
SEND: &lt;iq type='get' id='1007' to='<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">fun at conference.sgi.se</A>'&gt;&lt;query xmlns='<A HREF="http://jabber.org/protocol/muc#owner'/">http://jabber.org/protocol/muc#owner'/</A>&gt;&lt;/iq&gt;
RECV: &lt;message type='groupchat' to='<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">matben at sgi.se</A>/coccinella'
from='<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">fun at conference.sgi.se</A>'&gt;&lt;body&gt;This room supports the MUC
protocol.&lt;/body&gt;&lt;/message&gt;&lt;message type='groupchat'
to='<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">matben at sgi.se</A>/coccinella' from='<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">fun at conference.sgi.se</A>'&gt;&lt;body&gt;This room is
locked from entry until configuration is confirmed.&lt;/body&gt;&lt;/message&gt;&lt;message
type='groupchat' from='<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">fun at conference.sgi.se</A>'
to='<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">matben at sgi.se</A>/coccinella'&gt;&lt;body&gt;mats has become available&lt;/body&gt;&lt;/message&gt;
RECV: &lt;iq type='result' id='1007' to='<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">matben at sgi.se</A>/coccinella'
from='<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">fun at conference.sgi.se</A>'&gt;&lt;query
xmlns='<A HREF="http://jabber.org/protocol/muc#owner'">http://jabber.org/protocol/muc#owner'</A>&gt;&lt;x xmlns='jabber:x:data'
type='form'&gt;&lt;title&gt;Room configuration&lt;/title&gt;&lt;instructions&gt;Your room
&amp;quot;fun&amp;quot; has been created! The default configuration is as follows:
- No logging
- No moderation
- Up to 30 participants
- No password required
- No invitation required
- Room is not persistent
- Only admins may change the subject
To accept the default configuration, click OK. To select a different
configuration, please complete this form&lt;/instructions&gt;&lt;field type='hidden'
var='form'&gt;&lt;value&gt;config&lt;/value&gt;&lt;/field&gt;&lt;field type='text-single' label='Room
Title' var='title'&gt;&lt;value&gt;fun&lt;/value&gt;&lt;/field&gt;&lt;field type='text-multi'
label='Short description of room' var='description'&gt;&lt;value/&gt;&lt;/field&gt;&lt;field
type='fixed'&gt;&lt;value&gt;The following messages are sent to legacy
clients.&lt;/value&gt;&lt;/field&gt;&lt;field type='text-single' label='Message for user
leaving room' var='leave'&gt;&lt;value&gt;has left&lt;/value&gt;&lt;/field&gt;&lt;field
type='text-single' label='Message for user joining room' var='join'&gt;&lt;value&gt;has
become available&lt;/value&gt;&lt;/field&gt;&lt;field type='text-single' label='Message for
user renaming nickname in room' var='rename'&gt;&lt;value&gt;is now known
as&lt;/value&gt;&lt;/field&gt;&lt;field type='boolean' label='Allow users to change Subject?'
var='subject'&gt;&lt;value&gt;0&lt;/value&gt;&lt;/field&gt;&lt;field type='list-single' label='Maximum
number of Participants' var='participants'&gt;&lt;value&gt;30&lt;/value&gt;&lt;option
label='1'&gt;&lt;value&gt;1&lt;/value&gt;&lt;/option&gt;&lt;option
label='10'&gt;&lt;value&gt;10&lt;/value&gt;&lt;/option&gt;&lt;option
label='20'&gt;&lt;value&gt;20&lt;/value&gt;&lt;/option&gt;&lt;option
label='30'&gt;&lt;value&gt;30&lt;/value&gt;&lt;/option&gt;&lt;option
label='40'&gt;&lt;value&gt;40&lt;/value&gt;&lt;/option&gt;&lt;option
label='50'&gt;&lt;value&gt;50&lt;/value&gt;&lt;/option&gt;&lt;option
label='None'&gt;&lt;value&gt;0&lt;/value&gt;&lt;/option&gt;&lt;/field&gt;&lt;field type='boolean' label='Allow
users to query other users?' var='privacy'&gt;&lt;value&gt;1&lt;/value&gt;&lt;/field&gt;&lt;field
type='boolean' label='Make room publicly searchable?'
var='public'&gt;&lt;value&gt;1&lt;/value&gt;&lt;/field&gt;&lt;field type='boolean' label='Make room
persistant?' var='persistant'&gt;&lt;value&gt;0&lt;/value&gt;&lt;/field&gt;&lt;field type='boolean'
label='All clients considered legacy (shown messages)'
var='legacy'&gt;&lt;value&gt;1&lt;/value&gt;&lt;/field&gt;&lt;field type='boolean' label='Make room
moderated?' var='moderated'&gt;&lt;value&gt;0&lt;/value&gt;&lt;/field&gt;&lt;field
type='fixed'&gt;&lt;value&gt;By default, new users entering a moderated room are only
visitors&lt;/value&gt;&lt;/field&gt;&lt;field type='boolean' label='Default users as members?'
var='defaulttype'&gt;&lt;value&gt;0&lt;/value&gt;&lt;/field&gt;&lt;field type='boolean' label='Ban
private messages?' var='privmsg'&gt;&lt;value&gt;0&lt;/value&gt;&lt;/field&gt;&lt;field type='boolean'
label='Make room members only? (require invitation)'
var='invitation'&gt;&lt;value&gt;0&lt;/value&gt;&lt;/field&gt;&lt;field type='fixed'&gt;&lt;value&gt;By default,
only admins can send invites in an invite-only room&lt;/value&gt;&lt;/field&gt;&lt;field
type='boolean' label='Allow users to send invites?'
var='invites'&gt;&lt;value&gt;0&lt;/value&gt;&lt;/field&gt;&lt;field type='boolean' label='Make room
password protected?' var='password'&gt;&lt;value&gt;0&lt;/value&gt;&lt;/field&gt;&lt;field
type='fixed'&gt;&lt;value&gt;If a password is required to enter this room, you must
specify the password below.&lt;/value&gt;&lt;/field&gt;&lt;field type='text-private'
label='Password' var='secret'&gt;&lt;value/&gt;&lt;/field&gt;&lt;field type='list-single'
label='Who may discover Real JIDs' var='whois'&gt;&lt;value&gt;admins&lt;/value&gt;&lt;option
label='Room Owner and Admins Only'&gt;&lt;value&gt;admins&lt;/value&gt;&lt;/option&gt;&lt;option
label='Anyone'&gt;&lt;value&gt;anyone&lt;/value&gt;&lt;/option&gt;&lt;/field&gt;&lt;field type='boolean'
label='Enable logging?' var='logging'&gt;&lt;value&gt;0&lt;/value&gt;&lt;/field&gt;&lt;field
type='list-single' label='Logfile format'
var='logformat'&gt;&lt;value&gt;text&lt;/value&gt;&lt;option
label='XML'&gt;&lt;value&gt;xml&lt;/value&gt;&lt;/option&gt;&lt;option
label='XHTML'&gt;&lt;value&gt;xhtml&lt;/value&gt;&lt;/option&gt;&lt;option label='Plain Text'&gt;&lt;value&gt;text&lt;/value&gt;&lt;/option&gt;&lt;/field&gt;&lt;/x&gt;&lt;/query&gt;&lt;/iq&gt;
SEND: &lt;iq type='set' id='1008' to='<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">fun at conference.sgi.se</A>'&gt;&lt;query
xmlns='<A HREF="http://jabber.org/protocol/muc#owner'">http://jabber.org/protocol/muc#owner'</A>&gt;&lt;x xmlns='jabber:x:data'
type='form'&gt;&lt;x xmlns='jabber:x:data' type='submit'&gt;&lt;field var='description'&gt;&lt;value&gt;
&lt;/value&gt;&lt;/field&gt;&lt;field var='moderated'&gt;&lt;value&gt;0&lt;/value&gt;&lt;/field&gt;&lt;field
var='leave'&gt;&lt;value&gt;has left&lt;/value&gt;&lt;/field&gt;&lt;field
var='privacy'&gt;&lt;value&gt;1&lt;/value&gt;&lt;/field&gt;&lt;field
var='logging'&gt;&lt;value&gt;0&lt;/value&gt;&lt;/field&gt;&lt;field
var='defaulttype'&gt;&lt;value&gt;0&lt;/value&gt;&lt;/field&gt;&lt;field var='rename'&gt;&lt;value&gt;is now
known as&lt;/value&gt;&lt;/field&gt;&lt;field var='title'&gt;&lt;value&gt;Fun Room&lt;/value&gt;&lt;/field&gt;&lt;field
var='logformat'&gt;&lt;value&gt;text&lt;/value&gt;&lt;/field&gt;&lt;field
var='password'&gt;&lt;value&gt;0&lt;/value&gt;&lt;/field&gt;&lt;field
var='invitation'&gt;&lt;value&gt;0&lt;/value&gt;&lt;/field&gt;&lt;field
var='persistant'&gt;&lt;value&gt;1&lt;/value&gt;&lt;/field&gt;&lt;field
var='legacy'&gt;&lt;value&gt;1&lt;/value&gt;&lt;/field&gt;&lt;field
var='public'&gt;&lt;value&gt;1&lt;/value&gt;&lt;/field&gt;&lt;field
var='privmsg'&gt;&lt;value&gt;0&lt;/value&gt;&lt;/field&gt;&lt;field var='join'&gt;&lt;value&gt;has become
available&lt;/value&gt;&lt;/field&gt;&lt;field var='subject'&gt;&lt;value&gt;0&lt;/value&gt;&lt;/field&gt;&lt;field
var='whois'&gt;&lt;value&gt;admins&lt;/value&gt;&lt;/field&gt;&lt;field
var='invites'&gt;&lt;value&gt;0&lt;/value&gt;&lt;/field&gt;&lt;field var='participants'&gt;&lt;value&gt;30&lt;/value&gt;&lt;/field&gt;&lt;/x&gt;&lt;/x&gt;&lt;/query&gt;&lt;/iq&gt;
RECV: &lt;message type='groupchat' to='<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">matben at sgi.se</A>/coccinella'
from='<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">fun at conference.sgi.se</A>'&gt;&lt;body&gt;Configuration confirmed: This room is now unlocked.&lt;/body&gt;&lt;/message&gt;
RECV: &lt;iq type='result' id='1008' to='<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">matben at sgi.se</A>/coccinella' from='<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">fun at conference.sgi.se</A>'/&gt;

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="075146.html">[JDEV] MUC problems...
</A></li>
	<LI>Next message: <A HREF="075149.html">[JDEV] Re: MUC problems...
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#75148">[ date ]</a>
              <a href="thread.html#75148">[ thread ]</a>
              <a href="subject.html#75148">[ subject ]</a>
              <a href="author.html#75148">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://mail.jabber.org/mailman/listinfo/jdev">More information about the JDev
mailing list</a><br>
</body></html>
