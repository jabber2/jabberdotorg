<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [JDEV] MORE EXAMPLES! - FW: [jadmin] Complex DTD=2 SQL 
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:jdev%40jabber.org?Subject=%5BJDEV%5D%20MORE%20EXAMPLES%21%20-%20FW%3A%20%5Bjadmin%5D%20Complex%20DTD%3D2%20SQL%20&In-Reply-To=DIEGLIEHCLHOKCNDPCAPIELJCKAA.wanchan%40fibertel.com.ar">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="016897.html">
   <LINK REL="Next"  HREF="016905.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[JDEV] MORE EXAMPLES! - FW: [jadmin] Complex DTD=2 SQL </H1>
    <B>Bernino Lind</B> 
    <A HREF="mailto:jdev%40jabber.org?Subject=%5BJDEV%5D%20MORE%20EXAMPLES%21%20-%20FW%3A%20%5Bjadmin%5D%20Complex%20DTD%3D2%20SQL%20&In-Reply-To=DIEGLIEHCLHOKCNDPCAPIELJCKAA.wanchan%40fibertel.com.ar"
       TITLE="[JDEV] MORE EXAMPLES! - FW: [jadmin] Complex DTD=2 SQL ">lind at hlgroup.dk
       </A><BR>
    <I>Thu Jun 26 13:07:29 CDT 2003</I>
    <P><UL>
        <LI>Previous message: <A HREF="016897.html">[JDEV] MORE EXAMPLES! - FW: [jadmin] Complex DTD=2 SQL 
</A></li>
        <LI>Next message: <A HREF="016905.html">[JDEV] JEPs and Jabber Adoption
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16902">[ date ]</a>
              <a href="thread.html#16902">[ thread ]</a>
              <a href="subject.html#16902">[ subject ]</a>
              <a href="author.html#16902">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Dear Wan et. al.

I have previously mailed an example to jadmin list.

I do not mind setting it up nicer, html'ing it and committing it to
jabber.org free for use - but I do not have access to this.

Our company is programming a set of games in flash which uses sockets,
and sice flash is oop xml is perfect for the job. Falsh has a built in
xml to object interpreter - nice.

So next is to expand jabber server to give access to whatever game data
we need, and it is in this context I can give you the examples.

I will mail you one personally.

Best regards, Bernino

-----Original Message-----
From: <A HREF="http://mail.jabber.org/mailman/listinfo/jdev">jadmin-admin at jabber.org</A> [mailto:<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">jadmin-admin at jabber.org</A>] On Behalf
Of Wan Chan Kein
Sent: Friday, June 27, 2003 1:43 AM
To: <A HREF="http://mail.jabber.org/mailman/listinfo/jdev">jdev at jabber.org</A>
Cc: <A HREF="http://mail.jabber.org/mailman/listinfo/jdev">Jadmin at Jabber.</A> Org
Subject: RE: [JDEV] MORE EXAMPLES! - FW: [jadmin] Complex DTD=2 SQL 


Dear Berlino,
Maybe its true what you say .. but why can you how us how you do it ..
and help other pple ? thanks in advice Wan


-----Mensaje original-----
De: <A HREF="http://mail.jabber.org/mailman/listinfo/jdev">jdev-admin at jabber.org</A> [mailto:<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">jdev-admin at jabber.org</A>]En nombre de
Bernino Lind Enviado el: jueves, 26 de junio de 2003 11:10
Para: <A HREF="http://mail.jabber.org/mailman/listinfo/jdev">jadmin at jabber.org</A>; <A HREF="http://mail.jabber.org/mailman/listinfo/jdev">jdev at jabber.org</A>
Asunto: [JDEV] MORE EXAMPLES! - FW: [jadmin] Complex DTD=2 SQL


Dear Sirs,

A little criticism...

I have been flooded with emails to me directly with people asking for my
code in how I do what ever special twists with the Jabber server.

That should be a clear indication to the developers and the
documentation facilitators that a lot of documentation in examples is
necessary when it comes to simple standard manipulation of server side
jabber.

Here is an example of my point, being that like myself 3 weeks ago, I
did not know what the actual iq packets should look like...

Names have been foo'ed out.

Best regards, Bernino



-----Original Message-----
From: John Doe [mailto:<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">john at doe.gov</A>]
Sent: Thursday, June 26, 2003 5:51 PM
To: Bernino Lind
Subject: RE: [jadmin] Complex DTD=2 SQL


yes i check it out..
what do you send to jabber to make that query ?
hope you can explain it a little bit more.
Doe


-----Mensaje original-----
De: Bernino Lind [mailto:<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">lind at hlgroup.dk</A>]
Enviado el: mi&#233;rcoles, 25 de junio de 2003 15:46
Para: 'John Doe'
Asunto: RE: [jadmin] Complex DTD=2 SQL


Dear Doe,

Check out my example in a previous mail in the mail list.

Reply me if you cant find it, I shall dig in my sent folder...

Best, Bernino



-----Original Message-----
From: John Doe [mailto:<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">john at doe.gov</A>]
Sent: Thursday, June 26, 2003 3:32 AM
To: <A HREF="http://mail.jabber.org/mailman/listinfo/jdev">lind at hlgroup.dk</A>
Subject: RE: [jadmin] Complex DTD=2 SQL
Importance: High


hi bernino !
can i ask you something .. did you have to code something or just you
add the querydeff and then u can use it on jabber.. can u guide me on
this ? thanks ! Doe


-----Mensaje original-----
De: <A HREF="http://mail.jabber.org/mailman/listinfo/jdev">jadmin-admin at jabber.org</A> [mailto:<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">jadmin-admin at jabber.org</A>]En nombre de
Bernino Lind Enviado el: mi&#233;rcoles, 25 de junio de 2003 9:29
Para: <A HREF="http://mail.jabber.org/mailman/listinfo/jdev">jdev at jabber.org</A>; <A HREF="http://mail.jabber.org/mailman/listinfo/jdev">jadmin at jabber.org</A>
Asunto: [jadmin] Complex DTD=2 SQL


Dear all,

I need a bit of adwise.

I have a working simple dtd=&quot;2&quot; sql set/get pair with my own namespace.

I need to make these more sql queries more complex by adding more
variables in my select statements.

I can do this no problem with my update/insert with bindvar tag=... but
with select I hit problems, which I cant resolve...:

My select in xdb_sql.xml / queredef:

     &lt;querydef name=&quot;score-get&quot; dtd=&quot;2&quot; type=&quot;get&quot;
namespace=&quot;lind:score&quot;&gt;
        &lt;text&gt;SELECT * FROM score WHERE gameid = '$$gameid$$' AND
username = '$$user$$'&lt;/text&gt;
        &lt;user&gt;$$user$$&lt;/user&gt;
        &lt;bindvar tag=&quot;gameid&quot;&gt;$$gameid$$&lt;/bindvar&gt;
        &lt;top-result&gt;
          &lt;x xmlns='lind:score'/&gt;
        &lt;/top-result&gt;
          &lt;tuple-node&gt;&lt;item/&gt;&lt;/tuple-node&gt;
            &lt;bindcol tag=&quot;sid&quot; offset=&quot;0&quot;/&gt;
            &lt;bindcol tag=&quot;username&quot; offset=&quot;1&quot;/&gt;
            &lt;bindcol tag=&quot;gameid&quot; offset=&quot;2&quot;/&gt;
            &lt;bindcol tag=&quot;score&quot; offset=&quot;3&quot;/&gt;
            &lt;bindcol tag=&quot;date&quot; offset=&quot;4&quot;/&gt;
        &lt;/querydef&gt;
    &lt;/queries&gt;


What happens when I fire off my xml is that the type=&quot;set&quot; works just
fine, but firing off a gives a warning:

WARNING:  pg_atoi: zero-length string

Which I guess means that gameid is null, even though my iq packet is
good:

&lt;iq type=&quot;get&quot;&gt;
  &lt;query xmlns='lind:score'&gt;
    &lt;gameid&gt;123&lt;/gameid&gt;
  &lt;/query&gt;
&lt;/iq&gt;

And theres something in it:
jdb=# SELECT * FROM score WHERE gameid = '123' AND username =
'<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">psi at 192.168.0.166</A>';
 sid |     username      | gameid | score  |            date
-----+-------------------+--------+--------+----------------------------
  10 | <A HREF="http://mail.jabber.org/mailman/listinfo/jdev">psi at 192.168.0.166</A> |    123 | 234234 | 2003-06-17 15:42:41.611469
  12 | <A HREF="http://mail.jabber.org/mailman/listinfo/jdev">psi at 192.168.0.166</A> |    123 | 234234 | 2003-06-17 16:12:12.182216
  13 | <A HREF="http://mail.jabber.org/mailman/listinfo/jdev">psi at 192.168.0.166</A> |    123 | 234234 | 2003-06-25 15:31:02.446713
  14 | <A HREF="http://mail.jabber.org/mailman/listinfo/jdev">psi at 192.168.0.166</A> |    123 | 234234 | 2003-06-25 15:31:11.871944
  15 | <A HREF="http://mail.jabber.org/mailman/listinfo/jdev">psi at 192.168.0.166</A> |    123 | 234234 | 2003-06-25 16:02:51.309132
(5 rows)

When I change the querydef to have just say username - no problem, it
selects and outputs the way I want it...

Help,
Best Regards Bernino Lind


_______________________________________________
jadmin mailing list
<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">jadmin at jabber.org</A>
<A HREF="http://mailman.jabber.org/listinfo/jadmin">http://mailman.jabber.org/listinfo/jadmin</A>



_______________________________________________
jdev mailing list
<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">jdev at jabber.org</A>
<A HREF="http://mailman.jabber.org/listinfo/jdev">http://mailman.jabber.org/listinfo/jdev</A>

_______________________________________________
jadmin mailing list
<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">jadmin at jabber.org</A>
<A HREF="http://mailman.jabber.org/listinfo/jadmin">http://mailman.jabber.org/listinfo/jadmin</A>


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="016897.html">[JDEV] MORE EXAMPLES! - FW: [jadmin] Complex DTD=2 SQL 
</A></li>
	<LI>Next message: <A HREF="016905.html">[JDEV] JEPs and Jabber Adoption
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16902">[ date ]</a>
              <a href="thread.html#16902">[ thread ]</a>
              <a href="subject.html#16902">[ subject ]</a>
              <a href="author.html#16902">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://mail.jabber.org/mailman/listinfo/jdev">More information about the JDev
mailing list</a><br>
</body></html>
