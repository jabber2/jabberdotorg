<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [JDEV] Jabberd 1.4.2 - Memory Leak !
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:jdev%40jabber.org?Subject=Re%3A%20%5BJDEV%5D%20Jabberd%201.4.2%20-%20Memory%20Leak%20%21&In-Reply-To=%3C003501c3312f%24a8556ae0%2401000001%40bonk%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="075204.html">
   <LINK REL="Next"  HREF="075206.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[JDEV] Jabberd 1.4.2 - Memory Leak !</H1>
    <B>Bernino Lind</B> 
    <A HREF="mailto:jdev%40jabber.org?Subject=Re%3A%20%5BJDEV%5D%20Jabberd%201.4.2%20-%20Memory%20Leak%20%21&In-Reply-To=%3C003501c3312f%24a8556ae0%2401000001%40bonk%3E"
       TITLE="[JDEV] Jabberd 1.4.2 - Memory Leak !">lind at hlgroup.dk
       </A><BR>
    <I>Thu Jun 12 17:12:05 CDT 2003</I>
    <P><UL>
        <LI>Previous message: <A HREF="075204.html">[JDEV] Jabberd 1.4.2 More Memory Leaks !
</A></li>
        <LI>Next message: <A HREF="075206.html">[JDEV] Adding own namespace
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#75205">[ date ]</a>
              <a href="thread.html#75205">[ thread ]</a>
              <a href="subject.html#75205">[ subject ]</a>
              <a href="author.html#75205">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>The memory usage of jabber is a bit of pig, since all data is kept in
ram.

This is part of the architecture of jabber and makes things go faster.

Ram is cheap.

So, is this really a memory leak or is it just a consequence of the
design of jabber?

BTW an OS that crashes due to 100% RAM usage is a poor OS. I dont know
about linux but *BSD has kernel mechanisms to protect against such
foolish behaviour. An OS that crashes the process running wild in Ram is
very much sane, since the Ram needs to be used by very serious tasks as
well as userland apps, so:

Lets not panic...

best regards,
Bernino Lind




-----Original Message-----
From: <A HREF="http://mail.jabber.org/mailman/listinfo/jdev">jdev-admin at jabber.org</A> [mailto:<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">jdev-admin at jabber.org</A>] On Behalf Of
Asif Ahsan
Sent: Tuesday, May 06, 2003 12:43 AM
To: <A HREF="http://mail.jabber.org/mailman/listinfo/jdev">jdev at jabber.org</A>
Subject: [JDEV] Jabberd 1.4.2 - Memory Leak !


Hi All,

Denying registration from XDB FILE causes memory leak ! I am running 
Jabberd
1.4.2 with some modification to allow only certain users to the system. 
However
I've found out denying registration is causing accumulating memory leak

To validate me experiment, I've done some testing with original Jabber 
source code.
(1.4.2) without any modification elsewhere except xdb_file.c
To reproduce the bug please follow the instructions below (I've used 
RedHat 7.2).

1) Return NULL from function : xdb_file_full  and return r_ERR from 
xbd_file_phandler
(I've commented out the functions and added the returns)
2) Rebuild Jabberd
3) Run process viewer and see the memory usage of jabberd.
4) Now try to register for a new account - Make sure the account doesn't

exist.
5) Keep trying and you will see the memory utilization is going up
slowly.

It took me a lot (Few thousands) of  login attempt to consume 512 MB of 
my systems memory completely.
Then Jabberd crashed.

Anyone has any idea ! It is very critical for me since my setup will get

few thousand failed
login attempts everyday. Any help will be appreciated.


Thank you,
Asif Ahsan




_______________________________________________
jdev mailing list
<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">jdev at jabber.org</A>
<A HREF="http://mailman.jabber.org/listinfo/jdev">http://mailman.jabber.org/listinfo/jdev</A>


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="075204.html">[JDEV] Jabberd 1.4.2 More Memory Leaks !
</A></li>
	<LI>Next message: <A HREF="075206.html">[JDEV] Adding own namespace
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#75205">[ date ]</a>
              <a href="thread.html#75205">[ thread ]</a>
              <a href="subject.html#75205">[ subject ]</a>
              <a href="author.html#75205">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://mail.jabber.org/mailman/listinfo/jdev">More information about the JDev
mailing list</a><br>
</body></html>
