<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [jdev] Re: Pubsub notification problem
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:jdev%40jabber.org?Subject=Re%3A%20%5Bjdev%5D%20Re%3A%20Pubsub%20notification%20problem&In-Reply-To=%3CDCACEE81-6A98-4DB4-B585-B218E89ADA35%40lri.fr%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="083390.html">
   <LINK REL="Next"  HREF="083398.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[jdev] Re: Pubsub notification problem</H1>
    <B>Emmanuel Nars</B> 
    <A HREF="mailto:jdev%40jabber.org?Subject=Re%3A%20%5Bjdev%5D%20Re%3A%20Pubsub%20notification%20problem&In-Reply-To=%3CDCACEE81-6A98-4DB4-B585-B218E89ADA35%40lri.fr%3E"
       TITLE="[jdev] Re: Pubsub notification problem">nars at lri.fr
       </A><BR>
    <I>Tue Jun 13 04:55:23 CDT 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="083390.html">[jdev] SMS transport with Wengo provider
</A></li>
        <LI>Next message: <A HREF="083398.html">[jdev] search service - on which address?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#83394">[ date ]</a>
              <a href="thread.html#83394">[ thread ]</a>
              <a href="subject.html#83394">[ subject ]</a>
              <a href="author.html#83394">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>	Hello,
Thank you for your help.
This is how I create the node, confirure it and I publish an item.
The user who creates the node is papytest1


&lt;iq type='set' id='6D511895-8157-41B2-9D61-601030BE8207'&gt;
	&lt;session xmlns='urn:ietf:params:xml:ns:xmpp-session'/&gt;
&lt;/iq&gt;


&lt;iq type=&quot;result&quot; id=&quot;6D511895-8157-41B2-9D61-601030BE8207&quot;  
to=&quot;<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">papytest1 at icirca.lri.fr</A>/ibook&quot;&gt;
	&lt;session xmlns=&quot;urn:ietf:params:xml:ns:xmpp-session&quot;/&gt;
&lt;/iq&gt;


&lt;iq from='<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">papytest1 at icirca.lri.fr</A>/ibook'  
id='32BFB1AC-1981-41B1-8A5C-774AC39974D6' to='pubsub.icirca.lri.fr'  
type='set'&gt;
&lt;pubsub xmlns='<A HREF="http://jabber.org/protocol/pubsub'">http://jabber.org/protocol/pubsub'</A>&gt;
&lt;create node='/generic/test5' /&gt;
&lt;configure access='open'/&gt;
&lt;/pubsub&gt;
&lt;/iq&gt;


&lt;presence type=&quot;subscribe&quot; to=&quot;<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">papytest1 at icirca.lri.fr</A>&quot;  
from=&quot;pubsub.icirca.lri.fr&quot;/&gt;
&lt;iq type=&quot;result&quot; id=&quot;32BFB1AC-1981-41B1-8A5C-774AC39974D6&quot;  
from=&quot;pubsub.icirca.lri.fr&quot; to=&quot;<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">papytest1 at icirca.lri.fr</A>/ibook&quot;/&gt;


&lt;iq from='<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">papytest1 at icirca.lri.fr</A>/ibook' id='62E832E6- 
E6F5-4E50-91F4-6E9EB339FAF8' to='pubsub.icirca.lri.fr' type='set'&gt;
&lt;pubsub xmlns='<A HREF="http://jabber.org/protocol/pubsub#owner'">http://jabber.org/protocol/pubsub#owner'</A>&gt;
&lt;configure node='/generic/test5' &gt;
	&lt;x xmlns='jabber:x:data' type='submit'&gt;
	&lt;field var='pubsub#presence_based_delivery'&gt;
		&lt;value&gt;
		1
		&lt;/value&gt;
	&lt;/field&gt;
	&lt;field var='pubsub#deliver_payloads'&gt;
		&lt;value&gt;
		1
		&lt;/value&gt;
	&lt;/field&gt;
	&lt;field var='pubsub#persist_items'&gt;
		&lt;value&gt;
		1
		&lt;/value&gt;
	&lt;/field&gt;
	&lt;field var='pubsub#max_items'&gt;
		&lt;value&gt;
		10
		&lt;/value&gt;
	&lt;/field&gt;
	&lt;field var='pubsub#max_payload_size'&gt;
		&lt;value&gt;
		20000
		&lt;/value&gt;
	&lt;/field&gt;
	&lt;field var='pubsub#send_item_subscribe'&gt;
		&lt;value&gt;
		1
		&lt;/value&gt;
	&lt;/field&gt;
	&lt;/x&gt;
&lt;/configure&gt;
&lt;/pubsub&gt;
&lt;/iq&gt;


&lt;iq type=&quot;result&quot; id=&quot;62E832E6-E6F5-4E50-91F4-6E9EB339FAF8&quot;  
from=&quot;pubsub.icirca.lri.fr&quot; to=&quot;<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">papytest1 at icirca.lri.fr</A>/ibook&quot;/&gt;


&lt;iq from='<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">papytest1 at icirca.lri.fr</A>/ibook' id='B534FDE5-363B-4F48- 
AB50-46979BCD50AE' to='pubsub.icirca.lri.fr' type='set'&gt;
&lt;pubsub xmlns='<A HREF="http://jabber.org/protocol/pubsub'">http://jabber.org/protocol/pubsub'</A>&gt;
&lt;publish node='/generic/test5' jid='<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">papytest1 at icirca.lri.fr</A>/ibook' &gt;
&lt;item id='7D9704FA-54AD-4D7E-B680-BC406C86CBBC'&gt;
&lt;Test33&gt;
pouetpouet33
&lt;/Test33&gt;
&lt;/item&gt;
&lt;/publish&gt;
&lt;/pubsub&gt;
&lt;/iq&gt;


&lt;iq type=&quot;result&quot; id=&quot;B534FDE5-363B-4F48-AB50-46979BCD50AE&quot;  
from=&quot;pubsub.icirca.lri.fr&quot; to=&quot;<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">papytest1 at icirca.lri.fr</A>/ibook&quot;/&gt;



And now this is how the second user (papytest2) subscribes to the  
node. However, he never receive the notification of the published item.

&lt;iq from='<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">papytest2 at icirca.lri.fr</A>/ibook'  
id='2F1E6BB2-9D1B-4121-9889-80BCADD8C2FD' to='pubsub.icirca.lri.fr'  
type='set'&gt;
	&lt;pubsub xmlns='<A HREF="http://jabber.org/protocol/pubsub'">http://jabber.org/protocol/pubsub'</A>&gt;
		&lt;subscribe node='/generic/test5' jid='<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">papytest2 at icirca.lri.fr</A>/ 
ibook' /&gt;
	&lt;/pubsub&gt;
&lt;/iq&gt;
&lt;iq type=&quot;result&quot; id=&quot;2F1E6BB2-9D1B-4121-9889-80BCADD8C2FD&quot;  
from=&quot;pubsub.icirca.lri.fr&quot; to=&quot;<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">papytest2 at icirca.lri.fr</A>/ibook&quot;&gt;
	&lt;pubsub xmlns=&quot;<A HREF="http://jabber.org/protocol/pubsub&quot;">http://jabber.org/protocol/pubsub&quot;</A>&gt;
		&lt;entity node=&quot;/generic/test5&quot; jid=&quot;<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">papytest2 at icirca.lri.fr</A>/ibook&quot;  
affiliation=&quot;none&quot; subid=&quot;GOJEGfPXmkyQMkTt48Q2S10N7V3CTuemllBB8O03&quot;  
subscription=&quot;subscribed&quot;&gt;
		&lt;subscribe-options/&gt;
		&lt;/entity&gt;
	&lt;/pubsub&gt;
&lt;/iq&gt;
&lt;presence type=&quot;subscribe&quot; to=&quot;<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">papytest2 at icirca.lri.fr</A>&quot;  
from=&quot;pubsub.icirca.lri.fr&quot;/&gt;


if you want, you can uses the jabber icirca.lri.fr to make your tests.

Regards,
Emmanuel

Le 9 juin 06 &#224; 19:04, Gaston Dombiak a &#233;crit :
Hey Emmanuel,

How is your node configured? What's the subscription configuration of  
those
users that are not getting notifications? I just created a node,  
subscribed
a few users, published an item (with payload) and subscribers  
received the
corresponding notifications. It would also be of help if you can  
provide us
the XML stanzas sent by each user to 1) created the node, 2)  
configure it,
3) subscribe and 5) publish items. With that information I should be  
able to
reproduce what you are seeing.

BTW, there is a specialized Wildfire support forum where you can post  
any
Wildfire question. <A HREF="http://www.jivesoftware.org/community/forumindex.jspa">http://www.jivesoftware.org/community/forumindex.jspa</A>

Regards,

   -- Gato


&quot;Emmanuel Nars&quot; &lt;<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">nars at lri.fr</A>&gt; wrote in message
news:<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">AC3537FE-EF27-4C45-A8F4-D2C4DC9FE6A3 at lri.fr...</A>
Hi all,

I have a problem to use pubsub feature.
I have no problem to create a pubsub node, to subscribe to it or to
publish an item.
However, users who have subscribed to this node don't reveice
notification of published message.

As exemple, when a publish this message :
&lt;iq from='<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">papytest1 at icirca.lri.fr</A>/ibook' id='BA11D67A-059C-4E24-
B14C-28395AC397C7' to='pubsub.icirca.lri.fr' type='set'&gt;
&lt;pubsub xmlns='<A HREF="http://jabber.org/protocol/pubsub'">http://jabber.org/protocol/pubsub'</A>&gt;
&lt;publish node='/generic/test5' jid='<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">papytest1 at icirca.lri.fr</A>/ibook' &gt;
&lt;item id='F9B4FCA4-2A1F-4855-9967-B2DF243A7535'&gt;
&lt;Test&gt;
foo
&lt;/Test&gt;
&lt;/item&gt;
&lt;/publish&gt;
&lt;/pubsub&gt;
&lt;/iq&gt;


The wildfire jabber server sends:
&lt;iq type=&quot;result&quot; id=&quot;BA11D67A-059C-4E24-B14C-28395AC397C7&quot;
from=&quot;pubsub.icirca.lri.fr&quot; to=&quot;<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">papytest1 at icirca.lri.fr</A>/ibook&quot;/&gt;

But the users who have subscribed to the node /generic/test5 doesn't
recieve any notificaion.
Do you have any id&#233;e ?

Thanks,
Emmanuel





</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="083390.html">[jdev] SMS transport with Wengo provider
</A></li>
	<LI>Next message: <A HREF="083398.html">[jdev] search service - on which address?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#83394">[ date ]</a>
              <a href="thread.html#83394">[ thread ]</a>
              <a href="subject.html#83394">[ subject ]</a>
              <a href="author.html#83394">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://mail.jabber.org/mailman/listinfo/jdev">More information about the JDev
mailing list</a><br>
</body></html>
