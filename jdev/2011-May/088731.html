<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [jdev] Duplicate registration of external component - expected	according to XEP-0114?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:jdev%40jabber.org?Subject=Re%3A%20%5Bjdev%5D%20Duplicate%20registration%20of%20external%20component%20-%20expected%0A%09according%20to%20XEP-0114%3F&In-Reply-To=%3C556863B9-4AD0-409C-8678-70DC543B3306%40greywallsoftware.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   
   <LINK REL="Next"  HREF="088871.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[jdev] Duplicate registration of external component - expected	according to XEP-0114?</H1>
    <B>Daniel Dormont</B> 
    <A HREF="mailto:jdev%40jabber.org?Subject=Re%3A%20%5Bjdev%5D%20Duplicate%20registration%20of%20external%20component%20-%20expected%0A%09according%20to%20XEP-0114%3F&In-Reply-To=%3C556863B9-4AD0-409C-8678-70DC543B3306%40greywallsoftware.com%3E"
       TITLE="[jdev] Duplicate registration of external component - expected	according to XEP-0114?">dan at greywallsoftware.com
       </A><BR>
    <I>Mon May  2 22:55:16 UTC 2011</I>
    <P><UL>
        
        <LI>Next message: <A HREF="088871.html">No subject
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#88731">[ date ]</a>
              <a href="thread.html#88731">[ thread ]</a>
              <a href="subject.html#88731">[ subject ]</a>
              <a href="author.html#88731">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi folks, I'm a bit new to this world and developing my first applications using XMPP external components according to XEP-0114. I'm using Whack to develop the components themselves and Ejabberd as my server. I'm not looking for specific help using either of those technologies, rather trying to understand if the behavior I'm seeing is expected and if not, which side the problem is on. Here's the story:

1) Ejabberd allows multiple subdomains to be registered as external components using a single port and secret key.
2) Whack allows a single &quot;component manager&quot; to handle multiple components using that single port and key.

So far, so good. However:

3) Ejabberd assumes after a successful handshake that the component in question should handle traffic to *all* permitted subdomains for that port, regardless of the &quot;to&quot; value sent in the &quot;stream:stream&quot; packet, and registers internal routes for all of them. But,
4) Whack creates a new connection for each component you wish to register, assuming it will receive traffic for only that component's subdomainh .

So, what ends up happening is that for each packet destined for any of the listed subdomains, Ejabberd picks one of the connected components at random. 

I'm hoping that one of these two pieces is doing something wrong, and I'd like to know which one so I can pursue it further. Or, if I'm making a bad assumption and it is expected that my components should be able to handle packets intended for each other, that would be good to know too :)

thanks,
Dan 
</PRE>



<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	
	<LI>Next message: <A HREF="088871.html">No subject
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#88731">[ date ]</a>
              <a href="thread.html#88731">[ thread ]</a>
              <a href="subject.html#88731">[ subject ]</a>
              <a href="author.html#88731">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://mail.jabber.org/mailman/listinfo/jdev">More information about the JDev
mailing list</a><br>
</body></html>
