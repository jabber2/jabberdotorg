<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [JDEV] Avatar dimensions &amp; disconnect detail
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:jdev%40jabber.org?Subject=%5BJDEV%5D%20Avatar%20dimensions%20%26%20disconnect%20detail&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="009368.html">
   <LINK REL="Next"  HREF="009365.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[JDEV] Avatar dimensions &amp; disconnect detail</H1>
    <B>Jens Alfke</B> 
    <A HREF="mailto:jdev%40jabber.org?Subject=%5BJDEV%5D%20Avatar%20dimensions%20%26%20disconnect%20detail&In-Reply-To="
       TITLE="[JDEV] Avatar dimensions &amp; disconnect detail">jens at mac.com
       </A><BR>
    <I>Fri Sep  7 16:35:44 CDT 2001</I>
    <P><UL>
        <LI>Previous message: <A HREF="009368.html">[JDEV] Re: Jabber + Google = Joogle + Joogle Agent
</A></li>
        <LI>Next message: <A HREF="009365.html">[JDEV] Jabber DevZone News - S2S Fixed
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9366">[ date ]</a>
              <a href="thread.html#9366">[ thread ]</a>
              <a href="subject.html#9366">[ subject ]</a>
              <a href="author.html#9366">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Two more issues that have come up in the course of my implementing the 
current spec.

(1) The hardcoded 48x48 dimensions. In my client the original picture of 
the user is 64x64 (the native resolution of the photos the OS X Mail app 
uses.) When I scale this down to 48x48 to send over Jabber and then 
display it on the receiving end at 32x32 (the native resolution my 
client uses), it gets a really ugly case of the jaggies. (Yes, even with 
bicubic scaling.) The JPEG compression isn't the issue; I tried it 
uncompressed and the results were just as bad.
My current thinking is that maybe we should not require exact dimensions 
but let each client send its preferred size (subject to the 8k-of-data 
constraint). The receiver can then scale the image if necessary. We can 
still recommend 48x48 as the preferred dimensions if the client doesn't 
have any other constraints (i.e. if it's shrinking down a much larger 
photo.)
Or we could have some scheme for providing multiple representations of 
different dimensions, but this gets a lot more complex.

(2) There's a small glitch with the current proposal, and it's partly my 
fault. When a client disconnects, its watchers get a &lt;presence 
type='unavailable'&gt; element generated by the Jabber server with a 
message of &quot;Disconnected&quot;. This obviously doesn't contain any 
jabber:x:avatar extension, so according to the current protocol it will 
cause watchers to clear the current cached buddy icon. Then they end up 
having to fetch it again the next time that person comes online. The 
best way around this, I think, is to ignore a missing jabber:x:avatar in 
a presence element whose type is 'unavailable'.

&#8212;Jens
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: text/enriched
Size: 1804 bytes
Desc: not available
Url : <A HREF="https://www.jabber.org/jdev/attachments/20010907/3bad06b2/attachment.bin">https://www.jabber.org/jdev/attachments/20010907/3bad06b2/attachment.bin</A> 
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="009368.html">[JDEV] Re: Jabber + Google = Joogle + Joogle Agent
</A></li>
	<LI>Next message: <A HREF="009365.html">[JDEV] Jabber DevZone News - S2S Fixed
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9366">[ date ]</a>
              <a href="thread.html#9366">[ thread ]</a>
              <a href="subject.html#9366">[ subject ]</a>
              <a href="author.html#9366">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://mail.jabber.org/mailman/listinfo/jdev">More information about the JDev
mailing list</a><br>
</body></html>
