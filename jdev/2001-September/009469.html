<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> Thanks DJ!   -  RE: [JDEV] Some help for a Newbie?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:jdev%40jabber.org?Subject=Thanks%20DJ%21%20%20%20-%20%20RE%3A%20%5BJDEV%5D%20Some%20help%20for%20a%20Newbie%3F&In-Reply-To=3A3F0FADD8110C40861DAC702E4EF1560266BD%40itserver.gis.lincolnparish.org">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="009466.html">
   <LINK REL="Next"  HREF="009467.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>Thanks DJ!   -  RE: [JDEV] Some help for a Newbie?</H1>
    <B>DJ Adams</B> 
    <A HREF="mailto:jdev%40jabber.org?Subject=Thanks%20DJ%21%20%20%20-%20%20RE%3A%20%5BJDEV%5D%20Some%20help%20for%20a%20Newbie%3F&In-Reply-To=3A3F0FADD8110C40861DAC702E4EF1560266BD%40itserver.gis.lincolnparish.org"
       TITLE="Thanks DJ!   -  RE: [JDEV] Some help for a Newbie?">dj.adams at pobox.com
       </A><BR>
    <I>Tue Sep 18 12:58:32 CDT 2001</I>
    <P><UL>
        <LI>Previous message: <A HREF="009466.html">Thanks DJ!   -  RE: [JDEV] Some help for a Newbie?
</A></li>
        <LI>Next message: <A HREF="009467.html">[JDEV] Jabber talk in Boulder, Colorado (2001-09-19)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9469">[ date ]</a>
              <a href="thread.html#9469">[ thread ]</a>
              <a href="subject.html#9469">[ subject ]</a>
              <a href="author.html#9469">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Tue, Sep 18, 2001 at 10:30:17AM -0500, Shane Breland wrote:

&gt;<i> Tue Sep 18 09:58:05 2001  io_select.c:339 io_main checking sockets
</I>...
&gt;<i> Tue Sep 18 09:58:05 2001  deliver.c:472 DELIVER 4:192.0.0.14 &lt;route
</I>&gt;<i> to='<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">breland at 192.0.0.14</A>/81931C8' from='<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">12 at c2s</A>/819B398'&gt;&lt;iq
</I>&gt;<i> id='jabberim:prefs3293' type='get'&gt;&lt;query
</I>&gt;<i> xmlns='jabber:iq:private'&gt;&lt;jabberIM
</I>&gt;<i> xmlns='jabberim:prefs'/&gt;&lt;/query&gt;&lt;/iq&gt;&lt;/route&gt;
</I>&gt;<i> Tue Sep 18 09:58:05 2001  deliver.c:344 delivering to instance 'sessions'
</I>&gt;<i> Tue Sep 18 09:58:05 2001  deliver.c:84 (8080488)incoming packet &lt;route
</I>&gt;<i> to='<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">breland at 192.0.0.14</A>/81931C8' from='<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">12 at c2s</A>/819B398'&gt;&lt;iq
</I>&gt;<i> id='jabberim:prefs3293' type='get'&gt;&lt;query
</I>&gt;<i> xmlns='jabber:iq:private'&gt;&lt;jabberIM
</I>&gt;<i> xmlns='jabberim:prefs'/&gt;&lt;/query&gt;&lt;/iq&gt;&lt;/route&gt;
</I>&gt;<i> Tue Sep 18 09:58:05 2001  users.c:147
</I>&gt;<i> js_user(<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">breland at 192.0.0.14</A>/81931C8,80EE980)
</I>&gt;<i> Tue Sep 18 09:58:05 2001  mtq 80EF2B0 entering from pth
</I>&gt;<i> Tue Sep 18 09:58:05 2001  mtq 80EF2B0 queue call 8197820
</I>&gt;<i> Tue Sep 18 09:58:05 2001  sessions.c:290 THREAD:SESSION:FROM received a
</I>&gt;<i> packet!
</I>&gt;<i> Tue Sep 18 09:58:05 2001  modules.c:124 mapi_call 1
</I>&gt;<i> Tue Sep 18 09:58:05 2001  modules.c:147 MAPI 81934D8
</I>&gt;<i> Tue Sep 18 09:58:05 2001  modules.c:147 MAPI 81934E8
</I>&gt;<i> Tue Sep 18 09:58:05 2001  modules.c:147 MAPI 8193508
</I>&gt;<i> Tue Sep 18 09:58:05 2001  modules.c:147 MAPI 8193530
</I>&gt;<i> Tue Sep 18 09:58:05 2001  modules.c:147 MAPI 8193540
</I>&gt;<i> Tue Sep 18 09:58:05 2001  modules.c:163 mapi_call returning unhandled
</I>&gt;<i> Tue Sep 18 09:58:05 2001  deliver.c:262
</I>&gt;<i> deliver(to[192.0.0.14],from[<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">breland at 192.0.0.14</A>/Work],type[4],packet[&lt;iq
</I>&gt;<i> id='jabberim:prefs3293' type='get' from='<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">breland at 192.0.0.14</A>/Work'
</I>&gt;<i> to='192.0.0.14'&gt;&lt;query xmlns='jabber:iq:private'&gt;&lt;jabberIM
</I>&gt;<i> xmlns='jabberim:prefs'/&gt;&lt;/query&gt;&lt;/iq&gt;])
</I>
Aha, this is very interesting

The IQ-get comes in, and the JSM modules are called in turn (the &quot;MAPI&quot;
lines). However, note the &quot;returning unhandled&quot; - no module was found
that is willing to handle the query in the iq:private namespace.

Normally, the mod_xml module should kick in here to handle the 
request, but it doesn't. I note from your jabber.xml below that you
do have the mod_xml module specified in the load of JSM, so I'm 
a little surprised. This jabber.xml file matches what's in use with
the currently running jabberd? Do you still have the first hundred
or so lines of output from the debug log? This will show us if the
mod_xml module was loaded correctly.

In any case, it seems quite evident from this section of the
debug that the query isn't being handled by the JSM and so is being
re-tried by the delivery mechanism with the JID of the server itself.

This is what I meant in my previous post about the oddness of 
the reply having a from attribute:


SENT: &lt;iq id=&quot;jabberim:prefs5009&quot; type=&quot;get&quot;&gt;&lt;query
xmlns=&quot;jabber:iq:private&quot;&gt;&lt;jabberIM xmlns=&quot;jabberim:prefs&quot;/&gt;&lt;/query&gt;&lt;/iq&gt;
RECV: &lt;iq id='jabberim:prefs5009' type='error' from='192.0.0.14'
to='<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">breland at 192.0.0.14</A>/Work'&gt;&lt;query xmlns='jabber:iq:private'&gt;&lt;jabberIM
xmlns='jabberim:prefs'/&gt;&lt;/query&gt;&lt;error code='404'&gt;Not Found&lt;/error&gt;&lt;/iq&gt;

Of course, this isn't going to work either, so you get the error.

So, there doesn't seem to be a mod_xml module ready to handle the
query. Can you point to the debug log to show me that mod_xml is
loading?

Secondly, what version of the server are you running? I noticed some
'odd' lines in the debug log ... io_select.c lines, for example...

Cheers
dj


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="009466.html">Thanks DJ!   -  RE: [JDEV] Some help for a Newbie?
</A></li>
	<LI>Next message: <A HREF="009467.html">[JDEV] Jabber talk in Boulder, Colorado (2001-09-19)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9469">[ date ]</a>
              <a href="thread.html#9469">[ thread ]</a>
              <a href="subject.html#9469">[ subject ]</a>
              <a href="author.html#9469">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://mail.jabber.org/mailman/listinfo/jdev">More information about the JDev
mailing list</a><br>
</body></html>
