<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [JDEV] Avatar images are per-resource
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:jdev%40jabber.org?Subject=Re%3A%20%5BJDEV%5D%20Avatar%20images%20are%20per-resource&In-Reply-To=%3C999718458.848.11.camel%40temas%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="067894.html">
   <LINK REL="Next"  HREF="067902.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[JDEV] Avatar images are per-resource</H1>
    <B>temas</B> 
    <A HREF="mailto:jdev%40jabber.org?Subject=Re%3A%20%5BJDEV%5D%20Avatar%20images%20are%20per-resource&In-Reply-To=%3C999718458.848.11.camel%40temas%3E"
       TITLE="[JDEV] Avatar images are per-resource">temas at box5.net
       </A><BR>
    <I>Wed Sep  5 14:34:17 CDT 2001</I>
    <P><UL>
        <LI>Previous message: <A HREF="067894.html">[JDEV] Avatar images are per-resource
</A></li>
        <LI>Next message: <A HREF="067902.html">[JDEV] Avatar images are per-resource
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#67897">[ date ]</a>
              <a href="thread.html#67897">[ thread ]</a>
              <a href="subject.html#67897">[ subject ]</a>
              <a href="author.html#67897">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Wed, 2001-09-05 at 12:05, Jens Alfke wrote:
&gt;<i> One more note on the avatar spec. I realized while in the shower this 
</I>&gt;<i> morning that it's important that the image be stored in the public XML 
</I>&gt;<i> associated with the resource, not in the XML for the user itself. 
</I>&gt;<i> Otherwise multiple logins trying to set different images will stomp over 
</I>&gt;<i> the image stored on the server.
</I>&gt;<i> 
</I>&gt;<i> I was unsure at the time (this was about while I was lathering my 
</I>&gt;<i> armpits) whether the public-XML thingy supported per-resource storage, 
</I>&gt;<i> but on looking at the very vague description 
</I>&gt;<i> &lt;<A HREF="http://docs.jabber.org/draft-proto/html/xml.html">http://docs.jabber.org/draft-proto/html/xml.html</A>&gt; it appears that it 
</I>&gt;<i> does. The trick is to include your resource when sending the IQ 'set' to 
</I>&gt;<i> yourself.
</I>&gt;<i> 
</I>&gt;<i> So to use an example, the provider of the image would store it on the 
</I>&gt;<i> server as follows:
</I>&gt;<i> 
</I>&gt;<i> &lt;iq id=&quot;1&quot; type=&quot;set&quot; to=&quot;<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">me at myserver</A>/myresource&quot;&gt;
</I>&gt;<i> 	&lt;query xmlns=&quot;jabber-storage:iq:avatar&gt;
</I>&gt;<i> 		&lt;data mimetype=&quot;image/jpeg&quot;&gt; ...Base64 image data goes here.. &lt;/data&gt;
</I>&gt;<i> 	&lt;/query&gt;
</I>&gt;<i> &lt;/iq&gt;
</I>&gt;<i> 
</I>&gt;<i> The important thing to note is that the &quot;to&quot; address contains the 
</I>&gt;<i> sender's resource. The requester would also need to include the resource 
</I>&gt;<i> (as is already shown in the current avatar proposal.)
</I>&gt;<i> 
</I>&gt;<i> An additional thing I've done in the example is include a &quot;mimetype&quot; 
</I>&gt;<i> attribute on the &lt;data&gt; element. I know I said earlier that the common 
</I>&gt;<i> graphics formats are self-describing, but I think it's still safer to 
</I>&gt;<i> tag the data. Not all OS's may have support for auto-detecting the image 
</I>&gt;<i> type, and future image types may be harder to detect, and also this way 
</I>&gt;<i> we could in the future include multiple &lt;data&gt; elements with different 
</I>&gt;<i> MIME types and let the receiver easily pick out the best one.
</I>&gt;<i> 
</I>&gt;<i> --Jens
</I>&gt;<i> 
</I>
Good thoughts, have you tested at all aginast the server?  I might give
it a try later today after I work on file transfer for gabber some.  If
no one minds about these changes I'll go ahead and update the proposed
spec on core.  The storage namesapce works for me too.

--temas



-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 232 bytes
Desc: not available
URL: &lt;<A HREF="https://www.jabber.org/jdev/attachments/20010905/3c4f8a65/attachment-0002.pgp">https://www.jabber.org/jdev/attachments/20010905/3c4f8a65/attachment-0002.pgp</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="067894.html">[JDEV] Avatar images are per-resource
</A></li>
	<LI>Next message: <A HREF="067902.html">[JDEV] Avatar images are per-resource
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#67897">[ date ]</a>
              <a href="thread.html#67897">[ thread ]</a>
              <a href="subject.html#67897">[ subject ]</a>
              <a href="author.html#67897">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://mail.jabber.org/mailman/listinfo/jdev">More information about the JDev
mailing list</a><br>
</body></html>
