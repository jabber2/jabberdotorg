<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [JDEV] 0.7pre3 Bug report
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:jdev%40jabber.org?Subject=Re%3A%20%5BJDEV%5D%200.7pre3%20Bug%20report&In-Reply-To=%3C199911041823.MAA25258%40ductape.net%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="031357.html">
   <LINK REL="Next"  HREF="031359.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[JDEV] 0.7pre3 Bug report</H1>
    <B>Thomas Charron</B> 
    <A HREF="mailto:jdev%40jabber.org?Subject=Re%3A%20%5BJDEV%5D%200.7pre3%20Bug%20report&In-Reply-To=%3C199911041823.MAA25258%40ductape.net%3E"
       TITLE="[JDEV] 0.7pre3 Bug report">tcharron at ductape.net
       </A><BR>
    <I>Thu Nov  4 12:23:59 CST 1999</I>
    <P><UL>
        <LI>Previous message: <A HREF="031357.html">[JDEV] 0.7 pre3 available
</A></li>
        <LI>Next message: <A HREF="031359.html">[JDEV] 0.7pre4 and timetable for full release
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#31358">[ date ]</a>
              <a href="thread.html#31358">[ thread ]</a>
              <a href="subject.html#31358">[ subject ]</a>
              <a href="author.html#31358">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>  No one's on the bugs list, so I'll send it here.. ;-P

  I've also confirmed this happening in the exact same manner when close nicely 
with a &lt;/stream:stream&gt;

  While playing with XML::Stream, I noticed a very reproducable bug in 
0.7pre3.  If you connect, send a stream, then close the port 4 times, after the 
fourth time, jserver segfaults.  Here is a snippet from teh end where it cores:

DEBUG: sending packet to sessionURNuts: _tstream_run: read event
ERROR: tstream, error reading from socketDEBUG: SVC_BASIC: cleanup
URNuts: _tstream_run: read eventERROR: tstream, error reading from socket
DEBUG: cleaning up transports db entriesDEBUG: _xmlstream_cleanup
DEBUG: tstream_cleanupSegmentation fault (core dumped)


  Here is the output of gdb on the core, with a backtrace:

[<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">tcha at honda</A> tcha]$ gdb jserver -c coreGNU gdb 4.18
Copyright 1998 Free Software Foundation, Inc.
GDB is free software, covered by the GNU General Public License, and you are
welcome to change it and/or distribute copies of it under certain conditions.
Type &quot;show copying&quot; to see the conditions.
There is absolutely no warranty for GDB.  Type &quot;show warranty&quot; for details.
This GDB was configured as &quot;i386-redhat-linux&quot;...
Core was generated by `jserver'.
Program terminated with signal 11, Segmentation fault.
Reading symbols from /usr/local/lib/libjabber.so.0...done.
Reading symbols from /usr/local/lib/libetherx.so.0...done.
Reading symbols from /usr/local/lib/libpth.so.11...done.
Reading symbols from /lib/libdl.so.2...done.
Reading symbols from /lib/libc.so.6...done.
Reading symbols from /lib/libnsl.so.1...done.
Reading symbols from /lib/ld-linux.so.2...done.
Reading symbols from /lib/libnss_files.so.2...done.
Reading symbols from /usr/local/lib/jabber/svc_basic.so...done.
Reading symbols from /usr/local/lib/jabber/mod_basic.so...done.
#0  __libc_free (mem=0x1) at malloc.c:2941
2941    malloc.c: No such file or directory.(gdb) backtrace
#0  __libc_free (mem=0x1) at malloc.c:2941
#1  0x804a31d in resource_free (r=0x80b6c10) at resources.c:63
#2  0x804a7ee in session_end (s=0x80b6a98) at sessions.c:39
#3  0x400156bd in svc_basic_cleanup (arg=0x807fd28) at conn.c:98
#4  0x4004265d in __pth_cleanup_popall () from /usr/local/lib/libpth.so.11
#5  0x40041846 in pth_exit () from /usr/local/lib/libpth.so.11
#6  0x4001c97a in _tstream_main (arg=0x807fd28) at tstream.c:126
#7  0x400413ce in pth_spawn_trampoline () from /usr/local/lib/libpth.so.11
#8  0x0 in ?? ()(gdb)

--- 
Thomas Charron
&lt;&lt; Wanted: One decent sig &gt;&gt;
&lt;&lt; Preferably litle used  &gt;&gt;
&lt;&lt; and stored in garage.  ?&gt;&gt;


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="031357.html">[JDEV] 0.7 pre3 available
</A></li>
	<LI>Next message: <A HREF="031359.html">[JDEV] 0.7pre4 and timetable for full release
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#31358">[ date ]</a>
              <a href="thread.html#31358">[ thread ]</a>
              <a href="subject.html#31358">[ subject ]</a>
              <a href="author.html#31358">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://mail.jabber.org/mailman/listinfo/jdev">More information about the JDev
mailing list</a><br>
</body></html>
