<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [jdev] Messages to unsubscribed contacts
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:jdev%40jabber.org?Subject=Re%3A%20%5Bjdev%5D%20Messages%20to%20unsubscribed%20contacts&In-Reply-To=%3C1197158801.6289.9.camel%40wing%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="085425.html">
   <LINK REL="Next"  HREF="085427.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[jdev] Messages to unsubscribed contacts</H1>
    <B>Tomasz Sterna</B> 
    <A HREF="mailto:jdev%40jabber.org?Subject=Re%3A%20%5Bjdev%5D%20Messages%20to%20unsubscribed%20contacts&In-Reply-To=%3C1197158801.6289.9.camel%40wing%3E"
       TITLE="[jdev] Messages to unsubscribed contacts">tomek at xiaoka.com
       </A><BR>
    <I>Sat Dec  8 18:06:41 CST 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="085425.html">[jdev] Messages to unsubscribed contacts
</A></li>
        <LI>Next message: <A HREF="085427.html">[jdev] Messages to unsubscribed contacts
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#85426">[ date ]</a>
              <a href="thread.html#85426">[ thread ]</a>
              <a href="subject.html#85426">[ subject ]</a>
              <a href="author.html#85426">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On So, 2007-12-08 at 19:01 +0100, Robin Redeker wrote:
&gt;<i> User A sends a message to the bare JID of user B which is not subscribed.
</I>&gt;<i> User B answers to the full JID of user A.
</I>
IIRC this full-jid chat binding is discouraged and messages should
always be exchanged between bare JIDs.
If you want to hold to a specific conversation thread, use the &lt;thread/&gt;
item.


&gt;<i> First question: Is the full JID
</I>&gt;<i> of user B transmitted in that message? (I guess it is).
</I>
It sure is.

<A HREF="http://www.xmpp.org/internet-drafts/draft-saintandre-rfc3920bis-04.html#stanzas-attributes-from-c2s">http://www.xmpp.org/internet-drafts/draft-saintandre-rfc3920bis-04.html#stanzas-attributes-from-c2s</A>

9.1.2.1.  Client-to-Server Streams
1. When the server receives an XML stanza from a client and the stanza
does not include a 'from' attribute, the server MUST add a 'from'
attribute to the stanza, where the value of the 'from' attribute is the
full JID (&lt;<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">node at domain</A>/resource&gt;) determined by the server for the
connected resource that generated the stanza, or the bare JID
(&lt;<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">node at domain</A>&gt;) in the case of subscription-related presence stanzas;
[...]

&gt;<i> What if user B went offline?
</I>
Standard highest resource fallback, or offline storage if none found.


&gt;<i> Should messages to unsubscribed contacts generally go to the bare JID?
</I>
IIRC all messages should go to bare JID. Even in the case of mutual
subscription.

The rationale is, that it's up to receiving party to decide where it
wants to receive messages (via resource priority), not the sending party
(via resource used).


-- 
  /\_./o__ Tomasz Sterna
 (/^/(_^^'  Xiaoka.com
._.(_.)_  XMPP: <A HREF="http://mail.jabber.org/mailman/listinfo/jdev">smoku at xiaoka.com</A>


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="085425.html">[jdev] Messages to unsubscribed contacts
</A></li>
	<LI>Next message: <A HREF="085427.html">[jdev] Messages to unsubscribed contacts
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#85426">[ date ]</a>
              <a href="thread.html#85426">[ thread ]</a>
              <a href="subject.html#85426">[ subject ]</a>
              <a href="author.html#85426">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://mail.jabber.org/mailman/listinfo/jdev">More information about the JDev
mailing list</a><br>
</body></html>
