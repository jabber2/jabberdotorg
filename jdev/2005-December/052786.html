<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [jdev] IQ request response query
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:jdev%40jabber.org?Subject=Re%3A%20%5Bjdev%5D%20IQ%20request%20response%20query&In-Reply-To=%3Ca8f18ca30512062056g524d42aawf865b584837dfd8b%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="052785.html">
   <LINK REL="Next"  HREF="052787.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[jdev] IQ request response query</H1>
    <B>Vinod Panicker</B> 
    <A HREF="mailto:jdev%40jabber.org?Subject=Re%3A%20%5Bjdev%5D%20IQ%20request%20response%20query&In-Reply-To=%3Ca8f18ca30512062056g524d42aawf865b584837dfd8b%40mail.gmail.com%3E"
       TITLE="[jdev] IQ request response query">vinod.p at gmail.com
       </A><BR>
    <I>Tue Dec  6 22:56:15 CST 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="052785.html">[jdev] IQ request response query
</A></li>
        <LI>Next message: <A HREF="052787.html">[jdev] IQ request response query
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#52786">[ date ]</a>
              <a href="thread.html#52786">[ thread ]</a>
              <a href="subject.html#52786">[ subject ]</a>
              <a href="author.html#52786">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 12/7/05, Peter Saint-Andre &lt;<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">stpeter at jabber.org</A>&gt; wrote:
&gt;<i> Vinod Panicker wrote:
</I>&gt;<i> &gt; On 11/11/05, Vinod Panicker &lt;<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">vinod.p at gmail.com</A>&gt; wrote:
</I>&gt;<i> &gt;&gt; Sorry!  The stanza should have been like this -
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;   &lt;iq from='<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">juliet at example.com</A>/balcony' type='set' id='roster_4'&gt;
</I>&gt;<i> &gt;&gt;     &lt;query xmlns='jabber:iq:roster'&gt;
</I>&gt;<i> &gt;&gt;       &lt;item jid='<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">abc at example.com</A>' subscription='remove'/&gt;
</I>&gt;<i> &gt;&gt;       &lt;item jid='<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">def at example.com</A>' subscription='remove'/&gt;
</I>&gt;<i> &gt;&gt;       &lt;item jid='<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">ghi at example.com</A>' subscription='remove'/&gt;
</I>&gt;<i> &gt;&gt;     &lt;/query&gt;
</I>&gt;<i> &gt;&gt;   &lt;/iq&gt;
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; On 11/10/05, Jacek Konieczny &lt;<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">jajcus at jajcus.net</A>&gt; wrote:
</I>&gt;<i> &gt;&gt;&gt; On Thu, Nov 10, 2005 at 04:00:47PM +0530, Vinod Panicker wrote:
</I>&gt;<i> &gt;&gt;&gt;&gt; Consider this scenario -
</I>&gt;<i> &gt;&gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;&gt; Client sends IQ stanza for removing three roster items from the roster
</I>&gt;<i> &gt;&gt;&gt;&gt; of <A HREF="http://mail.jabber.org/mailman/listinfo/jdev">juliet at example.com</A> .
</I>&gt;<i> &gt;&gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;&gt;    &lt;iq from='<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">juliet at example.com</A>/balcony' type='set' id='roster_4'&gt;
</I>&gt;<i> &gt;&gt;&gt;&gt;      &lt;query xmlns='jabber:iq:roster'&gt;
</I>&gt;<i> &gt;&gt;&gt;&gt;        &lt;item jid='<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">abc at example.com</A>' subscription='remove'/&gt;
</I>&gt;<i> &gt;&gt;&gt;&gt;      &lt;/query&gt;
</I>&gt;<i> &gt;&gt;&gt;&gt;      &lt;query xmlns='jabber:iq:roster'&gt;
</I>&gt;<i> &gt;&gt;&gt;&gt;        &lt;item jid='<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">def at example.com</A>' subscription='remove'/&gt;
</I>&gt;<i> &gt;&gt;&gt;&gt;      &lt;/query&gt;
</I>&gt;<i> &gt;&gt;&gt;&gt;      &lt;query xmlns='jabber:iq:roster'&gt;
</I>&gt;<i> &gt;&gt;&gt;&gt;        &lt;item jid='<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">ghi at example.com</A>' subscription='remove'/&gt;
</I>&gt;<i> &gt;&gt;&gt;&gt;      &lt;/query&gt;
</I>&gt;<i> &gt;&gt;&gt;&gt;    &lt;/iq&gt;
</I>&gt;<i> &gt;&gt;&gt; This is not a legal XMPP stanza. &lt;iq/&gt; stanza may contain only _one_
</I>&gt;<i> &gt;&gt;&gt; payload element.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; No closure on this, so what I'm doing is sending separate error and
</I>&gt;<i> &gt; success stanzas to each of the items in the single iq stanza.
</I>&gt;<i>
</I>&gt;<i> What do you mean, no closure? Please provide exactly what you are
</I>&gt;<i> sending and receiving so we can critique it. Sending a separate roster
</I>&gt;<i> push for each item removed seems appropriate if you are sending multiple
</I>&gt;<i> removes in a single IQ set. However, sending multiple removes in a
</I>&gt;<i> single IQ set seems wrong (or at least misguided) to me. I thought the
</I>&gt;<i> spec prohibited including more than one &lt;item/&gt; when sending an IQ-set
</I>&gt;<i> to the server, but I can't find that in RFC 3921. What is the use case
</I>&gt;<i> for doing that? Perhaps we need to clean that up in rfc3921bis because I
</I>&gt;<i> think it's a bad idea.
</I>
Thanks for the response. Since the RFC is not expressly forbidding it
(and there are places where we do need to have multiple items in an iq
get, such as roster retrieval), I am assuming that a client MAY send
such a request.  Thats why I was looking at possible ways of handling
it.  Allowing something like this is definitely a bad idea.  And I'm
in favour of adding this in rfc3921bis.

Regards,
Vinod.

PS: This is the closure I was talking abt :)

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="052785.html">[jdev] IQ request response query
</A></li>
	<LI>Next message: <A HREF="052787.html">[jdev] IQ request response query
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#52786">[ date ]</a>
              <a href="thread.html#52786">[ thread ]</a>
              <a href="subject.html#52786">[ subject ]</a>
              <a href="author.html#52786">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://mail.jabber.org/mailman/listinfo/jdev">More information about the JDev
mailing list</a><br>
</body></html>
