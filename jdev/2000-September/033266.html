<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [JDEV] Yahoo transport and who's available
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:jdev%40jabber.org?Subject=Re%3A%20%5BJDEV%5D%20Yahoo%20transport%20and%20who%27s%20available&In-Reply-To=%3Cp04330101b5eb9eada50f%40%5B62.224.38.96%5D%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="033257.html">
   <LINK REL="Next"  HREF="033272.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[JDEV] Yahoo transport and who's available</H1>
    <B>Max Horn</B> 
    <A HREF="mailto:jdev%40jabber.org?Subject=Re%3A%20%5BJDEV%5D%20Yahoo%20transport%20and%20who%27s%20available&In-Reply-To=%3Cp04330101b5eb9eada50f%40%5B62.224.38.96%5D%3E"
       TITLE="[JDEV] Yahoo transport and who's available">max at quendi.de
       </A><BR>
    <I>Mon Sep 18 05:36:08 CDT 2000</I>
    <P><UL>
        <LI>Previous message: <A HREF="033257.html">[JDEV] Yahoo transport and who's available
</A></li>
        <LI>Next message: <A HREF="033272.html">[JDEV] groups in groups
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#33266">[ date ]</a>
              <a href="thread.html#33266">[ thread ]</a>
              <a href="subject.html#33266">[ subject ]</a>
              <a href="author.html#33266">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>At 2:54 Uhr -0400 16.09.2000, mallum wrote:
&gt;<i>Hi all;
</I>&gt;<i>
</I>&gt;<i>Im having problems getting the yahoo transport to tell me who's available.
</I>&gt;<i>(Im using Perl with the Net::Jabber module) and the 1.0 Jabba Server release.
</I>&gt;<i>
</I>&gt;<i>I can register the Yahoo transport fine. I then send an available presence to
</I>&gt;<i>the returned ' yahoo.server.org/registered?username=XXXXXX&amp;pass=XXXXXXX '
</I>&gt;<i>JID, which appears in my roster.
</I>
This is wrong (unless I misunderstand you). The Yahoo transport sends 
a &lt;presence type=&quot;subscribe&quot;/&gt; to you - i.e. a presence subscription 
request. You then have to send back a &lt;presence type=&quot;subscribed&quot;/&gt; 
(notice the 'd'!) to it. Then it should work.


&gt;<i>I can the send and recieve messages with
</I>&gt;<i>yahoo. However I never seem to reieve presence messages from any subscribed
</I>&gt;<i>(both ways) clients, so I cannot tell who is and who's not online.
</I>
That is propably because Yahoo-T is not subscribed to you, thus 
doesn't know you are &quot;online&quot; - and thus doesn't send online/offline 
etc. events to you.


&lt;snip&gt;

&gt;<i>  yahoo.server.org/registered?username=XXXXXX&amp;pass=XXXXXXX
</I>&gt;<i>  yahoo.server.org
</I>&gt;<i>  <A HREF="http://mail.jabber.org/mailman/listinfo/jdev">mallum at yahoo.server.org</A>
</I>&gt;<i>
</I>&gt;<i>(where mallum is my login name for the normal jabber transport)
</I>
Hm. The first entry is 'normal' for transports. It's used to allow 
auto-login to your Yahoo account once you send presence to this 
roster item (that is, usually on login)


&gt;<i>Also how does should my code know that a roster entrie is another transpoort
</I>&gt;<i>and needs a prensence sending to it ?
</I>
1) The only way to find out if a roster item represents an agent is 
to match it to the list of agents returned from the server.

2) You do not need to send presence to it, though. Your client has to 
send a &lt;presence/&gt; tag (it can have a type/status/show flag etc., but 
*no* 'to' field)  once at the start if it wants to get presence from 
others (see the JPG for more info on this).
In general, sending a presence w/o a 'to' field means that everyone 
who is subscribed to you gets this presence from you - no need to 
iterate over your roster and send it to each subscriber manually.



HTH,

Max/Fingolfin
-- 
-----------------------------------------------
Max Horn
C/C++/Internet Development

email: &lt;mailto:<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">max at quendi.de</A>&gt;
   web: &lt;<A HREF="http://www.quendi.de">http://www.quendi.de</A>&gt;
phone: (+49) 2621-188947


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="033257.html">[JDEV] Yahoo transport and who's available
</A></li>
	<LI>Next message: <A HREF="033272.html">[JDEV] groups in groups
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#33266">[ date ]</a>
              <a href="thread.html#33266">[ thread ]</a>
              <a href="subject.html#33266">[ subject ]</a>
              <a href="author.html#33266">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://mail.jabber.org/mailman/listinfo/jdev">More information about the JDev
mailing list</a><br>
</body></html>
