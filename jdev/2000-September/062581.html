<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [JDEV] jserver stability problem
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:jdev%40jabber.org?Subject=Re%3A%20%5BJDEV%5D%20jserver%20stability%20problem&In-Reply-To=%3C001801c0230d%248bb36230%246401a8c0%40ispicti.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="062584.html">
   <LINK REL="Next"  HREF="062553.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[JDEV] jserver stability problem</H1>
    <B>Lars Hansson</B> 
    <A HREF="mailto:jdev%40jabber.org?Subject=Re%3A%20%5BJDEV%5D%20jserver%20stability%20problem&In-Reply-To=%3C001801c0230d%248bb36230%246401a8c0%40ispicti.com%3E"
       TITLE="[JDEV] jserver stability problem">larshansson at yahoo.com
       </A><BR>
    <I>Wed Sep 20 09:17:44 CDT 2000</I>
    <P><UL>
        <LI>Previous message: <A HREF="062584.html">[JDEV] jserver stability problem
</A></li>
        <LI>Next message: <A HREF="062553.html">[JDEV] Re: jdev digest, Vol 1 #407 - 11 msgs
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#62581">[ date ]</a>
              <a href="thread.html#62581">[ thread ]</a>
              <a href="subject.html#62581">[ subject ]</a>
              <a href="author.html#62581">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Allrighty, looks like i'm finally getting at something...
Attached you'll find 2 tcl scripts: login.tcl and crash.tcl. (and
libjabber.tcl etc)
login.tcl includes the (minimal) commands that has to be sent to the server
by the first client connecting.
crash.tcl simply crashes the server, unless login.tcl has been run before it
in wich case it does nothing.

Interesting points:
* You'll notice a 10 second delay in login.tcl. I run this script
immediately after the last transport starts and if this value is set to
anything shorter then the server crashes. This time also increases with the
number of names on the roster, number of tranports etc. 10 seconds is for a
virtually empty account with no roster or transports.
* Every single command in login.tcl must be sent. Try commenting out one and
see what happens (at least for me, that crashes the server)
* It doesnt matter at all what number you send to the jud, but you have to
send something.

It seems to me that jserver (or jud or whatever it is that causes this)
isn't properly initialized until at least one client has connected and
disconnected.

Cheers
Lars

PS.
The scripts are pretty badly organized and you'll have to go thru them and
edit some things in order to use them (like hostnames and user and such)

-------------- next part --------------
A non-text attachment was scrubbed...
Name: auto.tar.gz
Type: application/x-compressed
Size: 23869 bytes
Desc: not available
URL: &lt;<A HREF="https://www.jabber.org/jdev/attachments/20000920/b1b7bb05/attachment-0002.bin">https://www.jabber.org/jdev/attachments/20000920/b1b7bb05/attachment-0002.bin</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="062584.html">[JDEV] jserver stability problem
</A></li>
	<LI>Next message: <A HREF="062553.html">[JDEV] Re: jdev digest, Vol 1 #407 - 11 msgs
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#62581">[ date ]</a>
              <a href="thread.html#62581">[ thread ]</a>
              <a href="subject.html#62581">[ subject ]</a>
              <a href="author.html#62581">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://mail.jabber.org/mailman/listinfo/jdev">More information about the JDev
mailing list</a><br>
</body></html>
