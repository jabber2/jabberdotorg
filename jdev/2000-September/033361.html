<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [JDEV] Re: Re: missing &lt;/stream:stream&gt;
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:jdev%40jabber.org?Subject=Re%3A%20%5BJDEV%5D%20Re%3A%20Re%3A%20missing%20%3C/stream%3Astream%3E&In-Reply-To=%3CFF2AF4D762A0D3119E86009027C39A0605362FCD%40sea-ex0.starwave.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="033348.html">
   <LINK REL="Next"  HREF="033362.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[JDEV] Re: Re: missing &lt;/stream:stream&gt;</H1>
    <B>Robert Temple</B> 
    <A HREF="mailto:jdev%40jabber.org?Subject=Re%3A%20%5BJDEV%5D%20Re%3A%20Re%3A%20missing%20%3C/stream%3Astream%3E&In-Reply-To=%3CFF2AF4D762A0D3119E86009027C39A0605362FCD%40sea-ex0.starwave.com%3E"
       TITLE="[JDEV] Re: Re: missing &lt;/stream:stream&gt;">robert.temple at dig.com
       </A><BR>
    <I>Fri Sep 22 13:53:48 CDT 2000</I>
    <P><UL>
        <LI>Previous message: <A HREF="033348.html">[Re: [JDEV] Questions on groupchat and yahoo transport..]
</A></li>
        <LI>Next message: <A HREF="033362.html">[JDEV] Re: Re: missing &lt;/stream:stream&gt;
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#33361">[ date ]</a>
              <a href="thread.html#33361">[ thread ]</a>
              <a href="subject.html#33361">[ subject ]</a>
              <a href="author.html#33361">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I do handle not getting a proper close.  I tell the user they've been
unexpectedly disconnected, etc, etc.

Its just that IMHO, if we are using XML, we should use correct XML.
Hopefully adding 1 line of code on the server side isn't too much to
ask for.

Plus, if the server always sent an &lt;/stream&gt; I could interpret the lack
of an &lt;/stream&gt; as a potential problem.

Robert

-----Original Message-----
From: Chris [mailto:<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">cjbehm at mail.com</A>]
Sent: Thursday, September 21, 2000 1:42 PM
To: <A HREF="http://mail.jabber.org/mailman/listinfo/jdev">jdev at jabber.org</A>
Subject: Re: [JDEV] Re: Re: missing &lt;/stream:stream&gt;


on 09/21/2000 02:19 PM, Robert Temple at <A HREF="http://mail.jabber.org/mailman/listinfo/jdev">robert.temple at dig.com</A> wrote:

&gt;<i> You have to attach an input source to a SAX parser.  And in this case,
</I>that
&gt;<i> input source is a socket using calls to recv.   And when the SAX parser
</I>trys
&gt;<i> to get more data but more data isn't there yet, it blocks on recv.
</I>&gt;<i> Therefore SAX parsing has to be in a separate thread.  I could have it try
</I>&gt;<i> to insert arbitrary data into the stream before it blocks with a select
</I>&gt;<i> statement, but then I wouldn't be sure if the parser was in the middle of
</I>&gt;<i> some tag, potentially messing up the parser even more.
</I>&gt;<i> 
</I>&gt;<i> The _right_ thing to do would just be to have the server flush its output
</I>&gt;<i> before it shutdown socket.  Server team: do you agree or disagree?
</I>
The _right_ thing for the client, though, is to properly handle the case
when it doesn't get a 'proper close'. So even if they do flush the data and
it does make it to you on the average case, you've still got to handle what
happens when it doesn't make it to you or there's some other reason that the
connection drops. I take it you can't hook the SAX parser up to a plain ol'
memory buffer to which you move data into? I can understand the appeal of a
SAX parser since it seems like a simple task of hooking it into the socket,
but if you can't handle out-of-the-ordinary stream traffic you might have an
issue.

Chris


_______________________________________________
jdev mailing list
<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">jdev at jabber.org</A>
<A HREF="http://mailman.jabber.org/listinfo/jdev">http://mailman.jabber.org/listinfo/jdev</A>


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="033348.html">[Re: [JDEV] Questions on groupchat and yahoo transport..]
</A></li>
	<LI>Next message: <A HREF="033362.html">[JDEV] Re: Re: missing &lt;/stream:stream&gt;
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#33361">[ date ]</a>
              <a href="thread.html#33361">[ thread ]</a>
              <a href="subject.html#33361">[ subject ]</a>
              <a href="author.html#33361">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://mail.jabber.org/mailman/listinfo/jdev">More information about the JDev
mailing list</a><br>
</body></html>
