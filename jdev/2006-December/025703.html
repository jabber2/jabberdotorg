<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [jdev] XHTML-IM XEP implementation
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:jdev%40jabber.org?Subject=%5Bjdev%5D%20XHTML-IM%20XEP%20implementation&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="025717.html">
   <LINK REL="Next"  HREF="025706.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[jdev] XHTML-IM XEP implementation</H1>
    <B>Tomasz Sterna</B> 
    <A HREF="mailto:jdev%40jabber.org?Subject=%5Bjdev%5D%20XHTML-IM%20XEP%20implementation&In-Reply-To="
       TITLE="[jdev] XHTML-IM XEP implementation">tomek at xiaoka.com
       </A><BR>
    <I>Fri Dec 15 09:29:26 CST 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="025717.html">[jdev] Question on XMPP URIs?
</A></li>
        <LI>Next message: <A HREF="025706.html">[jdev] Re: XHTML-IM XEP implementation
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#25703">[ date ]</a>
              <a href="thread.html#25703">[ thread ]</a>
              <a href="subject.html#25703">[ subject ]</a>
              <a href="author.html#25703">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi.

I am wondering, whether we didn't shoot our foot with this spec.
I'm implementing it now, and it's a real PITA.
It's clear for me now, why many clients implemented reading XHTML-IM
messages, but not writing them.

To display it, you just put an HTML-enabled text control from your GUI
toolkit on a chatwindow (which you most probably did, to beautify it),
append XHTML part of the message instead of plaintext and you're done.

But creating this XHTML part... It's a different story.
User is entering some text in a textbox, putting some formatting
attributes here and there, toolkit gives you a string with attributes
inside, and you have to deal with it.
Ok. I'm slicing the text and while tracking the attributes wrapping it
in &lt;span&gt;s. Bandwitch is hurting, because message triples (or more) its
size. Then when it &quot;works&quot; you realize, that all user linebreaks needs
to be converted to &lt;br/&gt;. Ok. Handled that also.
All URLs are unclickable, because other side client is not parsing XHTML
part, only plaintext one.
And last, but not least... HTML is squashing whitespace. So.. Bye bye
indentation. All pasted code, tables etc. ends up completely unreadable.

This is where I gave up...

-- 
Tomasz Sterna
Xiaoka Grp.  <A HREF="http://www.xiaoka.com/">http://www.xiaoka.com/</A>


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="025717.html">[jdev] Question on XMPP URIs?
</A></li>
	<LI>Next message: <A HREF="025706.html">[jdev] Re: XHTML-IM XEP implementation
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#25703">[ date ]</a>
              <a href="thread.html#25703">[ thread ]</a>
              <a href="subject.html#25703">[ subject ]</a>
              <a href="author.html#25703">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://mail.jabber.org/mailman/listinfo/jdev">More information about the JDev
mailing list</a><br>
</body></html>
