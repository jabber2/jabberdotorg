<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [jdev] PHP jabber class
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:jdev%40jabber.org?Subject=%5Bjdev%5D%20PHP%20jabber%20class&In-Reply-To=42AB3E65.9050408%40gmi-mr.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="022058.html">
   <LINK REL="Next"  HREF="022074.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[jdev] PHP jabber class</H1>
    <B>Nayana Hettiarachchi - GMI</B> 
    <A HREF="mailto:jdev%40jabber.org?Subject=%5Bjdev%5D%20PHP%20jabber%20class&In-Reply-To=42AB3E65.9050408%40gmi-mr.com"
       TITLE="[jdev] PHP jabber class">nayana at gmi-mr.com
       </A><BR>
    <I>Sat Jun 11 16:28:29 CDT 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="022058.html">[jdev] PHP jabber class
</A></li>
        <LI>Next message: <A HREF="022074.html">[jdev] Ejabberd 
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22059">[ date ]</a>
              <a href="thread.html#22059">[ thread ]</a>
              <a href="subject.html#22059">[ subject ]</a>
              <a href="author.html#22059">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I finally found the answer :-) what i am missing here is that i need to 
request for the Roster from the server, if i dont request it then the 
server doesnt send me the pending requests or non of the new ones while 
its online.

Anyways i thought'd i'd send this out so incase if anyone else had this 
questions again

Regards thanks for all your help

Nayana


Nayana Hettiarachchi - GMI wrote:
&gt;<i> Mathew,
</I>&gt;<i> 
</I>&gt;<i> Yes i am running my php script on command line with a while loop, and i 
</I>&gt;<i> even add some debug on the CJP_Connect to check all the incomming 
</I>&gt;<i> messages from the server, so far with no luck i dont see it sending the 
</I>&gt;<i> &quot;presence&quot; request from other users who try to add the client to their 
</I>&gt;<i> list.
</I>&gt;<i> 
</I>&gt;<i> I also tried doing a simple telnet to the jabber server and pass the xml 
</I>&gt;<i> stuff directly as follows ( this is exactly same as what the PHP class 
</I>&gt;<i> generates, i dont see any message comming from the server regarding 
</I>&gt;<i> waiting authentication stuff, so what am i missing here ?
</I>&gt;<i> 
</I>&gt;<i> I ran another script written in perl which uses Net::Jabber and i can 
</I>&gt;<i> see the authentication requets are comming in, i am going to try to 
</I>&gt;<i> check the outbound messgaes goes out from the Perl Modules to see if i 
</I>&gt;<i> am missing something some where, but if anyone can spot something let me 
</I>&gt;<i> know.. thanks
</I>&gt;<i> 
</I>&gt;<i> Nayana
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> (1)
</I>&gt;<i> &lt;?xml version='1.0' encoding='UTF-8' ?&gt;
</I>&gt;<i> &lt;stream:stream to='xxx.xxx.com' xmlns='jabber:client' 
</I>&gt;<i> xmlns:stream='<A HREF="http://etherx.jabber.org/streams'">http://etherx.jabber.org/streams'</A>&gt;
</I>&gt;<i> 
</I>&gt;<i> (2)
</I>&gt;<i> &lt;iq type='get' id='auth_edb914d6aca55beb13cfa790d652bf35'&gt;
</I>&gt;<i>     &lt;query xmlns='jabber:iq:auth'&gt;
</I>&gt;<i>          &lt;username&gt;hb&lt;/username&gt;
</I>&gt;<i>         &lt;/query&gt;
</I>&gt;<i> &lt;/iq&gt;
</I>&gt;<i> 
</I>&gt;<i> (response)
</I>&gt;<i> &lt;iq type='result' id='auth_edb914d6aca55beb13cfa790d652bf35'&gt;
</I>&gt;<i>     &lt;query xmlns='jabber:iq:auth'&gt;
</I>&gt;<i>          &lt;username&gt;hb&lt;/username&gt;                                     
</I>&gt;<i> &lt;password/&gt;&lt;digest/&gt;&lt;sequence&gt;486&lt;/sequence&gt;&lt;token&gt;42A5D2DF&lt;/token&gt;&lt;resource/&gt;&lt;/query&gt; 
</I>&gt;<i> 
</I>&gt;<i> &lt;/iq&gt;
</I>&gt;<i> 
</I>&gt;<i> (3)
</I>&gt;<i> &lt;iq type='set' id='auth_edb914d6aca55beb13cfa790d652bf35'&gt;
</I>&gt;<i> &lt;query xmlns='jabber:iq:auth'&gt;
</I>&gt;<i>     &lt;username&gt;hb&lt;/username&gt;
</I>&gt;<i>     &lt;password&gt;hhhhhh&lt;/password&gt;
</I>&gt;<i>         &lt;resource&gt;TipicIM&lt;/resource&gt;
</I>&gt;<i> &lt;/query&gt;
</I>&gt;<i> &lt;/iq&gt;
</I>&gt;<i> 
</I>&gt;<i> (response)
</I>&gt;<i> &lt;iq type='result' id='auth_edb914d6aca55beb13cfa790d652bf35'/&gt;
</I>&gt;<i> 
</I>&gt;<i> (4)
</I>&gt;<i> &lt;presence&gt;
</I>&gt;<i>         &lt;status&gt;online&lt;/status&gt;
</I>&gt;<i> &lt;/presence&gt;
</I>&gt;<i> 
</I>&gt;<i> (5)
</I>&gt;<i> &lt;iq type='get' from='<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">hb at xxx.xxx.com</A>/TipicIM' to='xxx.xxx.com' 
</I>&gt;<i> id='keep_alive_1118517698'&gt;
</I>&gt;<i>     &lt;query xmlns='jabber:iq:time' /&gt;
</I>&gt;<i> &lt;/iq&gt;
</I>&gt;<i> 
</I>&gt;<i> (response)
</I>&gt;<i> &lt;iq type='result' from='xxx.xxx.com to='<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">hb at xxx.xxx.comTipicIM</A>' 
</I>&gt;<i> id='keep_alive_1118517698'&gt;
</I>&gt;<i>     &lt;query 
</I>&gt;<i> xmlns='jabber:iq:time'&gt;&lt;utc&gt;20050611T19:24:48&lt;/utc&gt;&lt;display&gt;Sat Jun 11 
</I>&gt;<i> 19:24:48 2005&lt;/display&gt;&lt;tz&gt;GMT&lt;/tz&gt;
</I>&gt;<i>     &lt;/query&gt;
</I>&gt;<i> &lt;/iq&gt;
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> Matthew Terenzio wrote:
</I>&gt;<i> 
</I>&gt;&gt;<i> Not sure I understand the problem, but just want to make clear that 
</I>&gt;&gt;<i> you understand that once an HTTP page connection is closed after the 
</I>&gt;&gt;<i> the PHP script runs, that your connection with the server will be closed.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I use the class with a command line PHP script that acts as the client 
</I>&gt;&gt;<i> and loops, waiting for any new incoming messages.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Something like this:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> require(&quot;class.jabber.php&quot;);
</I>&gt;&gt;<i> $JABBER = new Jabber;
</I>&gt;&gt;<i> $JABBER-&gt;server         = &quot;Your Server&quot;;
</I>&gt;&gt;<i> $JABBER-&gt;port           = &quot;5222&quot;;
</I>&gt;&gt;<i> $JABBER-&gt;username       = &quot;jabberuser&quot;;
</I>&gt;&gt;<i> $JABBER-&gt;password       = &quot;secret&quot;;
</I>&gt;&gt;<i> $JABBER-&gt;resource       = &quot;&quot;;
</I>&gt;&gt;<i> $JABBER-&gt;enable_logging = FALSE;
</I>&gt;&gt;<i> $JABBER-&gt;Connect()      or die(&quot;Couldn't connect!&quot;);
</I>&gt;&gt;<i> $JABBER-&gt;SendAuth()     or die(&quot;Couldn't authenticate!&quot;);
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> while(true) {
</I>&gt;&gt;<i>   $JABBER-&gt;CruiseControl();
</I>&gt;&gt;<i>  }
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> This may not help very much. It's not exactly what I use, but mine is 
</I>&gt;&gt;<i> so customized for a certain purpose that it wouldn't be useful to 
</I>&gt;&gt;<i> include the exact code.
</I>&gt;&gt;<i> There used to be a command line PHP client called jclient, but I can't 
</I>&gt;&gt;<i> seem to find it anymore. Does anyone have a copy of it?
</I>&gt;&gt;<i> On Jun 11, 2005, at 1:46 PM, Nayana Hettiarachchi - GMI wrote:
</I>&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Hi,
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Has anyone used the PHP jabber class, everything works great in it 
</I>&gt;&gt;&gt;<i> except that i am not seeing the server sending the request for 
</I>&gt;&gt;&gt;<i> authentication to the client, i tried to debug this by checking all 
</I>&gt;&gt;&gt;<i> the messages that comes from the server but i am not seeing any 
</I>&gt;&gt;&gt;<i> message comes through when u try to add the php client to another 
</I>&gt;&gt;&gt;<i> client`s user list,
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> anyone had a similar issue ? any work arounds ? can the 
</I>&gt;&gt;&gt;<i> authentication requirment be turned off on a user basis ?
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Nayana
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> -- 
</I>&gt;&gt;&gt;<i> Nayana Hettiarachchi &lt;<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">nayana at gmi-mr.com</A>&gt;
</I>&gt;&gt;&gt;<i> Associate Director - IT Development
</I>&gt;&gt;&gt;<i> GMI (Global Market Insite, Inc.)
</I>&gt;&gt;&gt;<i> Direct: +1-206-315-9319
</I>&gt;&gt;&gt;<i> Cell: +1-206-713-5759
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Integrated Solutions for Market Research
</I>&gt;&gt;&gt;<i> www.gmi-mr.com
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> _______________________________________________
</I>&gt;&gt;&gt;<i> jdev mailing list
</I>&gt;&gt;&gt;<i> <A HREF="http://mail.jabber.org/mailman/listinfo/jdev">jdev at jabber.org</A>
</I>&gt;&gt;&gt;<i> <A HREF="http://mail.jabber.org/mailman/listinfo/jdev">http://mail.jabber.org/mailman/listinfo/jdev</A>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> _______________________________________________
</I>&gt;&gt;<i> jdev mailing list
</I>&gt;&gt;<i> <A HREF="http://mail.jabber.org/mailman/listinfo/jdev">jdev at jabber.org</A>
</I>&gt;&gt;<i> <A HREF="http://mail.jabber.org/mailman/listinfo/jdev">http://mail.jabber.org/mailman/listinfo/jdev</A>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;<i> 
</I>&gt;<i> 
</I>

-- 
Nayana Hettiarachchi &lt;<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">nayana at gmi-mr.com</A>&gt;
Associate Director - IT Development
GMI (Global Market Insite, Inc.)
Direct: +1-206-315-9319
Cell: +1-206-713-5759

Integrated Solutions for Market Research
www.gmi-mr.com


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="022058.html">[jdev] PHP jabber class
</A></li>
	<LI>Next message: <A HREF="022074.html">[jdev] Ejabberd 
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22059">[ date ]</a>
              <a href="thread.html#22059">[ thread ]</a>
              <a href="subject.html#22059">[ subject ]</a>
              <a href="author.html#22059">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://mail.jabber.org/mailman/listinfo/jdev">More information about the JDev
mailing list</a><br>
</body></html>
