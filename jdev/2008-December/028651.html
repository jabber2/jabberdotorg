<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [jdev] Initial presence and contact capabilities
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:jdev%40jabber.org?Subject=%5Bjdev%5D%20Initial%20presence%20and%20contact%20capabilities&In-Reply-To=4937B787.20400%40collabora.co.uk">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="028650.html">
   <LINK REL="Next"  HREF="028652.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[jdev] Initial presence and contact capabilities</H1>
    <B>Dave Cridland</B> 
    <A HREF="mailto:jdev%40jabber.org?Subject=%5Bjdev%5D%20Initial%20presence%20and%20contact%20capabilities&In-Reply-To=4937B787.20400%40collabora.co.uk"
       TITLE="[jdev] Initial presence and contact capabilities">dave at cridland.net
       </A><BR>
    <I>Fri Dec  5 03:19:21 CST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="028650.html">[jdev] Initial presence and contact capabilities
</A></li>
        <LI>Next message: <A HREF="028652.html">[jdev] Free jabber services
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#28651">[ date ]</a>
              <a href="thread.html#28651">[ thread ]</a>
              <a href="subject.html#28651">[ subject ]</a>
              <a href="author.html#28651">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Thu Dec  4 10:57:11 2008, Senko Rasic wrote:
&gt;<i> consider the following scenario:
</I>&gt;<i> 1. user is offline
</I>&gt;<i> 2. user wants to call some contact in roster via Jingle (or
</I>&gt;<i>    actually do anything which requires knowledge of contact's
</I>&gt;<i>    capabilities) which is in his/her roster
</I>&gt;<i> 3. users's client comes online, requests roster, sends initial
</I>&gt;<i>    presence, etc.
</I>&gt;<i> 4. user's server sends out presence probes, and presence from
</I>&gt;<i>    contacts comes in
</I>&gt;<i> 5. after presence from contact is received, capabilities can be
</I>&gt;<i>    discovered and the user's action can proceed
</I>&gt;<i> 
</I>&gt;<i> The trouble is that there's no way of knowing when 4. finishes,
</I>&gt;<i> so the client doesn't know if a particular contact's presence
</I>&gt;<i> is unavailable, or just wasn't received yet.
</I>
Yes, you just need to timeout - as Justin says, some servers will  
send you the offline presence in response to a probe, too, which will  
cut short your timeout.

One thing that makes the timeout rather more bearable is if you ping  
the domain (or bare jid) of the contact. In this instance, you at  
least know the RTT for stanzas at that point, and also know whether  
the S2S link came up, so you know you *should* be getting probe  
responses very soon.

Dave.
-- 
Dave Cridland - mailto:<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">dave at cridland.net</A> - xmpp:<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">dwd at dave.cridland.net</A>
  - <A HREF="acap://acap.dave.cridland.net/byowner/user/dwd/bookmarks/">acap://acap.dave.cridland.net/byowner/user/dwd/bookmarks/</A>
  - <A HREF="http://dave.cridland.net/">http://dave.cridland.net/</A>
Infotrope Polymer - ACAP, IMAP, ESMTP, and Lemonade
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="028650.html">[jdev] Initial presence and contact capabilities
</A></li>
	<LI>Next message: <A HREF="028652.html">[jdev] Free jabber services
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#28651">[ date ]</a>
              <a href="thread.html#28651">[ thread ]</a>
              <a href="subject.html#28651">[ subject ]</a>
              <a href="author.html#28651">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://mail.jabber.org/mailman/listinfo/jdev">More information about the JDev
mailing list</a><br>
</body></html>
