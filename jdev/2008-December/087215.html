<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [jdev] Initial presence and contact capabilities
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:jdev%40jabber.org?Subject=Re%3A%20%5Bjdev%5D%20Initial%20presence%20and%20contact%20capabilities&In-Reply-To=%3C4937B787.20400%40collabora.co.uk%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="087214.html">
   <LINK REL="Next"  HREF="087216.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[jdev] Initial presence and contact capabilities</H1>
    <B>Senko Rasic</B> 
    <A HREF="mailto:jdev%40jabber.org?Subject=Re%3A%20%5Bjdev%5D%20Initial%20presence%20and%20contact%20capabilities&In-Reply-To=%3C4937B787.20400%40collabora.co.uk%3E"
       TITLE="[jdev] Initial presence and contact capabilities">senko.rasic at collabora.co.uk
       </A><BR>
    <I>Thu Dec  4 04:57:11 CST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="087214.html">[jdev] [ANN] Prosody XMPP Server Announcement
</A></li>
        <LI>Next message: <A HREF="087216.html">[jdev] Initial presence and contact capabilities
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#87215">[ date ]</a>
              <a href="thread.html#87215">[ thread ]</a>
              <a href="subject.html#87215">[ subject ]</a>
              <a href="author.html#87215">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

consider the following scenario:
1. user is offline
2. user wants to call some contact in roster via Jingle (or
   actually do anything which requires knowledge of contact's
   capabilities) which is in his/her roster
3. users's client comes online, requests roster, sends initial
   presence, etc.
4. user's server sends out presence probes, and presence from
   contacts comes in
5. after presence from contact is received, capabilities can be
   discovered and the user's action can proceed

The trouble is that there's no way of knowing when 4. finishes,
so the client doesn't know if a particular contact's presence
is unavailable, or just wasn't received yet.

The only workaround I can think of is to introduce arbitrary
timeout, and wait until the presence is received (in which
case we can proceed to 5.) or it times out (in which case
we treat the contact as offline at the moment).

Is there a better way, or standard practice how to do this?

Regards,
Senko

-- 
Senko Rasic at Collabora &lt;<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">senko.rasic at collabora.co.uk</A>&gt;

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="087214.html">[jdev] [ANN] Prosody XMPP Server Announcement
</A></li>
	<LI>Next message: <A HREF="087216.html">[jdev] Initial presence and contact capabilities
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#87215">[ date ]</a>
              <a href="thread.html#87215">[ thread ]</a>
              <a href="subject.html#87215">[ subject ]</a>
              <a href="author.html#87215">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://mail.jabber.org/mailman/listinfo/jdev">More information about the JDev
mailing list</a><br>
</body></html>
