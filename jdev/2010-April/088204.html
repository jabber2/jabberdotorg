<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [jdev] Figuring out what a client thinks its JID is
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:jdev%40jabber.org?Subject=Re%3A%20%5Bjdev%5D%20Figuring%20out%20what%20a%20client%20thinks%20its%20JID%20is&In-Reply-To=%3C4BBA5DBD.2010200%40aaronwl.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="088203.html">
   <LINK REL="Next"  HREF="088206.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[jdev] Figuring out what a client thinks its JID is</H1>
    <B>Aaron Kryptokos</B> 
    <A HREF="mailto:jdev%40jabber.org?Subject=Re%3A%20%5Bjdev%5D%20Figuring%20out%20what%20a%20client%20thinks%20its%20JID%20is&In-Reply-To=%3C4BBA5DBD.2010200%40aaronwl.com%3E"
       TITLE="[jdev] Figuring out what a client thinks its JID is">aaronkryptokos6 at aaronwl.com
       </A><BR>
    <I>Mon Apr  5 17:01:33 CDT 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="088203.html">[jdev] gsoc proposal - RAW UDP
</A></li>
        <LI>Next message: <A HREF="088206.html">[jdev] Figuring out what a client thinks its JID is
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#88204">[ date ]</a>
              <a href="thread.html#88204">[ thread ]</a>
              <a href="subject.html#88204">[ subject ]</a>
              <a href="author.html#88204">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Nathan Fritz wrote:
&gt;<i> By not using the same node as the authentication user, you're going
</I>&gt;<i> against two SHOULD suggestions in the RFC
</I>
I can't find anything in RFC 3920 about this case.  Can you help me find 
these two recommendations?

&gt;<i> I would recommend against doing this on a public
</I>&gt;<i> service where you expect any IM client.
</I>
The authentication and authorization system already exists, so my hands 
are mostly tied.  I'm open to any reasonable implementation that will 
make this work.  The one design restriction imposed on me is that the 
authenticating client must some sort of way provide the authentication 
username as part of the process; mapping from the node to auth 
credentials is not acceptable.

If it's true that the RFC discourages this practice, then I think the 
RFC may need to be revised.  For people who are running simple 
stand-alone Jabber servers, this sort of thing doesn't matter.  But for 
organizations like mine that are trying to embrace XMPP by adding an 
XMPP interface to existing infrastructure, this is a major issue.  GTalk 
has a variation of the same problem, except with domain instead of 
username.  I think the real long-term solution here is that the RFC 
needs to firmly instruct clients to not make assumptions about their 
JIDs, and instead accept (or reject) what they are given at resource 
binding.

&gt;<i> You
</I>&gt;<i> are, again, in violation of the spec by delivering stanzas where the
</I>&gt;<i> bare jid does not match their bound name, and you could cause
</I>&gt;<i> unintended consequences on the client (crashes or strange behavior) by
</I>&gt;<i> simply pinging them in this way.
</I>
I can't find any prohibition like this in RFC 3920 or the draft.  Can 
you point out a specific passage that prohibits this sort of probing?

&gt;<i> I really don't see either of these options being viable as the client
</I>&gt;<i> is simply broken if it doesn't respond to it's bound fulljid and you
</I>&gt;<i> risk greater consequences if you try to &quot;adjust&quot; at the protocol
</I>&gt;<i> level.
</I>
My main goal is for a short-term, practical improvement in functionality 
for as many users as possible.

As an alternative, I'm thinking about perhaps having the user do 
something special to indicate that 'JID masquerading' should be 
performed, such as placing a special character in their username.

Another option is to try to detect specific versions that are broken 
using XEP-0092: Software Version, and apply the workaround for just 
those.  This would get correct operations to the largest groups of 
users, and prevent breaking people whose clients were in fact operating 
correctly.

</PRE>



<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="088203.html">[jdev] gsoc proposal - RAW UDP
</A></li>
	<LI>Next message: <A HREF="088206.html">[jdev] Figuring out what a client thinks its JID is
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#88204">[ date ]</a>
              <a href="thread.html#88204">[ thread ]</a>
              <a href="subject.html#88204">[ subject ]</a>
              <a href="author.html#88204">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://mail.jabber.org/mailman/listinfo/jdev">More information about the JDev
mailing list</a><br>
</body></html>
