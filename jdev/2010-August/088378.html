<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [jdev] The future of Jabber/XMPP?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:jdev%40jabber.org?Subject=Re%3A%20%5Bjdev%5D%20The%20future%20of%20Jabber/XMPP%3F&In-Reply-To=%3C3959.1282906943.145874%40puncture%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="088377.html">
   <LINK REL="Next"  HREF="088379.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[jdev] The future of Jabber/XMPP?</H1>
    <B>Dave Cridland</B> 
    <A HREF="mailto:jdev%40jabber.org?Subject=Re%3A%20%5Bjdev%5D%20The%20future%20of%20Jabber/XMPP%3F&In-Reply-To=%3C3959.1282906943.145874%40puncture%3E"
       TITLE="[jdev] The future of Jabber/XMPP?">dave at cridland.net
       </A><BR>
    <I>Fri Aug 27 06:02:23 CDT 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="088377.html">[jdev] The future of Jabber/XMPP?
</A></li>
        <LI>Next message: <A HREF="088379.html">[jdev] The future of Jabber/XMPP?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#88378">[ date ]</a>
              <a href="thread.html#88378">[ thread ]</a>
              <a href="subject.html#88378">[ subject ]</a>
              <a href="author.html#88378">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Fri Aug 27 11:23:09 2010, Evgeniy Khramtsov wrote:
&gt;<i> 27.08.2010 19:54, Dave Cridland wrote:
</I>&gt;&gt;<i> So you're snooping all messages even from remote sources to guess  
</I>&gt;&gt;<i> if they're PEP events intended to be filtered? How would you know?  
</I>&gt;&gt;<i> If I (or my client) explicitly subscribes to a particular node on  
</I>&gt;&gt;<i> PEP/PubSub-onna-jid service, you'd filter it out anyway.
</I>&gt;<i> 
</I>&gt;<i> If you have caps and valid disco#info then there will not be such  
</I>&gt;<i> problem. So it works in practice.
</I>&gt;<i> 
</I>&gt;<i> 
</I>You're misunderstanding me.

If a client sends an explicit subscription to a node on a pubsub  
service held on a foreign domain whose jid happens to be a bare jid,  
then notifications will be filtered by the client's local server,  
effectively breaking the subscription.


&gt;&gt;<i> I'm struggling to understand how that does not violate the XEP?
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> auto-subscribe is defined as a depth=all items subscription to the  
</I>&gt;&gt;<i> root node from the bare_jid, and filtered-notifications then only  
</I>&gt;&gt;<i> sends the notifications to those full jids that have requested  
</I>&gt;&gt;<i> them. Both are required for PEP. I don't see how you can claim to  
</I>&gt;&gt;<i> be conformant to PEP without doing both.
</I>&gt;<i> 
</I>&gt;<i> Yes, but <A HREF="http://xmpp.org/extensions/xep-0163.html#notify-addressing">http://xmpp.org/extensions/xep-0163.html#notify-addressing</A>  
</I>&gt;<i> para 4 says:
</I>&gt;<i> &quot;... if the PEP service does not have presence information about a  
</I>&gt;<i> subscriber, it MUST address the notification to the subscriber's  
</I>&gt;<i> bare JID (&lt;<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">localpart at domain.tld</A>&gt; or &lt;domain.tld&gt;).&quot;
</I>&gt;<i> 
</I>&gt;<i> 
</I>But you *do* have presence information - or at the very least the  
only reason you don't is because you've thrown it away. I don't see  
how this can be described as conformant behaviour.


&gt;&gt;<i> So because you filter on the subscriber's end, you restrict  
</I>&gt;&gt;<i> PubSub-onna-jid to the PEP subset, and because you don't filter on  
</I>&gt;&gt;<i> the service end, you break even that if the subscriber isn't on  
</I>&gt;&gt;<i> ejabberd.
</I>&gt;<i> 
</I>&gt;<i> Well, strictly speaking yes. However such situation is uncommon it  
</I>&gt;<i> practice: all popular clients provide caps and disco#info.
</I>&gt;<i> 
</I>&gt;<i> 
</I>What, it's uncommon for subscribers not to be on ejabberd?

If a subscriber is on a remote server that's implementing standard  
PEP (or indeed no PEP at all), then you're breaking, caps and  
disco#info or not. I reiterate - the only case your protocol works  
like PEP is when the remote subscriber is on ejabberd too.

Or do you mean that it's uncommon for PEP services to speak more than  
just the PEP subset? This I'll agree with, but we should not design  
to preclude that.

Dave.
-- 
Dave Cridland - mailto:<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">dave at cridland.net</A> - xmpp:<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">dwd at dave.cridland.net</A>
  - <A HREF="acap://acap.dave.cridland.net/byowner/user/dwd/bookmarks/">acap://acap.dave.cridland.net/byowner/user/dwd/bookmarks/</A>
  - <A HREF="http://dave.cridland.net/">http://dave.cridland.net/</A>
Infotrope Polymer - ACAP, IMAP, ESMTP, and Lemonade
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="088377.html">[jdev] The future of Jabber/XMPP?
</A></li>
	<LI>Next message: <A HREF="088379.html">[jdev] The future of Jabber/XMPP?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#88378">[ date ]</a>
              <a href="thread.html#88378">[ thread ]</a>
              <a href="subject.html#88378">[ subject ]</a>
              <a href="author.html#88378">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://mail.jabber.org/mailman/listinfo/jdev">More information about the JDev
mailing list</a><br>
</body></html>
