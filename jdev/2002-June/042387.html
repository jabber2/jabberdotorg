<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [JDEV] xdb_sql problem on mac osx
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:jdev%40jabber.org?Subject=Re%3A%20%5BJDEV%5D%20xdb_sql%20problem%20on%20mac%20osx&In-Reply-To=%3C3D0637E5.C6E95E86%40granada-learning.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="042386.html">
   <LINK REL="Next"  HREF="042388.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[JDEV] xdb_sql problem on mac osx</H1>
    <B>Duncan Hoyle</B> 
    <A HREF="mailto:jdev%40jabber.org?Subject=Re%3A%20%5BJDEV%5D%20xdb_sql%20problem%20on%20mac%20osx&In-Reply-To=%3C3D0637E5.C6E95E86%40granada-learning.com%3E"
       TITLE="[JDEV] xdb_sql problem on mac osx">duncanh at granada-learning.com
       </A><BR>
    <I>Tue Jun 11 12:48:21 CDT 2002</I>
    <P><UL>
        <LI>Previous message: <A HREF="042386.html">[JDEV] list of services provided by server
</A></li>
        <LI>Next message: <A HREF="042388.html">[JDEV] Introduction to the Worldwide Lexicon
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#42387">[ date ]</a>
              <a href="thread.html#42387">[ thread ]</a>
              <a href="subject.html#42387">[ subject ]</a>
              <a href="author.html#42387">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
Hi all

I'm trying to get xdb_sql 1.2 working on an osx server
connecting to a mysql database running on a windows xp
machine and have the following problem...

The server starts ok without complaining about settings and
sql connections. I'm starting it logged in as me, and I own
everything within the jabberd directory. When I try to
create a new jabberd user (with winjab or exodus) the server
crashes with the messages below. The strange thing is that
the user does get added to the database, and if I restart
the server I can log in as that user.
I've tried starting a server on the same machine as the
database and on a winNT machine using the same remote
database and it works ok - new users can create accounts and
reconnect without the crash.
The xdb_sql.xml files for the pc and mac are the same,
they're trying to use the same user to access the database.

Can anyone offer any suggestions. I've only recently stated
using MacOSX/Linux and may the problem lies in how I'm
running the server/user permissions.

Duncan

Tue Jun 11 16:36:00 2002  &lt;iq type=&quot;set&quot; id=&quot;JCOM_8&quot;&gt;&lt;query
xmlns=&quot;jabber:iq:register&quot;&gt;&lt;username&gt;test666&lt;/username&gt;&lt;password&gt;test666&lt;/password&gt;&lt;resource&gt;Winjab&lt;/resource&gt;&lt;/query&gt;&lt;/iq&gt;
Tue Jun 11 16:36:00 2002  c2s [client.c:277]
pthsock_client_read called with: m:168E40 flag:3 arg:3C36C0
Tue Jun 11 16:36:00 2002  deliver.c:474 DELIVER
4:macjabber.ilp.com &lt;route type='auth'
to='<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">test666 at macjabber.ilp.com</A>' from='<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">16 at c2s</A>/168E40'&gt;&lt;iq
type='set' id='JCOM_8'&gt;&lt;query
xmlns='jabber:iq:register'&gt;&lt;username&gt;test666&lt;/username&gt;&lt;password&gt;test666&lt;/password&gt;&lt;resource&gt;Winjab&lt;/resource&gt;&lt;/query&gt;&lt;/iq&gt;&lt;/route&gt;
Tue Jun 11 16:36:00 2002  deliver.c:678 delivering to
instance 'sessions'
Tue Jun 11 16:36:00 2002  deliver.c:94 (1690A0)incoming
packet &lt;route type='auth' to='<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">test666 at macjabber.ilp.com</A>'
from='<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">16 at c2s</A>/168E40'&gt;&lt;iq type='set' id='JCOM_8'&gt;&lt;query
xmlns='jabber:iq:register'&gt;&lt;username&gt;test666&lt;/username&gt;&lt;password&gt;test666&lt;/password&gt;&lt;resource&gt;Winjab&lt;/resource&gt;&lt;/query&gt;&lt;/iq&gt;&lt;/route&gt;
Tue Jun 11 16:36:00 2002  util.c:103 config query auth
Tue Jun 11 16:36:00 2002  mtq 3B8020 entering from pth
Tue Jun 11 16:36:00 2002  mtq 3B8020 one call 3CA930
Tue Jun 11 16:36:00 2002  authreg.c:95 registration set
request
Tue Jun 11 16:36:00 2002  users.c:143
js_user(<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">test666 at macjabber.ilp.com</A>,211000)
Tue Jun 11 16:36:00 2002  users.c:150 js_user not current
Tue Jun 11 16:36:00 2002  deliver.c:474 DELIVER
2:macjabber.ilp.com &lt;xdb type='get'
to='<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">test666 at macjabber.ilp.com</A>' from='sessions'
ns='jabber:iq:auth' id='12'/&gt;
Tue Jun 11 16:36:00 2002  deliver.c:678 delivering to
instance 'xdb'
Tue Jun 11 16:36:00 2002  xdb_sql.c:124 modules = 197130
Tue Jun 11 16:36:00 2002  log.c:116 &lt;log type='alert'
from='-internal'&gt;[xdbsql_auth_get] no results, user not
found&lt;/log&gt;
Tue Jun 11 16:36:00 2002  deliver.c:474 DELIVER 3:-internal
&lt;log type='alert' from='-internal'&gt;[xdbsql_auth_get] no
results, user not found&lt;/log&gt;
Tue Jun 11 16:36:00 2002  deliver.c:678 delivering to
instance 'elogger'
20020611T16:36:00: [alert] (-internal): [xdbsql_auth_get] no
results, user not found
Tue Jun 11 16:36:00 2002  deliver.c:474 DELIVER 1:sessions
&lt;xdb type='result' to='sessions'
from='<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">test666 at macjabber.ilp.com</A>' ns='jabber:iq:auth'
id='12'/&gt;
Tue Jun 11 16:36:00 2002  deliver.c:678 delivering to
instance 'sessions'
Tue Jun 11 16:36:00 2002  xdb.c:52 xdb_results checking xdb
packet &lt;xdb type='result' to='sessions'
from='<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">test666 at macjabber.ilp.com</A>' ns='jabber:iq:auth'
id='12'/&gt;
Tue Jun 11 16:36:00 2002  modules.c:135 mapi_call 6
Tue Jun 11 16:36:00 2002  modules.c:158 MAPI 1704A0
Tue Jun 11 16:36:00 2002  mod_last storing last for user
<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">test666 at macjabber.ilp.com</A>
Tue Jun 11 16:36:00 2002  deliver.c:474 DELIVER
2:macjabber.ilp.com &lt;xdb type='set'
to='<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">test666 at macjabber.ilp.com</A>' from='sessions'
ns='jabber:iq:last' id='13'&gt;&lt;query xmlns='jabber:iq:last'
last='1023813360'&gt;Registered&lt;/query&gt;&lt;/xdb&gt;
Tue Jun 11 16:36:00 2002  deliver.c:678 delivering to
instance 'xdb'
Tue Jun 11 16:36:00 2002  xdb_sql.c:124 modules = 197130
Tue Jun 11 16:36:00 2002  deliver.c:474 DELIVER 1:sessions
&lt;xdb type='result' to='sessions'
from='<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">test666 at macjabber.ilp.com</A>' ns='jabber:iq:last'
id='13'&gt;&lt;query xmlns='jabber:iq:last'
last='1023813360'&gt;Registered&lt;/query&gt;&lt;/xdb&gt;
Tue Jun 11 16:36:00 2002  deliver.c:678 delivering to
instance 'sessions'
Tue Jun 11 16:36:00 2002  xdb.c:52 xdb_results checking xdb
packet &lt;xdb type='result' to='sessions'
from='<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">test666 at macjabber.ilp.com</A>' ns='jabber:iq:last'
id='13'&gt;&lt;query xmlns='jabber:iq:last'
last='1023813360'&gt;Registered&lt;/query&gt;&lt;/xdb&gt;
Tue Jun 11 16:36:00 2002  modules.c:158 MAPI 170ED0
Tue Jun 11 16:36:00 2002  mod_auth_plain resetting password
Tue Jun 11 16:36:00 2002  deliver.c:474 DELIVER
2:macjabber.ilp.com &lt;xdb type='set'
to='<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">test666 at macjabber.ilp.com</A>' from='sessions'
ns='jabber:iq:auth' id='14'&gt;&lt;password
xmlns='jabber:iq:auth'&gt;test666&lt;/password&gt;&lt;/xdb&gt;
Tue Jun 11 16:36:00 2002  deliver.c:678 delivering to
instance 'xdb'
Tue Jun 11 16:36:00 2002  xdb_sql.c:124 modules = 197130
Tue Jun 11 16:36:00 2002  deliver.c:474 DELIVER 1:sessions
&lt;xdb type='result' to='sessions'
from='<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">test666 at macjabber.ilp.com</A>' ns='jabber:iq:auth'
id='14'&gt;&lt;password
xmlns='jabber:iq:auth'&gt;test666&lt;/password&gt;&lt;/xdb&gt;
Tue Jun 11 16:36:00 2002  deliver.c:678 delivering to
instance 'sessions'
Tue Jun 11 16:36:00 2002  xdb.c:52 xdb_results checking xdb
packet &lt;xdb type='result' to='sessions'
from='<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">test666 at macjabber.ilp.com</A>' ns='jabber:iq:auth'
id='14'&gt;&lt;password
xmlns='jabber:iq:auth'&gt;test666&lt;/password&gt;&lt;/xdb&gt;
Tue Jun 11 16:36:00 2002  modules.c:158 MAPI 170FD0
Tue Jun 11 16:36:00 2002  util.c:103 config query
mod_auth_0k/enable_registration
Tue Jun 11 16:36:00 2002  deliver.c:474 DELIVER
2:macjabber.ilp.com &lt;xdb type='set'
to='<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">test666 at macjabber.ilp.com</A>' from='sessions'
ns='jabber:iq:auth:0k' id='15'/&gt;
Tue Jun 11 16:36:00 2002  deliver.c:678 delivering to
instance 'xdb'
Tue Jun 11 16:36:00 2002  xdb_sql.c:124 modules = 197130
Tue Jun 11 16:36:00 2002  dnsrv.c:155 dnsrv: Read error on
coprocess(1): 0 Undefined error: 0
Tue Jun 11 16:36:00 2002  dnsrv.c:169 DNSRV CHILD: out of
loop.. exiting normal
Bus error

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="042386.html">[JDEV] list of services provided by server
</A></li>
	<LI>Next message: <A HREF="042388.html">[JDEV] Introduction to the Worldwide Lexicon
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#42387">[ date ]</a>
              <a href="thread.html#42387">[ thread ]</a>
              <a href="subject.html#42387">[ subject ]</a>
              <a href="author.html#42387">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://mail.jabber.org/mailman/listinfo/jdev">More information about the JDev
mailing list</a><br>
</body></html>
