<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [JDEV] Re: [jadmin] [jadmin]Port access below 1024
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:jdev%40jabber.org?Subject=%5BJDEV%5D%20Re%3A%20%5Bjadmin%5D%20%5Bjadmin%5DPort%20access%20below%201024&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="013000.html">
   <LINK REL="Next"  HREF="013022.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[JDEV] Re: [jadmin] [jadmin]Port access below 1024</H1>
    <B>Jonathan Augenstine</B> 
    <A HREF="mailto:jdev%40jabber.org?Subject=%5BJDEV%5D%20Re%3A%20%5Bjadmin%5D%20%5Bjadmin%5DPort%20access%20below%201024&In-Reply-To="
       TITLE="[JDEV] Re: [jadmin] [jadmin]Port access below 1024">jaugenstine at jambotech.com
       </A><BR>
    <I>Thu Jun  6 09:14:32 CDT 2002</I>
    <P><UL>
        <LI>Previous message: <A HREF="013000.html">[JDEV] new user registration with jabberbeans
</A></li>
        <LI>Next message: <A HREF="013022.html">[JDEV] Re: [jadmin] [jadmin]Port access below 1024
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13003">[ date ]</a>
              <a href="thread.html#13003">[ thread ]</a>
              <a href="subject.html#13003">[ subject ]</a>
              <a href="author.html#13003">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Justin,

I have two questions.  The first is that have the changes you made to
reorder the code been contributed back for inclusion with the
distribution?  If not I would be interested in knowing what changes you
made, as I have great need to implement this.  The second question is,
can you change ownership or permisions on the pid file prior to the fork
to make it writable to the designated user and rewrite the pid after the
fork()??

Jonathan

&gt;<i> -----Original Message-----
</I>&gt;<i> From: Justin Georgeson [mailto:<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">jgeorgeson at unboundtech.com</A>] 
</I>&gt;<i> Sent: Wednesday, June 05, 2002 6:45 PM
</I>&gt;<i> To: <A HREF="http://mail.jabber.org/mailman/listinfo/jdev">jadmin at jabber.org</A>
</I>&gt;<i> Cc: jdev
</I>&gt;<i> Subject: [JDEV] Re: [jadmin] [jadmin]Port access below 1024
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> It's not so much the ownership, it's that the pid in the pidfile is 
</I>&gt;<i> wrong. I couldn't get the pidfile to be written after the 
</I>&gt;<i> fork. Even on 
</I>&gt;<i> systems that have a tool to kill all processes with a given name 
</I>&gt;<i> (killall jabberd on RedHat for example), that's not always viable, as 
</I>&gt;<i> you might have multiple instances and only want to stop one.
</I>&gt;<i> 
</I>&gt;<i> Jonathan Augenstine wrote:
</I>&gt;<i> &gt;&gt;only answer I was given was to have my firewall forward the
</I>&gt;<i> &gt;&gt;priviledged 
</I>&gt;<i> &gt;&gt;port to the unpriviledged port jabber is running on.
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; If I had that option available we would not be having this 
</I>&gt;<i> exchange. 
</I>&gt;<i> &gt; Unfortunately.
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; Can you clarify what the ramifications are of the problem 
</I>&gt;<i> you describe 
</I>&gt;<i> &gt; below.  I understand that the pid file is created by root and as a 
</I>&gt;<i> &gt; consequence the specified user account is unable to access the pid 
</I>&gt;<i> &gt; file. How does this impact?
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt;&gt;-----Original Message-----
</I>&gt;<i> &gt;&gt;From: Justin Georgeson [mailto:<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">jgeorgeson at unboundtech.com</A>]
</I>&gt;<i> &gt;&gt;Sent: Wednesday, June 05, 2002 11:55 AM
</I>&gt;<i> &gt;&gt;To: <A HREF="http://mail.jabber.org/mailman/listinfo/jdev">jadmin at jabber.org</A>
</I>&gt;<i> &gt;&gt;Subject: Re: [jadmin] [jadmin]
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;Using the -B command line options you can specify what user
</I>&gt;<i> &gt;&gt;to run as. I 
</I>&gt;<i> &gt;&gt;have successfully reordered the code to bind to the port 
</I>&gt;<i> &gt;&gt;before calling 
</I>&gt;<i> &gt;&gt;setuid/setgid and forking. The problem is I have been unsuccessful 
</I>&gt;<i> &gt;&gt;getting all this done before writing the pidfile, so I end up witha 
</I>&gt;<i> &gt;&gt;pidfile with the wrong pid and the process owner can't read. 
</I>&gt;<i> &gt;&gt;I've posted 
</I>&gt;<i> &gt;&gt;to several lists (this one, jdev, and 
</I>&gt;<i> &gt;&gt;<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">jabberd at jabberstudio.org</A>) and the 
</I>&gt;<i> &gt;&gt;only answer I was given was to have my firewall forward the 
</I>&gt;<i> &gt;&gt;priviledged 
</I>&gt;<i> &gt;&gt;port to the unpriviledged port jabber is running on.
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;Jonathan Augenstine wrote:
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;I have a question on running Jabber on non-standard ports.  Does
</I>&gt;<i> &gt;&gt;&gt;anyone have documentation or notes on how to run Jabber on 
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;ports below
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;1024 but not run Jabber as root?
</I>&gt;<i> &gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;Jonathan Augenstine _______________________________________________
</I>&gt;<i> &gt;&gt;&gt;jadmin mailing list
</I>&gt;<i> &gt;&gt;&gt;<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">jadmin at jabber.org</A>
</I>&gt;<i> &gt;&gt;&gt;<A HREF="http://mailman.jabber.org/listinfo/jadmin">http://mailman.jabber.org/listinfo/jadmin</A>
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;--
</I>&gt;<i> &gt;&gt;Justin Georgeson
</I>&gt;<i> &gt;&gt;UnBound Technologies, Inc.
</I>&gt;<i> &gt;&gt;<A HREF="http://www.unboundtech.com">http://www.unboundtech.com</A>
</I>&gt;<i> &gt;&gt;Main   713.329.9330
</I>&gt;<i> &gt;&gt;Fax    713.460.4051
</I>&gt;<i> &gt;&gt;Mobile 512.789.1962
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;5295 Hollister Road
</I>&gt;<i> &gt;&gt;Houston, TX 77040
</I>&gt;<i> &gt;&gt;Real Applications using Real Wireless Intelligence(tm)
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;_______________________________________________
</I>&gt;<i> &gt;&gt;jadmin mailing list
</I>&gt;<i> &gt;&gt;<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">jadmin at jabber.org</A>
</I>&gt;<i> &gt;&gt;<A HREF="http://mailman.jabber.org/listinfo/jadmin">http://mailman.jabber.org/listinfo/jadmin</A>
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; _______________________________________________
</I>&gt;<i> &gt; jadmin mailing list
</I>&gt;<i> &gt; <A HREF="http://mail.jabber.org/mailman/listinfo/jdev">jadmin at jabber.org</A>
</I>&gt;<i> &gt; <A HREF="http://mailman.jabber.org/listinfo/jadmin">http://mailman.jabber.org/listinfo/jadmin</A>
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> -- 
</I>&gt;<i> Justin Georgeson
</I>&gt;<i> UnBound Technologies, Inc.
</I>&gt;<i> <A HREF="http://www.unboundtech.com">http://www.unboundtech.com</A>
</I>&gt;<i> Main   713.329.9330
</I>&gt;<i> Fax    713.460.4051
</I>&gt;<i> Mobile 512.789.1962
</I>&gt;<i> 
</I>&gt;<i> 5295 Hollister Road
</I>&gt;<i> Houston, TX 77040
</I>&gt;<i> Real Applications using Real Wireless Intelligence(tm)
</I>&gt;<i> 
</I>&gt;<i> _______________________________________________
</I>&gt;<i> jdev mailing list
</I>&gt;<i> <A HREF="http://mail.jabber.org/mailman/listinfo/jdev">jdev at jabber.org</A>
</I>&gt;<i> <A HREF="http://mailman.jabber.org/listinfo/jdev">http://mailman.jabber.org/listinfo/jdev</A>
</I>&gt;<i> 
</I>
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="013000.html">[JDEV] new user registration with jabberbeans
</A></li>
	<LI>Next message: <A HREF="013022.html">[JDEV] Re: [jadmin] [jadmin]Port access below 1024
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13003">[ date ]</a>
              <a href="thread.html#13003">[ thread ]</a>
              <a href="subject.html#13003">[ subject ]</a>
              <a href="author.html#13003">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://mail.jabber.org/mailman/listinfo/jdev">More information about the JDev
mailing list</a><br>
</body></html>
