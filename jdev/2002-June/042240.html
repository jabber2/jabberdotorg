<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [JDEV] modifying jabberd to run as daemon
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:jdev%40jabber.org?Subject=Re%3A%20%5BJDEV%5D%20modifying%20jabberd%20to%20run%20as%20daemon&In-Reply-To=%3C3CFB8D0D.3030003%40blueairnetworks.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="042243.html">
   <LINK REL="Next"  HREF="042244.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[JDEV] modifying jabberd to run as daemon</H1>
    <B>Ralph Siemsen</B> 
    <A HREF="mailto:jdev%40jabber.org?Subject=Re%3A%20%5BJDEV%5D%20modifying%20jabberd%20to%20run%20as%20daemon&In-Reply-To=%3C3CFB8D0D.3030003%40blueairnetworks.com%3E"
       TITLE="[JDEV] modifying jabberd to run as daemon">ralphs at blueairnetworks.com
       </A><BR>
    <I>Mon Jun  3 10:36:45 CDT 2002</I>
    <P><UL>
        <LI>Previous message: <A HREF="042243.html">[JDEV] Accessability for the Impaired
</A></li>
        <LI>Next message: <A HREF="042244.html">[JDEV] modifying jabberd to run as daemon
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#42240">[ date ]</a>
              <a href="thread.html#42240">[ thread ]</a>
              <a href="subject.html#42240">[ subject ]</a>
              <a href="author.html#42240">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Justin Georgeson wrote:
&gt;<i> I've been able rearrange some of the code in jabberd.c to get the port 
</I>&gt;<i> bound before setgid/setuid and fork. This lets me run jabberd on 
</I>&gt;<i> privileged ports as a nonroot user. The problem is the pidfile is still 
</I>&gt;<i> owned by root and has the wrong pid. Can anyone point me in the right 
</I>&gt;<i> direction?
</I>&gt;<i> 
</I>
Cool, I was complaining about this not long ago.  The create/check of 
the pidfile happens in jabberd/config.c around line 161... but I'm sure 
you already know that.  I'll bet you're getting the parent's pid now?
I'm guessing the fork call got moved, right?  So the pid is being 
generated before the child process is forked.

-R



</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="042243.html">[JDEV] Accessability for the Impaired
</A></li>
	<LI>Next message: <A HREF="042244.html">[JDEV] modifying jabberd to run as daemon
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#42240">[ date ]</a>
              <a href="thread.html#42240">[ thread ]</a>
              <a href="subject.html#42240">[ subject ]</a>
              <a href="author.html#42240">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://mail.jabber.org/mailman/listinfo/jdev">More information about the JDev
mailing list</a><br>
</body></html>
