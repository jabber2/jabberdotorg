<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [JDEV] net::jabber BrowseRequest problem
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:jdev%40jabber.org?Subject=Re%3A%20%5BJDEV%5D%20net%3A%3Ajabber%20BrowseRequest%20problem&In-Reply-To=%3C3D171BCC.97FD0514%40granada-learning.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="042473.html">
   <LINK REL="Next"  HREF="042476.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[JDEV] net::jabber BrowseRequest problem</H1>
    <B>Duncan Hoyle</B> 
    <A HREF="mailto:jdev%40jabber.org?Subject=Re%3A%20%5BJDEV%5D%20net%3A%3Ajabber%20BrowseRequest%20problem&In-Reply-To=%3C3D171BCC.97FD0514%40granada-learning.com%3E"
       TITLE="[JDEV] net::jabber BrowseRequest problem">duncanh at granada-learning.com
       </A><BR>
    <I>Mon Jun 24 08:17:00 CDT 2002</I>
    <P><UL>
        <LI>Previous message: <A HREF="042473.html">[JDEV] Does Muse support encrypted messaging?
</A></li>
        <LI>Next message: <A HREF="042476.html">[JDEV] ANON CVS Problem, please help
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#42475">[ date ]</a>
              <a href="thread.html#42475">[ thread ]</a>
              <a href="subject.html#42475">[ subject ]</a>
              <a href="author.html#42475">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi

I'm new to net::jabber and perl so hopefully I'm not doing
something stupid.....

I'm trying to extend the perl chatbot so it can tell a user
everyone who's currently logged in to my server. 
If I use the following code $result does not get anything
returned to it ($Client is the client created inside
ChatBot).

	my $users;
	my %results  =
$Client-&gt;BrowseRequest(jid=&gt;&quot;help\@myserver.com&quot;,
timeout=&gt;10);
	for my $child ( @{ $results{'children'} })
	{
		$users= &quot;$users$child-&gt;{'jid'}\n&quot; ;
	}
	$Debug-&gt;Log0(&quot;users=&quot;.$users); 

The request gets passed back to the server and the server
debug shows the result I would expect, but nothing is passed
back to the bot.


I managed to get round this by creating a new module which
creates a new temporary Client and connects it using the
same name and server details as the chatbot (except for the
resource). This time the result is returned correctly and
the temp client disconnects.

The problem seems to be that in Protocol.pm ReceivedID()
(line 1322) never returns true for the first example.

I'd prefer to use the first example if I can as it saves
unwanted temporary connections to the server.

Does anyone have any idea why the first eg doesn't work?

Duncan

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="042473.html">[JDEV] Does Muse support encrypted messaging?
</A></li>
	<LI>Next message: <A HREF="042476.html">[JDEV] ANON CVS Problem, please help
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#42475">[ date ]</a>
              <a href="thread.html#42475">[ thread ]</a>
              <a href="subject.html#42475">[ subject ]</a>
              <a href="author.html#42475">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://mail.jabber.org/mailman/listinfo/jdev">More information about the JDev
mailing list</a><br>
</body></html>
