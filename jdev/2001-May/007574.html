<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [JDEV] [help] server dying/crashing after login... long log (sorry)
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:jdev%40jabber.org?Subject=%5BJDEV%5D%20%5Bhelp%5D%20server%20dying/crashing%20after%20login...%20long%20log%20%28sorry%29&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="007572.html">
   <LINK REL="Next"  HREF="007575.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[JDEV] [help] server dying/crashing after login... long log (sorry)</H1>
    <B>Stephane Lunati</B> 
    <A HREF="mailto:jdev%40jabber.org?Subject=%5BJDEV%5D%20%5Bhelp%5D%20server%20dying/crashing%20after%20login...%20long%20log%20%28sorry%29&In-Reply-To="
       TITLE="[JDEV] [help] server dying/crashing after login... long log (sorry)">slunati at earthlink.net
       </A><BR>
    <I>Tue May  8 11:15:20 CDT 2001</I>
    <P><UL>
        <LI>Previous message: <A HREF="007572.html">[JDEV] XHTML message draft support in Net::Jabber? (fwd)
</A></li>
        <LI>Next message: <A HREF="007575.html">[JDEV] making servers jabber aware
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7574">[ date ]</a>
              <a href="thread.html#7574">[ thread ]</a>
              <a href="subject.html#7574">[ subject ]</a>
              <a href="author.html#7574">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>The server is running on a Unix BSD style system (sorry I can't give more info).
My XML configuration file is the default one except I commented out :
      &lt;!--
      &lt;update&gt;&lt;jabberd:cmdline flag=&quot;h&quot;&gt;localhost&lt;/jabberd:cmdline&gt;&lt;/update&gt;
      --&gt;
otherwise the configuration file is exactly the same as the one coming with 1.4.1.

Find below the log of a crashing session when I try to login (I start the server with the command line -h coolserver -s spool -l jabber.log -D) :
-----------------
Tue May  8 10:57:51 2001  mio.c:568 MIO is starting up
Tue May  8 10:57:51 2001  base_accept.c:287 base_accept loading...

Tue May  8 10:57:51 2001  base_connect.c:257 base_connect loading...

Tue May  8 10:57:51 2001  base_exec.c:366 base_exec loading...

Tue May  8 10:57:51 2001  base_file.c:106 base_file loading...
Tue May  8 10:57:51 2001  base_format.c:127 base_format loading...
Tue May  8 10:57:51 2001  base_to.c:88 base_to loading...
Tue May  8 10:57:51 2001  base_stderr.c:74 base_stderr loading...
Tue May  8 10:57:51 2001  base_stdout.c:231 base_stdout loading...

Tue May  8 10:57:51 2001  base_dynamic.c:186 base_dynamic loading...
Tue May  8 10:57:51 2001  load.c:229 dynamic component loader initializing...

Tue May  8 10:57:51 2001  load.c:201 dynamic loader processing configuration &lt;load main='jsm'&gt;
      &lt;jsm&gt;./jsm/jsm.so&lt;/jsm&gt;
      &lt;mod_echo&gt;./jsm/jsm.so&lt;/mod_echo&gt;
      &lt;mod_roster&gt;./jsm/jsm.so&lt;/mod_roster&gt;
      &lt;mod_time&gt;./jsm/jsm.so&lt;/mod_time&gt;
      &lt;mod_vcard&gt;./jsm/jsm.so&lt;/mod_vcard&gt;
      &lt;mod_last&gt;./jsm/jsm.so&lt;/mod_last&gt;
      &lt;mod_version&gt;./jsm/jsm.so&lt;/mod_version&gt;
      &lt;mod_announce&gt;./jsm/jsm.so&lt;/mod_announce&gt;
      &lt;mod_agents&gt;./jsm/jsm.so&lt;/mod_agents&gt;
      &lt;mod_browse&gt;./jsm/jsm.so&lt;/mod_browse&gt;
      &lt;mod_admin&gt;./jsm/jsm.so&lt;/mod_admin&gt;
      &lt;mod_filter&gt;./jsm/jsm.so&lt;/mod_filter&gt;
      &lt;mod_offline&gt;./jsm/jsm.so&lt;/mod_offline&gt;
      &lt;mod_presence&gt;./jsm/jsm.so&lt;/mod_presence&gt;
      &lt;mod_auth_plain&gt;./jsm/jsm.so&lt;/mod_auth_plain&gt;
      &lt;mod_auth_digest&gt;./jsm/jsm.so&lt;/mod_auth_digest&gt;
      &lt;mod_auth_0k&gt;./jsm/jsm.so&lt;/mod_auth_0k&gt;
      &lt;mod_log&gt;./jsm/jsm.so&lt;/mod_log&gt;
      &lt;mod_register&gt;./jsm/jsm.so&lt;/mod_register&gt;
      &lt;mod_xml&gt;./jsm/jsm.so&lt;/mod_xml&gt;
    &lt;/load&gt;

Tue May  8 10:57:51 2001  load.c:201 dynamic loader processing configuration &lt;load&gt;
      &lt;xdb_file&gt;./xdb_file/xdb_file.so&lt;/xdb_file&gt;
    &lt;/load&gt;

Tue May  8 10:57:51 2001  load.c:201 dynamic loader processing configuration &lt;load&gt;
      &lt;pthsock_client&gt;./pthsock/pthsock_client.so&lt;/pthsock_client&gt;
    &lt;/load&gt;

Tue May  8 10:57:51 2001  base_format.c:102 base_format_config validating configuration
Tue May  8 10:57:51 2001  base_file.c:69 base_file_config validating configuration
Tue May  8 10:57:51 2001  base_format.c:102 base_format_config validating configuration
Tue May  8 10:57:51 2001  base_file.c:69 base_file_config validating configuration
Tue May  8 10:57:51 2001  load.c:201 dynamic loader processing configuration &lt;load&gt;
      &lt;dnsrv&gt;./dnsrv/dnsrv.so&lt;/dnsrv&gt;
    &lt;/load&gt;

Tue May  8 10:57:51 2001  load.c:201 dynamic loader processing configuration &lt;load&gt;
      &lt;dialback&gt;./dialback/dialback.so&lt;/dialback&gt;
    &lt;/load&gt;

Tue May  8 10:57:51 2001  deliver.c:277 Registering sessions with instance sessions
Tue May  8 10:57:51 2001  deliver.c:277 Registering coolserver with instance sessions
Tue May  8 10:57:51 2001  jsm.c:93 jsm initializing for section 'sessions'
Tue May  8 10:57:51 2001  deliver.c:235 @-internal processing &lt;xdb type='get' to='<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">config at -internal</A>' from='sessions' ns='jabber:config:jsm' id='0'/&gt;
Tue May  8 10:57:51 2001  deliver.c:651 delivering to instance 'sessions'
Tue May  8 10:57:51 2001  xdb.c:41 xdb_results checking xdb packet &lt;xdb type='result' to='sessions' from='<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">config at -internal</A>' ns='jabber:config:jsm' id='0'&gt;&lt;jsm xmlns='jabber:config:jsm'&gt;
&lt;filter&gt;
&lt;default/&gt;
&lt;max_size&gt;100&lt;/max_size&gt;
&lt;allow&gt;
&lt;conditions&gt;
&lt;ns/&gt;
&lt;unavailable/&gt;
&lt;from/&gt;
&lt;resource/&gt;
&lt;subject/&gt;
&lt;body/&gt;
&lt;show/&gt;
&lt;type/&gt;
&lt;roster/&gt;
&lt;group/&gt;
&lt;/conditions&gt;
&lt;actions&gt;
&lt;error/&gt;
&lt;offline/&gt;
&lt;forward/&gt;
&lt;reply/&gt;
&lt;continue/&gt;
&lt;settype/&gt;
&lt;/actions&gt;
&lt;/allow&gt;
&lt;/filter&gt;
&lt;vCard&gt;
&lt;FN&gt;Jabber Server&lt;/FN&gt;
&lt;DESC&gt;A Jabber Server!&lt;/DESC&gt;
&lt;URL&gt;<A HREF="http://foo.bar/&lt;/URL">http://foo.bar/&lt;/URL</A>&gt;
&lt;/vCard&gt;
&lt;register notify='yes'&gt;
&lt;instructions&gt;Choose a username and password to register with this server.&lt;/instructions&gt;
&lt;name/&gt;
&lt;email/&gt;
&lt;/register&gt;
&lt;welcome&gt;
&lt;subject&gt;Welcome!&lt;/subject&gt;
&lt;body&gt;Welcome to the Jabber server at localhost -- we hope you enjoy this service! For information&lt;/body&gt;
&lt;/welcome&gt;
&lt;vcard2jud/&gt;
&lt;browse&gt;
&lt;service type='jud' jid='users.jabber.org' name='Jabber User Directory'&gt;
&lt;ns&gt;jabber:iq:search&lt;/ns&gt;
&lt;ns&gt;jabber:iq:register&lt;/ns&gt;
&lt;/service&gt;
&lt;/br
Tue May  8 10:57:51 2001  jsm.c:117 jsm: loading module mod_echo
Tue May  8 10:57:51 2001  modules.c:68 mapi_register 2 1958D0
Tue May  8 10:57:51 2001  jsm.c:117 jsm: loading module mod_roster
Tue May  8 10:57:51 2001  modules.c:68 mapi_register 0 195910
Tue May  8 10:57:51 2001  modules.c:68 mapi_register 3 195950
Tue May  8 10:57:51 2001  jsm.c:117 jsm: loading module mod_time
Tue May  8 10:57:51 2001  modules.c:68 mapi_register 2 195990
Tue May  8 10:57:51 2001  jsm.c:117 jsm: loading module mod_vcard
Tue May  8 10:57:51 2001  modules.c:68 mapi_register 0 1959D0
Tue May  8 10:57:51 2001  modules.c:68 mapi_register 1 195A10
Tue May  8 10:57:51 2001  modules.c:68 mapi_register 2 195A50
Tue May  8 10:57:51 2001  jsm.c:117 jsm: loading module mod_last
Tue May  8 10:57:51 2001  mod_last initing
Tue May  8 10:57:51 2001  util.c:92 config query register
Tue May  8 10:57:51 2001  modules.c:68 mapi_register 6 195A90
Tue May  8 10:57:51 2001  modules.c:68 mapi_register 0 195AD0
Tue May  8 10:57:51 2001  modules.c:68 mapi_register 1 195B10
Tue May  8 10:57:51 2001  modules.c:68 mapi_register 2 195B50
Tue May  8 10:57:51 2001  jsm.c:117 jsm: loading module mod_version
Tue May  8 10:57:51 2001  modules.c:68 mapi_register 2 195B90
Tue May  8 10:57:51 2001  util.c:92 config query update
Tue May  8 10:57:51 2001  jsm.c:117 jsm: loading module mod_announce
Tue May  8 10:57:51 2001  modules.c:68 mapi_register 2 195C00
Tue May  8 10:57:51 2001  modules.c:68 mapi_register 0 195C40
Tue May  8 10:57:51 2001  jsm.c:117 jsm: loading module mod_agents
Tue May  8 10:57:51 2001  mod_agents init
Tue May  8 10:57:51 2001  modules.c:68 mapi_register 2 195C80
Tue May  8 10:57:51 2001  modules.c:68 mapi_register 0 195CC0
Tue May  8 10:57:51 2001  jsm.c:117 jsm: loading module mod_browse
Tue May  8 10:57:51 2001  modules.c:68 mapi_register 0 195D00
Tue May  8 10:57:51 2001  modules.c:68 mapi_register 1 195D40
Tue May  8 10:57:51 2001  modules.c:68 mapi_register 2 195D80
Tue May  8 10:57:51 2001  jsm.c:117 jsm: loading module mod_admin
Tue May  8 10:57:51 2001  modules.c:68 mapi_register 2 195DC0
Tue May  8 10:57:51 2001  modules.c:68 mapi_register 2 195E00
Tue May  8 10:57:51 2001  jsm.c:117 jsm: loading module mod_filter
Tue May  8 10:57:51 2001  modules.c:68 mapi_register 3 195E40
Tue May  8 10:57:51 2001  modules.c:68 mapi_register 0 195E80
Tue May  8 10:57:51 2001  util.c:92 config query filter
Tue May  8 10:57:51 2001  mod_filter mod_filter startup up... default server rule: &lt;query xmlns='jabber:iq:filter'/&gt;
Tue May  8 10:57:51 2001  jsm.c:117 jsm: loading module mod_offline
Tue May  8 10:57:51 2001  mod_offline init
Tue May  8 10:57:51 2001  modules.c:68 mapi_register 1 196310
Tue May  8 10:57:51 2001  modules.c:68 mapi_register 0 196350
Tue May  8 10:57:51 2001  jsm.c:117 jsm: loading module mod_presence
Tue May  8 10:57:51 2001  mod_presence init
Tue May  8 10:57:51 2001  modules.c:68 mapi_register 3 196390
Tue May  8 10:57:51 2001  modules.c:68 mapi_register 0 1963D0
Tue May  8 10:57:51 2001  jsm.c:117 jsm: loading module mod_auth_plain
Tue May  8 10:57:51 2001  mod_auth_plain init
Tue May  8 10:57:51 2001  modules.c:68 mapi_register 5 196410
Tue May  8 10:57:51 2001  modules.c:68 mapi_register 2 196450
Tue May  8 10:57:51 2001  util.c:92 config query register
Tue May  8 10:57:51 2001  modules.c:68 mapi_register 6 196490
Tue May  8 10:57:51 2001  jsm.c:117 jsm: loading module mod_auth_digest
Tue May  8 10:57:51 2001  mod_auth_digest init
Tue May  8 10:57:51 2001  modules.c:68 mapi_register 5 1964D0
Tue May  8 10:57:51 2001  jsm.c:117 jsm: loading module mod_auth_0k
Tue May  8 10:57:51 2001  mod_auth_0k initing
Tue May  8 10:57:51 2001  modules.c:68 mapi_register 5 196510
Tue May  8 10:57:51 2001  modules.c:68 mapi_register 2 196550
Tue May  8 10:57:51 2001  util.c:92 config query register
Tue May  8 10:57:51 2001  modules.c:68 mapi_register 6 196590
Tue May  8 10:57:51 2001  jsm.c:117 jsm: loading module mod_log
Tue May  8 10:57:51 2001  mod_log.c:55 init
Tue May  8 10:57:51 2001  modules.c:68 mapi_register 0 1965D0
Tue May  8 10:57:51 2001  jsm.c:117 jsm: loading module mod_register
Tue May  8 10:57:51 2001  mod_register init
Tue May  8 10:57:51 2001  modules.c:68 mapi_register 6 196610
Tue May  8 10:57:51 2001  modules.c:68 mapi_register 2 196650
Tue May  8 10:57:51 2001  jsm.c:117 jsm: loading module mod_xml
Tue May  8 10:57:51 2001  modules.c:68 mapi_register 0 196690
Tue May  8 10:57:51 2001  modules.c:68 mapi_register 1 1966D0
Tue May  8 10:57:51 2001  deliver.c:277 Registering xdb with instance xdb
Tue May  8 10:57:51 2001  deliver.c:277 Registering * with instance xdb
Tue May  8 10:57:51 2001  xdb_file.c:275 xdb_file loading
Tue May  8 10:57:51 2001  deliver.c:235 @-internal processing &lt;xdb type='get' to='<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">config at -internal</A>' from='xdb' ns='jabber:config:xdb_file' id='0'/&gt;
Tue May  8 10:57:51 2001  deliver.c:651 delivering to instance 'xdb'
Tue May  8 10:57:51 2001  xdb.c:41 xdb_results checking xdb packet &lt;xdb type='result' to='xdb' from='<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">config at -internal</A>' ns='jabber:config:xdb_file' id='0'&gt;&lt;xdb_file xmlns='jabber:config:xdb_file'&gt;
&lt;spool&gt;spool&lt;/spool&gt;
&lt;/xdb_file&gt;&lt;/xdb&gt;
Tue May  8 10:57:51 2001  deliver.c:277 Registering c2s with instance c2s
Tue May  8 10:57:51 2001  client.c:440 pthsock_client loading
Tue May  8 10:57:51 2001  deliver.c:235 @-internal processing &lt;xdb type='get' to='<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">config at -internal</A>' from='c2s' ns='jabber:config:pth-csock' id='0'/&gt;
Tue May  8 10:57:51 2001  deliver.c:651 delivering to instance 'c2s'
Tue May  8 10:57:51 2001  xdb.c:41 xdb_results checking xdb packet &lt;xdb type='result' to='c2s' from='<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">config at -internal</A>' ns='jabber:config:pth-csock' id='0'&gt;&lt;pthcsock xmlns='jabber:config:pth-csock'&gt;
&lt;authtime/&gt;
&lt;karma&gt;
&lt;init&gt;10&lt;/init&gt;
&lt;max&gt;10&lt;/max&gt;
&lt;inc&gt;1&lt;/inc&gt;
&lt;dec&gt;1&lt;/dec&gt;
&lt;penalty&gt;-6&lt;/penalty&gt;
&lt;restore&gt;10&lt;/restore&gt;
&lt;/karma&gt;
&lt;ip port='5222'/&gt;
&lt;/pthcsock&gt;&lt;/xdb&gt;
Tue May  8 10:57:51 2001  mio.c:1116 io_select to listen on 5222 [(null)]
Tue May  8 10:57:51 2001  mio.c:1140 io_select starting to listen on 5222 [(null)]
Tue May  8 10:57:51 2001  deliver.c:277 Registering elogger with instance elogger
Tue May  8 10:57:51 2001  deliver.c:277 Registering * with instance elogger
Tue May  8 10:57:51 2001  deliver.c:383 Registering logtype * with instance elogger
Tue May  8 10:57:51 2001  base_format.c:112 base_format configuring instance elogger 
Tue May  8 10:57:51 2001  base_file.c:80 base_file configuring instance elogger
Tue May  8 10:57:51 2001  base_stderr.c:64 base_stderr configuring instnace elogger
Tue May  8 10:57:51 2001  deliver.c:277 Registering rlogger with instance rlogger
Tue May  8 10:57:51 2001  deliver.c:277 Registering * with instance rlogger
Tue May  8 10:57:51 2001  deliver.c:383 Registering logtype record with instance rlogger
Tue May  8 10:57:51 2001  base_format.c:112 base_format configuring instance rlogger 
Tue May  8 10:57:51 2001  base_file.c:80 base_file configuring instance rlogger
Tue May  8 10:57:51 2001  deliver.c:277 Registering dnsrv with instance dnsrv
Tue May  8 10:57:51 2001  deliver.c:277 Registering * with instance dnsrv
Tue May  8 10:57:51 2001  deliver.c:235 @-internal processing &lt;xdb type='get' to='<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">config at -internal</A>' from='dnsrv' ns='jabber:config:dnsrv' id='0'/&gt;
Tue May  8 10:57:51 2001  deliver.c:651 delivering to instance 'dnsrv'
Tue May  8 10:57:51 2001  xdb.c:41 xdb_results checking xdb packet &lt;xdb type='result' to='dnsrv' from='<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">config at -internal</A>' ns='jabber:config:dnsrv' id='0'&gt;&lt;dnsrv xmlns='jabber:config:dnsrv'&gt;
&lt;resend service='_jabber._tcp'&gt;s2s&lt;/resend&gt; &lt;resend&gt;s2s&lt;/resend&gt;
&lt;/dnsrv&gt;&lt;/xdb&gt;
Tue May  8 10:57:51 2001  dnsrv.c:536 dnsrv debug: &lt;dnsrv xmlns='jabber:config:dnsrv'&gt;
&lt;resend service='_jabber._tcp'&gt;s2s&lt;/resend&gt; &lt;resend&gt;s2s&lt;/resend&gt;
&lt;/dnsrv&gt;

Tue May  8 10:57:51 2001  dnsrv.c:132 DNSRV CHILD: starting
Tue May  8 10:57:51 2001  mio.c:624 socket 5 has restore karma -100 -=&gt; 10
Tue May  8 10:57:51 2001  deliver.c:277 Registering s2s with instance s2s
Tue May  8 10:57:51 2001  dialback.c:265 dialback loading
Tue May  8 10:57:51 2001  deliver.c:235 @-internal processing &lt;xdb type='get' to='<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">config at -internal</A>' from='s2s' ns='jabber:config:dialback' id='0'/&gt;
Tue May  8 10:57:51 2001  deliver.c:651 delivering to instance 's2s'
Tue May  8 10:57:51 2001  xdb.c:41 xdb_results checking xdb packet &lt;xdb type='result' to='s2s' from='<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">config at -internal</A>' ns='jabber:config:dialback' id='0'&gt;&lt;dialback xmlns='jabber:config:dialback'&gt;
&lt;legacy/&gt;
&lt;ip port='5269'/&gt;
&lt;karma&gt;
&lt;init&gt;50&lt;/init&gt;
&lt;max&gt;50&lt;/max&gt;
&lt;inc&gt;4&lt;/inc&gt;
&lt;dec&gt;1&lt;/dec&gt;
&lt;penalty&gt;-5&lt;/penalty&gt;
&lt;restore&gt;50&lt;/restore&gt;
&lt;/karma&gt;
&lt;/dialback&gt;&lt;/xdb&gt;
Tue May  8 10:57:51 2001  mio.c:1116 io_select to listen on 5269 [(null)]
Tue May  8 10:57:51 2001  dnsrv.c:147 DNSRV CHILD: Read from buffer: &lt;stream&gt;
Tue May  8 10:57:51 2001  mio.c:1140 io_select starting to listen on 5269 [(null)]
Tue May  8 10:57:51 2001  mio.c:624 socket 8 has restore karma -100 -=&gt; 50
Tue May  8 10:58:00 2001  mio.c:368 _mio_accept calling accept on fd #5
Tue May  8 10:58:00 2001  mio.c:395 new socket accepted (fd: 11, ip: 192.168.168.50, port: 49261)
Tue May  8 10:58:01 2001  mio.c:698 MIO read from socket 11: &lt;?xml version=&quot;1.0&quot;?&gt;&lt;stream:stream to=&quot;coolserver&quot; xmlns:stream=&quot;<A HREF="http://etherx.jabber.org/streams&quot;">http://etherx.jabber.org/streams&quot;</A> xmlns=&quot;jabber:client&quot;&gt;

Tue May  8 10:58:01 2001  client.c:243 pthsock_client_read called with: m:1A2A00 flag:2 arg:1A2B10
Tue May  8 10:58:01 2001  client.c:276 root received for 11
Tue May  8 10:58:01 2001  mio.c:908 mio_write called on x: 0 buffer: 
Tue May  8 10:58:01 2001  mio.c:268 write_dump writing data: &lt;?xml version='1.0'?&gt;&lt;stream:stream xmlns:stream='<A HREF="http://etherx.jabber.org/streams'">http://etherx.jabber.org/streams'</A> id='3AF833A9' xmlns='jabber:client' from='coolserver'&gt;
Tue May  8 10:58:07 2001  mio.c:698 MIO read from socket 11: &lt;iq id=&quot;011&quot; type=&quot;set&quot;&gt;

Tue May  8 10:58:07 2001  mio.c:698 MIO read from socket 11: &lt;query xmlns=&quot;jabber:iq:auth&quot;&gt;
        &lt;username&gt;slunati&lt;/username&gt;
        &lt;password&gt;password&lt;/password&gt;
        &lt;resource&gt;test&lt;/resource&gt;
&lt;/query&gt;
&lt;/iq&gt;

Tue May  8 10:58:07 2001  client.c:243 pthsock_client_read called with: m:1A2A00 flag:3 arg:1A2B10
Tue May  8 10:58:07 2001  deliver.c:460 DELIVER 4:coolserver &lt;route type='auth' to='<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">slunati at coolserver</A>/test' from='<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">11 at c2s</A>/1A2A00'&gt;&lt;iq id='011' type='set'&gt;
&lt;query xmlns='jabber:iq:auth'&gt;
        &lt;username&gt;slunati&lt;/username&gt;
        &lt;password&gt;password&lt;/password&gt;
        &lt;resource&gt;test&lt;/resource&gt;
&lt;/query&gt;
&lt;/iq&gt;&lt;/route&gt;
Tue May  8 10:58:07 2001  deliver.c:651 delivering to instance 'sessions'
Tue May  8 10:58:07 2001  deliver.c:83 (191190)incoming packet &lt;route type='auth' to='<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">slunati at coolserver</A>/test' from='<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">11 at c2s</A>/1A2A00'&gt;&lt;iq id='011' type='set'&gt;
&lt;query xmlns='jabber:iq:auth'&gt;
        &lt;username&gt;slunati&lt;/username&gt;
        &lt;password&gt;password&lt;/password&gt;
        &lt;resource&gt;test&lt;/resource&gt;
&lt;/query&gt;
&lt;/iq&gt;&lt;/route&gt;
Tue May  8 10:58:07 2001  util.c:92 config query maxusers
Tue May  8 10:58:07 2001  deliver.c:89 creating user hash 246000 for coolserver
Tue May  8 10:58:07 2001  deliver.c:91 checking 246000
Tue May  8 10:58:07 2001  util.c:92 config query auth
Tue May  8 10:58:07 2001  mtq 218A00 starting
Tue May  8 10:58:07 2001  mtq 218A00 leaving to pth
Tue May  8 10:58:07 2001  mtq 218E20 starting
Tue May  8 10:58:07 2001  mtq 218E20 leaving to pth
Tue May  8 10:58:07 2001  mtq 219240 starting
Tue May  8 10:58:07 2001  mtq 219240 leaving to pth
Tue May  8 10:58:07 2001  mtq 219660 starting
Tue May  8 10:58:07 2001  mtq 219660 leaving to pth
Tue May  8 10:58:07 2001  mtq 219A80 starting
Tue May  8 10:58:07 2001  mtq 219A80 leaving to pth
Tue May  8 10:58:07 2001  mtq 219EA0 starting
Tue May  8 10:58:07 2001  mtq 219EA0 leaving to pth
Tue May  8 10:58:07 2001  mtq 218A00 entering from pth
Tue May  8 10:58:07 2001  mtq 218A00 one call 217028
Tue May  8 10:58:07 2001  authreg.c:52 auth request
Tue May  8 10:58:07 2001  users.c:137 js_user(<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">slunati at coolserver</A>,246000)
Tue May  8 10:58:07 2001  users.c:144 js_user not current
Tue May  8 10:58:07 2001  deliver.c:460 DELIVER 2:coolserver &lt;xdb type='get' to='<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">slunati at coolserver</A>' from='sessions' ns='jabber:iq:auth' id='1'/&gt;
Tue May  8 10:58:07 2001  deliver.c:651 delivering to instance 'xdb'
Tue May  8 10:58:07 2001  xdb_file.c:161 handling xdb request &lt;xdb type='get' to='<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">slunati at coolserver</A>' from='sessions' ns='jabber:iq:auth' id='1'/&gt;
Tue May  8 10:58:07 2001  xdb_file.c:98 loading spool/coolserver/slunati.xml
Tue May  8 10:58:07 2001  xdb_file.c:118 caching spool/coolserver/slunati.xml
Tue May  8 10:58:07 2001  deliver.c:460 DELIVER 1:sessions &lt;xdb type='result' to='sessions' from='<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">slunati at coolserver</A>' ns='jabber:iq:auth' id='1'&gt;&lt;password xmlns='jabber:iq:auth'&gt;password&lt;/password&gt;&lt;/xdb&gt;
Tue May  8 10:58:07 2001  deliver.c:651 delivering to instance 'sessions'
Tue May  8 10:58:07 2001  xdb.c:41 xdb_results checking xdb packet &lt;xdb type='result' to='sessions' from='<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">slunati at coolserver</A>' ns='jabber:iq:auth' id='1'&gt;&lt;password xmlns='jabber:iq:auth'&gt;password&lt;/password&gt;&lt;/xdb&gt;
Tue May  8 10:58:07 2001  users.c:162 js_user debug 21B500 21B500
Tue May  8 10:58:07 2001  modules.c:124 mapi_call 5
Tue May  8 10:58:07 2001  modules.c:147 MAPI 196410
Tue May  8 10:58:07 2001  mod_auth_plain checking
Tue May  8 10:58:07 2001  deliver.c:460 DELIVER 2:coolserver &lt;xdb type='get' to='<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">slunati at coolserver</A>' from='sessions' ns='jabber:iq:auth' id='2'/&gt;
Tue May  8 10:58:07 2001  deliver.c:651 delivering to instance 'xdb'
Tue May  8 10:58:07 2001  xdb_file.c:161 handling xdb request &lt;xdb type='get' to='<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">slunati at coolserver</A>' from='sessions' ns='jabber:iq:auth' id='2'/&gt;
Tue May  8 10:58:07 2001  xdb_file.c:98 loading spool/coolserver/slunati.xml
Tue May  8 10:58:07 2001  deliver.c:460 DELIVER 1:sessions &lt;xdb type='result' to='sessions' from='<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">slunati at coolserver</A>' ns='jabber:iq:auth' id='2'&gt;&lt;password xmlns='jabber:iq:auth'&gt;password&lt;/password&gt;&lt;/xdb&gt;
Tue May  8 10:58:07 2001  deliver.c:651 delivering to instance 'sessions'
Tue May  8 10:58:07 2001  xdb.c:41 xdb_results checking xdb packet &lt;xdb type='result' to='sessions' from='<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">slunati at coolserver</A>' ns='jabber:iq:auth' id='2'&gt;&lt;password xmlns='jabber:iq:auth'&gt;password&lt;/password&gt;&lt;/xdb&gt;
Tue May  8 10:58:07 2001  mod_auth_plain comparing password password
Tue May  8 10:58:07 2001  deliver.c:460 DELIVER 4:c2s &lt;route from='<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">slunati at coolserver</A>/test' to='<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">11 at c2s</A>/1A2A00' type='auth'&gt;&lt;iq id='011' type='result'/&gt;&lt;/route&gt;
Tue May  8 10:58:07 2001  deliver.c:651 delivering to instance 'c2s'
Tue May  8 10:58:07 2001  client.c:148 C2S: <A HREF="http://mail.jabber.org/mailman/listinfo/jdev">slunati at coolserver</A>/test has an active session, delivering packet
Tue May  8 10:58:07 2001  client.c:164 auth for user successful
Tue May  8 10:58:07 2001  client.c:167 C2S requesting Session Start for <A HREF="http://mail.jabber.org/mailman/listinfo/jdev">slunati at coolserver</A>/test
Tue May  8 10:58:07 2001  deliver.c:460 DELIVER 4:coolserver &lt;route type='session' to='<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">slunati at coolserver</A>/test' from='<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">11 at c2s</A>/1A2A00'/&gt;
Tue May  8 10:58:07 2001  deliver.c:651 delivering to instance 'sessions'
Tue May  8 10:58:07 2001  deliver.c:83 (191190)incoming packet &lt;route type='session' to='<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">slunati at coolserver</A>/test' from='<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">11 at c2s</A>/1A2A00'/&gt;
Tue May  8 10:58:07 2001  users.c:137 js_user(<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">slunati at coolserver</A>,246000)
Tue May  8 10:58:07 2001  sessions.c:79 session_create <A HREF="http://mail.jabber.org/mailman/listinfo/jdev">slunati at coolserver</A>/test
Tue May  8 10:58:07 2001  mtq.c:78 MTQ(new)
Tue May  8 10:58:07 2001  deliver.c:460 DELIVER 4:c2s &lt;route type='session' to='<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">11 at c2s</A>/1A2A00' from='<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">slunati at coolserver</A>/21BA00'/&gt;
Tue May  8 10:58:07 2001  deliver.c:651 delivering to instance 'c2s'
Tue May  8 10:58:07 2001  client.c:148 C2S: <A HREF="http://mail.jabber.org/mailman/listinfo/jdev">slunati at coolserver</A>/21BA00 has an active session, delivering packet
Tue May  8 10:58:07 2001  log.c:175 &lt;log type='record' from='<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">slunati at coolserver</A>'&gt;login ok 192.168.168.50 test&lt;/log&gt;
Tue May  8 10:58:07 2001  deliver.c:460 DELIVER 3:coolserver &lt;log type='record' from='<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">slunati at coolserver</A>'&gt;login ok 192.168.168.50 test&lt;/log&gt;
Tue May  8 10:58:07 2001  deliver.c:651 delivering to instance 'rlogger'
Tue May  8 10:58:07 2001  client.c:202 Writing packet to MIO: &lt;iq id='011' type='result'/&gt;
Tue May  8 10:58:07 2001  mio.c:908 mio_write called on x: 215D70 buffer: (null)
Tue May  8 10:58:07 2001  dnsrv.c:143 dnsrv: Read error on coprocess(1): 1 Operation not permitted
Tue May  8 10:58:07 2001  dnsrv.c:157 DNSRV CHILD: out of loop.. exiting normal
-----------------

It seems to crash when in mio.c we raise SIGUSR2 to force the socket write... but something is going wrong, and just crash the system.
Any helps welcome!

Stephane

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="007572.html">[JDEV] XHTML message draft support in Net::Jabber? (fwd)
</A></li>
	<LI>Next message: <A HREF="007575.html">[JDEV] making servers jabber aware
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7574">[ date ]</a>
              <a href="thread.html#7574">[ thread ]</a>
              <a href="subject.html#7574">[ subject ]</a>
              <a href="author.html#7574">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://mail.jabber.org/mailman/listinfo/jdev">More information about the JDev
mailing list</a><br>
</body></html>
