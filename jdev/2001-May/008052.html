<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [JDEV] Re: Large scale Jabber bots
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:jdev%40jabber.org?Subject=%5BJDEV%5D%20Re%3A%20Large%20scale%20Jabber%20bots&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="008050.html">
   <LINK REL="Next"  HREF="008057.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[JDEV] Re: Large scale Jabber bots</H1>
    <B>David Waite</B> 
    <A HREF="mailto:jdev%40jabber.org?Subject=%5BJDEV%5D%20Re%3A%20Large%20scale%20Jabber%20bots&In-Reply-To="
       TITLE="[JDEV] Re: Large scale Jabber bots">dwaite at jabber.com
       </A><BR>
    <I>Fri May 25 12:35:29 CDT 2001</I>
    <P><UL>
        <LI>Previous message: <A HREF="008050.html">[JDEV] Re: Large scale Jabber bots
</A></li>
        <LI>Next message: <A HREF="008057.html">[JDEV] Re: Large scale Jabber bots
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8052">[ date ]</a>
              <a href="thread.html#8052">[ thread ]</a>
              <a href="subject.html#8052">[ subject ]</a>
              <a href="author.html#8052">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Jens Alfke wrote:

&gt;<i> [I've retitled this thread...]
</I>&gt;<i>
</I>&gt;<i> On Friday, May 25, 2001, at 08:50 AM, David Waite wrote:
</I>&gt;<i>
</I>&gt;<i> &gt; IMO, mailservers should break if you try to send to more than ~20 people
</I>&gt;<i> &gt; at a time. Not crash, but refuse to send.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> What, all mailservers?! What about the ones that run mailing lists or
</I>&gt;<i> [voluntary] announcements? I've been on music mailing lists with thousands
</I>&gt;<i> of subscribers, and I get very useful &quot;what's new&quot; mailings from Amazon that
</I>&gt;<i> must have tens of thousands of readers.
</I>
I said IMO, and I didn't say I was going to go out and start trying to force
people to quota their users. If I had an open system such as hotmail, I
wouldn't want people to be able to create accounts and send out email to
400-500 people at a time - there just isn't any good reason to do it.

&gt;<i> &gt; Jabber should probably work
</I>&gt;<i> &gt; the same way in this case (200 users max in a roster or something
</I>&gt;<i> &gt; configurable like that)
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> Why on earth should that be a requirement? First off, it penalizes people
</I>&gt;<i> for something that's not their fault. What happens when I can't add a new
</I>&gt;<i> buddy because I happen to be on 195 people's rosters already?
</I>&gt;<i>
</I>
You get rid of them? Why do you keep people on your roster if you don't know
who they are?
Again, I didn't say it would be something that people were forced to do, but
there just isn't a good reason for someone to just have a thousand user roster;
at that point you should be implementing the logic some other way.

&gt;<i> Secondly, it ignores very useful aspects of Jabber for information delivery.
</I>&gt;<i> Stock price agents, auction agents, news agents, etc. Like I said before,
</I>&gt;<i> companies are slavering over the potential of this and having a viable open
</I>&gt;<i> IM network would make it much easier to do. These things are not spam,
</I>&gt;<i> they're voluntary since you have to subscribe to them. And they could scale
</I>&gt;<i> to zillions of users. Just read this article:
</I>
I'm very familiar with bots. I also know that the majority of bots do not
require presence information at all, all users do is query their services.

&gt;<i> So how many Radiohead fans do you think are going to subscribe to this bot?
</I>&gt;<i> What happens when ActiveBuddy builds ones for N'Sync or Eminem? Are you
</I>&gt;<i> saying this kind of thing is inherently wrong and should not be supported?
</I>&gt;<i>
</I>
Yes, as a standard client, and as any service not known to the administrator of
the box. If you are running a server, do you want some user to connect,
advertise their client as a bot, and start taking up memory and CPU usage to
the scale described below?

&gt;<i> &gt; Now imagine this is a portal with a quarter of a million users, and the
</I>&gt;<i> &gt; bot is added by default to everyone's roster. Not only would that roster
</I>&gt;<i> &gt; be about 25MB, there would be at least a 35MB memory image for the DOM
</I>&gt;<i> &gt; tree created.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> Those numbers aren't specific to having a bot, only to the size of the
</I>&gt;<i> portal itself. It makes no difference whether all 250,000 users have the
</I>&gt;<i> same bot in their rosters, or if their rosters all have different jids in
</I>&gt;<i> them. In other words, you're saying that for a portal of this size, there is
</I>&gt;<i> an average 35MB memory hit per roster entry per user -- so if the average
</I>&gt;<i> portal user has 20 people in their roster, that's 700MB just for rosters.
</I>&gt;<i>
</I>
35 MB per roster entry per user? where does that come from?

&gt;<i>
</I>&gt;<i> (That's a scary number but on the other hand 700MB of RAM is chump change
</I>&gt;<i> for a company big enough to run a portal this size. Something like $400? And
</I>&gt;<i> anyway, wouldn't the load be spread across a whole farm of servers, not just
</I>&gt;<i> one?)
</I>&gt;<i>
</I>
No, because this is connected as a user. How is one user session spread out
over a farm of machines? You would probably *want* a farm with a service this
popular, but you can't do that if you connect as a plain user.

&gt;<i> If you're saying is that the present Jabber server is not scalable to this
</I>&gt;<i> size portal, that's sort of bad news for Jabber, it sounds like, since no
</I>&gt;<i> large scale provider would adopt it.
</I>
I'm saying that you can't take protocol decisions made for an average roster
size of 10 and scale it to a roster size of a quarter million. I'm not saying
this is impossible, I'm saying that you have to approach it a different way.

Do you really think that normal clients should be allowed to grow to a roster
of several thousand users?

&gt;<i> In any case, this is a bogus scenario. Everyone seems to keep forgetting
</I>&gt;<i> that Jabber is supposed to be a distributed system; while there will be
</I>&gt;<i> large portals with large numbers of users, there will be large numbers of
</I>&gt;<i> smaller servers, as well as special purpose servers for bots. The likely
</I>&gt;<i> scenario is that a major bot would run on its own server (or perhaps there
</I>&gt;<i> would be a small number of bots) hosted by the company that owns it. There
</I>&gt;<i> would not be any appreciable number of actual users on this server. So
</I>&gt;<i> there's 25MB for the bot's roster; that's about $20 worth of RAM I think.
</I>&gt;<i> The other side of the overhead is distributed among the host servers of all
</I>&gt;<i> the subscribers, and has the same effect as of all the subscribers adding
</I>&gt;<i> one more friend to their buddy list.
</I>
If you are giving out a user address as the bot, it is a user; it cannot be
farmed, it cannot be distributed. Again, it has to be attacked another way.

-David Waite


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="008050.html">[JDEV] Re: Large scale Jabber bots
</A></li>
	<LI>Next message: <A HREF="008057.html">[JDEV] Re: Large scale Jabber bots
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8052">[ date ]</a>
              <a href="thread.html#8052">[ thread ]</a>
              <a href="subject.html#8052">[ subject ]</a>
              <a href="author.html#8052">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://mail.jabber.org/mailman/listinfo/jdev">More information about the JDev
mailing list</a><br>
</body></html>
