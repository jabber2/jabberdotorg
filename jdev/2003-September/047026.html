<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [JDEV] Online Roster Group
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:jdev%40jabber.org?Subject=Re%3A%20%5BJDEV%5D%20Online%20Roster%20Group&In-Reply-To=%3C000c01c3856b%24d84d5f10%24d7da4a42%40swbrown%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="047025.html">
   <LINK REL="Next"  HREF="047022.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[JDEV] Online Roster Group</H1>
    <B>Steven Brown</B> 
    <A HREF="mailto:jdev%40jabber.org?Subject=Re%3A%20%5BJDEV%5D%20Online%20Roster%20Group&In-Reply-To=%3C000c01c3856b%24d84d5f10%24d7da4a42%40swbrown%3E"
       TITLE="[JDEV] Online Roster Group">swbrown at ucsd.edu
       </A><BR>
    <I>Sat Sep 27 21:54:27 CDT 2003</I>
    <P><UL>
        <LI>Previous message: <A HREF="047025.html">[JDEV] Online Roster Group
</A></li>
        <LI>Next message: <A HREF="047022.html">[JDEV] MSN-T 1.2.8pre5
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#47026">[ date ]</a>
              <a href="thread.html#47026">[ thread ]</a>
              <a href="subject.html#47026">[ subject ]</a>
              <a href="author.html#47026">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
&gt;<i> -----Original Message-----
</I>&gt;<i> From: <A HREF="http://mail.jabber.org/mailman/listinfo/jdev">jdev-admin at jabber.org</A> [mailto:<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">jdev-admin at jabber.org</A>] On 
</I>&gt;<i> Behalf Of Ryan Hart
</I>&gt;<i> Sent: Saturday, September 27, 2003 5:45 AM
</I>&gt;<i> To: <A HREF="http://mail.jabber.org/mailman/listinfo/jdev">jdev at jabber.org</A>
</I>&gt;<i> Subject: RE: [JDEV] Online Roster Group
</I>
&gt;<i> After doing this, does the Jabber server continue to send 
</I>&gt;<i> presence messages
</I>&gt;<i> to indicate when they logoff, change status, etc.?
</I>
Yes, it works like presence for someone on your roster list. 

&gt;<i> So, let me see if I understand this, when 
</I>&gt;<i> your client
</I>&gt;<i> connects, you have it send one of these promiscuous messages 
</I>&gt;<i> to let all the
</I>&gt;<i> other connected users know you're available? That then gets 
</I>&gt;<i> forwarded to all
</I>&gt;<i> the currently connected clients. Does the newly connected 
</I>&gt;<i> client also get
</I>&gt;<i> notified of all the other users that were already logged in as well?
</I>
Every connected user on the same host is notified of presence from every
promiscuous user on the same host.  Barring the possibility of bugs in
my implementation, all the edge cases work as would be expected - just
like for buddies.

&gt;<i> This sounds pretty good, but I think this solution would 
</I>&gt;<i> create some other
</I>&gt;<i> problems for me. First, I doubt these promiscuous presence 
</I>&gt;<i> messages contain
</I>&gt;<i> additional information such as nickname?
</I>
Only the roster contains nickname.  Users who are not your buddy have no
nickname, as you must assign them one.  

&gt;<i> Do you just display 
</I>&gt;<i> the jid or jid
</I>&gt;<i> handle on the clients?
</I>
Currently, my client (will) display promiscuous users with the username
component of their jid.  Since they are all on the same server, there is
no need to display anything more.

 The handles in our database are not unique.
&gt;<i> Therefore, I use our unique numeric user_id for the jid, but 
</I>&gt;<i> always set the
</I>&gt;<i> nickname on roster entries so that something user friendly 
</I>&gt;<i> can be displayed.
</I>&gt;<i> More importantly, the roster query that returns roster items including
</I>&gt;<i> logged in users currently filters the logged in users. For 
</I>&gt;<i> example, for
</I>&gt;<i> legal reasons, I only show logged in users that match the 
</I>&gt;<i> requesting jid's
</I>&gt;<i> age group (&lt; 18 or &gt; 18). Since this is all handled in a 
</I>&gt;<i> stored procedure,
</I>&gt;<i> we could easily add additional filtering in the future as 
</I>&gt;<i> well (similar
</I>&gt;<i> interests, etc.). Using your approach, I would also be 
</I>&gt;<i> concerned that I
</I>&gt;<i> could start getting back too many logged in users? If the 
</I>&gt;<i> Jabber IM feature
</I>&gt;<i> becomes popular on our website, we might have hundreds of 
</I>&gt;<i> simultaneously
</I>&gt;<i> connected users. I would definitely want to filter that down to a more
</I>&gt;<i> reasonable number.
</I>
In your case, you would want the server to modify the roster, at least
what appears to be the roster (you don't actually have to modify the
roster to place a roster entry on the client).  This, and the filtering
you mention, could be done in the server when a promiscuous presence is
about to be sent to a client.

I will look into extracting a version of my promiscuous modification on
Monday.



</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="047025.html">[JDEV] Online Roster Group
</A></li>
	<LI>Next message: <A HREF="047022.html">[JDEV] MSN-T 1.2.8pre5
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#47026">[ date ]</a>
              <a href="thread.html#47026">[ thread ]</a>
              <a href="subject.html#47026">[ subject ]</a>
              <a href="author.html#47026">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://mail.jabber.org/mailman/listinfo/jdev">More information about the JDev
mailing list</a><br>
</body></html>
