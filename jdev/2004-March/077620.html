<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [jdev] High Volume &amp; Temporary Files
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:jdev%40jabber.org?Subject=Re%3A%20%5Bjdev%5D%20High%20Volume%20%26%20Temporary%20Files&In-Reply-To=%3C20040324205703.GC30511%40nbg2.amessage.info%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="077619.html">
   <LINK REL="Next"  HREF="077622.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[jdev] High Volume &amp; Temporary Files</H1>
    <B>Matthias Wimmer</B> 
    <A HREF="mailto:jdev%40jabber.org?Subject=Re%3A%20%5Bjdev%5D%20High%20Volume%20%26%20Temporary%20Files&In-Reply-To=%3C20040324205703.GC30511%40nbg2.amessage.info%3E"
       TITLE="[jdev] High Volume &amp; Temporary Files">m at tthias.net
       </A><BR>
    <I>Wed Mar 24 14:57:03 CST 2004</I>
    <P><UL>
        <LI>Previous message: <A HREF="077619.html">[SPAM] - Re: [jdev] High Volume &amp; Temporary Files - Sending mail	server found on dnsbl.njabl.org
</A></li>
        <LI>Next message: <A HREF="077622.html">[jdev] Default Installation
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#77620">[ date ]</a>
              <a href="thread.html#77620">[ thread ]</a>
              <a href="subject.html#77620">[ subject ]</a>
              <a href="author.html#77620">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Dave!

Dave Jarvis schrieb am 2004-03-23 16:08:45:
&gt;<i> 1) Copy all XML elements in the testing.xml file into the temporary 
</I>&gt;<i> file, up until the closing elements.
</I>&gt;<i> 2) Append the new message onto the end of the temporary file.
</I>&gt;<i> 3) Write the closing elements.
</I>&gt;<i> 4) Rename the temporary file over the existing file.
</I>
It's a but worse. Not just reading up to the end, adding and closing.
It starts with parsing the XML file, appending the new message in memory
and writing the complete XML tree to the disk again.

&gt;<i> If the file can be locked, I would recommend changing the algorithm:
</I>&gt;<i> 1) Read from the end of the file until the last message
</I>&gt;<i> 2) Truncate the file from the end of that message
</I>&gt;<i> 3) Write the new message
</I>&gt;<i> 4) Write whatever was truncated
</I>
That works well with binary files, but its hard to implement this in XML
fashion. If you need that many messages, it's really better to use an
other storage backend as Maqi proposed.


Tot kijk
    Matthias
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 189 bytes
Desc: Digital signature
URL: &lt;<A HREF="https://www.jabber.org/jdev/attachments/20040324/4c354ea5/attachment-0002.pgp">https://www.jabber.org/jdev/attachments/20040324/4c354ea5/attachment-0002.pgp</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="077619.html">[SPAM] - Re: [jdev] High Volume &amp; Temporary Files - Sending mail	server found on dnsbl.njabl.org
</A></li>
	<LI>Next message: <A HREF="077622.html">[jdev] Default Installation
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#77620">[ date ]</a>
              <a href="thread.html#77620">[ thread ]</a>
              <a href="subject.html#77620">[ subject ]</a>
              <a href="author.html#77620">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://mail.jabber.org/mailman/listinfo/jdev">More information about the JDev
mailing list</a><br>
</body></html>
