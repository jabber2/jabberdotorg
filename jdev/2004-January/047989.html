<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [JDEV] Re: jabberd 1.4.2 chokes on its own log file
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:jdev%40jabber.org?Subject=Re%3A%20%5BJDEV%5D%20Re%3A%20jabberd%201.4.2%20chokes%20on%20its%20own%20log%20file&In-Reply-To=%3Cbuugtq%24nhl%241%40sea.gmane.org%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="047988.html">
   <LINK REL="Next"  HREF="047992.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[JDEV] Re: jabberd 1.4.2 chokes on its own log file</H1>
    <B>Frank Seesink</B> 
    <A HREF="mailto:jdev%40jabber.org?Subject=Re%3A%20%5BJDEV%5D%20Re%3A%20jabberd%201.4.2%20chokes%20on%20its%20own%20log%20file&In-Reply-To=%3Cbuugtq%24nhl%241%40sea.gmane.org%3E"
       TITLE="[JDEV] Re: jabberd 1.4.2 chokes on its own log file">frank at mail.wvnet.edu
       </A><BR>
    <I>Sat Jan 24 13:26:46 CST 2004</I>
    <P><UL>
        <LI>Previous message: <A HREF="047988.html">[JDEV] Gabber 2: 1.9.3 Preview Release
</A></li>
        <LI>Next message: <A HREF="047992.html">[JDEV] Building CVS Jabberd2 on FreeBSD
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#47989">[ date ]</a>
              <a href="thread.html#47989">[ thread ]</a>
              <a href="subject.html#47989">[ subject ]</a>
              <a href="author.html#47989">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Sydney,

This is a replay to a 6 month old post of yours (I'm in a weird mood, 
going through the mailing list postings, and ran across this), so please 
ignore if you're already aware of this.

But in short, if you haven't seen it, please check this posting I wrote 
on 3 Nov 2003 regarding this very same subject (relevant info near end 
of post).  The URL to Gmane's Web-based version is here:

	<A HREF="http://article.gmane.org/gmane.network.jabber.devel/20441">http://article.gmane.org/gmane.network.jabber.devel/20441</A>

and maqi's response:

	<A HREF="http://article.gmane.org/gmane.network.jabber.devel/20442">http://article.gmane.org/gmane.network.jabber.devel/20442</A>

In short, this was a bug which was fixed in jabberd 1.4.3.  If you 
haven't already upgraded to jabberd2, or have reasons for staying with 
jabberd 1.4.x and are still running 1.4.2, I would strongly suggest 
upgrading to 1.4.3.


Sydney Weidman wrote:

&gt;<i> On Thu, 2003-07-31 at 10:11, Jamin W. Collins wrote:
</I>&gt;<i> 
</I>&gt;&gt;<i>On Thu, Jul 31, 2003 at 12:13:09AM -0500, Sydney Weidman wrote:
</I>&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>/var/log/jabberd/error.log filesize: 2147483647 bytes.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>Jabberd filled this file up with a billion lines like this:
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>[warn] (mio_ssl.c:225): SSL accept without an IP
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>and then died from SIGXFSZ
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>This is a terrific security feature :-)
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>Have I missed a FAQ somewhere?
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>I am trying to just run jabber on my local lan, so the server doesn't
</I>&gt;&gt;&gt;<i>have a FQDN. Is that the problem?
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>Out of ideas and disk space.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>You might want to take a look into _logrotate_.  I added a script to it
</I>&gt;&gt;<i>for the Debian Jabber package a while ago:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>   /var/log/jabber/*.log {
</I>&gt;&gt;<i>      rotate 5
</I>&gt;&gt;<i>      size=100k
</I>&gt;&gt;<i>      copytruncate
</I>&gt;&gt;<i>      delaycompress
</I>&gt;&gt;<i>      compress
</I>&gt;&gt;<i>   }
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> Yes, thanks for the suggestion. I should set that up. But unfortunately,
</I>&gt;<i> it wouldn't have helped because logrotate is normally run only daily
</I>&gt;<i> from a cron job, while this log filled up in a matter of an hour or two.
</I>&gt;<i> I had only just started the daemon when i was suddenly logged out of
</I>&gt;<i> jabber and everything died.
</I>&gt;<i> 
</I>&gt;<i> Also, I am still curious why 
</I>&gt;<i> 
</I>&gt;<i> a) so many instances of this log message have to be written and 
</I>&gt;<i> b) what the message actually means in terms of my configuration
</I>&gt;<i> 
</I>&gt;<i> I wonder if one could implement a 'speed limit' for writing to log
</I>&gt;<i> files. I don't know if other programs have such things to prevent
</I>&gt;<i> runaway operation. Perhaps this is better left to the operating system
</I>&gt;<i> or corrected or managed by external utilities like logrotate.
</I>

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="047988.html">[JDEV] Gabber 2: 1.9.3 Preview Release
</A></li>
	<LI>Next message: <A HREF="047992.html">[JDEV] Building CVS Jabberd2 on FreeBSD
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#47989">[ date ]</a>
              <a href="thread.html#47989">[ thread ]</a>
              <a href="subject.html#47989">[ subject ]</a>
              <a href="author.html#47989">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://mail.jabber.org/mailman/listinfo/jdev">More information about the JDev
mailing list</a><br>
</body></html>
