<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [JDEV] Parent PID changed, exiting...
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:jdev%40jabber.org?Subject=%5BJDEV%5D%20Parent%20PID%20changed%2C%20exiting...&In-Reply-To=1256683.981999244622.JavaMail.buckrogers1965%40gomailjtp05">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="006177.html">
   <LINK REL="Next"  HREF="006181.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[JDEV] Parent PID changed, exiting...</H1>
    <B>Thomas Muldowney</B> 
    <A HREF="mailto:jdev%40jabber.org?Subject=%5BJDEV%5D%20Parent%20PID%20changed%2C%20exiting...&In-Reply-To=1256683.981999244622.JavaMail.buckrogers1965%40gomailjtp05"
       TITLE="[JDEV] Parent PID changed, exiting...">temas at box5.net
       </A><BR>
    <I>Mon Feb 12 13:13:21 CST 2001</I>
    <P><UL>
        <LI>Previous message: <A HREF="006177.html">[JDEV] Parent PID changed, exiting...
</A></li>
        <LI>Next message: <A HREF="006181.html">[JDEV] Parent PID changed, exiting...
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6178">[ date ]</a>
              <a href="thread.html#6178">[ thread ]</a>
              <a href="subject.html#6178">[ subject ]</a>
              <a href="author.html#6178">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>It's possible that it's legacy code from 1.2, but I'm not sure.  It was missed
by all of us as jabber.org runs in scripts to capture all the debug output, we
apologize.

--temas

On Mon, Feb 12, 2001 at 09:34:04AM -0800, james rogers wrote:
&gt;<i> In the jabber-1.4RC/jabberd/base direcrtory in a file called base_stdout.c on line 51 is the function that was added for jabberd version 1.4 (i.e. not found in jabberd 1.2).  This is the function that is needless and causing the server to exit when it's parent process is changed.o
</I>&gt;<i> 
</I>&gt;<i> Here it is:
</I>&gt;<i> 
</I>&gt;<i> result base_stdout_heartbeat(void *arg)
</I>&gt;<i> {
</I>&gt;<i>     static int parent = 0;
</I>&gt;<i> 
</I>&gt;<i>     if(parent == 0) parent = getppid();
</I>&gt;<i> 
</I>&gt;<i>     if(parent != getppid())
</I>&gt;<i>     {
</I>&gt;<i>         /* parent pid has changed, bail */
</I>&gt;<i>         log_alert(&quot;stdout&quot;,&quot;Parent PID has changed, Server Exiting&quot;);
</I>&gt;<i>         exit(1);
</I>&gt;<i>     }
</I>&gt;<i> 
</I>&gt;<i>     return r_DONE;
</I>&gt;<i> }
</I>&gt;<i> 
</I>&gt;<i> I am guessing that if we change it to the following that we will keep running when we logout of the shell...
</I>&gt;<i> 
</I>&gt;<i> result base_stdout_heartbeat(void *arg)
</I>&gt;<i> {
</I>&gt;<i>     return r_DONE;
</I>&gt;<i> }
</I>&gt;<i> 
</I>&gt;<i> But before I do this in my own installation...  Why was this check added?  What are we actually checking for here and is there another way to do the same check?
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> ___________________________________________________
</I>&gt;<i> GO.com Mail                                    
</I>&gt;<i> Get Your Free, Private E-mail at <A HREF="http://mail.go.com">http://mail.go.com</A>
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> _______________________________________________
</I>&gt;<i> jdev mailing list
</I>&gt;<i> <A HREF="http://mail.jabber.org/mailman/listinfo/jdev">jdev at jabber.org</A>
</I>&gt;<i> <A HREF="http://mailman.jabber.org/listinfo/jdev">http://mailman.jabber.org/listinfo/jdev</A>
</I>-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 232 bytes
Desc: not available
Url : <A HREF="https://www.jabber.org/jdev/attachments/20010212/7cd8855b/attachment.pgp">https://www.jabber.org/jdev/attachments/20010212/7cd8855b/attachment.pgp</A> 
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="006177.html">[JDEV] Parent PID changed, exiting...
</A></li>
	<LI>Next message: <A HREF="006181.html">[JDEV] Parent PID changed, exiting...
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6178">[ date ]</a>
              <a href="thread.html#6178">[ thread ]</a>
              <a href="subject.html#6178">[ subject ]</a>
              <a href="author.html#6178">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://mail.jabber.org/mailman/listinfo/jdev">More information about the JDev
mailing list</a><br>
</body></html>
