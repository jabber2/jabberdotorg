<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [jdev] rfc3920 document: use of TLS
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:jdev%40jabber.org?Subject=%5Bjdev%5D%20rfc3920%20document%3A%20use%20of%20TLS&In-Reply-To=3eb0429d05072212021c76f663%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="022307.html">
   <LINK REL="Next"  HREF="022317.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[jdev] rfc3920 document: use of TLS</H1>
    <B>Chris Chen</B> 
    <A HREF="mailto:jdev%40jabber.org?Subject=%5Bjdev%5D%20rfc3920%20document%3A%20use%20of%20TLS&In-Reply-To=3eb0429d05072212021c76f663%40mail.gmail.com"
       TITLE="[jdev] rfc3920 document: use of TLS">ckchris at idream.net
       </A><BR>
    <I>Fri Jul 22 14:15:48 CDT 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="022307.html">[jdev] rfc3920 document: use of TLS
</A></li>
        <LI>Next message: <A HREF="022317.html">[jdev] rfc3920 document: use of TLS
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22308">[ date ]</a>
              <a href="thread.html#22308">[ thread ]</a>
              <a href="subject.html#22308">[ subject ]</a>
              <a href="author.html#22308">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>If the server does not enable TLS, then it should not even broadcast  
the &lt;starttls&gt; feature namespace within the &lt;stream:features&gt;  
element.  Thus, in your client, you should double check first if the  
feature exists before proceeding with the TLS negotiation.

However, if you DO proceed with TLS and the server does not support  
it, then I would think it's reasonable for the server to return a  
&lt;failure&gt; and disconnect the connection.

Thanks,
Chris

On Jul 22, 2005, at 12:02 PM, David Waite wrote:

&gt;<i> how about the server deployment not being enabled with TLS? Would that
</I>&gt;<i> also result in failure (if the client ignored the server capabilities
</I>&gt;<i> because it is configured to require TLS)?
</I>&gt;<i>
</I>&gt;<i> -David Waite
</I>&gt;<i>
</I>&gt;<i> On 7/22/05, Peter Saint-Andre &lt;<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">stpeter at jabber.org</A>&gt; wrote:
</I>&gt;<i>
</I>&gt;&gt;<i> Chen, Hao wrote:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> In the rfc3920 document (XMPP: Core), section 5.2 Narrative, step 5
</I>&gt;&gt;&gt;<i> states that: &quot;The receiving entity MUST reply with either a  
</I>&gt;&gt;&gt;<i> &lt;proceed/&gt;
</I>&gt;&gt;&gt;<i> element or a &lt;failure/&gt; element...&quot;
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> My question is upon what conditions the receiving entity replies  
</I>&gt;&gt;&gt;<i> with
</I>&gt;&gt;&gt;<i> a &lt;proceed/&gt; and upon what conditions it replies with a &lt;failure/&gt;?
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Hmm, that could be better specified, eh? We'll have to fix that in
</I>&gt;&gt;<i> rfc3920bis.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I can see two reasons for returning a &lt;failure/&gt;:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> 1. The server is temporarily not prepared to offer TLS negotiation  
</I>&gt;&gt;<i> (some
</I>&gt;&gt;<i> internal server problem).
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> 2. The STARTTLS command is malformed (i.e., something other than
</I>&gt;&gt;<i> &lt;starttls xmlns='urn:ietf:params:xml:ns:xmpp-tls'/&gt; because the
</I>&gt;&gt;<i> namespace is wrong, there is XML character data contained in the
</I>&gt;&gt;<i> &lt;starttls/&gt; element, or whatever).
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Otherwise the server would return &lt;proceed/&gt;, I think.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Peter
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> --
</I>&gt;&gt;<i> Peter Saint-Andre
</I>&gt;&gt;<i> Jabber Software Foundation
</I>&gt;&gt;<i> <A HREF="http://www.jabber.org/people/stpeter.shtml">http://www.jabber.org/people/stpeter.shtml</A>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> _______________________________________________
</I>&gt;&gt;<i> jdev mailing list
</I>&gt;&gt;<i> <A HREF="http://mail.jabber.org/mailman/listinfo/jdev">jdev at jabber.org</A>
</I>&gt;&gt;<i> <A HREF="http://mail.jabber.org/mailman/listinfo/jdev">http://mail.jabber.org/mailman/listinfo/jdev</A>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> jdev mailing list
</I>&gt;<i> <A HREF="http://mail.jabber.org/mailman/listinfo/jdev">jdev at jabber.org</A>
</I>&gt;<i> <A HREF="http://mail.jabber.org/mailman/listinfo/jdev">http://mail.jabber.org/mailman/listinfo/jdev</A>
</I>&gt;<i>
</I>

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="022307.html">[jdev] rfc3920 document: use of TLS
</A></li>
	<LI>Next message: <A HREF="022317.html">[jdev] rfc3920 document: use of TLS
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22308">[ date ]</a>
              <a href="thread.html#22308">[ thread ]</a>
              <a href="subject.html#22308">[ subject ]</a>
              <a href="author.html#22308">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://mail.jabber.org/mailman/listinfo/jdev">More information about the JDev
mailing list</a><br>
</body></html>
