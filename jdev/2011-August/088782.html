<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [jdev] Expected behavior when a presence comes too early
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:jdev%40jabber.org?Subject=Re%3A%20%5Bjdev%5D%20Expected%20behavior%20when%20a%20presence%20comes%20too%20early&In-Reply-To=%3CCAGYOVV36nhAS%3Dn%2BhR-i6igxMXZ_-_ofBsbBar8gCbztA04Rh6A%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="088781.html">
   <LINK REL="Next"  HREF="088783.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[jdev] Expected behavior when a presence comes too early</H1>
    <B>Daniel Dormont</B> 
    <A HREF="mailto:jdev%40jabber.org?Subject=Re%3A%20%5Bjdev%5D%20Expected%20behavior%20when%20a%20presence%20comes%20too%20early&In-Reply-To=%3CCAGYOVV36nhAS%3Dn%2BhR-i6igxMXZ_-_ofBsbBar8gCbztA04Rh6A%40mail.gmail.com%3E"
       TITLE="[jdev] Expected behavior when a presence comes too early">dan at greywallsoftware.com
       </A><BR>
    <I>Wed Aug 24 22:50:42 UTC 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="088781.html">[jdev] Fwd: [Standards] request for reviews: XEP-0045 v1.25rc5
</A></li>
        <LI>Next message: <A HREF="088783.html">[jdev] Expected behavior when a presence comes too early
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#88782">[ date ]</a>
              <a href="thread.html#88782">[ thread ]</a>
              <a href="subject.html#88782">[ subject ]</a>
              <a href="author.html#88782">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi, in a BOSH application I'm developing, I accidentally allowed a
race condition in which the client would send a presence packet
(specifically a MUC presence, but I have a feeling that's not
germaine) before the session had been fully established. Specifically,
after connecting, the client would send an &quot;auth&quot; packet, but before
receiving the&#160;&lt;success xmlns='urn:ietf:params:xml:ns:xmpp-sasl'/&gt;
response, it would go ahead and send the presence.

I'm not an XMPP expert and so honestly I'm not entirely sure this is
even improper behavior, but if it is, what is the expected response
from the server? I ask because in Ejabberd's case it sends a
&lt;stream:error&gt; &lt;xml-not-well-formed
xmlns='urn:ietf:params:xml:ns:xmpp-streams'/&gt; response, which sent me
on a wild goose chase looking for malformed XML. If it's a bug in
Ejabberd I'm happy to pursue it there but first I wanted to understand
the expected behavior a little better.

thanks,
Dan
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="088781.html">[jdev] Fwd: [Standards] request for reviews: XEP-0045 v1.25rc5
</A></li>
	<LI>Next message: <A HREF="088783.html">[jdev] Expected behavior when a presence comes too early
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#88782">[ date ]</a>
              <a href="thread.html#88782">[ thread ]</a>
              <a href="subject.html#88782">[ subject ]</a>
              <a href="author.html#88782">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://mail.jabber.org/mailman/listinfo/jdev">More information about the JDev
mailing list</a><br>
</body></html>
