<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [JDEV] japanese characters in yahoo transport
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:jdev%40jabber.org?Subject=%5BJDEV%5D%20japanese%20characters%20in%20yahoo%20transport&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="008636.html">
   <LINK REL="Next"  HREF="008658.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[JDEV] japanese characters in yahoo transport</H1>
    <B>Martin Shadbolt</B> 
    <A HREF="mailto:jdev%40jabber.org?Subject=%5BJDEV%5D%20japanese%20characters%20in%20yahoo%20transport&In-Reply-To="
       TITLE="[JDEV] japanese characters in yahoo transport">martin at imahima.com
       </A><BR>
    <I>Fri Jun 29 01:18:06 CDT 2001</I>
    <P><UL>
        <LI>Previous message: <A HREF="008636.html">[JDEV] Commercial Success
</A></li>
        <LI>Next message: <A HREF="008658.html">[JDEV] japanese characters in yahoo transport
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8639">[ date ]</a>
              <a href="thread.html#8639">[ thread ]</a>
              <a href="subject.html#8639">[ subject ]</a>
              <a href="author.html#8639">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi All,

Background
=========
I am required to build a jabber client as a prototype to allow Japanese
chatting to any message system for an internal project in my company. I am
using java and swing as this supports Unicode and Japanese text entry can be
made. I am new to using Jabber.

 I can run my simple java client and connect to a jabber server (jabber.org)
as two different Users and communicate in Japanese ok.
&gt;<i>From the newsgroups I have read that the jabber server send XML packets
</I>using UTF8 encoding so in my case the sequence is

Sending
---------
Enter Japanese  message text (Java Unicode) &gt;&gt;&gt;&gt; build XML message (Unicode)
&gt;&gt;&gt;&gt;<i> send message (UTF8) &gt;&gt;&gt; jabber server routes message
</I>
Receiving
-----------
Receive XML message (UTF8) &gt;&gt;&gt;&gt; decode XML message (Java Unicode) &gt;&gt;&gt;&gt;
display message ok


Problem
======
When I now try and speak to a Yahoo client or a Yahoo client try's to talk
to me the message in Japanese is corrupted.

 I have tried the following, which have failed

1. Taken the XML byte stream received from jabber server,
2. Convert from UTF8 (default encoding for jabber messages) ,
3. Display the Unicode message (incorrect display)

4. Taken the XML byte stream received from jabber server,
5. Convert from UTF8 (default encoding for jabber messages),
6. Taken Unicode chars in the message::body tag ,convert into &quot;shift JIS
text
7. Display message (incorrect display)

My question is about the Yahoo transport. When it receives the native
message from Yahoo it builds the XML message. How does it then deal with the
bytes, which make up the message::body part?  Does it convert them into
Unicode? Just sent the chat message bytes, as is which implies the XML
message could have mixed encoding one for the xml file and one for the
message:: body tag?

If anybody has any suggestions on how I should encode/decode  the XML
message to send/receive messages to an external message system in Japanese
it would be a great help.

martin




</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="008636.html">[JDEV] Commercial Success
</A></li>
	<LI>Next message: <A HREF="008658.html">[JDEV] japanese characters in yahoo transport
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8639">[ date ]</a>
              <a href="thread.html#8639">[ thread ]</a>
              <a href="subject.html#8639">[ subject ]</a>
              <a href="author.html#8639">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://mail.jabber.org/mailman/listinfo/jdev">More information about the JDev
mailing list</a><br>
</body></html>
