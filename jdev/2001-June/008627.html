<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [JDEV] Strange server behaviour
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:jdev%40jabber.org?Subject=%5BJDEV%5D%20Strange%20server%20behaviour&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="008626.html">
   <LINK REL="Next"  HREF="008637.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[JDEV] Strange server behaviour</H1>
    <B>Gerard BUNEL</B> 
    <A HREF="mailto:jdev%40jabber.org?Subject=%5BJDEV%5D%20Strange%20server%20behaviour&In-Reply-To="
       TITLE="[JDEV] Strange server behaviour">gerard.bunel at ago.fr
       </A><BR>
    <I>Thu Jun 28 11:28:29 CDT 2001</I>
    <P><UL>
        <LI>Previous message: <A HREF="008626.html">[JDEV] Requesting presence of User not in Roster
</A></li>
        <LI>Next message: <A HREF="008637.html">[JDEV] Strange server behaviour
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8627">[ date ]</a>
              <a href="thread.html#8627">[ thread ]</a>
              <a href="subject.html#8627">[ subject ]</a>
              <a href="author.html#8627">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello,

I need some help on server side development.
I've writen a module in replacement to the standard mod_presence
The objective of this module is to route presence messages to a service
wich is writen in Java
using jabberbeans and the CONNECT mode.

So I wrote function to route some mesages

void route_packet(mapi m) {
  xmlnode node = xmlnode_dup(m-&gt;packet-&gt;x);
  node = xmlnode_wrap(node, &quot;route&quot;);
  xmlnode_put_attrib(node, &quot;to&quot;, packet_to);
  deliver(dpacket_new(node), m-&gt;si-&gt;i);
}

The result is that sometimes the message is correctly routed, sometimes
it is not at all and sometimes it
seems to hang up partially the server (other messages are not sent)

Is there a problem in my function ?
Is there a safety way to do it ?

Thanks for your help

Gerard BUNEL

--
<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">gerard.bunel at ago.fr</A> - Atlantide - <A HREF="http://www.ago.fr/atlantide/">http://www.ago.fr/atlantide/</A>
Technopole Brest Iroise BP 80802 - Site du Vernis - 29608 Brest cedex -
France
Tel. : +33 2 98 05 43 21 - Fax. : +33 2 98 05 20 34
e-mail: <A HREF="http://mail.jabber.org/mailman/listinfo/jdev">atlantide-brest at ago.fr</A>
Centre Affaires Oberthur - 74D, rue de Paris -  35700 Rennes - France
Tel. : +33 2 99 84 15 84 - Fax : +33 2 99 84 15 85
e-mail: <A HREF="http://mail.jabber.org/mailman/listinfo/jdev">atlantide-rennes at ago.fr</A>



</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="008626.html">[JDEV] Requesting presence of User not in Roster
</A></li>
	<LI>Next message: <A HREF="008637.html">[JDEV] Strange server behaviour
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8627">[ date ]</a>
              <a href="thread.html#8627">[ thread ]</a>
              <a href="subject.html#8627">[ subject ]</a>
              <a href="author.html#8627">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://mail.jabber.org/mailman/listinfo/jdev">More information about the JDev
mailing list</a><br>
</body></html>
