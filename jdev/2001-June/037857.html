<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [JDEV] jabberd 1.4.1 dumping core in __pth_ring_append ?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:jdev%40jabber.org?Subject=Re%3A%20%5BJDEV%5D%20jabberd%201.4.1%20dumping%20core%20in%20__pth_ring_append%20%3F&In-Reply-To=%3C20010625224353.37776.qmail%40msg.net%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="037853.html">
   <LINK REL="Next"  HREF="037858.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[JDEV] jabberd 1.4.1 dumping core in __pth_ring_append ?</H1>
    <B>jabber at msg.net</B> 
    <A HREF="mailto:jdev%40jabber.org?Subject=Re%3A%20%5BJDEV%5D%20jabberd%201.4.1%20dumping%20core%20in%20__pth_ring_append%20%3F&In-Reply-To=%3C20010625224353.37776.qmail%40msg.net%3E"
       TITLE="[JDEV] jabberd 1.4.1 dumping core in __pth_ring_append ?">jabber at msg.net
       </A><BR>
    <I>Mon Jun 25 17:43:53 CDT 2001</I>
    <P><UL>
        <LI>Previous message: <A HREF="037853.html">[JDEV] jabber:iq:private
</A></li>
        <LI>Next message: <A HREF="037858.html">[JDEV] Fighting Jabber Spam
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#37857">[ date ]</a>
              <a href="thread.html#37857">[ thread ]</a>
              <a href="subject.html#37857">[ subject ]</a>
              <a href="author.html#37857">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I've seen the issue brought up before, but no real resolution, now I am running
into this problem myself, when running jabberd under daemontools+multilog.

If I run the service from the commandline, it works fine, it appears that there
are still issues with jabberd's interaction with stdin/stdout?

Kevin Kadow
MSG.Net, Inc.


$ gdb bin/jabberd ./jabberd.core
GNU gdb 4.18
Copyright 1998 Free Software Foundation, Inc.
GDB is free software, covered by the GNU General Public License, and you are
welcome to change it and/or distribute copies of it under certain conditions.
Type &quot;show copying&quot; to see the conditions.
There is absolutely no warranty for GDB.  Type &quot;show warranty&quot; for details.
This GDB was configured as &quot;i386-unknown-freebsd&quot;...
Core was generated by `jabberd'.
Program terminated with signal 11, Segmentation fault.
Reading symbols from /usr/local/lib/libpth.so.14...done.
Reading symbols from /usr/lib/libc.so.4...done.
Reading symbols from /usr/local/jabber/lib/jsm.so...done.
Reading symbols from /usr/local/jabber/lib/xdb_file.so...done.
Reading symbols from /usr/local/jabber/lib/pthsock_client.so...done.
Reading symbols from /usr/local/jabber/lib/dnsrv.so...done.
Reading symbols from /usr/local/jabber/lib/dialback.so...done.
Reading symbols from /usr/libexec/ld-elf.so.1...done.
#0  0x280a27b8 in __pth_ring_append () from /usr/local/lib/libpth.so.14
(gdb) bt
#0  0x280a27b8 in __pth_ring_append () from /usr/local/lib/libpth.so.14
#1  0x280a694a in pth_msgport_put () from /usr/local/lib/libpth.so.14
#2  0x807cfb5 in base_stdout_phandler (i=0x8088600, p=0x8203228, arg=0x80885a0)
    at base_stdout.c:78
#3  0x8052e60 in deliver_instance (i=0x8088600, p=0x8203228) at deliver.c:660
#4  0x8052592 in deliver (p=0x8203228, i=0x0) at deliver.c:468
#5  0x80560bb in log_record (id=0x808bdc0 &quot;<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">kkadow at jabber.chgointeractive.com</A>&quot;,
    type=0x2816dc80 &quot;login&quot;, action=0x2816dc8c &quot;ok&quot;, msgfmt=0x2816dc86 &quot;%s %s&quot;)
    at log.c:176
#6  0x2816bfbd in pthsock_client_packets (id=0x8088400, p=0x814bb78,
    arg=0x8088440) at client.c:181
#7  0x8052e60 in deliver_instance (i=0x8088400, p=0x814bb78) at deliver.c:660
#8  0x8052592 in deliver (p=0x814bb78, i=0x8088140) at deliver.c:468
#9  0x2814d9d3 in js_packet (i=0x8088140, p=0x814b938, arg=0x808b0c0)
    at deliver.c:115
#10 0x8052e60 in deliver_instance (i=0x8088140, p=0x814b938) at deliver.c:660
#11 0x8052592 in deliver (p=0x814b938, i=0x8088400) at deliver.c:468
#12 0x2816be4c in pthsock_client_packets (id=0x8088400, p=0x814e890,
    arg=0x8088440) at client.c:169
#13 0x8052e60 in deliver_instance (i=0x8088400, p=0x814e890) at deliver.c:660
#14 0x8052592 in deliver (p=0x814e890, i=0x8088140) at deliver.c:468
#15 0x2814f1d4 in js_authreg (arg=0x814e498) at authreg.c:110
#16 0x805557a in mtq_main (arg=0x809f480) at mtq.c:140
#17 0x280a5024 in pth_spawn_trampoline () from /usr/local/lib/libpth.so.14
---Type &lt;return&gt; to continue, or q &lt;return&gt; to quit---
#18 0x280a30f1 in pth_mctx_set_bootstrap () from /usr/local/lib/libpth.so.14
#19 0x280a3065 in pth_mctx_set_trampoline () from /usr/local/lib/libpth.so.14
#20 0x8171e7c in ?? ()
Cannot access memory at address 0x158.
(gdb)

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="037853.html">[JDEV] jabber:iq:private
</A></li>
	<LI>Next message: <A HREF="037858.html">[JDEV] Fighting Jabber Spam
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#37857">[ date ]</a>
              <a href="thread.html#37857">[ thread ]</a>
              <a href="subject.html#37857">[ subject ]</a>
              <a href="author.html#37857">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://mail.jabber.org/mailman/listinfo/jdev">More information about the JDev
mailing list</a><br>
</body></html>
