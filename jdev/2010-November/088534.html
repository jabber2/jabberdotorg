<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [jdev] XMPP on Android, Round #2
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:jdev%40jabber.org?Subject=Re%3A%20%5Bjdev%5D%20XMPP%20on%20Android%2C%20Round%20%232&In-Reply-To=%3C084101cb7aeb%2407b4e530%24171eaf90%24%40com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="088532.html">
   <LINK REL="Next"  HREF="088535.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[jdev] XMPP on Android, Round #2</H1>
    <B>Stephen Pendleton</B> 
    <A HREF="mailto:jdev%40jabber.org?Subject=Re%3A%20%5Bjdev%5D%20XMPP%20on%20Android%2C%20Round%20%232&In-Reply-To=%3C084101cb7aeb%2407b4e530%24171eaf90%24%40com%3E"
       TITLE="[jdev] XMPP on Android, Round #2">pendleto at movsoftware.com
       </A><BR>
    <I>Tue Nov  2 18:06:56 CST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="088532.html">[jdev] XMPP on Android, Round #2
</A></li>
        <LI>Next message: <A HREF="088535.html">[jdev] XMPP on Android, Round #2
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#88534">[ date ]</a>
              <a href="thread.html#88534">[ thread ]</a>
              <a href="subject.html#88534">[ subject ]</a>
              <a href="author.html#88534">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>

-----Original Message-----
From: <A HREF="http://mail.jabber.org/mailman/listinfo/jdev">jdev-bounces at jabber.org</A> [mailto:<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">jdev-bounces at jabber.org</A>] On Behalf Of
Rene Treffer
Sent: Tuesday, November 02, 2010 6:33 PM
To: Jabber/XMPP software development list
Subject: Re: [jdev] XMPP on Android, Round #2

On 11/02/2010 10:24 PM, Stephen Pendleton wrote:
&gt;<i>
</I>&gt;<i> -----Original Message-----
</I>&gt;<i> From: <A HREF="http://mail.jabber.org/mailman/listinfo/jdev">jdev-bounces at jabber.org</A> [mailto:<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">jdev-bounces at jabber.org</A>] On Behalf
</I>Of
&gt;<i> Rene Treffer
</I>&gt;<i> Sent: Tuesday, November 02, 2010 4:09 PM
</I>&gt;<i> To: <A HREF="http://mail.jabber.org/mailman/listinfo/jdev">jdev at jabber.org</A>
</I>&gt;<i> Subject: Re: [jdev] XMPP on Android, Round #2
</I>&gt;<i>
</I>&gt;<i> On 11/01/2010 10:14 PM, Stephen Pendleton wrote:
</I>&gt;&gt;<i> -----Original Message-----
</I>&gt;&gt;<i> From: <A HREF="http://mail.jabber.org/mailman/listinfo/jdev">jdev-bounces at jabber.org</A> [mailto:<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">jdev-bounces at jabber.org</A>] On Behalf
</I>&gt;<i> Of Yann Leboulanger
</I>&gt;&gt;<i> Sent: Monday, November 01, 2010 4:27 PM
</I>&gt;&gt;<i> To: <A HREF="http://mail.jabber.org/mailman/listinfo/jdev">jdev at jabber.org</A>
</I>&gt;&gt;<i> Subject: Re: [jdev] XMPP on Android, Round #2
</I>&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Couldn't Stream managment help for that?
</I>&gt;&gt;&gt;<i> <A HREF="http://xmpp.org/extensions/xep-0198.html">http://xmpp.org/extensions/xep-0198.html</A>
</I>
&gt;<i>2. How do you get *less* pushes/pulls if stanzas cause push notifies. I
</I>&gt;<i>don't get that one, either.
</I>
&gt;<i>3. Semi-frequently is still better than for-nearly-every-stanza. You are
</I>&gt;<i>asking to keep the connection short lived? I don't expect the
</I>&gt;<i>stanza/reconnect ratio to improve due to that. And there is no stanza
</I>&gt;<i>reduction due to the system. I don't get how your suggestion is going to
</I>&gt;<i>improve the situation as you still wake the network and cpu at the same
</I>&gt;<i>rate.
</I>
I think I am not being clear.

Here is an example, you have your XMPP service running on your phone. It is
in the background, in your pocket, etc. You aren't interested in all the
&lt;presence&gt;, pubsub, PEP, etc stanzas. You are only interested in &lt;message&gt;
stanzas so you can be notified when a message is waiting to be read. If you
maintain a constant XMPP TCP connection you are getting tons of stanzas you
aren't interested in. In addition you are going to have to partially wake
lock the device in order to keep the TCP connection from getting torn down
when the device CPU sleeps. This is going to kill your device and is frowned
upon in the android world.

In an alternate scenario you could use the Google push service to be
notified when a &lt;message&gt; stanza is available to be read on the server. Only
then would you reconnect to the XMPP server and retrieve the &lt;message&gt;
stanza. Actually I misread the XEP-0198 though, it seems that it will
retransmit all the &quot;missed&quot; stanzas. What we would need is for it to only
retransmit the stanzas of interest, like SIFT. So maybe a combination of the
stream resume feature + SIFT would work here.

I'm not sure about you, but 95% of the time my phone is on I am not
receiving any XMPP messages that require my attention. I don't want to
maintain an active TCP connection 100% of the time just to get the 5%.







</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="088532.html">[jdev] XMPP on Android, Round #2
</A></li>
	<LI>Next message: <A HREF="088535.html">[jdev] XMPP on Android, Round #2
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#88534">[ date ]</a>
              <a href="thread.html#88534">[ thread ]</a>
              <a href="subject.html#88534">[ subject ]</a>
              <a href="author.html#88534">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://mail.jabber.org/mailman/listinfo/jdev">More information about the JDev
mailing list</a><br>
</body></html>
