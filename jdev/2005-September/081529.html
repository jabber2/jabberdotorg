<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [jdev] Second-guessing dns for s2s
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:jdev%40jabber.org?Subject=Re%3A%20%5Bjdev%5D%20Second-guessing%20dns%20for%20s2s&In-Reply-To=%3Cop.sxmak6a1qj7son%40smtp.chello.nl%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="081528.html">
   <LINK REL="Next"  HREF="081532.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[jdev] Second-guessing dns for s2s</H1>
    <B>Tijl Houtbeckers</B> 
    <A HREF="mailto:jdev%40jabber.org?Subject=Re%3A%20%5Bjdev%5D%20Second-guessing%20dns%20for%20s2s&In-Reply-To=%3Cop.sxmak6a1qj7son%40smtp.chello.nl%3E"
       TITLE="[jdev] Second-guessing dns for s2s">thoutbeckers at splendo.com
       </A><BR>
    <I>Sat Sep 24 12:23:20 CDT 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="081528.html">[jdev] Second-guessing dns for s2s
</A></li>
        <LI>Next message: <A HREF="081532.html">[jdev] Second-guessing dns for s2s
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#81529">[ date ]</a>
              <a href="thread.html#81529">[ thread ]</a>
              <a href="subject.html#81529">[ subject ]</a>
              <a href="author.html#81529">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Sat, 24 Sep 2005 17:59:00 +0200, Peter Millard &lt;<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">pgmillard at gmail.com</A>&gt;  
wrote:

&gt;<i> On 9/22/05, Tijl Houtbeckers &lt;<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">thoutbeckers at splendo.com</A>&gt; wrote:
</I>&gt;&gt;<i> On Thu, 22 Sep 2005 22:53:20 +0200, JD Conley &lt;<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">jd.conley at coversant.net</A>&gt;
</I>&gt;&gt;<i> wrote:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> &gt;&gt;
</I>&gt;&gt;<i> &gt;&gt; This is bad engineering i.t.o. creating undesirable impact on the
</I>&gt;&gt;<i> &gt; broader
</I>&gt;&gt;<i> &gt;&gt; Internet.
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt; What is the undesirable impact? .
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> It is, at least, a minor security risk.
</I>&gt;<i>
</I>&gt;<i> I disagree that this is a minor security hole.
</I>
I did say at least ;)

&gt;<i> The fact that my JM
</I>&gt;<i> server can potentially contact two completely different servers for
</I>&gt;<i> the same JID is a very bad thing. Jabber ID's are designed to be
</I>&gt;<i> unique, and they should be. This uniqueness is provided by using
</I>&gt;<i> domain names to help partition off the namespace. What you are
</I>&gt;<i> essentially doing is flattening this namespace by changing your
</I>&gt;<i> implementation.
</I>&gt;<i>
</I>&gt;<i> ie, when my server contacts <A HREF="http://mail.jabber.org/mailman/listinfo/jdev">foo at conference.jabber.org</A>, it should
</I>&gt;<i> NEVER, EVER, try to send that message to <A HREF="http://mail.jabber.org/mailman/listinfo/jdev">foo at jabber.org</A> instead. This
</I>&gt;<i> seems very bad to me.
</I>
well I assume it still send it to <A HREF="http://mail.jabber.org/mailman/listinfo/jdev">foo at conference.jabber.org</A>, just over a  
connection to jabber.org. So a decent non-malicious server would reject  
the stanza, and at least never deliver it to <A HREF="http://mail.jabber.org/mailman/listinfo/jdev">foo at jabber.org.</A>

Because of the way in general DNS is implemented and used on the internet  
the risk is not as bad as you'd first think. But it certainly opens up a  
few attack angles.  The biggest benifit for attackers would be that a DNS  
attack will become more stealthy. Instead of changing/spoofing the DNS  
entry the server uses itself, which is very noticeable, you can steal  
entry one higher in this (completly unrelated to DNS, except for the last  
two &quot;dots&quot; in the address) hierachy. So if you run your Jabber server on  
jabber.services.example.org I can steal services.example.org. An entry  
that might not even be used or exist!

Wether it's a minor, severe, or critical risk, you don't activly work to  
create a security flaw, in my opinion.

Is there anything preventing a person (other than lack of servers who  
support this) to run conferencing or transports or anything at the same  
domain as the server? The only bad thing I see is you can't make  
channels/transport entries that conflict with users on the server. That's  
problem that should be solveable (eg. go IRC style and add a # for  
channels, and disallow usernames starting with with #). There might be a  
disco/identity problem, but why wouldn't a server be able to have multiple  
identities? Does protocol prohibit this? If so we're better off changing  
that, than creating security holes.

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="081528.html">[jdev] Second-guessing dns for s2s
</A></li>
	<LI>Next message: <A HREF="081532.html">[jdev] Second-guessing dns for s2s
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#81529">[ date ]</a>
              <a href="thread.html#81529">[ thread ]</a>
              <a href="subject.html#81529">[ subject ]</a>
              <a href="author.html#81529">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://mail.jabber.org/mailman/listinfo/jdev">More information about the JDev
mailing list</a><br>
</body></html>
