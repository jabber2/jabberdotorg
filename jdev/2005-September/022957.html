<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [jdev] Second-guessing dns for s2s
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:jdev%40jabber.org?Subject=%5Bjdev%5D%20Second-guessing%20dns%20for%20s2s&In-Reply-To=op.sxmak6a1qj7son%40smtp.chello.nl">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="022954.html">
   <LINK REL="Next"  HREF="022949.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[jdev] Second-guessing dns for s2s</H1>
    <B>David Waite</B> 
    <A HREF="mailto:jdev%40jabber.org?Subject=%5Bjdev%5D%20Second-guessing%20dns%20for%20s2s&In-Reply-To=op.sxmak6a1qj7son%40smtp.chello.nl"
       TITLE="[jdev] Second-guessing dns for s2s">dwaite at gmail.com
       </A><BR>
    <I>Sat Sep 24 17:24:34 CDT 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="022954.html">[jdev] Second-guessing dns for s2s
</A></li>
        <LI>Next message: <A HREF="022949.html">[jdev] [ANN] Google Talk engineering manager live chat
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22957">[ date ]</a>
              <a href="thread.html#22957">[ thread ]</a>
              <a href="subject.html#22957">[ subject ]</a>
              <a href="author.html#22957">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>The major problem with this sort of second-guessing DNS isn't even the
security problems it possesses (by assuming that DNS nesting MUST
imply some sort of trust relationship of services running under those
names).

It is that servers which implement the XMPP standard and which don't
add this DNS hack will not be able to contact all the services someone
may if they are also running under Jive.

-DW

On 9/24/05, Tijl Houtbeckers &lt;<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">thoutbeckers at splendo.com</A>&gt; wrote:
&gt;<i> On Sat, 24 Sep 2005 17:59:00 +0200, Peter Millard &lt;<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">pgmillard at gmail.com</A>&gt;
</I>&gt;<i> wrote:
</I>&gt;<i>
</I>&gt;<i> &gt; On 9/22/05, Tijl Houtbeckers &lt;<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">thoutbeckers at splendo.com</A>&gt; wrote:
</I>&gt;<i> &gt;&gt; On Thu, 22 Sep 2005 22:53:20 +0200, JD Conley &lt;<A HREF="http://mail.jabber.org/mailman/listinfo/jdev">jd.conley at coversant.net</A>&gt;
</I>&gt;<i> &gt;&gt; wrote:
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; &gt;&gt;
</I>&gt;<i> &gt;&gt; &gt;&gt; This is bad engineering i.t.o. creating undesirable impact on the
</I>&gt;<i> &gt;&gt; &gt; broader
</I>&gt;<i> &gt;&gt; &gt;&gt; Internet.
</I>&gt;<i> &gt;&gt; &gt;
</I>&gt;<i> &gt;&gt; &gt; What is the undesirable impact? .
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; It is, at least, a minor security risk.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; I disagree that this is a minor security hole.
</I>&gt;<i>
</I>&gt;<i> I did say at least ;)
</I>&gt;<i>
</I>&gt;<i> &gt; The fact that my JM
</I>&gt;<i> &gt; server can potentially contact two completely different servers for
</I>&gt;<i> &gt; the same JID is a very bad thing. Jabber ID's are designed to be
</I>&gt;<i> &gt; unique, and they should be. This uniqueness is provided by using
</I>&gt;<i> &gt; domain names to help partition off the namespace. What you are
</I>&gt;<i> &gt; essentially doing is flattening this namespace by changing your
</I>&gt;<i> &gt; implementation.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; ie, when my server contacts <A HREF="http://mail.jabber.org/mailman/listinfo/jdev">foo at conference.jabber.org</A>, it should
</I>&gt;<i> &gt; NEVER, EVER, try to send that message to <A HREF="http://mail.jabber.org/mailman/listinfo/jdev">foo at jabber.org</A> instead. This
</I>&gt;<i> &gt; seems very bad to me.
</I>&gt;<i>
</I>&gt;<i> well I assume it still send it to <A HREF="http://mail.jabber.org/mailman/listinfo/jdev">foo at conference.jabber.org</A>, just over a
</I>&gt;<i> connection to jabber.org. So a decent non-malicious server would reject
</I>&gt;<i> the stanza, and at least never deliver it to <A HREF="http://mail.jabber.org/mailman/listinfo/jdev">foo at jabber.org.</A>
</I>&gt;<i>
</I>&gt;<i> Because of the way in general DNS is implemented and used on the internet
</I>&gt;<i> the risk is not as bad as you'd first think. But it certainly opens up a
</I>&gt;<i> few attack angles.  The biggest benifit for attackers would be that a DNS
</I>&gt;<i> attack will become more stealthy. Instead of changing/spoofing the DNS
</I>&gt;<i> entry the server uses itself, which is very noticeable, you can steal
</I>&gt;<i> entry one higher in this (completly unrelated to DNS, except for the last
</I>&gt;<i> two &quot;dots&quot; in the address) hierachy. So if you run your Jabber server on
</I>&gt;<i> jabber.services.example.org I can steal services.example.org. An entry
</I>&gt;<i> that might not even be used or exist!
</I>&gt;<i>
</I>&gt;<i> Wether it's a minor, severe, or critical risk, you don't activly work to
</I>&gt;<i> create a security flaw, in my opinion.
</I>&gt;<i>
</I>&gt;<i> Is there anything preventing a person (other than lack of servers who
</I>&gt;<i> support this) to run conferencing or transports or anything at the same
</I>&gt;<i> domain as the server? The only bad thing I see is you can't make
</I>&gt;<i> channels/transport entries that conflict with users on the server. That's
</I>&gt;<i> problem that should be solveable (eg. go IRC style and add a # for
</I>&gt;<i> channels, and disallow usernames starting with with #). There might be a
</I>&gt;<i> disco/identity problem, but why wouldn't a server be able to have multiple
</I>&gt;<i> identities? Does protocol prohibit this? If so we're better off changing
</I>&gt;<i> that, than creating security holes.
</I>&gt;<i>
</I>
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="022954.html">[jdev] Second-guessing dns for s2s
</A></li>
	<LI>Next message: <A HREF="022949.html">[jdev] [ANN] Google Talk engineering manager live chat
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22957">[ date ]</a>
              <a href="thread.html#22957">[ thread ]</a>
              <a href="subject.html#22957">[ subject ]</a>
              <a href="author.html#22957">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://mail.jabber.org/mailman/listinfo/jdev">More information about the JDev
mailing list</a><br>
</body></html>
